{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///../node_modules/babel-runtime/core-js/object/create.js","webpack:///../node_modules/babel-runtime/core-js/object/define-property.js","webpack:///../node_modules/babel-runtime/core-js/object/freeze.js","webpack:///../node_modules/babel-runtime/core-js/object/get-own-property-names.js","webpack:///../node_modules/babel-runtime/core-js/object/get-prototype-of.js","webpack:///../node_modules/babel-runtime/core-js/object/keys.js","webpack:///../node_modules/babel-runtime/core-js/object/seal.js","webpack:///../node_modules/babel-runtime/core-js/object/set-prototype-of.js","webpack:///../node_modules/babel-runtime/core-js/symbol.js","webpack:///../node_modules/babel-runtime/core-js/symbol/iterator.js","webpack:///../node_modules/babel-runtime/helpers/classCallCheck.js","webpack:///../node_modules/babel-runtime/helpers/createClass.js","webpack:///../node_modules/babel-runtime/helpers/inherits.js","webpack:///../node_modules/babel-runtime/helpers/possibleConstructorReturn.js","webpack:///../node_modules/babel-runtime/helpers/typeof.js","webpack:///../node_modules/core-js/library/fn/object/create.js","webpack:///../node_modules/core-js/library/fn/object/define-property.js","webpack:///../node_modules/core-js/library/fn/object/freeze.js","webpack:///../node_modules/core-js/library/fn/object/get-own-property-names.js","webpack:///../node_modules/core-js/library/fn/object/get-prototype-of.js","webpack:///../node_modules/core-js/library/fn/object/keys.js","webpack:///../node_modules/core-js/library/fn/object/seal.js","webpack:///../node_modules/core-js/library/fn/object/set-prototype-of.js","webpack:///../node_modules/core-js/library/fn/symbol/index.js","webpack:///../node_modules/core-js/library/fn/symbol/iterator.js","webpack:///../node_modules/core-js/library/modules/_a-function.js","webpack:///../node_modules/core-js/library/modules/_add-to-unscopables.js","webpack:///../node_modules/core-js/library/modules/_an-object.js","webpack:///../node_modules/core-js/library/modules/_array-includes.js","webpack:///../node_modules/core-js/library/modules/_cof.js","webpack:///../node_modules/core-js/library/modules/_core.js","webpack:///../node_modules/core-js/library/modules/_ctx.js","webpack:///../node_modules/core-js/library/modules/_defined.js","webpack:///../node_modules/core-js/library/modules/_descriptors.js","webpack:///../node_modules/core-js/library/modules/_dom-create.js","webpack:///../node_modules/core-js/library/modules/_enum-bug-keys.js","webpack:///../node_modules/core-js/library/modules/_enum-keys.js","webpack:///../node_modules/core-js/library/modules/_export.js","webpack:///../node_modules/core-js/library/modules/_fails.js","webpack:///../node_modules/core-js/library/modules/_global.js","webpack:///../node_modules/core-js/library/modules/_has.js","webpack:///../node_modules/core-js/library/modules/_hide.js","webpack:///../node_modules/core-js/library/modules/_html.js","webpack:///../node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:///../node_modules/core-js/library/modules/_iobject.js","webpack:///../node_modules/core-js/library/modules/_is-array.js","webpack:///../node_modules/core-js/library/modules/_is-object.js","webpack:///../node_modules/core-js/library/modules/_iter-create.js","webpack:///../node_modules/core-js/library/modules/_iter-define.js","webpack:///../node_modules/core-js/library/modules/_iter-step.js","webpack:///../node_modules/core-js/library/modules/_iterators.js","webpack:///../node_modules/core-js/library/modules/_library.js","webpack:///../node_modules/core-js/library/modules/_meta.js","webpack:///../node_modules/core-js/library/modules/_object-create.js","webpack:///../node_modules/core-js/library/modules/_object-dp.js","webpack:///../node_modules/core-js/library/modules/_object-dps.js","webpack:///../node_modules/core-js/library/modules/_object-gopd.js","webpack:///../node_modules/core-js/library/modules/_object-gopn-ext.js","webpack:///../node_modules/core-js/library/modules/_object-gopn.js","webpack:///../node_modules/core-js/library/modules/_object-gops.js","webpack:///../node_modules/core-js/library/modules/_object-gpo.js","webpack:///../node_modules/core-js/library/modules/_object-keys-internal.js","webpack:///../node_modules/core-js/library/modules/_object-keys.js","webpack:///../node_modules/core-js/library/modules/_object-pie.js","webpack:///../node_modules/core-js/library/modules/_object-sap.js","webpack:///../node_modules/core-js/library/modules/_property-desc.js","webpack:///../node_modules/core-js/library/modules/_redefine.js","webpack:///../node_modules/core-js/library/modules/_set-proto.js","webpack:///../node_modules/core-js/library/modules/_set-to-string-tag.js","webpack:///../node_modules/core-js/library/modules/_shared-key.js","webpack:///../node_modules/core-js/library/modules/_shared.js","webpack:///../node_modules/core-js/library/modules/_string-at.js","webpack:///../node_modules/core-js/library/modules/_to-absolute-index.js","webpack:///../node_modules/core-js/library/modules/_to-integer.js","webpack:///../node_modules/core-js/library/modules/_to-iobject.js","webpack:///../node_modules/core-js/library/modules/_to-length.js","webpack:///../node_modules/core-js/library/modules/_to-object.js","webpack:///../node_modules/core-js/library/modules/_to-primitive.js","webpack:///../node_modules/core-js/library/modules/_uid.js","webpack:///../node_modules/core-js/library/modules/_wks-define.js","webpack:///../node_modules/core-js/library/modules/_wks-ext.js","webpack:///../node_modules/core-js/library/modules/_wks.js","webpack:///../node_modules/core-js/library/modules/es6.array.iterator.js","webpack:///../node_modules/core-js/library/modules/es6.object.create.js","webpack:///../node_modules/core-js/library/modules/es6.object.define-property.js","webpack:///../node_modules/core-js/library/modules/es6.object.freeze.js","webpack:///../node_modules/core-js/library/modules/es6.object.get-own-property-names.js","webpack:///../node_modules/core-js/library/modules/es6.object.get-prototype-of.js","webpack:///../node_modules/core-js/library/modules/es6.object.keys.js","webpack:///../node_modules/core-js/library/modules/es6.object.seal.js","webpack:///../node_modules/core-js/library/modules/es6.object.set-prototype-of.js","webpack:///../node_modules/core-js/library/modules/es6.string.iterator.js","webpack:///../node_modules/core-js/library/modules/es6.symbol.js","webpack:///../node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack:///../node_modules/core-js/library/modules/es7.symbol.observable.js","webpack:///../node_modules/core-js/library/modules/web.dom.iterable.js","webpack:///../node_modules/process/browser.js","webpack:///../node_modules/webpack/buildin/global.js","webpack:///./Define.js","webpack:///./Scintilla.js","webpack:///./audio/AudioManager.js","webpack:///./audio/components/InitializeAudioSystem.js","webpack:///./audio/index.js","webpack:///./cache/Cache.js","webpack:///./cache/CacheManager.js","webpack:///./camera/Camera.js","webpack:///./camera/ResizeCamera.js","webpack:///./camera/UpdateCamera.js","webpack:///./core/Config.js","webpack:///./core/CreateRender.js","webpack:///./core/Game.js","webpack:///./core/GameInitialize.js","webpack:///./core/GameLoop.js","webpack:///./core/index.js","webpack:///./core/system/SceneSystem.js","webpack:///./core/system/System.js","webpack:///./core/system/components/InitializeSystems.js","webpack:///./core/system/components/InjectSystems.js","webpack:///./core/system/components/UnjectSystems.js","webpack:///./dom/AppendDOM.js","webpack:///./dom/RequestAnimationFrame.js","webpack:///./entities/Entity.js","webpack:///./entities/EntityFactory.js","webpack:///./entities/EntityUpdateList.js","webpack:///./entities/SceneEntity.js","webpack:///./entities/hierarchy/CreateEntityFrom.js","webpack:///./entities/hierarchy/CreateEntityFromObject.js","webpack:///./entities/hierarchy/EntityHierarchy.js","webpack:///./entities/index.js","webpack:///./event/EventManager.js","webpack:///./event/GameEvents.js","webpack:///./event/Signal.js","webpack:///./event/SignalBinding.js","webpack:///./event/components/AddBinding.js","webpack:///./event/components/IndexOfListener.js","webpack:///./event/components/RegisterListener.js","webpack:///./event/components/ValidateListener.js","webpack:///./event/index.js","webpack:///./input/Input.js","webpack:///./input/index.js","webpack:///./input/keyboard/Key.js","webpack:///./input/keyboard/KeyCode.js","webpack:///./input/keyboard/KeyEvent.js","webpack:///./input/keyboard/Keyboard.js","webpack:///./input/keyboard/components/ProcessKeyPress.js","webpack:///./input/keyboard/components/ProcessKeyRelease.js","webpack:///./input/mouse/Mouse.js","webpack:///./input/mouse/MouseButton.js","webpack:///./loader/AssetsType.js","webpack:///./loader/File.js","webpack:///./loader/ListInjector.js","webpack:///./loader/LoaderManager.js","webpack:///./loader/LoaderState.js","webpack:///./loader/URLObject.js","webpack:///./loader/XHR.js","webpack:///./loader/assets/AssetTypeHandler.js","webpack:///./loader/assets/ImageFile.js","webpack:///./loader/assets/JSONFile.js","webpack:///./loader/assets/SVGFile.js","webpack:///./loader/assets/ScriptFile.js","webpack:///./loader/assets/TextFile.js","webpack:///./loader/assets/TilemapJSON.js","webpack:///./loader/assets/WebFontFile.js","webpack:///./loader/assets/index.js","webpack:///./loader/components/AddAsset.js","webpack:///./loader/components/AssetProcessingUpdate.js","webpack:///./loader/components/DeleteSucceedQueuedAsset.js","webpack:///./loader/components/InitializeLoader.js","webpack:///./loader/components/LoaderFinished.js","webpack:///./loader/components/NextAsset.js","webpack:///./loader/components/ProcessAssetsQueue.js","webpack:///./loader/components/ProcessDoneAssets.js","webpack:///./loader/components/StartLoadAssets.js","webpack:///./loader/components/UpdateProgress.js","webpack:///./loader/index.js","webpack:///./math/BoundingBox.js","webpack:///./math/MathUtils.js","webpack:///./math/Matrix.js","webpack:///./math/Rect.js","webpack:///./math/Vector.js","webpack:///./math/easing/Ease.js","webpack:///./math/easing/EaseIn.js","webpack:///./math/easing/EaseInOut.js","webpack:///./math/easing/EaseOut.js","webpack:///./math/easing/EasingType.js","webpack:///./math/easing/index.js","webpack:///./modules/Module.js","webpack:///./modules/ModuleAttacher.js","webpack:///./modules/ModuleManager.js","webpack:///./modules/ModuleProvider.js","webpack:///./modules/components/AttachModuleInGame.js","webpack:///./modules/components/InitializeModuleBase.js","webpack:///./modules/components/ModulesUpdater.js","webpack:///./modules/index.js","webpack:///./modules/renderables/Renderable.js","webpack:///./modules/renderables/Sprite.js","webpack:///./modules/renderables/components/AnimateTilemap.js","webpack:///./modules/renderables/components/CullTiles.js","webpack:///./modules/renderables/components/CullingMethod.js","webpack:///./modules/renderables/components/DrawImage.js","webpack:///./modules/renderables/components/DrawTilemapLayer.js","webpack:///./modules/renderables/components/RenderableBoundsUpdate.js","webpack:///./modules/renderables/components/RenderableUpdate.js","webpack:///./modules/renderables/index.js","webpack:///./modules/renderables/tilemap/Tilemap.js","webpack:///./modules/renderables/tilemap/TilemapAnimator.js","webpack:///./modules/renderables/tilemap/TilemapLayer.js","webpack:///./physics/physics.js","webpack:///./physics/sat/SAT.js","webpack:///./physics/sat/SATResponse.js","webpack:///./render/Define.js","webpack:///./render/Render.js","webpack:///./render/canvas/CanvasInterpolation.js","webpack:///./render/canvas/CanvasListManager.js","webpack:///./render/canvas/CanvasSmoothing.js","webpack:///./render/canvas/index.js","webpack:///./render/color/Color.js","webpack:///./render/color/components/CSSToColor.js","webpack:///./render/color/components/HexToColor.js","webpack:///./render/color/components/IntToColor.js","webpack:///./render/color/components/ObjectToColor.js","webpack:///./render/color/components/ParseColor.js","webpack:///./render/components/BeginDrawRender.js","webpack:///./render/components/DrawRender.js","webpack:///./render/components/DrawRenderLayer.js","webpack:///./render/components/EndDrawRender.js","webpack:///./render/components/RequestDepthSorting.js","webpack:///./render/components/RequestRenderableLayerIDChange.js","webpack:///./render/index.js","webpack:///./render/layer/RenderLayer.js","webpack:///./render/layer/RenderLayersManagement.js","webpack:///./render/layer/SortDepth.js","webpack:///./render/transition/DrawTransition.js","webpack:///./render/transition/Transition.js","webpack:///./render/transition/TransitionSettings.js","webpack:///./render/transition/TransitionState.js","webpack:///./render/transition/TransitionStyle.js","webpack:///./render/transition/TranstionBehavior.js","webpack:///./render/transition/UpdateTransition.js","webpack:///./render/transition/index.js","webpack:///./render/ui/AspectRatio.js","webpack:///./render/ui/Debug.js","webpack:///./render/ui/DrawUI.js","webpack:///./render/ui/InitializeUI.js","webpack:///./render/ui/UI.js","webpack:///./render/ui/UIDrawer.js","webpack:///./render/ui/UIResize.js","webpack:///./render/ui/UpdateUIMatrix.js","webpack:///./resources/ImageResource.js","webpack:///./resources/Resource.js","webpack:///./resources/ResourceType.js","webpack:///./resources/index.js","webpack:///./resources/tilemap/TilemapResource.js","webpack:///./resources/tilemap/data/Tile.js","webpack:///./resources/tilemap/data/TileGID.js","webpack:///./resources/tilemap/data/TilemapLayerData.js","webpack:///./resources/tilemap/data/TilemapMetadata.js","webpack:///./resources/tilemap/data/Tileset.js","webpack:///./resources/tilemap/parser/ParseGID.js","webpack:///./resources/tilemap/parser/ParseLayers.js","webpack:///./resources/tilemap/parser/ParseTilesProperties.js","webpack:///./resources/tilemap/parser/ParseTileset.js","webpack:///./scene/Scene.js","webpack:///./scene/SceneManager.js","webpack:///./scene/SceneState.js","webpack:///./scene/builtin/ScintillaLoadingScene.js","webpack:///./scene/components/ClearScene.js","webpack:///./scene/components/CreateSceneFrom.js","webpack:///./scene/components/PostPreloadingScene.js","webpack:///./scene/components/PreUpdateScene.js","webpack:///./scene/components/PreloadSceneComplete.js","webpack:///./scene/components/RenderScene.js","webpack:///./scene/components/SetScene.js","webpack:///./scene/components/SetupScene.js","webpack:///./scene/components/TransitionBetweenScenes.js","webpack:///./scene/components/UpdateScene.js","webpack:///./scene/index.js","webpack:///./structures/List.js","webpack:///./structures/Map.js","webpack:///./structures/Set.js","webpack:///./structures/index.js","webpack:///./structures/useful/MergeSort.js","webpack:///./structures/useful/index.js","webpack:///./system/DetectBrowser.js","webpack:///./system/DetectOS.js","webpack:///./system/PlatformEnvironment.js","webpack:///./time/GameTime.js","webpack:///./time/UpdateStep.js","webpack:///./transform/ComputeBounds.js","webpack:///./transform/ComputeDelimiterPoint.js","webpack:///./transform/Transform.js","webpack:///./transform/UpdateBounds.js","webpack:///./transform/UpdateTransform.js","webpack:///./transform/UpdateTransformBounds.js","webpack:///./utils/Base64Utils.js","webpack:///./utils/Path.js","webpack:///./utils/Validate.js","webpack:///./utils/object/DeepFreeze.js","webpack:///./utils/object/Extend.js","webpack:///./utils/object/IsPlainObject.js","webpack:///./utils/object/MakeImmutable.js","webpack:///./utils/object/ObjectGet.js"],"names":["Version","MAJOR","MINOR","REVISION","VERSION","scintilla","Platform","require","Core","Structures","Render","Color","Transition","KeyCode","MouseButton","Input","Math","Matrix","Ease","Scene","Camera","Module","Entity","Event","Audio","Resources","Cache","Loader","Game","Path","module","exports","global","AudioManager","game","webAudio","context","noAudio","channels","masterVolume","volume","_sounds","i","length","stop","pause","resume","tag","sound","soundData","cache","getAssetInfo","decoded","isDecoding","self","decodeAudioData","data","buffer","soundDecoded","console","log","error","loop","connect","undefined","Sound","push","add","play","update","destroy","splice","stopAll","close","register","InitializeAudioSystem","window","createGain","createGainNode","gain","value","destination","Manager","wrapperFunction","resources","adderWrapper","asset","resource","set","has","get","delete","clear","CacheTypes","CacheManager","image","tilemap","json","text","svg","cacheType","hasCache","props","canvas","width","config","camera","height","bounds","viewBounds","transform","_pixelUnit","x","y","_aspectRatio","_backgroundColor","_roundPixels","roundPixels","_isDirty","entity","position","r","g","b","a","rgba","reset","scale","angle","rotation","degToRad","origin","color","flag","system","render","ResizeCamera","UpdateCamera","t","_oldRotation","_cosSin","sin","cos","pos","round","setMin","setMax","matrix","setIdentity","translate","radianRotate","Config","callback","callback_2","propertyValue","parent","debug","pixelated","doubleBuffer","floorTiles","loader","baseURL","path","responseType","async","fps","time","timeoutMode","CreateRender","imageRendering","NEAREST","LINEAR","create","getContext","alpha","smoothing","crisp","_domCanvas","_domContext","systemInited","isRunning","debugMode","timeMode","input","pool","systems","event","parseConfiguration","physics","load","scene","draw","universe","world","component","instance","animationCache","updateGameMethod","GameInitialize","init","GameLoop","updateStep","entityUpdateList","currentScene","renderer","deltaTime","transition","shouldUpdate","lateUpdate","ui","setTransform","test","drawImage","entityList","System","SceneSystem","GameSystems","key","systemName","initFunc","name","InitializeSystems","property","registered","InitializeSystemFunction","call","subscribe","InjectSystems","sys","keyboard","mouse","UnjectSystems","AppendDOM","element","overflowHidden","appendTo","target","document","getElementById","nodeType","body","style","overflow","appendChild","RequestAnimationFrame","_isTimeOutMode","thick","lastTime","loopCallback","timeOutIdentifier","updateRequestAnimationFrame","timeStamp","requestAnimationFrame","updateTimeout","dateTime","Date","now","delay","max","setTimeout","clearTimeout","cancelAnimationFrame","loopingCallback","_name","_active","_pool","EntityFactory","entityName","modules","attach","sprite","current_scene","EntityUpdateList","_instances","_destroyInstances","_pendingInstances","_camera","indexOf","dt","size","at","active","removeSize","insertSize","eraseList","concat","childs","SceneEntity","type","markDirty","CreateEntityFrom","placeholder","CreateEntityFromObject","prop","object","hasOwnProperty","bind","EntityHierarchy","_entityList","instances","count","each","index","entityBase","start","Hierarchy","EventManager","_signalsMap","eventName","signal","delegate","priority","warn","isFunction","subscribeOnce","args","arguments","Array","apply","dispatch","BulkEventCreation","manager","events","GameEvents","Signal","_bindings","_shouldPropagate","listener","_destroy","eraseAt","params","paramsSize","prototype","slice","binds","execute","unsubscribeAll","SignalBinding","listenerContext","once","_signal","_listener","_context","_priority","_isOnce","argsArray","handlerReturn","detach","isBound","unsubscribe","AddBinding","binding","n","insert","IndexOfListener","RegisterListener","isOnce","Error","ValidateListener","func","replace","Key","Keyboard","Mouse","keycode","keyCode","_enabled","status","press","release","preventDefault","_event","NONE","pressTime","pressDuration","releaseTime","releaseDuration","Backspace","Tab","Enter","Shift","Ctrl","Alt","Pause","CapsLock","Escape","Space","PageUp","PageDown","End","Home","Left","Up","Right","Down","Insert","Delete","Num0","Num1","Num2","Num3","Num4","Num5","Num6","Num7","Num8","Num9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","LSystem","RSystem","SelectK","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","Multiply","Add","Subtract","DecimalPoint","Divide","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","NumLock","ScrollLock","SemiColon","Equal","Comma","Dash","Period","Slash","LBraket","BackSlash","RBracket","Quote","KeyEvent","IDLE","PRESSED","RELEASED","eventTarget","eventHandler","_eventQueue","_keyMapping","lastKey","handler","defaultPrevented","addEventListener","removeEventListener","_onKeyDown","_onKeyUp","_onKeyPress","eventSize","queue","isPressed","isReleased","ProcessKeyPress","ProcessKeyRelease","MouseEvent","PRESS","RELEASE","button","wheelDelta","_mouseButtons","_mouseButtonsLocks","_mouseButtonsLocksPressed","_mouseDownDuration","_onMouseDown","_onMouseMove","onMouseDown","_onMouseUp","onMouseUp","onMouseMove","_onMouseOver","_onMouseOut","rect","getBoundingClientRect","floor","clientX","left","right","clientY","top","bottom","buttonLock","hit","vec2","Middle","WheelUp","WheelDown","AssetsType","File","useExternal","url","webFont","xhrSettings","createSettings","merge","state","PENDING","totalBytes","loadedBytes","progress","source","xhrRequest","crossOrigin","onComplete","gameLoader","FINISHED","onDone","getURL","createFileRequest","xhr","XHRreset","onPostLoad","lengthComputable","loaded","total","min","DONE","processingCallback","PROCESSING","onload","onerror","onprogress","ListInjector","list","toObj","LoadManager","_filesQueue","_filesLoading","_successFiles","_failedFiles","_processedFiles","_filesQueueCount","_loadedFilesCount","isDownloading","_totalFiles","webFontLoader","gameConfig","timeout","inject","substr","baseUrl","file","LOADING","ERROR","_successCount","_fileErrorCount","LoaderState","URLObject","createFromResponse","response","URL","src","createObjectURL","reader","FileReader","removeAttribute","result","split","readAsDataURL","revoke","revokeObjectURL","XHR","settings","xmlHttpRequest","XMLHttpRequest","open","onLoad","onError","onProgress","onReadyStateChange","onreadystatechange","send","doAsync","out","setting","AssetTypeHandler","ImageFile","assetTag","assetConfig","ext","getExtension","Image","force","JSONFile","JSON","parse","responseText","SVGFile","tagFile","xhrLoader","blob","Blob","e","ScriptFile","script","createElement","language","defer","head","TextFile","endPointPath","CheckImagesSources","fullPath","tileset","getFilenameWithoutExtension","getPathWithoutRoot","getFilename","TilemapFileJSON","tilemapJSON","tilesets","WebFontFile","provider","fontFamily","families","fontLoad","WebFont","isArray","WebFontProvider","WebFontConfig","inactive","fontactive","classes","familyName","fvd","family","AssetsTypeHandler","TilemapJSON","AddAsset","check","isOK","AssetProcessingUpdate","DeleteSucceedQueuedAsset","InitializeLoader","LoaderFinished","onProcessing","NextAsset","concludedFile","hasError","ProcessAssetsQueue","loadAsset","ProcessDoneAssets","sort","audio","requestXHR","addSound","autoDecode","decode","StartLoadAssets","UpdateProgress","Assets","LoaderManager","BoundingBox","Infinity","minX","minY","maxX","maxY","xRadius","yRadius","mergeWithPoint","xmin","ymin","xmax","ymax","o","toString","MathUtils","PI","radToDeg","TAU","EPSILON","pow","HALFPI","clamp","randomRange","random","irandomRange","lerp","fromValue","toValue","clampedLerp","impreciseLerp","lerpAngle","end","difference","abs","rangeZero","distance","x0","y0","x1","y1","sqrt","angleBetween","toDegree","atan2","radians","toRadian","degrees","j","c","d","f","h","radianAngle","a00","a01","a10","a11","a20","a21","other","point","setAll","mat","str","val","copy","zero","k","Rect","intersects","contains","vec","rect1","rect2","Vector","managed","dx","dy","s","otherVector","mag","dot","project","squaredLenght","magnitude","tobiJS","vector","dp","proj","axis","sub","projectNormal","in","inout","EaseInFunctions","from","to","levels","power","duration","p","postFix","arg","STEPPED","stepped","CUT","cut","linear","SINE","sine","QUADRATIC","CUBIC","QUARTIC","QUINTIC","POWER","EXPONENTIAL","exponential","CIRC","circ","BACK","back","ELASTIC","elastic","EaseIn","EaseInOutFunctions","sign","asin","EaseInOut","EaseOutFunction","Mathf","EaseOut","EasingType","BOUNCE","EASE_BACK_CONST","Type","moduleType","moduleName","moduleManager","_moduleType","_moduleName","ModuleAttacher","ModuleManager","attached","_pendingModulesInitialization","ModuleProviderManager","proxyModules","modulesManager","newModule","ModuleProvider","AttachModuleInGame","entityModule","layer","renderLayers","layers","InitializeModuleBase","instace","ModulesUpdater","mod","Renderables","Renderable","_layerID","_depth","_alpha","_depthSorting","_bounds","_originInPixels","_originIsDirty","Sprite","frame","setSource","changeFrame","setFrame","spr","setSprite","AnimateTilemap","animator","len","animatedTiles","delta","hiDeltaTime","animatedTile","GID","tileGID","currentKeyFrame","keyFrames","nextGID","tileID","currentFrame","CullTiles","LimitCulling","culling","rot","tx","ty","method","tileWidth","tileHeight","ceil","CullingMethod","LINEAR90DEG","DrawImage","DrawTilemapLayer","draws","idx","tile","tiles","isAnimated","st","getTile","RenderableBoundsUpdate","renderable","RenderableUpdate","gameTime","pixelsWidth","pixelsHeight","Tilemap","metaData","orientation","animations","hasAnimatedTiles","res","TilemapAnimator","layerData","animatedSet","animID","getTileGID","hasGid","find","gid","TilemapLayer","Physics","sat","colliadables","obj","SAT","VECTORS","v","ARRAYS","points","normal","Number","MAX_VALUE","posA","posB","pointsA","pointsB","rangeA","pop","rangeB","offsetV","projectedOffset","flattenPointsOn","overlap","aInB","bInA","option1","option2","absOverlap","overlapN","reverse","shape","getPoints","normalsA","getNormals","normalsALen","normalsB","normalsBLen","isSeparatingAxis","overlapV","SATResponse","indexShapeA","indexShapeB","RenderingType","_enable","drawCalls","currentContext","globalAlpha","CanvasInterpolation","types","forEach","msInterpolationMode","bicubic","CanvasListManager","gameParent","canvasContainer","firstFree","CanvasList","CanvasManager","CanvasSmoothing","prefix","getPrefix","vendors","renderType","setEnable","Smoothing","Interpolation","ColorNormUpdate","_css","ColorUpdate","_r","_g","_b","_a","parsedValue","toColor","easingType","easingMode","easingArg","destinationColor","easer","by","CSSToColor","CSS_REGEX_PATTERN","regex","exec","toLowerCase","parseInt","parseFloat","HexToColor","HEX_SHORTHAND_REGEX_PATTERN","HEX_REGEX_PATTERN","hex","m","IntToColor","ObjectToColor","ParseColor","BeginDrawRender","clearRect","fillStyle","fillRect","DrawRender","globalCompositeOperation","_setup","enable","DrawRenderLayer","__enable","__isDirty","renderList","EndDrawRender","RequestDepthSorting","layerID","RequestRenderableLayerIDChange","oldLayerID","toLayerID","oldLayer","findRenderableLayer","toLayer","removeAt","Canvas","RenderLayer","RenderLayerManagement","UI","layerName","__drawCalls","remove","__renderers","RenderLayersManagement","id","hasAt","__renderLayersMap","erase","SortDepth","DrawTransition","_state","FILL","_tColor","_behaviour","transparent","_startColor","_t","old","FADEIN","oldAlpha","setColor","inColor","IN","FADEOUT","outColor","OUT","FADEINOUT","TransitionSettings","fromAlpha","toAlpha","black","inDuration","outDuration","pauseDuration","timingInMethod","timingOutMethod","timingInArgument","timingOutArgument","setInDuration","setOutDuration","parameter","setInTiming","setOutTiming","TransitionState","WAIT","TranstionStyle","TransitionBehavior","UpdateTransition","setg","changeState","ease","_color","State","Style","Behavior","AspectRatio","Square","Pillarbox","Letterbox","computeViewPort","currentAspectRatio","desiredAspect","ratioBox","w","inset","Debug","drawer","lineHeight","column","font","textColor","bgcolor","textShadow","disablePointTransform","strokeStyle","drawLine","desiredFps","textLine","xx","fillText","DrawUI","gui","sceneManager","clip","viewport","save","beginPath","backgroundAlpha","backgroundColor","restore","InitializeUI","ratiobox","aspectRatio","pixelUnit","canvasWidth","canvasHeight","borderX","borderY","canvasRatioX","canvasRatioY","areaRatio","clientWidth","orthoSize","UIDrawer","lastAlpha","lastColor","currentColor","currentTextAlign","fontname","isNumber","align","transformPosition","textAlign","scalex","scaley","halign","valign","xscale","yscale","outlineWidth","lineWidth","strokeRect","bb","outlineRectangle","UIResize","UpdateUIMatrix","ImageResource","imageUrl","complete","naturalWidth","naturalHeight","Resource","None","ResourceType","TilemapResource","tilewidth","tileheight","orietation","hasGID","Tile","tileData","tileX","tileY","TileGID","u","umax","vmax","TilemapLayerData","visible","TilemapMetadata","Tileset","firstgid","margin","spacing","rows","collumns","gidCount","imageWidth","imageHeight","columns","ParseGID","FLIPPED_HORIZONTALLY_FLAG","FLIPPED_VERTICALLY_FLAG","FLIPPED_DIAGONALLY_FLAG","ParseGIDFlags","flipped_horizontally","flipped_vertically","flipped_diagonally","flip","flipped","global_tile_id","Boolean","flags","flipHorizontal","flipVertical","flipDiagonal","ParseLayers","map","tileLayers","jsonLayer","enconding","decodeToUint32","newLayer","opacity","animatedTilesGID","gidProp","getTilesetByGID","ParseTilesProperties","tilesetTilesProperties","tileIndex","tileProperties","propertyContent","animationSize","anim","tileid","ParseTilesets","tileSets","jsonTileset","newTileSet","updateData","imagewidth","imageheight","gameObject","clone","cl","GameObject","_id","_game","SceneManager","_scenes","_currentSceneName","_changeScene","_transition","_isTranistioning","_clearCache","_scintillaLoading","onStartCallback","onLoadingCallback","onLoadingRenderCallback","onPreloadCallback","onUpdateCallback","onRenderCallback","onDestroyCallback","_loadingPlaceHolder","sceneName","isString","newScene","clearCache","scenes","SceneState","START","RUNNING","ScintillaLoadingScreen","logoData","scintillaLogo","_loaded","_finished","fromProgress","toProgress","nextScene","preloadingDone","setLoadingPos","_midPos","_barColor","_barPosX","_barPosY","_barPosW","drawFunc","imageExtra","outlineRect","loadingFunc","prog","wait","done","preloadDone","loading","loadingGUI","next","setSize","setViewportByAspectRatio","ClearScene","CreateSceneFrom","PostPreloadingScene","sceneManger","PreUpdateScene","totalQueuedFiles","PreloadSceneComplete","RenderScene","SetScene","SetupScene","bothIsNull","TransitionBetweenScenes","transit","UpdateScene","DataList","elements","unique","child","unshift","childToErase","listToRemove","otherList","clearOther","content","predicate","childA","childB","idx0","idx1","indexA","indexB","cA","cB","DataMap","_content","_size","entries","values","array","_contents","DataSet","scope","Utils","Set","Map","List","MergeSort","begin","begin_right","left_size","right_size","msort","mid","DetectBrowser","userAgent","browser","version","manufacturer","firefox","opera","ie","edge","chrome","blink","safari","silk","opr","addons","navigator","InstallTrigger","HTMLElement","pushNotification","documentMode","StyleMedia","webstore","CSS","pattern","match","DetectOS","info","mobile","desktop","os","windows","windowsPhone","macOS","linux","android","iOS","chromeOS","kindle","environment","node","electron","cordova","nodewebkit","cocoonJS","cocoonApp","ejecta","process","versions","nodeWebkit","isCocoonJS","CocoonJS","PlatformEnvironment","_userAgent","_osInfo","_browser","SVGRect","implementation","hasFeature","GameTime","gameLoop","_updateStep","fpsDesired","elapsed","UpdateStep","startTime","previousTime","requireFpsUpdate","currentFps","_nextFpsUpdate","_framesThisSecond","interpolation","timeStep","minTimeStep","accumalator","accumulatorMax","updateLast","updateAverageDelta","frameCounter","performance","fpsUpdate","accumalatorMethod","frameRate","accumulator","accumalatorMax","deltaUpdate","accumulatorUpdateDelta","updateStart","stepSize","previousTimeTime","accumalatorReset","ComputeBounds","transformPoint","ComputeDelimiterPoint","anchor","coord","xa","ya","Transform","worldPosition","worldScale","globalBounds","UpdateBounds","cosSin","coords","UpdateTransform","parentTransform","setModelMatrix","UpdateTransformBounds","Base64Utils","atob","bin","bytes","charCodeAt","encode","btoa","filename","substring","lastIndexOf","removeExtension","getPath","getRootPath","l","getDirectoryName","dir","Validate","isClass","constructor","isNaN","String","DeepFreeze","propNames","Extend","options","copyIsArray","deep","IsPlainObject","HasOwn","classToType","MakeImmutable","ObjectGettter","defaultValue","keys","ObjectGet"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;ACnEA,kBAAkB,mJ;;;;;;;;;;;ACAlB,kBAAkB,qK;;;;;;;;;;;ACAlB,kBAAkB,mJ;;;;;;;;;;;ACAlB,kBAAkB,mL;;;;;;;;;;;ACAlB,kBAAkB,uK;;;;;;;;;;;ACAlB,kBAAkB,+I;;;;;;;;;;;ACAlB,kBAAkB,+I;;;;;;;;;;;ACAlB,kBAAkB,uK;;;;;;;;;;;ACAlB,kBAAkB,2I;;;;;;;;;;;ACAlB,kBAAkB,uJ;;;;;;;;;;;;ACAlB;;AAEA;;AAEA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;;ACRA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC,G;;;;;;;;;;;;AC1BD;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,E;;;;;;;;;;;;AChCA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;;AAEA;AACA,E;;;;;;;;;;;;AChBA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,iHAAiH,mBAAmB,EAAE,mBAAmB,4JAA4J;;AAErT,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA,CAAC;AACD;AACA,E;;;;;;;;;;;ACpBA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA;AACA;;;;;;;;;;;;ACDA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA;AACA;;;;;;;;;;;;ACDA;AACA;;;;;;;;;;;;ACDA;AACA;;;;;;;;;;;;ACDA;AACA;;;;;;;;;;;;ACDA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA;AACA;AACA;;;;;;;;;;;;ACFA;AACA;AACA;AACA;;;;;;;;;;;;ACHA,8BAA8B;;;;;;;;;;;;ACA9B;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,YAAY,eAAe;AAChC;AACA,KAAK;AACL;AACA;;;;;;;;;;;;ACtBA,iBAAiB;;AAEjB;AACA;AACA;;;;;;;;;;;;ACJA,6BAA6B;AAC7B,uCAAuC;;;;;;;;;;;;ACDvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA;AACA;AACA,iCAAiC,QAAQ,mBAAmB,UAAU,EAAE,EAAE;AAC1E,CAAC;;;;;;;;;;;;ACHD;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;AACA;AACA;AACA;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;ACdA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE;AACA,kFAAkF;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,cAAc;AACd,cAAc;AACd,cAAc;AACd,eAAe;AACf,eAAe;AACf,eAAe;AACf,gBAAgB;AAChB;;;;;;;;;;;;AC7DA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA,yCAAyC;;;;;;;;;;;;ACLzC,uBAAuB;AACvB;AACA;AACA;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;;;;;;;;;;;ACPA;AACA;;;;;;;;;;;;ACDA;AACA,gJAAsE,mBAAmB,UAAU,EAAE,EAAE;AACvG,CAAC;;;;;;;;;;;;ACFD;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA;AACA;AACA;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;;AAEA;AACA,yNAAkF,aAAa,EAAE;;AAEjG;AACA,qDAAqD,4BAA4B;AACjF;AACA;;;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;;AAEA,8BAA8B,aAAa;;AAE3C;AACA;AACA;AACA;AACA;AACA,yCAAyC,oCAAoC;AAC7E,6CAA6C,oCAAoC;AACjF,KAAK,4BAA4B,oCAAoC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA,kCAAkC,2BAA2B;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;;;;;ACpEA;AACA,UAAU;AACV;;;;;;;;;;;;ACFA;;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD,CAAC;AACD;AACA,qBAAqB;AACrB;AACA,SAAS;AACT,GAAG,EAAE;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;;;;;;;;;;ACxCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf;AACA;AACA;AACA;;;;;;;;;;;;ACfA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf;AACA;;;;;;;;;;;;ACfA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;AClBA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;ACNA;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;ACZA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChBA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;ACNA,cAAc;;;;;;;;;;;;ACAd;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,qDAAqD,OAAO,EAAE;AAC9D;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACPA;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA,OAAO,YAAY,cAAc;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR;AACA;;;;;;;;;;;;ACxBA;AACA;AACA;;AAEA;AACA,oEAAoE,iCAAiC;AACrG;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA;AACA;AACA,kDAAkD;AAClD;AACA,uCAAuC;AACvC;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACXA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,sBAAsB;AAChF,kFAAkF,wBAAwB;AAC1G;;;;;;;;;;;;ACRA;;;;;;;;;;;;ACAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,cAAc;AACd,iBAAiB;AACjB;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;ACjCA;AACA;AACA,8BAA8B,mHAAsC;;;;;;;;;;;;ACFpE;AACA;AACA,kJAAuE,qHAA4C;;;;;;;;;;;;ACFnH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACRD;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACHD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACRD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACRD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACRD;AACA;AACA,8BAA8B,uHAA8C;;;;;;;;;;;;;;;;;;;;;;;;ACF5E;AACA;;AAEA;AACA;AACA,6BAA6B;AAC7B,cAAc;AACd;AACA,CAAC;AACD;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,UAAU;AACV,CAAC;;;;;;;;;;;;;AChBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB,sBAAsB,uBAAuB,WAAW,IAAI;AAC5D,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA,KAAK;AACL;AACA,sBAAsB,mCAAmC;AACzD,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,gCAAgC;AAChG;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAA0D,kBAAkB;;AAE5E;AACA;AACA;AACA,oBAAoB,uBAAuB;;AAE3C,oDAAoD,6BAA6B;;AAEjF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,0BAA0B,eAAe,EAAE;AAC3C,0BAA0B,gBAAgB;AAC1C,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,OAAO,QAAQ,iCAAiC;AACpG,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACzOA;;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,eAAe,yBAAyB;AACxC;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClBA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;ACvLtC;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;;;;;;;;;ACjBA,IAAMA,UAAU;;AAGZC,WAAO,CAHK;AAIZC,WAAO,CAJK;AAKZC,cAAU,CALE;AAMZC,aAAU;;AANE,CAAhB;;kBAUeJ,O;;;;;;;;;;;;;;ACKf;;;;AACA;;;;;;AAEA;;;AApBA;;;;;;;;;;;;;;;;;AAuBA,IAAIK,YAAYA,aAAa;;AAE3BC,YAAW,mBAAAC,CAAQ,qEAAR,CAFgB;AAG3BC,QAAO,mBAAAD,CAAQ,+BAAR,CAHoB;;AAK3B;AACAE,cAAa,mBAAAF,CAAQ,2CAAR,CANc;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","file":"scintilla.dev.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Scintilla\"] = factory();\n\telse\n\t\troot[\"Scintilla\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./Scintilla.js\");\n","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/freeze\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-names\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/seal\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n","require('../../modules/es6.object.freeze');\nmodule.exports = require('../../modules/_core').Object.freeze;\n","require('../../modules/es6.object.get-own-property-names');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function getOwnPropertyNames(it) {\n  return $Object.getOwnPropertyNames(it);\n};\n","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;\n","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n","require('../../modules/es6.object.seal');\nmodule.exports = require('../../modules/_core').Object.seal;\n","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","module.exports = function () { /* empty */ };\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var core = module.exports = { version: '2.5.4' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n","module.exports = {};\n","module.exports = true;\n","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","exports.f = {}.propertyIsEnumerable;\n","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","module.exports = require('./_hide');\n","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","var global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function (key) {\n  return store[key] || (store[key] = {});\n};\n","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n","exports.f = require('./_wks');\n","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n","// 19.1.2.5 Object.freeze(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('freeze', function ($freeze) {\n  return function freeze(it) {\n    return $freeze && isObject(it) ? $freeze(meta(it)) : it;\n  };\n});\n","// 19.1.2.7 Object.getOwnPropertyNames(O)\nrequire('./_object-sap')('getOwnPropertyNames', function () {\n  return require('./_object-gopn-ext').f;\n});\n","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./_to-object');\nvar $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n","// 19.1.2.17 Object.seal(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('seal', function ($seal) {\n  return function seal(it) {\n    return $seal && isObject(it) ? $seal(meta(it)) : it;\n  };\n});\n","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', { setPrototypeOf: require('./_set-proto').set });\n","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n","require('./_wks-define')('asyncIterator');\n","require('./_wks-define')('observable');\n","require('./es6.array.iterator');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","\r\n\r\nconst Version = {\r\n\r\n\r\n    MAJOR: 0,\r\n    MINOR: 0,\r\n    REVISION: 1,\r\n    VERSION : '0.0.1'\r\n\r\n};\r\n\r\nexport default Version;","/**\r\n* @author       Tobias Beise Ulrich\r\n* @license      MIT\r\n*\r\n* @overview\r\n*\r\n* --- Scintilla ---\r\n*\r\n* v0.0.1\r\n*\r\n* tobiasbu.github.io\r\n*\r\n* Scintilla is simple 2D game engine for HTML5 games.\r\n* The first version is only for browsers based in canvas.\r\n*\r\n*/\r\n\r\nimport Defines from './Define';\r\nimport Extend from './utils/object/Extend';\r\n\r\n/**\r\n* @namespace scintilla\r\n*/\r\nvar scintilla = scintilla || {\r\n  \r\n  Platform : require('./system/PlatformEnvironment'),\r\n  Core : require('./core'),\r\n\r\n  // DATA STRUCTURES\r\n  Structures : require('./structures'),\r\n\r\n  // RENDER\r\n  Render : require('./render'),\r\n  Color : require('./render/color/Color'),\r\n  Transition : require('./render/transition'),\r\n\r\n  // INPUT\r\n  KeyCode : require('./input/keyboard/KeyCode'),\r\n  MouseButton : require('./input/mouse/MouseButton'),\r\n  Input : require('./input'),\r\n\r\n  // MATH\r\n  Math : require('./math/MathUtils'),\r\n  Matrix : require('./math/Matrix'),\r\n  Ease : require('./math/easing'),\r\n\r\n  // ENTITIES\r\n  Scene : require('./scene/'),\r\n  Camera : require('./camera/Camera'),\r\n  Module : require('./modules'),\r\n  Entity : require('./entities'),\r\n\r\n  // EVENTS\r\n  Event : require('./event'),\r\n\r\n  // AUDIO\r\n  Audio : require('./audio'),\r\n\r\n  // CORE\r\n  Resources : require('./resources'),\r\n  Cache : require('./cache/CacheManager'),\r\n  Loader : require('./loader'),\r\n  Game : require('./core/Game'),\r\n\r\n  // UTILITIES\r\n  Path : require('./utils/Path')\r\n};\r\n\r\nExtend(Defines, scintilla);\r\n\r\nmodule.exports = scintilla;\r\n\r\nglobal.scintilla = scintilla;","import InitializeAudioSystem from \"./components/InitializeAudioSystem\";\r\nimport System from \"../core/system/System\";\r\n\r\nexport default class AudioManager {\r\n\r\n    constructor(game) {\r\n\r\n        this.game = game;\r\n\r\n        this.webAudio = false;\r\n        this.context = null;\r\n        this.noAudio = false;\r\n\r\n        this.channels = 24;\r\n\r\n\r\n        this.masterVolume = null;\r\n        this.volume = 1;\r\n        var _sounds = [];\r\n    }\r\n\r\n    getSounds() {\r\n\r\n        return _sounds;\r\n\r\n    }\r\n\r\n    stopAll() {\r\n\r\n        if (this.noAudio) {\r\n            return;\r\n        }\r\n\r\n        for (var i = 0; i < _sounds.length; i++) {\r\n            if (_sounds[i]) {\r\n                _sounds[i].stop();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    pauseAll() {\r\n\r\n        if (this.noAudio) {\r\n            return;\r\n        }\r\n\r\n        for (var i = 0; i < _sounds.length; i++) {\r\n            if (_sounds[i]) {\r\n                _sounds[i].pause();\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    resumeAll() {\r\n\r\n        if (this.noAudio) {\r\n            return;\r\n        }\r\n\r\n        for (var i = 0; i < _sounds.length; i++) {\r\n            if (_sounds[i]) {\r\n                _sounds[i].resume();\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    decode(tag, sound) {\r\n\r\n        sound = sound || null;\r\n\r\n        var soundData = this.game.cache.getAssetInfo('sounds', tag);\r\n\r\n        if (soundData) {\r\n\r\n            if (!soundData.decoded) {\r\n                soundData.isDecoding = true;\r\n\r\n                var self = this;\r\n\r\n                try {\r\n\r\n                    this.context.decodeAudioData(soundData.data, function (buffer) {\r\n\r\n                        if (buffer) {\r\n                            self.game.cache.soundDecoded(tag, buffer);\r\n                            console.log(\"decoded!\")\r\n                            //_this.onSoundDecode.dispatch(key, sound);\r\n                        }\r\n\r\n                    })\r\n\r\n                } catch (error) {\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    add(tag, volume, loop, connect) {\r\n\r\n        if (volume === undefined) {\r\n            volume = 1;\r\n        }\r\n        if (loop === undefined) {\r\n            loop = false;\r\n        }\r\n        if (connect === undefined) {\r\n            connect = true;\r\n        } // connect to master volume\r\n\r\n        var sound = new scintilla.Sound(this.game, tag, volume, loop, connect);\r\n\r\n        _sounds.push(sound);\r\n\r\n        return sound;\r\n\r\n    }\r\n\r\n    play(tag, volume, loop) {\r\n\r\n        var sound = this.add(tag, volume, loop);\r\n\r\n        sound.play();\r\n\r\n        return sound;\r\n\r\n    }\r\n\r\n    update() {\r\n\r\n        if (this.noAudio) {\r\n            return;\r\n        }\r\n\r\n        for (var i = 0; i < _sounds.length; i++) {\r\n            _sounds[i].update();\r\n        }\r\n\r\n    }\r\n\r\n    remove(sound) {\r\n\r\n        var i = _sounds.length;\r\n\r\n        while (i--) {\r\n            if (_sounds[i] === sound) {\r\n                _sounds[i].destroy(false);\r\n                _sounds.splice(i, 1);\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n\r\n    }\r\n\r\n\r\n    destroy() {\r\n\r\n        this.stopAll();\r\n\r\n        for (var i = 0; i < this._sounds.length; i++) {\r\n            if (_sounds[i]) {\r\n                _sounds[i].destroy();\r\n            }\r\n        }\r\n\r\n        _sounds = [];\r\n\r\n        this.context.close();\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nSystem.register('AudioManager', AudioManager, 'audio', InitializeAudioSystem);","\r\nexport default function InitializeAudioSystem() {\r\n    \r\n    if (!!window['AudioContext']) {\r\n        try {\r\n            this.context = new window['AudioContext']();\r\n        } catch (error) {\r\n            this.context = null;\r\n            this.webAudio = false;\r\n\r\n        }\r\n    } else if (!!window['webkitAudioContext']) {\r\n        try {\r\n            this.context = new window['webkitAudioContext']();\r\n        } catch (error) {\r\n            this.context = null;\r\n            this.webAudio = false;\r\n        }\r\n    }\r\n\r\n    if (this.context === null) {\r\n\r\n        this.noAudio = true;\r\n\r\n    } else {\r\n\r\n        this.webAudio = true;\r\n\r\n        if (this.context.createGain === undefined) {\r\n            this.masterVolume = this.context.createGainNode();\r\n        } else {\r\n            this.masterVolume = this.context.createGain();\r\n        }\r\n\r\n        this.masterVolume.gain.value = 1;\r\n        this.masterVolume.connect(this.context.destination);\r\n\r\n    }\r\n\r\n\r\n}","\r\nmodule.exports = {\r\n    Manager : require('./AudioManager')\r\n};","import DataMap from \"../structures/Map\";\r\n\r\nexport default class Cache {\r\n\r\n    constructor(wrapperFunction) {\r\n        this.resources = new DataMap();\r\n        this.adderWrapper = wrapperFunction || undefined;\r\n    }\r\n\r\n    add(tag, asset) {\r\n\r\n        let resource = asset;\r\n\r\n        if (this.adderWrapper !== undefined)\r\n            resource = this.adderWrapper(tag, asset);\r\n\r\n        this.resources.set(tag, resource);\r\n    }\r\n\r\n    has(tag) {\r\n        return this.resources.has(tag);\r\n    }\r\n\r\n    get(tag) {\r\n        return this.resources.get(tag);\r\n    }\r\n\r\n    erase(tag) {\r\n        this.resources.delete(tag);\r\n        return this;\r\n    }\r\n\r\n    clear() {\r\n        this.resources.clear();\r\n    }\r\n\r\n    destroy() {\r\n        this.resources.clear();\r\n        this.resources = null;\r\n    }\r\n\r\n}","import System from \"../core/system/System\";\r\nimport ImageResource from \"../resources/ImageResource\";\r\nimport TilemapResource from \"../resources/tilemap/TilemapResource\";\r\nimport Cache from \"./Cache\";\r\n\r\n\r\nconst CacheTypes = [\r\n  'image',\r\n  'json',\r\n  'audio',\r\n  'text',\r\n  'tilemap',\r\n];\r\n\r\n/**\r\n* Cache manager - holds file data\r\n* @class Cache\r\n* @constructor\r\n*/\r\nexport default class CacheManager {\r\n\r\nconstructor(game) {\r\n  this.game = game;\r\n\r\n\r\n  let self = this;\r\n\r\n  this.image = new Cache((tag, data) => {\r\n    return new ImageResource(tag, data)\r\n  });\r\n  \r\n  this.tilemap = new Cache((tag, data) => {\r\n    return new TilemapResource(tag, data, self);\r\n  });\r\n\r\n  this.json = new Cache();\r\n  this.text = new Cache();\r\n  this.svg = new Cache();\r\n  this.sound = new Cache();\r\n\r\n\r\n}\r\n\r\n  /*addTilemap(tag, dataFormat) {\r\n    this._cache.tilemap[tag] = new TilemapResource(dataFormat, tag, this);\r\n  }\r\n\r\n  addJSON(tag, dataFormat) {\r\n    this._cache.json[tag] = dataFormat;\r\n  }\r\n\r\n  addImage(tag, url, data) {\r\n\r\n    if (this.tagExists('images',tag))\r\n      this.removeTagAt('images',tag);\r\n\r\n    \r\n    var img = new ImageResource(data,tag)\r\n\r\n    this._cache.images[tag] = img;\r\n\r\n  }\r\n\r\n  addSound(tag, url,data,webAudio) {\r\n\r\n    var decoded = false;\r\n\r\n    if (!webAudio)\r\n    {\r\n        decoded = true;\r\n    }\r\n\r\n    var audio = {\r\n            tag: tag,\r\n            url: url,\r\n            data: data,\r\n            usingWebAudio: webAudio,\r\n            decoded: decoded,\r\n            isDecoding: false\r\n    };\r\n\r\n    this._cache.sounds[tag] = audio;\r\n\r\n  }\r\n\r\n  soundDecoded(tag, data) {\r\n\r\n    var sound = this.getAssetInfo(\"sounds\",tag);\r\n\r\n    sound.data = data;\r\n    sound.decoded = true;\r\n    sound.isDecoding = false;\r\n\r\n  }*/\r\n\r\n  hasCache(cacheType) {\r\n    return (typeof CacheTypes[cacheType] !== undefined);\r\n  }\r\n\r\n  getAsset(cacheType, tag) { // return the cache container\r\n\r\n    if (!this.hasCache(cacheType))\r\n      return null;\r\n\r\n    return this[cacheType].get(tag);\r\n\r\n  }\r\n\r\n  clear() {\r\n\r\n    for (let i = 0; i < CacheTypes.length; i++) {\r\n      this[props[i]].clear();\r\n    }\r\n\r\n  }\r\n\r\n  destroy() {\r\n\r\n    for (let i = 0; i < CacheTypes.length; i++) {\r\n      this[props[i]].destroy();\r\n      this[props[i]] = null;\r\n    }\r\n\r\n    this.game = null;\r\n  }\r\n\r\n}\r\n\r\nSystem.register('Cache', CacheManager, 'cache');","import System from '../core/system/System';\r\nimport BoundingBox from '../math/BoundingBox';\r\nimport Transform  from '../transform/Transform';\r\nimport Color from '../render/color/Color'\r\nimport MathUtils from '../math/MathUtils'\r\nimport Vector from '../math/Vector'\r\nimport ResizeCamera from './ResizeCamera';\r\n\r\n\r\nexport default class Camera {\r\n  \r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    this.canvas = null;\r\n\r\n   \r\n    this.width = game.config.camera.width;\r\n    this.height = game.config.camera.height;\r\n\r\n\r\n    this.bounds = new BoundingBox(); // render bounds\r\n    this.viewBounds = new BoundingBox(0,0, this.width, this.height); // global bounds\r\n    this.transform = new Transform();\r\n   \r\n    \r\n    //this.transform.origin.set(0.5,0.5)\r\n    //this.centerView();\r\n    // this._resolution = 1;\r\n    this._pixelUnit = {x:1,y:1};    \r\n    this._aspectRatio = 1;\r\n\r\n    this._backgroundColor = new Color(); //.rgbToHex(0,0,0);\r\n    this._roundPixels = game.config.roundPixels;\r\n\r\n  }\r\n\r\n  get position() { \r\n    return { \r\n      x : this.transform.position.x, \r\n      y : this.transform.position.y\r\n    }; \r\n  }\r\n  set position(value) { \r\n    this.transform.position.x = value.x;\r\n    this.transform.position.y = value.y; \r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n  get x() {return this.transform.position.x;}\r\n  set x(value) { \r\n    this.transform.position.x = value; \r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n  \r\n  get y() {return this.transform.position.y;}\r\n  set y(value) { \r\n    this.transform.position.y = value; \r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  get scale() { return this.transform.scale.x; }\r\n  set scale(value) { \r\n    this.transform.scale.x = value; \r\n    this.transform._isDirty = true; \r\n    return this;\r\n  }\r\n\r\n  get angle() { return this.transform.angle; }\r\n  set angle(value) { \r\n    this.transform.angle = value; \r\n    this.transform.rotation = value * MathUtils.degToRad;\r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  get origin() { return this.transform.origin; }\r\n  set origin(value) {\r\n    this.transform.x = value.x;\r\n    this.transform.y = value.y;\r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  get rotation() { return this.transform.rotation; }\r\n\r\n  set backgroundColor(color) {\r\n    if (color === undefined) { color = 'rgba(0,0,0,0)'; }\r\n    this._backgroundColor = color;\r\n    return this;\r\n  }\r\n  get backgroundColor() {\r\n    return this._backgroundColor = color;\r\n  }\r\n\r\n  set roundPixels(flag) {\r\n    this._roundPixels = flag;\r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n  get size() {\r\n    return {x:this.width, y:this.height};\r\n  }\r\n\r\n  centerView() {\r\n    this.x = this.width * 0.5;\r\n    this.y = this.height * 0.5;\r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  centerToEntity(entity) {\r\n    this.x = entity.position.x;\r\n    this.y = entity.position.y;\r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  setBackgroundColor(r, g, b, a) {\r\n    if (r === undefined) { g = 0; }\r\n    if (g === undefined) { g = 0; }\r\n    if (b === undefined) { b = 0; }\r\n    if (a === undefined) { a = 1; }\r\n    this._backgroundColor = Color.rgba(r,g,b,a);\r\n    return this;\r\n  }\r\n\r\n  setSize(width, height) {\r\n    ResizeCamera(this, this.canvas, width, height);\r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  setView(x, y, width, height) {\r\n    this.transform.position.x = x;\r\n    this.transform.position.y = y;\r\n    ResizeCamera(width, height);\r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  reset() {\r\n    this.transform.reset();\r\n  }\r\n\r\n}\r\n\r\nSystem.register('Camera', Camera, 'camera', function() {\r\n  this.canvas = this.game.system.render.canvas;\r\n  ResizeCamera(this, this.canvas, this.width, this.height);\r\n});","\r\nexport default function ResizeCamera(camera, canvas, width, height) {\r\n\r\n    camera.width = width;\r\n    camera.height = height;\r\n    camera._aspectRatio = width / height;\r\n    camera._pixelUnit.x = canvas.width / camera.width;\r\n    camera._pixelUnit.y = canvas.height / camera.height;\r\n}","import UpdateBounds from \"../transform/UpdateBounds\";\r\nimport ComputeDelimiterPoint from \"../transform/ComputeDelimiterPoint\";\r\nimport ComputeBounds from \"../transform/ComputeBounds\";\r\nimport MathUtils from \"../math/MathUtils\";\r\n\r\n\r\nexport default function UpdateCamera(camera, canvas) {\r\n    \r\n  if (!camera.transform._isDirty)\r\n    return;\r\n\r\n  let t = camera.transform;\r\n\r\n\r\n  if (t.rotation != t._oldRotation) {\r\n    t._oldRotation = t.rotation;\r\n    t._cosSin.y = Math.sin(t.rotation);\r\n    t._cosSin.x = Math.cos(t.rotation);\r\n  }\r\n\r\n  let origin = {\r\n    x: camera.width * t.origin.x,\r\n    y: camera.height * t.origin.y\r\n  };\r\n\r\n  let pos = {x: (t.position.x + origin.x),\r\n             y: (t.position.y + origin.y)};\r\n\r\n  if (camera._roundPixels) {\r\n    pos.x = MathUtils.round(pos.x);\r\n    pos.y = MathUtils.round(pos.y);\r\n  }\r\n\r\n  // update camera view\r\n  camera.viewBounds\r\n  .setMin(pos.x, pos.y)\r\n  .setMax(pos.x + camera.width, pos.y + camera.height)\r\n\r\n  pos.x = -pos.x;\r\n  pos.y = -pos.y;\r\n\r\n  // compute the basic rotation\r\n  t.matrix.setIdentity()\r\n  .scale(camera._pixelUnit.x, camera._pixelUnit.y) // resolution\r\n  .translate(pos.x , pos.y)\r\n  .scale(t.scale.x, t.scale.x)\r\n  \r\n  // bounds should not be rotated\r\n  ComputeBounds(\r\n    camera.bounds, camera.transform, \r\n    camera.width, camera.height, \r\n    pos);\r\n\r\n    t.matrix\r\n    .radianRotate(t._cosSin.x, t._cosSin.y)\r\n    .translate(-origin.x, -origin.y);\r\n\r\n  \r\n\r\n}","\r\nimport ObjectGet from '../utils/object/ObjectGet';\r\n\r\nexport default class Config {\r\n\r\n    constructor(config)\r\n    {\r\n        if (config === undefined) \r\n            config = {};\r\n\r\n        var callback = ObjectGet.value;\r\n        var callback_2 = ObjectGet.propertyValue;\r\n\r\n        // view and canvas\r\n        this.width = callback(config, 'width', 640);\r\n        this.height = callback(config, 'height', 480);\r\n        this.parent = callback(config, 'parent', null);\r\n        this.debug =  callback(config, 'debug', false);\r\n        this.pixelated = callback(config, 'pixelated', false);\r\n        this.doubleBuffer = callback(config, 'doubleBuffer', true);\r\n\r\n        this.roundPixels = callback(config, 'roundPixels', false);\r\n        this.floorTiles = callback(config, 'floorTiles', false),\r\n\r\n        // loader\r\n        this.loader = {\r\n            baseURL : callback_2(config, 'loader.baseURL', ''),\r\n            path : callback_2(config, 'loader.path', ''),\r\n            responseType : callback_2(config, 'loader.responseType', ''),\r\n            async : callback_2(config, 'loader.async', true),\r\n        };\r\n\r\n        this.fps = callback(config, 'fps', 60);\r\n        this.time = {\r\n            timeoutMode : callback_2(config, 'time.timeOutMode', false),\r\n        };\r\n\r\n        this.camera = {\r\n            width : callback_2(config, 'camera.width', this.width),\r\n            height : callback_2(config, 'camera.height', this.height)\r\n        };\r\n\r\n       \r\n        /* this.loaderEnableParallel = GetValue(config, 'loader.enableParallel', true);\r\n            this.loaderMaxParallelDownloads = GetValue(config, 'loader.maxParallelDownloads', 4);\r\n            this.loaderCrossOrigin = GetValue(config, 'loader.crossOrigin', undefined);\r\n            \r\n            this.loaderUser = GetValue(config, 'loader.user', '');\r\n            this.loaderPassword = GetValue(config, 'loader.password', '');\r\n    this.loaderTimeout = GetValue(config, 'loader.timeout', 0);*/\r\n\r\n\r\n    }\r\n\r\n}","import CanvasManager from \"../render/canvas/CanvasListManager\";\r\nimport CanvasInterpolation from \"../render/canvas/CanvasInterpolation\";\r\nimport CanvasSmoothing from \"../render/canvas/CanvasSmoothing\";\r\nimport { RenderingType } from \"../render/Define\";\r\nimport Render from \"../render/Render\";\r\n\r\nexport default function CreateRender(game, config) {\r\n\r\n  let render = new Render(game);\r\n\r\n  render.imageRendering = (config.pixelated) ? RenderingType.NEAREST : RenderingType.LINEAR;\r\n\r\n    if (config.canvas) {\r\n      render.canvas = config.canvas;\r\n    } else {\r\n      render.canvas = CanvasManager.create(game, config.width, config.height);\r\n    }\r\n\r\n    // create context\r\n    render.context = render.canvas.getContext(\"2d\", { alpha: false });  \r\n    render.smoothing = new CanvasSmoothing(render.context);\r\n\r\n    if (config.pixelated) {\r\n      \r\n      CanvasInterpolation.crisp(render.canvas);\r\n      render.smoothing.set(render.imageRendering);\r\n    }\r\n\r\n    if (config.doubleBuffer) {\r\n      render.doubleBuffer = true;\r\n      render._domCanvas = CanvasManager.create(game, config.width, config.height);\r\n      render._domContext = render._domCanvas.getContext(\"2d\", { alpha: false });  \r\n    }\r\n\r\n    return render;\r\n\r\n\r\n\r\n    // default definition\r\n    /*let defaultDef = {\r\n      tabindex: '1',\r\n      width: width,\r\n      height: height,\r\n      id: Math.random().toString(36).substr(2, 9),\r\n      class: \"\",\r\n      container: \"body\",\r\n      style: \"padding: 0;margin: auto;display: block;top: 0; bottom: 0;left: 0;right: 0;border:1px solid #d3d3d3;background-color: #f1f1f1;\"\r\n    };\r\n  \r\n    let CO = defaultDef;\r\n    let canvas;\r\n\r\n    canvas = document.createElement('canvas');\r\n    //canvas.parent = parent;\r\n    canvas.setAttribute(\"id\", CO.id);\r\n    canvas.setAttribute(\"width\", CO.width);\r\n    canvas.setAttribute(\"height\", CO.height);\r\n    canvas.setAttribute(\"style\", CO.style);*/\r\n}","\r\nimport Config from './Config';\r\nimport GameInitialize from './GameInitialize';\r\n\r\n/**\r\n* Main class of engine. Holds all main data.\r\n* @class Game\r\n* @constructor\r\n*/\r\nexport default class Game {\r\n\r\n  /**\r\n  * @property {string|HTMLElement} parent - The Games DOM parent.\r\n  * @default\r\n  */\r\n constructor() {\r\n   \r\n  this.parent = 'body';\r\n  this.width = 800;\r\n  this.height = 600;\r\n\r\n  // object\r\n  this.config = new Config(config);\r\n\r\n  // boolean\r\n  this.systemInited = false;\r\n  this.isRunning = false;\r\n  this.debugMode = false;\r\n\r\n  // float\r\n  this.timeMode = false;\r\n\r\n\r\n  //objects\r\n  this.debug = null;\r\n  //this.scene = null;\r\n  this.sound = null;\r\n  this.input = null;\r\n  this.pool = null;\r\n  this.systems =  null;\r\n  this.context = null;\r\n  this.time = null;\r\n  this.event = null;\r\n\r\n  this.parseConfiguration(this.config);\r\n\r\n  GameInitialize(this);\r\n }\r\n\r\n  parseConfiguration(config) {\r\n\r\n    //this.config = config;\r\n\r\n    if (config['debug'])\r\n    {\r\n        this.debugMode = config['debug'];\r\n\r\n    }\r\n\r\n    if (config['width'])\r\n    {\r\n        this.width = config['width'];\r\n    }\r\n\r\n    if (config['height'])\r\n    {\r\n        this.height = config['height'];\r\n    }\r\n\r\n    if (config['parent'])\r\n    {\r\n        this.parent = config['parent'];\r\n    }\r\n\r\n  }\r\n\r\n\r\n  destroy() {\r\n\r\n    this.physics.destroy();\r\n    this.sound.destroy();\r\n    this.input.destroy();\r\n\r\n    this.debug = null;\r\n    this.cache = null;\r\n    this.load = null;\r\n    this.canvas = null;\r\n    this.scene = null;\r\n    this.sound = null;\r\n    this.draw = null;\r\n    this.universe = null;\r\n    this.world = null;\r\n    this.input = null;\r\n    this.time = null;\r\n    this.render = null;\r\n    this.component = null;\r\n    this.instance = null;\r\n    this.animationCache = null;\r\n    this.updateGameMethod = null;\r\n\r\n\r\n  }\r\n\r\n}\r\n\r\n//scintilla.Game.prototype.constructor = scintilla.Game;\r\n\r\n\r\nmodule.exports = Game;","import Physics from \"../physics/physics\";\r\nimport Input from \"../input/Input\";\r\nimport GameTime from \"../time/GameTime\";\r\nimport InitializeSystems from \"./system/components/InitializeSystems\";\r\nimport CreateRender from \"./CreateRender\";\r\nimport AppendDOM from \"../dom/AppendDOM\";\r\n\r\n  /**\r\n    * Initialize engine\r\n    *\r\n    * @method Game#init()\r\n    * @protected\r\n    */\r\nexport default function GameInitialize(game) {\r\n\r\n    if (game.systemInited)\r\n        return;\r\n\r\n    let render = CreateRender(game, game.config);\r\n \r\n    let canvas = render.canvas;\r\n\r\n    if (render.doubleBuffer)\r\n    {\r\n        canvas = render._domCanvas;\r\n    }\r\n\r\n    AppendDOM(canvas, game.config.parent);\r\n\r\n    // Core system\r\n    game.physics = new Physics(game);\r\n    game.input = new Input(game);\r\n    game.time = new GameTime(game);\r\n\r\n    InitializeSystems(game, render);\r\n\r\n    game.input.init();\r\n    game.time.init(game.system.loop);\r\n    game.systemInited = true;\r\n    game.isRunning = true;\r\n\r\n    \r\n    Object.seal(game);\r\n\r\n    console.log(\"scintilla started!\");\r\n\r\n}","import System from \"./system/System\";\r\nimport RequestAnimationFrame from \"../dom/RequestAnimationFrame\";\r\nimport UpdateStep from \"../time/UpdateStep\";\r\nimport UpdateCamera from \"../camera/UpdateCamera\";\r\nimport BeginDrawRender from \"../render/components/BeginDrawRender\";\r\nimport DrawRender from \"../render/components/DrawRender\";\r\nimport EndDrawRender from \"../render/components/EndDrawRender\";\r\nimport PreUpdateScene from \"../scene/components/PreUpdateScene\";\r\nimport UpdateScene from \"../scene/components/UpdateScene\";\r\nimport DrawUI from \"../render/ui/DrawUI\";\r\nimport DrawTransition from \"../render/transition/DrawTransition\";\r\nimport UpdateTransition from \"../render/transition/UpdateTransition\";\r\n\r\n\r\n\r\n/*\r\n*\r\n* core game loop system\r\n*\r\n* @class GameLoop\r\n* @protected\r\n*/\r\nexport default class GameLoop {\r\n\r\n    constructor(game, system) {\r\n        this.game = game;\r\n        this.system = system;\r\n        this.updateStep = new UpdateStep(game, game.config);\r\n        this.entityUpdateList = null;\r\n        this.currentScene = null;\r\n        this.camera = null;\r\n        this.canvas = null;\r\n        this.renderer = null;\r\n    }\r\n\r\n    loop(deltaTime) {\r\n\r\n         // Core Managers\r\n\r\n         this.game.input.update();\r\n        \r\n         UpdateTransition(this.game.system.transition, deltaTime);\r\n\r\n         // Entities and Scene Update\r\n\r\n        this.currentScene = this.game.scene.currentScene;\r\n\r\n        let shouldUpdate = (this.currentScene != null && this.currentScene !== undefined);\r\n        //let changeScene = (this.game.scene._changeScene != null || this.game.scene._changeScene !== undefined)\r\n\r\n\r\n\r\n        //if (changeScene)\r\n        PreUpdateScene(this.game.scene);\r\n        //this.game.scene.preUpdate();\r\n        \r\n\r\n        \r\n\r\n        if (shouldUpdate)\r\n        {\r\n         \r\n            UpdateScene(this.game.scene, deltaTime);\r\n            /*if (this.game.scene._setup)\r\n            {\r\n                // global scene update\r\n                if (this.currentScene.update !== undefined)\r\n                    this.currentScene.update(deltaTime);\r\n            } else {\r\n                if (this.currentScene.loading !== undefined)\r\n                    this.currentScene.loading(deltaTime);\r\n            }*/\r\n\r\n            UpdateCamera(this.camera, this.canvas);\r\n            \r\n            this.entityUpdateList.update(deltaTime);\r\n\r\n            this.entityUpdateList.lateUpdate(deltaTime);\r\n\r\n            if (this.camera.transform._isDirty)\r\n                this.camera.transform._isDirty = false;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    render(deltaTime) {\r\n\r\n        BeginDrawRender(this.renderer);\r\n\r\n        if (this.currentScene !== null || this.currentScene !== undefined)\r\n        {\r\n            // Scenes\r\n            DrawRender(this.renderer, this.camera, deltaTime);\r\n\r\n            // User Interface\r\n            DrawUI(this.system.ui, this.game.scene);\r\n\r\n        }\r\n\r\n        EndDrawRender(this.system.render);\r\n\r\n        // Transition\r\n        this.renderer.context.setTransform(1, 0, 0, 1, 0, 0);\r\n\r\n        DrawTransition(this.system.transition, this.renderer.canvas, this.renderer.context);\r\n\r\n        // Debug\r\n        if (this.system.ui.debug !== null && this.system.ui.debug !== undefined) {\r\n            this.system.ui.debug.test();\r\n        }\r\n\r\n        if (this.renderer.doubleBuffer) {\r\n            this.renderer._domContext.drawImage(this.renderer.canvas, 0, 0); \r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nSystem.register('GameLoop', GameLoop, 'loop', function() {\r\n    this.updateStep.init(this);\r\n    this.entityUpdateList = this.game.system.entityList;\r\n    this.camera = this.system.camera;\r\n    this.canvas = this.system.render.canvas;\r\n    this.renderer = this.system.render;\r\n});","\r\nmodule.exports = {\r\n    Config : require('./Config'),\r\n    System : require('./system/System'),\r\n    SceneSystem : require('./system/SceneSystem'),\r\n    GameLoop : require('./GameLoop')\r\n}","\r\n\r\nconst SceneSystem = [\r\n    'Cache',\r\n    'Loader',\r\n    'EntityFactory',\r\n    'EntityHierarchy',\r\n    'Camera',\r\n    'SceneManager',\r\n    'UserInterface',\r\n    'Transition',\r\n    'EventManager'\r\n];\r\n\r\nObject.freeze(SceneSystem);\r\n\r\nexport default SceneSystem;\r\n","import SceneSystem from \"./SceneSystem\";\r\n\r\n\r\nexport var GameSystems = {};\r\n\r\nconst System = {\r\n\r\n    /** @inner \r\n     * Register a game system.\r\n     * \r\n     * @param {String} key Long description of system\r\n     * @param {Class} system The system class\r\n     * @param {String} systemName The short description name of the system\r\n     * @param {Function} [initFunc] [optional] Initialize function for the system.\r\n     */\r\n    register(key, system, systemName, initFunc)\r\n    {\r\n        GameSystems[key] = {\r\n            name: systemName, \r\n            system: system, \r\n            init : initFunc\r\n        };\r\n    }\r\n    \r\n}\r\n\r\nexport default System;\r\n","import { GameSystems } from \"../System\";\r\nimport RequestDepthSorting from \"../../../render/components/RequestDepthSorting\";\r\nimport RequestRenderableLayerIDChange from \"../../../render/components/RequestRenderableLayerIDChange\";\r\n\r\nexport default function InitializeSystems(game, render) {\r\n    \r\n    let systems = {};\r\n \r\n    // register all game systems\r\n    for (let property in GameSystems) {\r\n\r\n        let registered = GameSystems[property];\r\n        systems[registered.name] = new registered.system(game, systems);\r\n    }\r\n\r\n    // set core system to game class\r\n    game.system = systems;\r\n    game.scene = systems.scene;\r\n    game.render = render;\r\n    systems.render = render;\r\n\r\n    // initialize systems\r\n    for (let property in GameSystems) {\r\n\r\n        \r\n        let registered = GameSystems[property];\r\n        let InitializeSystemFunction = registered.init;\r\n        \r\n        if (InitializeSystemFunction === undefined) continue;\r\n\r\n        InitializeSystemFunction.call(systems[registered.name]);\r\n    }\r\n\r\n    // render events callbacks\r\n    systems.event.subscribe('__render_depthsorting', RequestDepthSorting, render);\r\n    systems.event.subscribe('__render_layeridchange', RequestRenderableLayerIDChange, render);\r\n\r\n    return systems;\r\n\r\n}","import { GameSystems } from \"../System\";\r\nimport SceneSystem from \"../SceneSystem\";\r\n\r\n\r\n\r\nexport default function InjectSystems(game, scene) {\r\n        \r\n    scene.game = game;\r\n\r\n    for (let property in SceneSystem)\r\n    {\r\n        \r\n        let sys = GameSystems[SceneSystem[property]];\r\n\r\n        if (sys !== undefined)\r\n            scene[sys.name] = game.system[sys.name];\r\n    }\r\n\r\n    // Special injections, input and sound:\r\n\r\n    scene['key'] = game.input.keyboard;\r\n    scene['mouse'] = game.input.mouse;\r\n\r\n    /*for (let property in gameSystems) {\r\n\r\n        let sys = gameSystems[property];\r\n        scene[sys.name] = property[sys.system];\r\n    }*/\r\n}","import { GameSystems } from \"../System\";\r\n\r\nexport default function UnjectSystems(scene) {\r\n\r\n        for (let property in GameSystems) {\r\n\r\n            if (scene[sys.name] !== undefined)\r\n            {\r\n                delete scene[sys.name]; // = undefined;\r\n            }\r\n        }\r\n}","\r\n\r\nexport default function AppendDOM(element, parent, overflowHidden) {\r\n\r\n    if (overflowHidden === undefined) overflowHidden = true;\r\n\r\n    let appendTo;\r\n    let target = null;\r\n  \r\n      if (parent)\r\n      {\r\n          if (typeof parent === 'string')  {\r\n              target = document.getElementById(parent);\r\n          }\r\n          else if (typeof parent === 'object' && parent.nodeType === 1) {\r\n              target = parent;\r\n          }\r\n      }\r\n  \r\n      // Fallback, covers an invalid ID and a non HTMLelement object\r\n      if (!target) {\r\n          target = document.body;\r\n      }\r\n  \r\n      if (overflowHidden && target.style)  {\r\n          target.style.overflow = 'hidden';\r\n      }\r\n  \r\n      target.appendChild(element);\r\n  \r\n      return element;\r\n  }","\r\n\r\nexport default class RequestAnimationFrame {\r\n    \r\n    constructor(timeoutMode) {\r\n\r\n        if (timeoutMode === undefined) { timeoutMode = false; }\r\n\r\n        this.isRunning = false;\r\n        this._isTimeOutMode = timeoutMode;\r\n\r\n        this.thick = 0;\r\n        this.lastTime = 0;\r\n\r\n        //callbacks\r\n\r\n        // game loop\r\n        this.loopCallback = null;\r\n\r\n        // timeout/animation callback \r\n        this.timeOutIdentifier = null;\r\n\r\n        /*let vendors = [\r\n            'ms',\r\n            'moz',\r\n            'webkit',\r\n            'o'\r\n        ];\r\n\r\n        for (let x = 0; x < vendors.length && !window.requestAnimationFrame; x++)\r\n        {\r\n            window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n            window.cancelAnimationFrame  = window[vendors[x] + 'CancelAnimationFrame'];\r\n        }*/\r\n\r\n        var self = this;\r\n\r\n        this.updateRequestAnimationFrame = function(timeStamp) {\r\n\r\n            self.lastTime = self.thick;\r\n            self.thick = timeStamp;\r\n            //this.game.update(time);\r\n            self.loopCallback(timeStamp);\r\n    \r\n            self.timeOutIdentifier = window.requestAnimationFrame(self.updateRequestAnimationFrame);\r\n    \r\n        }\r\n    \r\n        this.updateTimeout = function() {\r\n    \r\n            let dateTime = Date.now();\r\n            let delay = Math.max(16 + self.lastTime - dateTime, 0);\r\n            self.lastTime = self.thick;\r\n            self.thick = delay;\r\n            self.loopCallback(delay);\r\n            //this.game.update(Date.now());\r\n            self.timeOutIdentifier = window.setTimeout(self.updateTimeout, delay);\r\n    \r\n        }\r\n    }\r\n\r\n\r\n\r\n    start(loopCallback) {\r\n\r\n        if (this.isRunning)\r\n            return;\r\n\r\n        this.isRunning = true;\r\n\r\n        this.loopCallback = loopCallback;\r\n\r\n        if (!window.requestAnimationFrame || this._isTimeOutMode) {\r\n            this._isTimeOutMode = true;\r\n            this.timeOutIdentifier = window.setTimeout(this.updateTimeout, 0);\r\n        } else {\r\n            this._isTimeOutMode = false;\r\n            this.timeOutIdentifier = window.requestAnimationFrame(this.updateRequestAnimationFrame);\r\n        }\r\n\r\n    }\r\n\r\n\r\n    stop() {\r\n\r\n        if (this._isTimeOutMode)\r\n        {\r\n            clearTimeout(this.timeOutIdentifier);\r\n        }\r\n        else\r\n        {\r\n            window.cancelAnimationFrame(this.timeOutIdentifier);\r\n        }\r\n\r\n        this.isRunning = false;\r\n\r\n    }\r\n\r\n    destroy() {\r\n        this.stop();\r\n        this.loopingCallback = null;\r\n    }\r\n\r\n}\r\n","\r\n\r\n/*\r\n*\r\n* Base class for Entities\r\n*\r\n*/\r\nexport default class Entity {\r\n\r\n    constructor(name, game)\r\n    {\r\n        this._name = name || 'New Entity';\r\n        this._active = true;\r\n        this._pool = null;\r\n        this.game = game || undefined; \r\n    }\r\n\r\n    get active() {return this._active;}\r\n    set active(value)\r\n    {\r\n        value = !!value;\r\n\r\n        if (value !== this._active)\r\n            this._active = value;\r\n\r\n        return this._active;\r\n    }\r\n\r\n    get name() {return this._name;}\r\n    set name(value)\r\n    {\r\n        value = !!value;\r\n\r\n        if (value !== this._name)\r\n            this._name = value;\r\n\r\n        return this._name;\r\n    }\r\n\r\n    destroy()\r\n    {\r\n        \r\n    }\r\n\r\n};","import System from \"../core/system/System\";\r\nimport SceneEntity from \"./SceneEntity\";\r\n\r\n\r\nexport default class EntityFactory {\r\n    \r\n    constructor(game) {\r\n        this.game = game;\r\n        this.scene = null;\r\n        this.entityList = null;\r\n    }\r\n\r\n    entity(entityName) {\r\n        entityName = entityName || 'Scene Entity ' + this.entityList.length;\r\n        return new SceneEntity(entityName, this.game);\r\n    }\r\n\r\n    sprite(tag, entityName) {\r\n\r\n        let entity = this.entity(entityName);\r\n        entity.modules.attach.sprite(tag);\r\n\r\n        if (this.scene.current_scene !== null) {\r\n            this.entityList.add(entity);\r\n        }\r\n\r\n        return entity;\r\n    }\r\n\r\n    tilemap(tag, entityName) {\r\n        let entity = this.entity(entityName);\r\n        entity.modules.attach.tilemap(tag);\r\n\r\n        if (this.scene.current_scene !== null) {\r\n            this.entityList.add(entity);\r\n        }\r\n\r\n        return entity;\r\n    }\r\n\r\n}\r\n\r\nSystem.register('EntityFactory', EntityFactory, 'create', \r\nfunction() {\r\n    this.entityList = this.game.system.entityList;\r\n    this.scene = this.game.scene;\r\n});","import System from \"../core/system/System\";\r\nimport DataList from \"../structures/List\";\r\nimport UpdateTransform from '../transform/UpdateTransform'\r\nimport Matrix from '../math/Matrix'\r\nimport ModulesUpdater from \"../modules/components/ModulesUpdater\";\r\n\r\n\r\nexport default class EntityUpdateList {\r\n\r\n    constructor(game)\r\n    {\r\n        this.game = game;\r\n        this._instances = null;\r\n        this._destroyInstances = null;\r\n        this._pendingInstances = null;\r\n        this._camera = null;\r\n    }\r\n\r\n    get length() {return this._instances.size;}\r\n\r\n    add(instance) {\r\n        if (this._instances.indexOf(instance) === -1 && this._pendingInstances.indexOf(instance) === -1)\r\n        {\r\n            this._pendingInstances.push(instance);\r\n        }\r\n\r\n        return instance;\r\n    }\r\n\r\n    remove(instance) {\r\n\r\n    }\r\n\r\n    update(dt) {\r\n\r\n        \r\n        for (let i = 0; i < this._instances.size; i++) {\r\n\r\n            let element = this._instances.at(i);\r\n\r\n            if (element.active)\r\n            {\r\n                \r\n                if (element.update !== undefined)\r\n                    element.update.call(element, dt); //update(dt);\r\n\r\n                UpdateTransform(element.transform, this._camera.transform);\r\n\r\n                ModulesUpdater(element.modules, this.game);\r\n\r\n                if (element.transform._isDirty)\r\n                    element.transform._isDirty = false;\r\n\r\n                \r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n    lateUpdate()\r\n    {\r\n        let removeSize = this._destroyInstances.length;\r\n        let insertSize = this._pendingInstances.length;\r\n        \r\n        if (insertSize === 0 && removeSize === 0)\r\n            return;\r\n\r\n\r\n        if (removeSize > 0)\r\n            this._instances.eraseList(this._destroyInstances, removeSize);\r\n\r\n\r\n        \r\n        /*let content = this._pendingInstances.content();\r\n\r\n        for (let i = 0; i < insertSize; i++) {\r\n\r\n            let element = content[i];\r\n            this._instances.push(element);\r\n            this._pendingInstances.eraseAt(i);\r\n        }*/\r\n\r\n        this._instances.concat(this._pendingInstances, true);\r\n\r\n        /*    \r\n\r\n        this._pendingInstances.clear();*/\r\n\r\n        //this._instances.concat(this._pendingInstances, true);\r\n\r\n        this._pendingInstances.childs.length = 0;\r\n        this._destroyInstances.childs.length = 0;\r\n\r\n    }\r\n\r\n}\r\n\r\nSystem.register('EntityUpdateList', EntityUpdateList, 'entityList', \r\nfunction() {\r\n    this._instances = new DataList();\r\n    this._destroyInstances = new DataList();\r\n    this._pendingInstances = new DataList();\r\n    this._camera = this.game.system.camera;\r\n});\r\n\r\n","\r\n//import EntityHierarchy from './EntityHierarchy'\r\nimport BoundingBox from '../math/BoundingBox'\r\nimport Transform from '../transform/Transform'\r\nimport ModuleManager from '../modules/ModuleManager';\r\nimport Entity from './Entity';\r\n\r\nexport default class SceneEntity extends Entity //Hierarchy\r\n{\r\n    constructor(name, game)\r\n    {\r\n        name = name || 'New SceneEntity';\r\n        super(name, game || null)\r\n        this.transform = new Transform();\r\n        this.type = null;\r\n        this.pool = null;\r\n        this.modules = new ModuleManager(this);\r\n        //this.bounds = new BoundingBox();\r\n        //this._transformDirty = false;\r\n        //this._currentScene = null;\r\n        \r\n        \r\n    }\r\n\r\n    set x(value) {\r\n        this.transform.position.x = value;\r\n        this.transform.markDirty();\r\n    }\r\n\r\n    get x() { return this.transform.position.y; }\r\n\r\n    set y(value) {\r\n        this.transform.position.y = value;\r\n        this.transform.markDirty();\r\n    }\r\n\r\n    get y() { return this.transform.position.y; }\r\n\r\n    get position() { return this.transform.position; }\r\n    set position(value) { this.transform.position = value; this.transform._isDirty = true; }\r\n\r\n    get origin() { return this.transform.origin; }\r\n    set origin(value) { this.transform.origin = value; this.transform._isDirty = true; }\r\n    set ['origin.x'](value) { this.transform.origin.x = value; this.transform._isDirty = true;}\r\n    set ['origin.y'](value) { this.transform.origin.y = value; this.transform._isDirty = true;}\r\n\r\n    get scale() { return this.transform.scale; }\r\n    set scale(value) { this.transform.scale = value; this.transform._isDirty = true; }\r\n    set ['scale.x'](value) { this.transform.scale.x = value; this.transform._isDirty = true;}\r\n    set ['scale.y'](value) { this.transform.scale.y = value; this.transform._isDirty = true;}\r\n\r\n    get angle() { return this.transform.angle; }\r\n    set angle(value) { this.transform.angle = value; this.transform._isDirty = true; }\r\n   \r\n    \r\n}","import SceneEntity from \"../SceneEntity\";\r\nimport CreateEntityFromObject from \"./CreateEntityFromObject\";\r\nimport Extend from \"../../utils/object/Extend\";\r\n\r\nexport default function CreateEntityFrom(value, game) {\r\n\r\n    let entity;\r\n\r\n    if (value instanceof SceneEntity) {\r\n\r\n    } else if (typeof value === 'object') {\r\n\r\n        let placeholder = new SceneEntity(value.name || undefined, game);\r\n        entity = Extend(true, placeholder, value);\r\n\r\n        return entity;\r\n\r\n    } else if (typeof value === 'function') {\r\n\r\n    }\r\n\r\n}","import SceneEntity from \"../SceneEntity\";\r\nimport ObjectGet from \"../../utils/object/ObjectGet\";\r\n\r\nexport default function CreateEntityFromObject(value) {\r\n\r\n    let entity = new SceneEntity(value.name || undefined);\r\n\r\n    for (let prop in value)\r\n    {\r\n        if (object.hasOwnProperty(prop)) {\r\n\r\n            if (prop === 'function') // create function\r\n                entity[prop] = value[prop].bind(entity);\r\n            else\r\n                entity[prop] = value[prop];\r\n        }\r\n        \r\n    }\r\n\r\n   \r\n}","import Entity from \"../Entity\";\r\nimport System from \"../../core/system/System\";\r\nimport CreateEntityFrom from \"./CreateEntityFrom\";\r\n\r\nexport default class EntityHierarchy {\r\n\r\n    constructor(game) {\r\n        this.game = game;\r\n        this._entityList = null;\r\n    }\r\n\r\n    get count() {return this._entityList._instances.size;}\r\n\r\n    find(name) {\r\n        \r\n        let instances = [];\r\n        let count = this._entityList._instances.size;\r\n\r\n        for (let i = 0; i < count; i++) {\r\n            if (this._entityList[i].name !== name)\r\n                continue;\r\n\r\n            instances.push(this._entityList[i]);\r\n        }\r\n\r\n        return instances;\r\n\r\n    }\r\n\r\n    findFirst(name) {\r\n        this._entityList.each(entity => {\r\n\r\n            if (entity.name === name)\r\n                return entity;\r\n            \r\n        });\r\n\r\n        return null;\r\n    }\r\n\r\n    findLast(name) {\r\n        \r\n        let count = this._entityList._instances.size;\r\n\r\n        for (let i = count - 1; i >= 0; i--) {\r\n            if (this._entityList[i].name === name)\r\n                return this._entityList[i];\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    get(index) {\r\n        return this._entityList._instances.at(index) || null;\r\n    }\r\n\r\n    create(entityBase, count) {\r\n\r\n        let entity = CreateEntityFrom(entityBase, this.game);\r\n\r\n        \r\n        if (entity['start'] !== undefined && entity['start'] !== null) {\r\n            entity.start.call(entity);\r\n        }\r\n\r\n        this._entityList.add(entity);\r\n\r\n\r\n\r\n        return entity;\r\n    }\r\n\r\n    destroy(entity) {\r\n\r\n    }\r\n\r\n    destroyAt(index) {\r\n\r\n    }\r\n\r\n    clear() {\r\n\r\n    }\r\n\r\n}\r\n\r\nSystem.register('EntityHierarchy', EntityHierarchy, 'entity', function() {\r\n    this._entityList = this.game.system.entityList;\r\n});","\r\nmodule.exports = {\r\n    Entity : require('./Entity'),\r\n    SceneEntity : require('./SceneEntity'),\r\n    EntityUpdateList : require('./EntityUpdateList'),\r\n    EntityFactory : require('./EntityFactory'),\r\n    Hierarchy : require('./hierarchy/EntityHierarchy')\r\n}","\r\nimport DataMap from '../structures/Map';\r\nimport Signal from './Signal';\r\nimport Validate from '../utils/Validate';\r\nimport GameEvents from './GameEvents';\r\nimport System from '../core/system/System';\r\n\r\nexport default class EventManager {\r\n\r\n    constructor() {\r\n        this._signalsMap = new DataMap();\r\n    }\r\n\r\n    create(eventName) {\r\n\r\n        let has = this._signalsMap.get(eventName);\r\n\r\n        if (has !== undefined && has != null) return has;\r\n\r\n        let signal = new Signal();\r\n\r\n        this._signalsMap.set(eventName, signal);\r\n\r\n        return signal;\r\n    }\r\n\r\n    subscribe(eventName, delegate, context, priority) {\r\n\r\n        let signal = this._signalsMap.get(eventName);\r\n\r\n        if (signal === undefined || signal === null) {\r\n            console.warn(\"EventManager.subscribe: There is no registered event called \\'\" + eventName + '\\'.');\r\n            return this;\r\n        }\r\n\r\n        if (!Validate.isFunction(delegate)) {\r\n            console.warn(\"EventManager.subscribe: The variable is not a function.\");\r\n            return this;\r\n        }\r\n\r\n        signal.subscribe(delegate, context, priority);\r\n\r\n        return this;\r\n\r\n    } \r\n\r\n    subscribeOnce(eventName, delegate, context, priority) {\r\n\r\n        let signal = this._signalsMap.get(eventName);\r\n\r\n        if (signal === undefined || signal === null) {\r\n            console.warn(\"EventManager.subscribeOnce: There is no registered event called \\'\" + eventName + '\\'.');\r\n            return this;\r\n        }\r\n\r\n        if (!Validate.isFunction(delegate)) {\r\n            console.warn(\"EventManager.subscribeOnce: The variable \\'\" + eventName +\"\\' is not a function.\");\r\n            return this;\r\n        }\r\n\r\n        signal.subscribeOnce(delegate, context, priority);\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    /**\r\n    * Dispatch to subscribed Signal\r\n    * @param {String} eventName The subscribed Signal name.\r\n    * @param {...*} [params] Parameters that should be passed to each handler.\r\n    */\r\n    dispatch(eventName) {\r\n\r\n        let signal = this._signalsMap.get(eventName);\r\n\r\n        if (signal === undefined || signal === null) {\r\n            //console.warn(\"EventManager.dispatch: There is no registered event called \\'\" + eventName + '\\'.');\r\n            return this;\r\n        }\r\n\r\n\r\n        let args = (arguments.length > 1) ? [arguments[1]] : Array.apply(null, arguments);\r\n\r\n        signal.dispatch(args);\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    has(eventName) {\r\n        return this._signalsMap.has(eventName);\r\n    }\r\n\r\n} \r\n\r\nfunction BulkEventCreation(manager, events) {\r\n\r\n    for (let i = 0; i < events.length; i++) {\r\n        manager.create(events[i]);\r\n    } \r\n\r\n}\r\n\r\n\r\nSystem.register('EventManager', EventManager, 'event', function() {\r\n    BulkEventCreation(this, GameEvents);\r\n})","\r\n// list of events\r\nconst GameEvents = [\r\n    '__render_depthsorting',\r\n    '__render_layeridchange',\r\n    'transition_pause_end',\r\n    'transition_end'\r\n];\r\n\r\nObject.freeze(GameEvents);\r\n\r\nexport default GameEvents;","/** @license\r\n * JS Signals <http://millermedeiros.github.com/js-signals/>\r\n * Released under the MIT license\r\n * Author: Miller Medeiros\r\n * Version: ::VERSION_NUMBER:: - Build: ::BUILD_NUMBER:: (::BUILD_DATE::)\r\n*/\r\n\r\nimport DataList from '../structures/List'\r\nimport SignalBinding from './SignalBinding'\r\nimport IndexOfListener from './components/IndexOfListener';\r\nimport ValidateListener from './components/ValidateListener';\r\nimport RegisterListener from './components/RegisterListener';\r\nimport Validate from '../utils/Validate';\r\n\r\n\r\n\r\n// Based on https://github.com/millermedeiros/js-signals\r\n /**\r\n * Custom event broadcaster\r\n * Inspired by Robert Penner's AS3 Signals.\r\n * @name Signal\r\n * @author Miller Medeiros\r\n * @class\r\n */\r\nexport default class Signal {\r\n\r\n    /**\r\n     * @constructor\r\n     */\r\n    constructor() {\r\n        this._bindings = new DataList();\r\n        this.active = true;\r\n        this._shouldPropagate = true;\r\n    }\r\n\r\n    set propagate(value) {this._shouldPropagate = value;}\r\n    get propagate() {return this._shouldPropagate;}\r\n    get count() {return this._bindings.size;}\r\n\r\n\r\n    /**\r\n     * Check if listener was attached to Signal.\r\n     * @param {Function} listener The listener\r\n     * @param {Object} [context] Context\r\n     * @return {boolean} if Signal has the specified listener.\r\n     */\r\n    has(listener, context) {\r\n        return IndexOfListener(this, listener, context) !== -1;\r\n    }\r\n\r\n    /**\r\n     * Add a listener to the signal.\r\n     * @param {Function} listener Signal handler function.\r\n     * @param {Object} [listenerContext] Context on which listener will be executed (object that should represent the `this` variable inside listener function).\r\n     * @param {Number} [priority] The priority level of the event listener. Listeners with higher priority will be executed before listeners with lower priority. Listeners with same priority level will be executed at the same order as they were added. (default = 0)\r\n     * @return {Signal} return this signal.\r\n     */\r\n    subscribe(listener, context, priority) {\r\n        ValidateListener(listener, 'subscribe');\r\n        RegisterListener(this, listener, context, priority, false);\r\n        return this;\r\n    }\r\n\r\n    subscribeOnce(listener, context, priority) {\r\n        ValidateListener(listener, 'subscribeOnce');\r\n        RegisterListener(this, listener, context, priority, true);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Remove a single listener from the dispatch queue.\r\n     * @param {Function} listener Handler function that should be removed.\r\n     * @param {Object} [context] Execution context (since you can add the same handler multiple times if executing in a different context).\r\n     * @return {Function} Listener handler function.\r\n     */\r\n    unsubscribe(listener, context) {\r\n        ValidateListener(listener, 'unsubscribe');\r\n\r\n        let i = IndexOfListener(this, listener, context);\r\n        if (i !== -1) {\r\n            this._bindings.at(i)._destroy();\r\n            this._bindings.eraseAt(i);\r\n           \r\n        }\r\n\r\n        return listener;\r\n    }\r\n\r\n    unsubscribeAll() {\r\n\r\n    }\r\n\r\n     /**\r\n    * Dispatch/Broadcast Signal to all listeners added to the queue.\r\n    * @param {...*} [params] Parameters that should be passed to each handler.\r\n    */\r\n    dispatch(params) {\r\n        if (!this.active)\r\n            return;\r\n        \r\n        let size = this._bindings.length;\r\n\r\n        if (!size)\r\n            return;\r\n\r\n        let paramsSize = arguments.length;\r\n\r\n        if (paramsSize > 1)\r\n        {\r\n            params = Array.prototype.slice.call(arguments);\r\n        }\r\n\r\n        let binds = this._bindings.childs.slice();\r\n\r\n        do { size--; } \r\n        while (binds[size] && this._shouldPropagate && binds[size].execute(params) !== false);\r\n    }\r\n\r\n    destroy() {\r\n        this.unsubscribeAll();\r\n        delete this._bindings;\r\n    }\r\n\r\n}","\r\n\r\nexport default class SignalBinding {\r\n    \r\n    constructor(signal, listener, listenerContext, priority, once) {\r\n\r\n        this._signal = signal;\r\n        this._listener = listener;\r\n        this._context = listenerContext;\r\n        this._priority = priority || 0;\r\n        this.active = true;\r\n        this.args = undefined;\r\n        this._isOnce = once || false;\r\n    }\r\n\r\n    get isOnce() {return this._isOnce;}\r\n    get listener() { return this._listener; }\r\n    get signal() {return this._signal;}\r\n\r\n    execute(argsArray) {\r\n        let handlerReturn, params;\r\n\r\n            if (this.active && !!this._listener) {\r\n\r\n                params = this.args ? this.args.concat(argsArray) : argsArray;\r\n                handlerReturn = this._listener.apply(this._context, params);\r\n                if (this._isOnce) {\r\n                    this.detach();\r\n                   \r\n                }\r\n\r\n            }\r\n        return handlerReturn;\r\n    }\r\n\r\n    \r\n\r\n    detach() {\r\n        if (!this.isBound())\r\n            return;\r\n        this._signal.unsubscribe(this._listener, this._context);\r\n        \r\n    }\r\n\r\n     /**\r\n         * @return {Boolean} `true` if binding is still bound to the signal and have a listener.\r\n         */\r\n    isBound() {\r\n        return (!!this._signal && !!this._listener);\r\n    }\r\n\r\n     /**\r\n         * Delete instance properties\r\n         * @private\r\n         */\r\n    _destroy() {\r\n        delete this._signal;\r\n        delete this._listener;\r\n        delete this.context;\r\n    }\r\n\r\n}","\r\n   \r\n\r\nexport default function AddBinding(signal, binding) {\r\n\r\n        let n = signal._bindings.length;\r\n\r\n        do { --n; } while (signal._bindings.at(n) && binding._priority <= signal._bindings.at(n)._priority);\r\n\r\n        signal._bindings.insert(binding,n);\r\n}\r\n","\r\nexport default function IndexOfListener(signal, listener, context) {\r\n \r\n    let r = signal._bindings.each(function (element, index) {\r\n        \r\n        if (element._listener === listener && element._context === context) {\r\n            return index;\r\n        }\r\n        \r\n    });\r\n\r\n\r\n    if (r === undefined)\r\n        r = -1;\r\n\r\n    return r;\r\n}","import SignalBinding from \"../SignalBinding\";\r\nimport IndexOfListener from \"./IndexOfListener\";\r\nimport AddBinding from \"./AddBinding\";\r\n\r\nexport default function RegisterListener(signal, listener, listenerContext, priority, isOnce) {\r\n\r\n    let binding = null;\r\n    let index = IndexOfListener(signal, listener, listenerContext);\r\n\r\n    if (index !== -1) {\r\n        binding = signal._bindings[index];\r\n        if (binding.isOnce !== isOnce) {\r\n            throw new Error('You cannot add'+ (isOnce? '' : 'Once') +'() then add'+ (!isOnce? '' : 'Once') +'() the same listener without removing the relationship first.');\r\n        }\r\n    } else {\r\n\r\n        binding = new SignalBinding(signal, listener, listenerContext, priority, isOnce);\r\n        AddBinding(signal, binding);\r\n    }\r\n\r\n    return binding;\r\n    \r\n}","\r\nexport default function ValidateListener(listener, func) \r\n{\r\n    if (typeof listener !== 'function') \r\n        throw new Error( 'Signal.{fn}: Listener should be a function.'.replace('{fn}', func) );\r\n    \r\n}","\r\nmodule.exports = {\r\n    Signal : require('./Signal'),\r\n    EventManager : require('./EventManager')\r\n};","\r\nimport Keyboard from \"./keyboard/Keyboard\";\r\nimport Mouse from \"./mouse/Mouse\";\r\n\r\nexport default class Input {\r\n\r\n  constructor(game) {\r\n\r\n  this.game = game;\r\n  this.mouse = null;\r\n  this.keyboard = null;\r\n\r\n  }\r\n\r\n  init() {\r\n\r\n    //this.mouse = new tobiJS.Mouse(this.game);\r\n    this.keyboard = new Keyboard(this.game);\r\n    this.mouse = new Mouse(this.game);\r\n    this.keyboard.init();\r\n    this.mouse.init();\r\n\r\n  }\r\n\r\n  update() {\r\n\r\n    this.keyboard.update();\r\n    this.mouse.update();\r\n\r\n  }\r\n\r\n  reset()\r\n  {\r\n    this.keyboard.reset();\r\n    this.mouse.reset();\r\n  }\r\n\r\n}\r\n","\r\nmodule.exports = {\r\n\r\n    Key : require('./keyboard/Key'),\r\n    Keyboard : require('./keyboard/Keyboard'),\r\n    Mouse : require('./mouse/Mouse'),\r\n    Input : require('./Input')\r\n    \r\n}","\r\n\r\nimport KeyEvent from './KeyEvent'\r\n\r\nexport default class Key {\r\n    \r\n    constructor(keycode, game) {\r\n\r\n        this.game = game;\r\n        this.keyCode = keycode; \r\n\r\n        this._enabled = true;       \r\n        this.status = false;\r\n        this.press = false;\r\n        this.release = false;\r\n\r\n        this.preventDefault = true;\r\n\r\n        this._event = KeyEvent.NONE;\r\n\r\n        this.pressTime = 0;\r\n        this.pressDuration = -2500;\r\n        this.releaseTime = 0;\r\n        this.releaseDuration = -2500;\r\n\r\n    }\r\n\r\n    get event() {\r\n        return this._event;\r\n    }\r\n\r\n    get enabled() {return this._enabled;}\r\n    set enabled(value) {\r\n        value = !!value;\r\n\r\n        if (value !== this._enabled)\r\n        {\r\n            if (!value)\r\n                this.reset();\r\n\r\n            this._enabled = value;\r\n        }\r\n    }\r\n\r\n\r\n    /*update() {\r\n        if (!this._enabled)\r\n            return;\r\n\r\n        if (this.press) {\r\n            this.pressDuration = this.game.time.time - this.pressTime;\r\n            \r\n        } else {\r\n            this.releaseDuration = this.game.time.time - this.releaseTime;\r\n        }\r\n\r\n\r\n        if (this.press) {\r\n            if (this.pressDuration == 0) {\r\n                this._event = KeyEvent.PRESSED;\r\n            }\r\n\r\n        } else {\r\n\r\n            if (this.releaseDuration == 0) {\r\n                this._event = KeyEvent.RELEASED;\r\n            } else {\r\n                this._event = KeyEvent.IDLE;\r\n            }\r\n\r\n        }\r\n\r\n    }*/\r\n\r\n    isPressing() {\r\n        return this.status;\r\n    }\r\n\r\n    isPressed() {\r\n        return (this.press && this.pressDuration === 0);\r\n    }\r\n\r\n    isReleased() {\r\n        return (!this.press && this.releaseDuration === 0)\r\n    }\r\n\r\n\r\n\r\n    reset()\r\n    {   \r\n        this.status = false;\r\n        this._event = KeyEvent.NONE;\r\n        this.press = false;\r\n        this.release = false;\r\n    \r\n        this.pressTime = 0;\r\n        this.pressDuration = -2500;\r\n        this.releaseTime = 0;\r\n        this.releaseDuration = -2500;\r\n    }\r\n\r\n\r\n};\r\n\r\n\r\n\r\n  \r\n","\r\nconst KeyCode = {\r\n    Backspace: 8,\r\n    Tab: 9,\r\n    Enter: 13,\r\n    Shift: 16,\r\n    Ctrl: 17,\r\n    Alt: 18,\r\n    Pause: 19,\r\n    CapsLock: 20,\r\n    Escape: 27,\r\n    Space:32,\r\n    PageUp: 33,\r\n    PageDown: 34,\r\n    End: 35,\r\n    Home: 36,\r\n    Left: 37,\r\n    Up: 38,\r\n    Right: 39,\r\n    Down: 40,\r\n    Insert: 45,\r\n    Delete:\t46,\r\n    Num0: 48,\r\n    Num1: 49,\r\n    Num2: 50,\r\n    Num3: 51,\r\n    Num4: 52,\r\n    Num5:\t53,\r\n    Num6: 54,\r\n    Num7: 55,\r\n    Num8: 56,\r\n    Num9: 57,\r\n    A: 65,\r\n    B: 66,\r\n    C: 67,\r\n    D: 68,\r\n    E: 69,\r\n    F: 70,\r\n    G: 71,\r\n    H: 72,\r\n    I: 73,\r\n    J: 74,\r\n    K: 75,\r\n    L: 76,\r\n    M: 77,\r\n    N: 78,\r\n    O: 79,\r\n    P: 80,\r\n    Q: 81,\r\n    R: 82,\r\n    S: 83,\r\n    T: 84,\r\n    U: 85,\r\n    V: 86,\r\n    W: 87,\r\n    X: 88,\r\n    Y: 89,\r\n    Z: 90,\r\n    LSystem: 91,\r\n    RSystem: 92,\r\n    SelectK:\t93,\r\n    Numpad0: 96,\r\n    Numpad1: 97,\r\n    Numpad2: 98,\r\n    Numpad3: 99,\r\n    Numpad4: 100,\r\n    Numpad5: 101,\r\n    Numpad6: 102,\r\n    Numpad7: 103,\r\n    Numpad8: 104,\r\n    Numpad9: 105,\r\n    Multiply: 106,\r\n    Add: 107,\r\n    Subtract: 109,\r\n    DecimalPoint: 110,\r\n    Divide: 111,\r\n    F1:\t112,\r\n    F2:\t113,\r\n    F3:\t114,\r\n    F4:\t115,\r\n    F5:\t116,\r\n    F6:\t117,\r\n    F7:\t118,\r\n    F8:\t119,\r\n    F9:\t120,\r\n    F10: 121,\r\n    F11: 122,\r\n    F12: 123,\r\n    NumLock: 144,\r\n    ScrollLock: 145,\r\n    SemiColon: 186,\r\n    Equal: 187,\r\n    Comma: 188,\r\n    Dash: 189,\r\n    Period:\t190,\r\n    Slash: 191,\r\n    LBraket: 219,\r\n    BackSlash: 220,\r\n    RBracket: 221,\r\n    Quote: 222,\r\n};\r\n    \r\nmodule.exports = KeyCode;","\r\nconst KeyEvent = {\r\n    NONE : -1,\r\n    IDLE: 0,\r\n    PRESSED : 1,\r\n    RELEASED : 2,\r\n};\r\n\r\nexport default KeyEvent;","\r\nimport DataMap from '../../structures/Map'\r\nimport DataList from '../../structures/List';\r\nimport Key from './Key'\r\nimport KeyCode from './KeyCode'\r\nimport KeyEvent from './KeyEvent'\r\nimport ProcessKeyPress from './components/ProcessKeyPress';\r\nimport ProcessKeyRelease from './components/ProcessKeyRelease';\r\n\r\nexport default class Keyboard {\r\n  \r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    this._enabled = true;\r\n    this.eventTarget = null;\r\n    this.eventHandler = null;\r\n    this._eventQueue = new DataList();\r\n    this._keyMapping = new DataMap();\r\n    //this._keyWatch = new DataMap();\r\n    //this._keyGarbage = [];\r\n    this.lastKey = null;\r\n\r\n  }\r\n\r\n  get enabled() {return this._enabled;}\r\n  set enabled(value) {\r\n      value = !!value;\r\n\r\n      if (value !== this._enabled)\r\n      {\r\n          if (!value)\r\n              this.reset();\r\n\r\n          this._enabled = value;\r\n      }\r\n  }\r\n\r\n  reset() {\r\n\r\n    this._keyMapping.clear();\r\n    for (var prop in KeyCode){\r\n\r\n      if (KeyCode.hasOwnProperty(prop)) {\r\n        var value = KeyCode[prop];\r\n        this._keyMapping.set(value, new Key(value, this.game));\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  init() {\r\n\r\n    this.reset();\r\n\r\n    // window;\r\n    this.eventTarget = document; //this.game.system.render.canvas;\r\n\r\n    var self = this;\r\n\r\n    // key event handler\r\n    let handler = function(event) {\r\n\r\n      if (event.defaultPrevented) {\r\n          return;\r\n      }\r\n\r\n      self._eventQueue.push(event);\r\n\r\n      //event.preventDefault();\r\n\r\n    }\r\n\r\n    this.eventHandler = handler;\r\n\r\n    this.eventTarget.addEventListener('keydown', handler, false);\r\n    this.eventTarget.addEventListener('keyup', handler, false);\r\n  }\r\n\r\n  stop() {\r\n\r\n    this.eventTarget.removeEventListener('keydown', this.eventHandler);\r\n    this.eventTarget.removeEventListener('keyup', this.eventHandler);\r\n    this._onKeyDown = null;\r\n    this._onKeyUp = null;\r\n    this._onKeyPress = null;\r\n\r\n    this._keyMapping.clear();\r\n  }\r\n\r\n  update() {\r\n\r\n    let eventSize = this._eventQueue.size;\r\n\r\n    if (!this._enabled || eventSize === 0)\r\n      return;\r\n\r\n    // clear and copy queue\r\n    let queue = this._eventQueue.splice(0,eventSize);\r\n\r\n    // process key events\r\n    for (let i = 0; i < eventSize; i++) {\r\n      var event = queue[i];\r\n      var keycode = event.keyCode;\r\n\r\n      // check if is valid scintilla key\r\n      let key = this._keyMapping.get(keycode)\r\n\r\n      if (key !== undefined || key !== null) {\r\n\r\n        if (event.type === 'keydown') {\r\n\r\n          // /*&& (this._keyMapping.at(keycode) === undefined || this._keyMapping[keycode].press === false)*/\r\n          ProcessKeyPress(event, key);\r\n\r\n        } else { // if (event.type === 'keyup') {\r\n          ProcessKeyRelease(event, key);\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  pressed(keycode) {\r\n    return this._keyMapping.get(keycode).isPressed();\r\n  }\r\n\r\n  release(keycode) {\r\n    return this._keyMapping.get(keycode).isReleased();\r\n  }\r\n\r\n  press(keycode) {\r\n    return this._keyMapping.get(keycode).status;\r\n  }\r\n}\r\n\r\n \r\n\r\n   /* this._keyWatch.each(function (key, value) {\r\n        //var value = this._keyWatch.get(key);\r\n        value.update();\r\n\r\n        //console.log(value);\r\n\r\n        if (value.event == KeyEvent.IDLE)\r\n        {\r\n            self._keyGarbage.push(key);\r\n        }\r\n    });\r\n\r\n      if (this._keyGarbage.length > 0)\r\n      {\r\n        this._keyWatch.deleteByIndexedArray(this._keyGarbage);\r\n        this._keyGarbage.splice(0, this._keyGarbage.length)\r\n      }*/\r\n","\r\n export default function ProcessKeyPress(event, key) { \r\n\r\n  if (key.preventDefault) \r\n      event.preventDefault();\r\n  \r\n  if (!key._enabled)\r\n    return;\r\n\r\n  if (key.press === false)\r\n  {\r\n\r\n      // set key properties\r\n      key.status = true;\r\n      key.press = true;\r\n      key.release = false;\r\n      // set press time duration\r\n      key.pressTime = event.timeStamp;//this.game.time.time;\r\n      key.pressDuration = 0;\r\n      key.releaseDuration = key.pressTime - key.releaseTime;\r\n  }\r\n\r\n    //this.lastKey = key;\r\n\r\n\r\n\r\n    /*var keyObj = this._keyMapping.get(key);\r\n    keyObj.onKeyDown();\r\n\r\n    if (!this._keyWatch.has(key))\r\n    {\r\n      this._keyWatch.set(key, keyObj);\r\n    }*/\r\n\r\n    //_keyMapping[]\r\n    //this._keys[key] = true;\r\n    /* if (this._keyLockPressed[key] != scintilla.KeyEvent.PRESSED && this._keyLockPressed[key] != scintilla.KeyEvent.PRESS) {\r\n      this._keyLockPressed[key] = scintilla.KeyEvent.PRESSED;\r\n      this._keyDownDuration[key] = 1;\r\n    }\r\n\r\n    this._keyLock[key] = scintilla.KeyEvent.PRESS;\r\n    this._keys[key] = true;\r\n    */\r\n\r\n\r\n  }","\r\nexport default function ProcessKeyRelease(event, key) {\r\n\r\n\r\n  if (key.preventDefault) \r\n    event.preventDefault();\r\n\r\n  if (!key._enabled)\r\n    return;\r\n  \r\n  // set key properties\r\n  key.status = false;\r\n  key.press = false;\r\n  key.release = true;\r\n\r\n  // set press time duration\r\n  key.releaseTime = event.timeStamp;\r\n  key.pressDuration = key.releaseTime - key.pressTime;\r\n  key.releaseDuration = 0;\r\n\r\n}","\r\n\r\nimport MouseButton from './MouseButton'\r\n  \r\n  export const MouseEvent = {\r\n  NONE : 0,\r\n  PRESS : 1,\r\n  PRESSED : 2,\r\n  RELEASE : 3\r\n  };\r\n\r\n\r\n  \r\n\r\nexport default class Mouse {\r\n  \r\n  constructor(game) {\r\n\r\n    this.x = 0;\r\n    this.y = 0;\r\n    this.game = game;\r\n    this.canvas = game.system.render.canvas;\r\n    this.button = 0;\r\n    this.wheelDelta = 0;\r\n    this.active = true;\r\n\r\n    this._mouseButtons = [];\r\n    this._mouseButtonsLocks = [];\r\n    this._mouseButtonsLocksPressed = [];\r\n    this._mouseDownDuration = [];\r\n\r\n    //callbacks\r\n    this._onMouseDown = null;\r\n    this._onMouseMove = null;\r\n\r\n    this.reset();\r\n  }\r\n\r\n  reset() {\r\n\r\n    for (var i = 0; i < 3; i++){\r\n\r\n\r\n            this._mouseButtons[i] = false;\r\n            this._mouseButtonsLocks[i] = MouseEvent.NONE;\r\n            this._mouseButtonsLocksPressed[i] = MouseEvent.NONE;\r\n            this._mouseDownDuration[i] = 0;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  init() {\r\n\r\n\r\n    var self = this;\r\n\r\n    this._onMouseDown = function (event) {\r\n            return self.onMouseDown(event);\r\n    };\r\n\r\n    this._onMouseUp = function (event) {\r\n            return self.onMouseUp(event);\r\n    };\r\n\r\n    this._onMouseMove = function (event) {\r\n            return self.onMouseMove(event);\r\n    };\r\n\r\n    this.canvas.addEventListener('mousedown', this._onMouseDown, true);\r\n    this.canvas.addEventListener('mousemove', this._onMouseMove, true);\r\n    this.canvas.addEventListener('mouseup', this._onMouseUp, true);\r\n    this.canvas.addEventListener('mouseover', this._onMouseOver, true);\r\n    this.canvas.addEventListener('mouseout', this._onMouseOut, true);\r\n\r\n  }\r\n\r\n  onMouseMove(event) {\r\n\r\n    if (!this.active)\r\n      return;\r\n\r\n\r\n    var rect = this.canvas.getBoundingClientRect();\r\n\r\n\r\n    this.x = Math.floor((event.clientX-rect.left)/(rect.right-rect.left)*this.canvas.width);\r\n    this.y = Math.floor((event.clientY-rect.top)/(rect.bottom-rect.top)*this.canvas.height);\r\n    //this.x = event.clientX - rect.left;\r\n    //this.y = event.clientY - rect.top;\r\n\r\n  }\r\n\r\n  onMouseDown(event) {\r\n\r\n    if (!this.active)\r\n      return;\r\n\r\n\r\n\r\n    var value = event.button;\r\n\r\n    if (this._mouseButtonsLocksPressed[value] != MouseEvent.PRESSED && this._mouseButtonsLocksPressed[value] != MouseEvent.PRESS) {\r\n      this._mouseButtonsLocksPressed[value] = MouseEvent.PRESSED;\r\n      this._mouseDownDuration[value] = 1;\r\n    }\r\n\r\n    this._mouseButtons[value] = true;\r\n    this._mouseButtonsLocks[value] = MouseEvent.PRESS;\r\n\r\n    event.preventDefault();\r\n\r\n  }\r\n\r\n  onMouseUp(event) {\r\n\r\n    if (!this.active)\r\n      return;\r\n\r\n    var value = event.button;\r\n\r\n    this._mouseButtons[value] = false;\r\n    this._mouseButtonsLocks[value] = MouseEvent.RELEASE;\r\n    this._mouseButtonsLocksPressed[value] = MouseEvent.NONE;\r\n\r\n    event.preventDefault();\r\n\r\n\r\n  }\r\n\r\n  pressed(button) {\r\n\r\n    var buttonLock = false;\r\n\r\n    if (this._mouseButtonsLocksPressed[button] == MouseEvent.PRESSED) {\r\n      buttonLock = true;\r\n      this._mouseButtonsLocksPressed[button] = MouseEvent.PRESS;\r\n    }\r\n\r\n    var hit = this._mouseButtons[button] && buttonLock;\r\n\r\n    return hit;\r\n\r\n  }\r\n\r\n  release(button) {\r\n\r\n    var buttonLock = false;\r\n\r\n  \tif (this._mouseButtonsLocks[button] ==  MouseEvent.PRESSED ||\r\n        this._mouseButtonsLocks[button] ==  MouseEvent.PRESS ||\r\n        this._mouseButtonsLocks[button] ==  MouseEvent.NONE)\r\n  \t\tbuttonLock = false;\r\n  \telse\r\n  \t\tbuttonLock = true;\r\n\r\n  \tvar hit = !this._mouseButtons[button] && buttonLock;\r\n\r\n  \tthis._mouseButtonsLocks[button] = MouseEvent.NONE;\r\n\r\n  \treturn hit;\r\n\r\n  }\r\n\r\n  press(button) {\r\n\r\n    var buttonLock = false;\r\n\r\n    if (this._mouseButtonsLocks[button] ==  MouseEvent.RELEASE ||\r\n      this._mouseButtonsLocks[button] ==  MouseEvent.NONE)\r\n      buttonLock = false;\r\n    else\r\n      buttonLock = true;\r\n\r\n    var hit = this._mouseButtons[button] && buttonLock;\r\n\r\n    return hit;\r\n\r\n\r\n  }\r\n\r\n  update() {\r\n\r\n    for (var i = 0; i < this._mouseButtons.length; i++) {\r\n\r\n          if (this._mouseButtonsLocksPressed[i] ==  MouseEvent.PRESSED) {\r\n              if (this._mouseDownDuration[i] > 0)\r\n                this._mouseDownDuration[i]--;\r\n              else\r\n                this._mouseButtonsLocksPressed[i] = MouseEvent.PRESS;\r\n          } else\r\n            continue;\r\n\r\n\r\n    }\r\n\r\n  }\r\n\r\n  posRelativeTo(object) {\r\n\r\n    var vec2 = {x:0,y:0};\r\n\r\n    vec2.x = this.x - object.x;\r\n    vec2.y = this.y - object.y;\r\n\r\n\r\n    return vec2;\r\n\r\n  }\r\n\r\n\r\n}\r\n\r\n","\r\nexport const MouseButton = {\r\n    Left : 0,\r\n    Middle : 1,\r\n    Right : 2,\r\n    WheelUp : 3,\r\n    WheelDown : 4\r\n};","\r\nconst AssetsType = {\r\n    'none' : 0,\r\n    'image' : 1,\r\n    'audio' : 2,\r\n    'text' : 3,\r\n    'svg' : 4,\r\n    'script' : 5,\r\n    'json' : 6,\r\n    'webFont' : 7,\r\n    'tilemapJSON' : 8,\r\n}\r\n\r\nexport default AssetsType;","\r\nimport ObjectGet from '../utils/object/ObjectGet'\r\nimport XHR from './XHR'\r\nimport LoaderState from './LoaderState'\r\nimport AssetsType from './AssetsType';\r\nimport NextAsset from './components/NextAsset';\r\nimport Path from '../utils/Path'\r\n\r\nexport default class File {\r\n\r\n    constructor(config) {\r\n\r\n        this.type = ObjectGet.value(config, 'type', null);\r\n        this.tag = ObjectGet.value(config, 'tag', null);\r\n        this.useExternal =  ObjectGet.value(config, 'useExternal', false);\r\n\r\n        if (this.type == null || this.tag == null)\r\n        {\r\n            throw new Error('Loader.File: Invalid tag \\\"' + tag + \"\\\".\");\r\n        }\r\n\r\n        this.url = ObjectGet.value(config, 'url', undefined);\r\n\r\n        if (this.url === undefined)\r\n            this.url = ObjectGet.value(config, 'path', '') + this.tag + '.' + ObjectGet.value(config, 'ext', '');\r\n        else if (typeof(this.url) !== 'function')\r\n        {\r\n            if (!this.useExternal || this.useExternal !== undefined)\r\n                this.url = ObjectGet.value(config, 'path', '').concat(this.url);\r\n\r\n        }\r\n\r\n        // Web fonts is managed by WebFontLoader provided by google\r\n        // There is no need to create XHR settings and request\r\n        if (this.type !== AssetsType.webFont) {\r\n\r\n            this.xhrSettings = XHR.createSettings(ObjectGet.value(config, 'responseType', undefined));\r\n            \r\n            if (ObjectGet.value(config, 'xhrSettings', false))\r\n                this.xhrSettings = XHR.merge(this.xhrSettings, ObjectGet.value(config, 'xhrSettings', {}));\r\n        }\r\n\r\n\r\n        this.loader = null;\r\n        this.state = LoaderState.PENDING;\r\n        this.totalBytes = 0;\r\n        this.loadedBytes = 0;\r\n        this.progress = 0;\r\n        this.data = undefined;\r\n        this.source = null;\r\n        this.xhrRequest = null;\r\n        this.config = ObjectGet.value(config,'config',{});\r\n        this.crossOrigin = undefined;\r\n\r\n        this.onComplete = undefined;\r\n\r\n    }\r\n\r\n    load(gameLoader) {\r\n        this.loader = gameLoader;\r\n\r\n        if (this.state === LoaderState.FINISHED) {\r\n            this.onDone();\r\n\r\n            NextAsset.call(this.loader, this);\r\n            //this.loader.next(this);\r\n            \r\n        }\r\n        else\r\n        {\r\n\r\n            this.source = Path.getURL(this.url, gameLoader.baseURL);\r\n            \r\n            if (this.source.indexOf('data:') === 0 || this.source == null)\r\n            {\r\n                console.warn(\"Loader.File.load: unsupported URI.\");\r\n            }\r\n            else\r\n            {\r\n                this.xhrRequest = XHR.createFileRequest(this, gameLoader.xhr);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    onLoad(event) {\r\n       \r\n        this.XHRreset();\r\n\r\n        if (event.target && event.target.status !== 200)\r\n        {\r\n            NextAsset.call(this.loader, this);\r\n\r\n        } else {\r\n            \r\n            if (this.onPostLoad !== undefined)\r\n                this.onPostLoad(this.loader, this.xhrRequest);\r\n\r\n            NextAsset.call(this.loader, this);\r\n        }\r\n      \r\n    }\r\n\r\n    onError(event)\r\n    {\r\n        console.error(\"Loader.File: Error on load file: \\\"\" + this.url + \"\\\".\")\r\n\r\n        this.XHRreset();\r\n\r\n        NextAsset.call(this.loader, this);\r\n    }\r\n\r\n    onProgress(event)\r\n    {\r\n        if (event.lengthComputable)\r\n        {\r\n            this.loadedBytes = event.loaded;\r\n            this.totalBytes = event.total;\r\n\r\n            this.progress = Math.min((this.loadedBytes / this.totalBytes), 1);\r\n\r\n        }\r\n    }\r\n\r\n    onDone() {\r\n        this.state = LoaderState.DONE;\r\n\r\n        this.loader.event.dispatch('oncomplete_' + this.tag);\r\n\r\n    }\r\n\r\n    onProcessing(processingCallback)\r\n    {\r\n        this.state = LoaderState.PROCESSING;\r\n\r\n        this.onDone();\r\n\r\n        processingCallback(this);\r\n    }\r\n\r\n\r\n    XHRreset()\r\n    {\r\n        if (this.xhrRequest)\r\n        {\r\n            this.xhrRequest.onload = undefined;\r\n            this.xhrRequest.onerror = undefined;\r\n            this.xhrRequest.onprogress = undefined;\r\n            //this.xhrRequest.onreadystatechange = undefined;\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n","\r\nexport default class ListInjector {\r\n\r\n    constructor()\r\n    {\r\n        this.list = {};\r\n    }\r\n\r\n    inject(toObj)\r\n    {\r\n        for (var key in this.list)\r\n        {\r\n            toObj[key] = this.list[key];\r\n        }\r\n    }\r\n\r\n    register(key, func)\r\n    {\r\n        this.list[key] = func;\r\n    }\r\n\r\n    destroyfunction()\r\n    {\r\n        this.list = {};\r\n    }\r\n\r\n};","\r\n\r\nimport System from '../core/system/System';\r\nimport ObjectGet from '../utils/object/ObjectGet';\r\nimport XHR from './XHR'\r\nimport AssetTypeHandler from './assets/AssetTypeHandler';\r\nimport LoaderState from './LoaderState'\r\nimport InitializeLoader from './components/InitializeLoader';\r\n\r\n\r\n\r\n// Class LoaderManager\r\nexport default class LoadManager {\r\n  \r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    this.cache = null;\r\n\r\n    this._filesQueue = null;\r\n    this._filesLoading = null;\r\n    this._successFiles = null;\r\n    this._failedFiles = null;\r\n    this._processedFiles = null;\r\n\r\n    this._filesQueueCount = null;\r\n    this._loadedFilesCount = null;\r\n\r\n    this.isDownloading = false;\r\n    this._totalFiles = 0;\r\n\r\n    this.progress = null;\r\n    this.path = null;\r\n    this.baseURL = null;\r\n    this.state = null;\r\n    this.webFontLoader = undefined;\r\n    this.event = null;\r\n    this.crossOrigin = undefined;\r\n\r\n    let gameConfig = game.config.loader;\r\n\r\n    this.xhr = XHR.createSettings(\r\n      ObjectGet.value(config, 'responseType', gameConfig.responseType),\r\n      ObjectGet.value(config, 'async', gameConfig.async),\r\n      //scintilla.ObjectGet.propertyValue(config, 'user', gameConfig.loaderUser),\r\n      //scintilla.ObjectGet.propertyValue(config, 'password', gameConfig.loaderPassword),\r\n      ObjectGet.value(config, 'timeout', gameConfig.timeout)\r\n  );\r\n  \r\n\r\n    AssetTypeHandler.inject(this);\r\n\r\n  }\r\n\r\n  get totalQueuedFiles() {\r\n    return this._filesQueueCount - this._loadedFilesCount;\r\n  }\r\n\r\n\r\n\r\n\r\n  setPath(path) {\r\n    if (path !== '' && path.substr(-1) !== '/')\r\n        path = path.concat('/');\r\n\r\n    this.path = path;\r\n\r\n    return this;\r\n  }\r\n\r\n  setBaseURL(baseUrl) {\r\n    if (baseUrl !== '' && baseUrl.substr(-1) !== '/')\r\n    {\r\n      baseUrl = baseUrl.concat('/');\r\n    }\r\n\r\n    this.baseURL = baseUrl || '';\r\n\r\n    return this;\r\n  }\r\n\r\n  setCrossOrigin(crossOrigin) {\r\n    this.crossOrigin = crossOrigin;\r\n    return this;\r\n  }\r\n\r\n  reset() {\r\n\r\n    this.isDownloading = false;\r\n    this._filesQueue.clear();\r\n    this._successFiles.clear();\r\n    this._failedFiles.clear();\r\n    this._processedFiles.clear();\r\n\r\n    this._filesQueueCount = 0;\r\n    this._loadedFilesCount = 0;\r\n\r\n    this.progress = 0\r\n    this.state = LoaderState.IDLE;\r\n\r\n  }\r\n\r\n\r\n\r\n  /*end : function() {\r\n\r\n    if (this.state === LoaderState.PROCESSING)\r\n        return;\r\n  \r\n    this.progress = 1;\r\n    this.isDownloading = false;\r\n    this.state = LoaderState.PROCESSING;\r\n\r\n    \r\n    this._filesQueue.clear();\r\n    this._failedFiles.length = 0;\r\n    \r\n    this.processFiles();\r\n\r\n    this._successFiles.clear();\r\n\r\n    this.state = LoaderState.DONE;\r\n    //this.game.scene.preloadComplete();\r\n\r\n  },*/\r\n\r\n\r\n\r\n  loadAsset(file) {\r\n\r\n      if (!file.crossOrigin) {\r\n          file.crossOrigin = this.crossOrigin;\r\n      }\r\n\r\n\r\n    file.load(this);\r\n  }\r\n\r\n  isLoading() {\r\n    return (this.state === LoaderState.LOADING || this.state === LoaderState.PROCESSING);\r\n  }\r\n\r\n  isOK() {\r\n    return (this.state === LoaderState.IDLE || this.state === LoaderState.DONE || this.state === LoaderState.ERROR);\r\n  }\r\n\r\n  downloadIsDone() {\r\n    return (this._filesQueue.length == (this._successCount + this._fileErrorCount));\r\n  }\r\n\r\n\r\n};\r\n\r\nSystem.register('Loader',LoadManager,'load', InitializeLoader);","\r\nconst LoaderState = {\r\n    NONE : 0,\r\n    IDLE : 1,\r\n    PENDING : 2,\r\n    LOADING : 3,\r\n    PROCESSING : 4,\r\n    ERROR : 5,\r\n    FINISHED : 6,\r\n    DONE : 7, \r\n};\r\n\r\nexport default LoaderState;","\r\nconst URLObject = {\r\n\r\n    createFromResponse : function(asset, response, type)\r\n    {\r\n\r\n        if (typeof URL === 'function') {\r\n            asset.src = URL.createObjectURL(response);\r\n        } else  {\r\n            let reader = new FileReader();\r\n\r\n            reader.onload = function ()\r\n            {\r\n                asset.removeAttribute('crossOrigin');\r\n                asset.src = 'data:' + (response.type || type) + ';base64,' + reader.result.split(',')[1];\r\n            };\r\n\r\n            reader.onerror = asset.onerror;\r\n\r\n            reader.readAsDataURL(response);\r\n        }   \r\n    },\r\n\r\n\r\n    revoke : function(data)\r\n    {\r\n        if (typeof URL === 'function')\r\n        {\r\n            URL.revokeObjectURL(data.src);\r\n        }\r\n    }\r\n};\r\n\r\nmodule.exports = URLObject;","\r\n\r\nconst XHR = {\r\n\r\n    createFileRequest(file, settings) {\r\n        var xhrSettings = XHR.merge(settings, file.xhrSettings);\r\n\r\n        var xmlHttpRequest = new XMLHttpRequest();\r\n        xmlHttpRequest.open(\"GET\", file.source, xhrSettings.async);\r\n\r\n        if (file.xhrSettings.responseType !== undefined)\r\n            xmlHttpRequest.responseType = file.xhrSettings.responseType;\r\n\r\n        xmlHttpRequest.timeout = xhrSettings.timeout;\r\n\r\n        xmlHttpRequest.onload = file.onLoad.bind(file);\r\n        xmlHttpRequest.onerror = file.onError.bind(file);\r\n        xmlHttpRequest.onprogress = file.onProgress.bind(file);\r\n        \r\n        if (file.onReadyStateChange !== undefined)\r\n            xmlHttpRequest.onreadystatechange = file.onReadyStateChange.bind(file);\r\n\r\n        xmlHttpRequest.send();\r\n\r\n        return xmlHttpRequest;\r\n    },\r\n\r\n    createSettings(type, doAsync, timeout) {\r\n        if (type === undefined) \r\n            type = '';\r\n\r\n        if (doAsync === undefined) \r\n            doAsync = true;\r\n\r\n        if (timeout === undefined)\r\n            timeout = 0;\r\n\r\n        var settings = {\r\n            responseType: type,\r\n            timeout: timeout,\r\n            async: doAsync,\r\n        }\r\n\r\n        return settings;\r\n    },\r\n\r\n    merge(a, b) {\r\n        var out = {};\r\n\r\n        if (a === undefined)\r\n            out = XHR.createSettings(); // : Extend(global);\r\n        // else\r\n            // do something cool\r\n\r\n        if (b)\r\n        {\r\n            for (let setting in b)\r\n            {\r\n                if (b[setting] !== undefined)\r\n                    out[setting] = b[setting];\r\n            }\r\n        }\r\n    \r\n        return out;\r\n    }\r\n\r\n};\r\n\r\nexport default XHR;\r\n\r\n","\r\nimport ListInjector from '../ListInjector'\r\n\r\nvar AssetTypeHandler = new ListInjector();\r\n\r\nexport default AssetTypeHandler;","\r\nimport LoaderState from '../LoaderState'\r\nimport File from '../File'\r\nimport URLObject from '../URLObject'\r\nimport ObjectGet from '../../utils/object/ObjectGet'\r\nimport Path from '../../utils/Path'\r\nimport AssetsType from '../AssetsType';\r\nimport AddAsset from '../components/AddAsset';\r\nimport AssetTypeHandler from './AssetTypeHandler';\r\n\r\nexport default class ImageFile extends File {\r\n    \r\n\r\n    constructor(tag, url, path, xhrSettings, config)\r\n    {\r\n        let assetTag = null;\r\n        \r\n        if (typeof tag === 'string')\r\n        {\r\n            assetTag = tag;\r\n        }\r\n        else\r\n        {\r\n            assetTag = ObjectGet.value(tag, 'tag', '');\r\n        }\r\n\r\n        let assetConfig = {\r\n            type: AssetsType.image,\r\n            tag: assetTag,\r\n            ext: ObjectGet.value(tag, 'ext', Path.getExtension(url)),\r\n            url: ObjectGet.value(tag, 'file', url),\r\n            path: path,\r\n            responseType: 'blob',\r\n            xhrSettings: ObjectGet.value(tag, 'xhr', xhrSettings),\r\n            config: ObjectGet.value(tag, 'config', config)\r\n        };\r\n\r\n        super(assetConfig);\r\n    }\r\n\r\n    onProcessing(processingCallback)\r\n    {\r\n        this.state = LoaderState.PROCESSING;\r\n        this.data = new Image();\r\n        this.data.crossOrigin = this.crossOrigin;\r\n\r\n\r\n        var self = this;\r\n\r\n        this.data.onload = function () {\r\n\r\n            URLObject.revoke(self.data);\r\n\r\n            self.onDone();\r\n\r\n            processingCallback(self);\r\n        };\r\n\r\n        this.data.onerror = function () {\r\n\r\n            URLObject.revoke(self.data);\r\n\r\n            console.warn(\"Loader.ImageFile: Error on load file: \" + self.url + \".\")\r\n\r\n            self.state = LoaderState.ERROR;\r\n\r\n            processingCallback(self);\r\n\r\n        };\r\n\r\n\r\n        URLObject.createFromResponse(this.data, this.xhrRequest.response, 'image/' + this.config.ext);\r\n    }\r\n\r\n}\r\n\r\nAssetTypeHandler.register('image', function (tag, url, path, xhrSettings, force)\r\n{\r\n\r\n    AddAsset.call(this, new ImageFile(tag, url, this.path, xhrSettings), force);\r\n\r\n    return this;\r\n\r\n});\r\n\r\nmodule.exports = ImageFile;","import File from \"../File\";\r\nimport ObjectGet from \"../../utils/object/ObjectGet\";\r\nimport LoaderState from \"../LoaderState\";\r\nimport AssetsType from \"../AssetsType\";\r\nimport AddAsset from \"../components/AddAsset\";\r\nimport AssetTypeHandler from \"./AssetTypeHandler\";\r\n\r\nexport default class JSONFile extends File {\r\n\r\n    constructor(tag, url, path, xhrSettings, config) {\r\n\r\n        let assetConfig = {\r\n            type: AssetsType.json,\r\n            ext: ObjectGet.value(tag, 'ext', 'json'),\r\n            responseType: 'text',\r\n            tag: tag,\r\n            url: ObjectGet.value(tag, 'file', url),\r\n            path: path,\r\n            xhrSettings: ObjectGet.value(tag, 'xhr', xhrSettings)\r\n        };\r\n\r\n        super(assetConfig);\r\n\r\n        if (typeof assetConfig.url === 'object') {\r\n            this.data = assetConfig.url;\r\n            this.state = LoaderState.DONE;\r\n        }\r\n\r\n    }\r\n\r\n    onProcessing(processingCallback) {\r\n        this.state = LoaderState.PROCESSING;\r\n        this.data = JSON.parse(this.xhrRequest.responseText);\r\n        this.onDone();\r\n        processingCallback(this);\r\n    }\r\n\r\n}\r\n\r\nAssetTypeHandler.register('json', function (tag, url, path, xhrSettings) {\r\n    //this.addAsset(new JSONFile(tag, url, this.path, xhrSettings));\r\n    AddAsset.call(this,new JSONFile(tag, url, this.path, xhrSettings));\r\n    return this;\r\n});","\r\nimport File from \"../File\";\r\nimport ObjectGet from \"../../utils/object/ObjectGet\";\r\nimport AssetsType from \"../AssetsType\";\r\nimport Path from \"../../utils/Path\";\r\nimport LoaderState from \"../LoaderState\";\r\nimport AddAsset from \"../components/AddAsset\";\r\nimport AssetTypeHandler from \"./AssetTypeHandler\";\r\nimport URLObject from '../URLObject'\r\n\r\nexport default class SVGFile extends File {\r\n\r\n    constructor(tag, url, path, xhrSettings) {\r\n\r\n        var tag = (typeof tag === 'string') ? tag : ObjectGet.value(tag, 'key', '');\r\n\r\n        let assetConfig = {\r\n            type: AssetsType.svg,\r\n            ext: ObjectGet.value(tag, 'ext', Path.getExtension(url) || 'svg'),\r\n            responseType: 'text',\r\n            tag: tagFile,\r\n            url: ObjectGet.value(tag, 'file', url),\r\n            path: path,\r\n            xhrSettings: ObjectGet.value(tag, 'xhr', xhrSettings)\r\n        };\r\n\r\n        super(assetConfig);\r\n\r\n    }\r\n\r\n    onProcessing(processingCallback) {\r\n        this.state = LoaderState.PROCESSING;\r\n\r\n        let self = this;\r\n        let svg = [ this.xhrLoader.responseText ];\r\n        let blob;\r\n\r\n        try {\r\n            blob = new window.Blob(svg, { type: 'image/svg+xml;charset=utf-8' });\r\n        } catch (e) {\r\n            self.state = LoaderState.ERROR;\r\n            processingCallback(self);\r\n            return;\r\n        }\r\n\r\n\r\n        this.data = new Image();\r\n        this.data.crossOrigin = this.crossOrigin;\r\n       \r\n        this.data.onload = function () {\r\n\r\n            URLObject.revoke(self.data);\r\n\r\n            self.onDone();\r\n\r\n            processingCallback(self);\r\n        };\r\n\r\n        this.data.onerror = function () {\r\n\r\n            URLObject.revoke(self.data);\r\n\r\n            console.warn(\"Loader.SVGFile: Error on load file: \" + self.url + \".\")\r\n\r\n            self.state = LoaderState.ERROR;\r\n\r\n            processingCallback(self);\r\n\r\n        };\r\n\r\n        URLObject.createFromResponse(this.data, blob, 'image/svg+xml');\r\n    }\r\n\r\n}\r\n\r\nAssetTypeHandler.register('svg', function (tag, url, path, xhrSettings) {\r\n    AddAsset.call(this,new SVGFile(tag, url, this.path, xhrSettings));\r\n    return this;\r\n});","import File from \"../File\";\r\nimport ObjectGet from \"../../utils/object/ObjectGet\";\r\nimport AssetsType from \"../AssetsType\";\r\nimport Path from \"../../utils/Path\";\r\nimport LoaderState from \"../LoaderState\";\r\nimport AddAsset from \"../components/AddAsset\";\r\nimport AssetTypeHandler from \"./AssetTypeHandler\";\r\n\r\nexport default class ScriptFile extends File {\r\n\r\n    constructor(tag, url, path, xhrSettings, config) {\r\n\r\n        let tagFile = (typeof tag === 'string') ? tag : ObjectGet.value(tag, 'key', '');\r\n\r\n        let assetConfig = {\r\n            type: AssetsType.script,\r\n            ext: ObjectGet.value(tag, 'ext', Path.getExtension(url) || 'js'),\r\n            responseType: 'text',\r\n            tag: tagFile,\r\n            url: ObjectGet.value(tag, 'file', url),\r\n            path: path,\r\n            xhrSettings: ObjectGet.value(tag, 'xhr', xhrSettings)\r\n        };\r\n\r\n        super(assetConfig);\r\n\r\n    }\r\n\r\n    onPostLoad(loader, xhrLoader) {\r\n        this.state = LoaderState.PROCESSING;\r\n\r\n        \r\n\r\n        // create the element\r\n        this.data = document.createElement('script');\r\n        this.data.language = 'javascript';\r\n        this.data.type = 'text/javascript';\r\n        this.data.defer = false;\r\n        this.data.text = this.xhrRequest.responseText;\r\n\r\n        // append to html document\r\n        document.head.appendChild(this.data);\r\n\r\n        this.loader.event.dispatch('onpostload_' + this.tag);\r\n\r\n        //this.onDone();\r\n\r\n        //processingCallback(this);\r\n    }\r\n\r\n}\r\n\r\nAssetTypeHandler.register('script', function (tag, url, path, xhrSettings) {\r\n    //this.addAsset(new ScriptFile(tag, url, this.path, xhrSettings));\r\n    AddAsset.call(this, new ScriptFile(tag, url, this.path, xhrSettings));\r\n    return this;\r\n});","\r\nimport LoaderState from '../LoaderState'\r\nimport File from '../File'\r\nimport ObjectGet from '../../utils/object/ObjectGet'\r\nimport Path from '../../utils/Path'\r\nimport AssetsType from '../AssetsType';\r\nimport AddAsset from '../components/AddAsset';\r\nimport AssetTypeHandler from './AssetTypeHandler';\r\n\r\nexport default class TextFile extends File {\r\n\r\n    constructor(tag, url, path, xhrSettings, config)\r\n    {\r\n        let assetTag = null;\r\n        \r\n        if (typeof tag === 'string')\r\n        {\r\n            assetTag = tag;\r\n        }\r\n        else\r\n        {\r\n            assetTag = ObjectGet.value(tag, 'tag', '');\r\n        }\r\n\r\n        let useExternal = false;\r\n\r\n        if (path !== undefined)\r\n        {\r\n            if (typeof(path) === \"boolean\")\r\n                useExternal = path;\r\n\r\n            \r\n        }\r\n\r\n        let assetConfig = {\r\n            type: AssetsType.text,\r\n            tag: assetTag,\r\n            ext: ObjectGet.value(tag, 'ext', Path.getExtension(url)),\r\n            url: ObjectGet.value(tag, 'file', url),\r\n            path: path,\r\n            responseType: '',\r\n            xhrSettings: ObjectGet.value(tag, 'xhr', xhrSettings),\r\n            config: ObjectGet.value(tag, 'config', config),\r\n            useExternal : useExternal\r\n        };\r\n\r\n        super(assetConfig);\r\n    }\r\n    \r\n    //onLoad(event) {}\r\n\r\n    /*onReadyStateChange(event)\r\n    {\r\n\r\n        console.log(event.target);\r\n        if (this.xhrRequest.status == 200)\r\n        {\r\n            if (this.xhrRequest.readyState == 4)\r\n            {\r\n                this.state = LoaderState.PROCESSING;\r\n                //this.data = window.URL.createObjectURL(this.xhrRequest.response);\r\n                this.data = this.xhrRequest.responseText;\r\n                \r\n                //console.log(this.data);\r\n                this.onDone();\r\n\r\n                //processingCallback(this);\r\n                super.onLoad(event);\r\n            }  \r\n        } else {\r\n            super.onLoad(event);\r\n        }\r\n    }*/\r\n\r\n    onProcessing(processingCallback)\r\n    {\r\n        this.state = LoaderState.PROCESSING;\r\n            //this.data = window.URL.createObjectURL(this.xhrRequest.response);\r\n            this.data = this.xhrRequest.responseText;\r\n            /*var style = document.createElement('style');\r\n            style.innerHTML = this.data;\r\n            document.head.appendChild(style)*/\r\n           // console.log(\"data:\" + this.data);\r\n            this.onDone();\r\n\r\n            processingCallback(this);\r\n    }\r\n\r\n}\r\n\r\nAssetTypeHandler.register('text', function (tag, url, path, xhrSettings)\r\n{\r\n    let endPointPath = this.path;\r\n\r\n    if (path !== undefined)\r\n    {\r\n        \r\n        if (typeof(path) === \"boolean\") // external link\r\n            endPointPath = path;\r\n        \r\n    }\r\n\r\n    AddAsset.call(this, new TextFile(tag, url, endPointPath, xhrSettings));\r\n    //this.addAsset(new TextFile(tag, url, endPointPath, xhrSettings));\r\n\r\n    return this;\r\n\r\n});\r\n\r\nmodule.exports = TextFile;","import File from '../File'\r\nimport JSONFile from './JSONFile';\r\nimport LoaderState from '../LoaderState';\r\nimport Path from '../../utils/Path';\r\nimport AssetsType from '../AssetsType';\r\nimport AddAsset from '../components/AddAsset';\r\nimport AssetTypeHandler from './AssetTypeHandler';\r\n\r\n\r\nfunction CheckImagesSources(loader, source, fullPath) {\r\n\r\n    if (source === undefined)\r\n        return;\r\n\r\n      \r\n\r\n    let size = source.length;\r\n\r\n   \r\n\r\n    if (size <= 0)\r\n        return;\r\n\r\n    for (let i = 0; i < size; i++) {\r\n\r\n        let tileset = source[i];\r\n\r\n        if (tileset.image) {\r\n            let name = Path.getFilenameWithoutExtension(tileset.image) || tileset.name;\r\n            let path = Path.getPathWithoutRoot(fullPath).concat(Path.getFilename(tileset.image));\r\n            loader.image(name, path, undefined, undefined, false);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default class TilemapFileJSON extends JSONFile {\r\n\r\n    constructor(tag, url, path, xhrSettings) {\r\n\r\n        super(tag, url, path, xhrSettings);\r\n        this.type = AssetsType.tilemapJSON;\r\n\r\n    }\r\n\r\n    onPostLoad(loader, xhrLoader) {\r\n\r\n        this.state = LoaderState.PROCESSING;\r\n        this.data = JSON.parse(xhrLoader.responseText);\r\n\r\n        // check tileset images and pipe to the loader\r\n        CheckImagesSources(loader, this.data.tilesets, this.url);\r\n    }\r\n\r\n    onProcessing(processingCallback) {\r\n        this.onDone();\r\n        processingCallback(this);\r\n    }\r\n\r\n\r\n}\r\n\r\nAssetTypeHandler.register('tilemapJSON', function (tag, url, path, xhrSettings) {\r\n    //this.addAsset(new TilemapFileJSON(tag, url, this.path, xhrSettings));\r\n    AddAsset.call(this, new TilemapFileJSON(tag, url, this.path, xhrSettings));\r\n    return this;\r\n});","import File from \"../File\";\r\nimport AssetsType from \"../AssetsType\";\r\nimport LoaderState from \"../LoaderState\";\r\nimport Validate from \"../../utils/Validate\";\r\nimport AddAsset from \"../components/AddAsset\";\r\nimport AssetTypeHandler from \"./AssetTypeHandler\";\r\nimport NextAsset from \"../components/NextAsset\";\r\n\r\n\r\nexport default class WebFontFile extends File {\r\n\r\n    constructor(tag, provider, fontFamily, timeout) {\r\n\r\n        let assetConfig = {\r\n            type: AssetsType.webFont,\r\n            tag: tag,\r\n            config : {\r\n                provider : provider || 'google',\r\n                families : fontFamily,\r\n                timeout : timeout || 3000,\r\n            }\r\n        };\r\n\r\n        super(assetConfig)\r\n\r\n    }\r\n\r\n    load(gameLoader) {\r\n        this.loader = gameLoader;\r\n\r\n        if (this.state === LoaderState.FINISHED) {\r\n            this.onDone();\r\n\r\n            NextAsset.call(this.loader, this);\r\n        } else if (this.loader.webFontLoader !== undefined && this.loader.webFontLoader.state === LoaderState.DONE) {\r\n            if (this.fontLoad !== undefined)\r\n                this.fontLoad();\r\n        }\r\n        \r\n        // Do nothing, wait for signal\r\n    }\r\n\r\n    fontLoad() {\r\n\r\n        if (WebFont !== undefined) {\r\n\r\n            this.state = LoaderState.PROCESSING;\r\n\r\n            let provider = this.config['provider'];\r\n\r\n            if (!Validate.isArray(this.config.families)) {\r\n                let families = [];\r\n                families.push(this.config.families);\r\n                this.config.families = families;\r\n            }\r\n\r\n            let WebFontProvider = {\r\n                families : this.config.families\r\n            }\r\n\r\n            let WebFontConfig = {\r\n                timeout : this.config.timeout,\r\n                inactive : this.onError.bind(this),\r\n                fontactive : this.onLoad.bind(this),\r\n                classes : true\r\n            }\r\n\r\n            \r\n\r\n            WebFontConfig[provider] = WebFontProvider;\r\n\r\n            WebFont.load(WebFontConfig)\r\n        }\r\n    }\r\n\r\n    onLoad(familyName, fvd) {\r\n\r\n        this.data = {\r\n            family : familyName,\r\n            fvd : fvd\r\n        }\r\n\r\n        //this.loader.next(this, true);\r\n        NextAsset.call(this.loader, this);\r\n\r\n        \r\n    }\r\n}\r\n\r\nAssetTypeHandler.register('webFont', function (tag, provider, fontFamily, timeout) {\r\n    //this.addAsset(new WebFontFile(tag, provider, fontFamily, timeout));\r\n    AddAsset.call(this, new WebFontFile(tag, provider, fontFamily, timeout));\r\n    return this;\r\n});","\r\nmodule.exports = {\r\n    AssetsTypeHandler : require('./AssetTypeHandler'),\r\n    ImageFile : require('./ImageFile'),\r\n    SVGFile : require('./SVGFile'),\r\n    TextFile : require('./TextFile'),\r\n    ScriptFile : require('./ScriptFile'),\r\n    JSONFile : require('./JSONFile'),\r\n    TilemapJSON : require('./TilemapJSON'),\r\n    WebFontFile : require('./WebFontFile')\r\n}","import AssetsType from \"../AssetsType\";\r\nimport ScriptFile from \"../assets/ScriptFile\";\r\n\r\nexport default function AddAsset(asset, check) {\r\n\r\n    if (check === undefined) check = true;\r\n\r\n    if (!this.isOK() && check)\r\n        return -1;\r\n\r\n    // is if web font, we should load the WebFontLoader\r\n    if (asset.type === AssetsType.webFont && this.webFontLoader === undefined) {\r\n\r\n      this.webFontLoader = new ScriptFile('webFontLoader',\"https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js\");\r\n      this._filesQueue.set(this.webFontLoader);\r\n      this._filesQueueCount++;\r\n\r\n\r\n\r\n      this.event.create('onpostload_webFontLoader').subscribe(\r\n        () => {\r\n        asset.fontLoad();\r\n        });\r\n      \r\n    }\r\n\r\n\r\n    asset.path = this.path;\r\n    this._filesQueue.set(asset);\r\n    this._filesQueueCount++;\r\n    return asset;\r\n\r\n}","import LoaderState from \"../LoaderState\";\r\nimport DeleteSucceedQueuedAsset from \"./DeleteSucceedQueuedAsset\";\r\n\r\nexport default function AssetProcessingUpdate(file) {\r\n    \r\n    if (file.state === LoaderState.ERROR)\r\n    {\r\n       this._failedFiles.set(file);\r\n\r\n        /*if (file.linkFile)\r\n        {\r\n            this.queue.delete(file.linkFile);\r\n        }*/\r\n\r\n        //return this.deleteFromSuccessQueue(file);\r\n        return DeleteSucceedQueuedAsset.call(this, file);\r\n    }\r\n\r\n\r\n    this._processedFiles.set(file);\r\n\r\n    return  DeleteSucceedQueuedAsset.call(this, file);//this.deleteFromSuccessQueue(file);\r\n\r\n  }","import LoaderState from \"../LoaderState\";\r\nimport ProcessDoneAssets from \"./ProcessDoneAssets\";\r\n\r\nexport default function DeleteSucceedQueuedAsset(file) {\r\n    \r\n    this._successFiles.delete(file);\r\n\r\n    if (this._successFiles.size === 0 && this.state === LoaderState.PROCESSING)\r\n        ProcessDoneAssets.call(this);\r\n        \r\n}","\r\nimport DataSet from '../../structures/Set'\r\nimport EventManager from '../../event/EventManager';\r\nimport LoaderState from '../LoaderState';\r\n\r\nexport default function InitializeLoader() {\r\n\r\n    this.cache = this.game.system.cache;\r\n\r\n    this._filesQueue = new DataSet();\r\n    this._filesLoading = new DataSet();\r\n    this._successFiles = new DataSet();\r\n    this._failedFiles = new DataSet();\r\n    this._processedFiles = new DataSet();\r\n    this.event = new EventManager();\r\n\r\n    this._filesQueueCount = 0;\r\n    this._loadedFilesCount = 0;\r\n\r\n    this.progress = 0;\r\n    this.path = '';\r\n    this.baseURL = '';\r\n    this.state = LoaderState.IDLE;\r\n}","import LoaderState from \"../LoaderState\";\r\nimport ProcessDoneAssets from \"./ProcessDoneAssets\";\r\nimport AssetProcessingUpdate from \"./AssetProcessingUpdate\";\r\n\r\nexport default function LoaderFinished() {\r\n\r\n    if (this.state === LoaderState.PROCESSING)\r\n        return;\r\n  \r\n    this.progress = 1;\r\n    this.isDownloading = false;\r\n    this.state = LoaderState.PROCESSING;\r\n\r\n    this._processedFiles.clear();\r\n\r\n    if (this._successFiles.size === 0)\r\n    {\r\n        ProcessDoneAssets.call(this);// this.processingDone();\r\n\r\n    } else {\r\n     \r\n      this._successFiles.each(function(file) {\r\n        file.onProcessing(AssetProcessingUpdate.bind(this));\r\n      },this);\r\n    }\r\n   \r\n  }","import ProcessAssetsQueue from \"./ProcessAssetsQueue\";\r\nimport LoaderFinished from \"./LoaderFinished\";\r\nimport UpdateProgress from \"./UpdateProgress\";\r\n\r\n\r\nexport default function NextAsset(concludedFile, hasError) {\r\n\r\n    if (hasError)\r\n        this._failedFiles.set(concludedFile);\r\n    else \r\n        this._successFiles.set(concludedFile);\r\n    \r\n\r\n    this._filesLoading.delete(concludedFile);\r\n    this._loadedFilesCount++;\r\n\r\n    //this.updateProgress();\r\n    UpdateProgress.call(this);\r\n\r\n    if (this._filesQueue.size > 0)//(this._loadedFilesCount < this._filesQueueCount)\r\n    {\r\n        //this.processFileQueue();\r\n        ProcessAssetsQueue.call(this);\r\n    } else if (this._filesLoading.size === 0) {\r\n      \r\n        //this.loadFinished();\r\n        LoaderFinished.call(this);\r\n    }\r\n\r\n}","import LoaderState from \"../LoaderState\";\r\n\r\nexport default function ProcessAssetsQueue() {\r\n\r\n    let self = this;\r\n\r\n    this._filesQueue.each(function(file) {\r\n\r\n      if (file.state === LoaderState.FINISHED ||\r\n         file.state === LoaderState.PENDING) //  && this.inflight.size < this.maxParallelDownloads))\r\n      {\r\n        \r\n\r\n        self._filesLoading.set(file);\r\n\r\n        self._filesQueue.delete(file);\r\n\r\n        self.loadAsset(file);\r\n      }\r\n\r\n    });\r\n\r\n}","import PreloadSceneComplete from \"../../scene/components/PreloadSceneComplete\";\r\nimport LoaderState from \"../LoaderState\";\r\nimport AssetsType from \"../AssetsType\";\r\n\r\nexport default function ProcessDoneAssets() {\r\n\r\n    this._successFiles.clear();\r\n    this._filesQueue.clear();\r\n\r\n    let cache = this.cache;\r\n\r\n    if (this._processedFiles.size > 0)\r\n    {\r\n\r\n      // sort the assets by type priority \r\n      this._processedFiles.sort((a, b) => {\r\n        return (a.type > b.type);\r\n      });\r\n\r\n      // add assets to cache\r\n      this._processedFiles.each(function(file) {\r\n\r\n        switch (file.type)\r\n        {\r\n          default:\r\n            break;\r\n\r\n          case AssetsType.image: {\r\n            cache.image.add(file.tag,file.data);\r\n            break;\r\n          }\r\n          case AssetsType.svg: {\r\n            cache.svg.add(file.tag, file.data);\r\n            break;\r\n          }\r\n          case AssetsType.audio: {\r\n\r\n            file.data = requestXHR.response;\r\n\r\n            cache.addSound(file.tag,file.url,file.data,true);\r\n\r\n            if (file.autoDecode)\r\n            {\r\n                this.game.sound.decode(file.tag);\r\n            }\r\n\r\n            break;\r\n          }\r\n          case AssetsType.json: {\r\n            cache.json.add(file.tag, file.data);\r\n            break;\r\n          }\r\n          \r\n\r\n          case AssetsType.tilemapJSON: {\r\n            cache.tilemap.add(file.tag, file.data);\r\n            break;\r\n          }\r\n        }\r\n\r\n      })\r\n\r\n      this._processedFiles.clear();\r\n    }\r\n\r\n    this.state = LoaderState.DONE;\r\n\r\n    //this.game.scene.preloadComplete();\r\n    PreloadSceneComplete.call(this.game.scene);\r\n  }","import LoaderFinished from \"./LoaderFinished\";\r\nimport ProcessAssetsQueue from \"./ProcessAssetsQueue\";\r\nimport LoaderState from \"../LoaderState\";\r\n\r\nexport default function StartLoadAssets() {\r\n\r\n    if (!this.isOK())\r\n    {\r\n        return -1;\r\n    }\r\n\r\n    this.progress = 0;\r\n    this._loadedFilesCount = 0;\r\n    this.state = LoaderState.LOADING;\r\n    this._filesQueueCount = this._filesQueue.size;\r\n\r\n    if (this._filesQueue.size === 0)\r\n    {\r\n      //console.log(0);\r\n      //this.loadFinished();\r\n      LoaderFinished.call(this);\r\n    }\r\n    else\r\n    {\r\n      this.isDownloading = true;\r\n      this._successFiles.clear();\r\n      this._failedFiles.clear();\r\n      this._filesLoading.clear();\r\n\r\n      //this.processFileQueue();\r\n      ProcessAssetsQueue.call(this);\r\n    }\r\n\r\n  }","\r\nexport default function UpdateProgress() {\r\n\r\n    //var progress = 0;\r\n\r\n    if (this._filesQueueCount != 0) {\r\n      this.progress = 1 - (this._loadedFilesCount / this._filesQueueCount);\r\n    } \r\n     //progress = parseFloat(this._successCount) / parseFloat(this._filesQueueCount);\r\n\r\n    //this.progress = progress;\r\n\r\n}","\r\nmodule.exports = {\r\n\r\n    LoaderState: require('./LoaderState'),\r\n    File: require('./File'),\r\n    XHR: require('./XHR'),\r\n    URLObject : require('./URLObject'),\r\n    AssetsType : require('./AssetsType'),\r\n    Assets: require('./assets'), \r\n    LoaderManager: require('./LoaderManager'),\r\n\r\n};","\r\nimport Vector from './Vector'\r\nimport Rect from './Rect'\r\n\r\nexport default class BoundingBox {\r\n  \r\n  constructor(x, y, width, height) {\r\n\r\n    x = x || Infinity;\r\n    y = y || Infinity;\r\n    width = width || -Infinity;\r\n    height = height || -Infinity;\r\n    this.min = new Vector(x,y);\r\n    this.max = new Vector(x+width,y+height);\r\n    //this.box = new Rect(xx,yy,w,h);\r\n\r\n  }\r\n\r\n  \r\n  get center() {\r\n    return new Vector(\r\n      (this.max.x - this.min.x) / 2,\r\n      (this.max.y - this.min.y) / 2\r\n    );\r\n  }\r\n\r\n  get size() {\r\n    return new Vector(\r\n      (this.max.x - this.min.x),\r\n      (this.max.y - this.min.y)\r\n    );\r\n  }\r\n\r\n  \r\n  set(minX, minY, maxX, maxY) {\r\n\r\n    this.min.set(minX,minY);\r\n    this.max.set(maxX,maxY);\r\n    //this.box.set(this.min.x,this.min.y,this.max.x-this.min.x,this.max.y-this.min.y);\r\n    return this;\r\n\r\n  }\r\n\r\n  setMin(minX, minY) {\r\n    this.min.x = minX;\r\n    this.min.y = minY;\r\n    return this;\r\n  }\r\n\r\n  setMax(maxX, maxY) {\r\n    this.max.x = maxX;\r\n    this.max.y = maxY;\r\n    return this;\r\n  }\r\n\r\n  move(x, y) {\r\n    this.min.x += x;\r\n    this.min.y += y;\r\n    this.max.x += x;\r\n    this.max.y += y;\r\n  }\r\n\r\n  intersects(bounds) {\r\n    return (\r\n      (this.max.x >= bounds.min.x && \r\n      this.max.y >= bounds.min.y &&\r\n      this.min.x <= bounds.max.x && \r\n      this.min.y <= bounds.max.y) ||\r\n\r\n      (this.min.x >= bounds.max.x &&\r\n      this.min.y >= bounds.max.y &&\r\n      this.max.x <= bounds.min.x &&\r\n      this.max.y <= bounds.min.y));\r\n  }\r\n\r\n  contains(x, y) {\r\n    return (\r\n      x > this.min.x &&\r\n      y > this.min.y &&\r\n      x < this.max.x &&\r\n      y < this.max.y);\r\n  }\r\n\r\n  expand(xRadius, yRadius) {\r\n\r\n    yRadius = yRadius || xRadius;\r\n\r\n    if (this.max.x > this.min.x)\r\n\t\t{\r\n\t\t\tthis.min.x -= xRadius;\r\n\t\t\tthis.max.x += xRadius;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.min.x += xRadius;\r\n\t\t\tthis.max.x -= xRadius;\r\n\t\t}\r\n\r\n\t\tif (this.max.y > this.min.y)\r\n\t\t{\r\n\t\t\tthis.min.y -= yRadius;\r\n\t\t\tthis.max.y += yRadius;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.min.y += yRadius;\r\n\t\t\tthis.max.y -= yRadius;\r\n\t\t}\r\n  }\r\n\r\n  merge(value) {\r\n\r\n    // merge with another bounds\r\n    if (value instanceof BoundingBox) {\r\n      this.min.x = Math.min(this.min.x, value.min.x);\r\n      this.min.y = Math.min(this.min.y, value.min.y);\r\n      this.max.x = Math.max(this.max.x, value.max.x);\r\n      this.max.y = Math.max(this.max.y, value.max.y);\r\n      return this;\r\n    } \r\n    else if (value instanceof Vector) {\r\n      return this.mergeWithPoint(value.x, value.y);\r\n    } else {\r\n      this.min.x = Math.min(this.min.x, value);\r\n      this.min.y = Math.min(this.min.y, value);\r\n      this.max.x = Math.max(this.max.x, value);\r\n      this.max.y = Math.max(this.max.y, value);\r\n      return this;\r\n    }\r\n  }\r\n\r\n  mergeWithPoint(x, y) {\r\n    this.min.x = Math.min(this.min.x, x);\r\n    this.min.y = Math.min(this.min.y, y);\r\n    this.max.x = Math.max(this.max.x, x);\r\n    this.max.y = Math.max(this.max.y, y);\r\n    return this;\r\n  }\r\n\r\n  extend(bounds) {\r\n    // min merge\r\n    if (bounds.min.x < this.min.x)\r\n      this.min.x = bounds.min.x;\r\n\r\n    if (bounds.min.y < this.min.y)\r\n      this.min.y = bounds.min.y;\r\n      \r\n    // max merge\r\n    if (bounds.max.x > this.max.x)\r\n      this.max.x = bounds.max.x;\r\n\r\n    if (bounds.max.y > this.max.y)\r\n      this.max.y = bounds.max.y;\r\n\r\n    return this;\r\n  }\r\n\r\n  extendByPoint(x, y) {\r\n    if (x < this.min.x) this.min.x = x;\r\n\t\tif (y < this.min.y) this.min.y = y;\r\n\t\tif (x > this.max.x) this.max.x = x;\r\n\t\tif (y > this.max.y) this.max.y = y;\r\n\r\n\t\treturn this;\r\n  }\r\n\r\n  limit(xmin, ymin, xmax, ymax) {\r\n\t\tif (this.min.x < xmin)\r\n      this.min.x = xmin;\r\n\r\n\t\tif (this.min.y < ymin)\r\n      this.min.y = ymin;\r\n\r\n\t\tif (this.max.x > xmax)\r\n      this.max.x = xmax;\r\n\r\n\t\tif (this.max.y > ymax)\r\n      this.max.y = ymax;\r\n  }\r\n\r\n  offset(x, y) {\r\n    let o = {x:x, y:y};\r\n     o.x -= this.min.x;\r\n     o.y -= this.min.y;\r\n\r\n\t\tif (this.max.x > this.min.x)\r\n\t\t\to.x /= this.max.x - this.min.x;\r\n\r\n\t\tif (this.max.y > this.min.y)\r\n      o.y /= this.max.y - this.min.y;\r\n      \r\n    return o;\r\n  }\r\n\r\n  toString() {\r\n    return \"{ min: \" + this.min.toString() + \", max: \" + this.max.toString() + \" }\";\r\n  }\r\n\r\n  \r\n\r\n}\r\n","\r\n\r\n\r\n\r\nconst MathUtils = {\r\n\r\n\r\n  degToRad : Math.PI / 180,\r\n  radToDeg : 180 / Math.PI,\r\n  TAU : Math.PI * 2,\r\n  //HALFPI : Math.PI / 2,\r\n  EPSILON : Math.pow(2, -52),\r\n  HALFPI : 1.5707963267948966,\r\n\r\n  floor : function(value) {\r\n    return (value >> 0);\r\n  },\r\n\r\n  round : function(value) {\r\n\r\n      // With a bitwise or.\r\n      //let rounded = (0.5 + value) | 0;\r\n      \r\n      // FASTEST - A double bitwise not.\r\n      return ~~ (0.5 + value);\r\n\r\n      // Finally, a left bitwise shift.\r\n      //rounded = (0.5 + value) << 0;\r\n\r\n  },\r\n\r\n  clamp : function(value, min, max) {\r\n    return (value > min) ? (value < max) ? value : max : min;\r\n  },\r\n\r\n  randomRange : function(min, max) {\r\n\r\n    return Math.random() * (max - min) + min;\r\n\r\n  },\r\n\r\n  irandomRange : function(min, max) {\r\n\r\n    return MathUtils.floor(Math.random() * (max - min + 1)) + min;\r\n\r\n  },\r\n\r\n  lerp : function(fromValue, toValue, t) {\r\n    return (1.0 - t) * fromValue + t * toValue;\r\n  },\r\n\r\n  clampedLerp : function(fromValue, toValue, t) {\r\n\r\n    t = MathUtils.clamp(t, 0.0, 1.0);\r\n\r\n    return MathUtils.lerp(fromValue, toValue, t);\r\n  },\r\n\r\n  impreciseLerp : function(fromValue, toValue, t) {\r\n    return fromValue + t * (toValue - fromValue);\r\n  },\r\n\r\n  lerpAngle : function(fromValue,toValue,t) {\r\n\r\n    /*var shortest_angle = ((((toValue - fromValue) % 360) + 540) % 360) - 180;\r\n    return shortest_angle * t;*/\r\n\r\n    var end = toValue;\r\n    var start = fromValue;\r\n\r\n    var difference = Math.abs(end - start);\r\n    if (difference > 180)\r\n    {\r\n        // We need to add on to one of the values.\r\n        if (end > start)\r\n        {\r\n            // We'll add it on to start...\r\n            start += 360;\r\n        }\r\n        else\r\n        {\r\n            // Add it on to end.\r\n            end += 360;\r\n        }\r\n    }\r\n\r\n          // Interpolate it.\r\n        var value = (start + ((end - start) * t));\r\n\r\n          // Wrap it..\r\n          var rangeZero = 360;\r\n\r\n          if (value >= 0 && value <= 360)\r\n              return value;\r\n\r\n          return (value % rangeZero);\r\n\r\n\r\n  },\r\n\r\n  distance : function(x0,y0,x1,y1) {\r\n\r\n    return Math.sqrt((x0 -= x1) * x0 + (y0 -= y1) * y0);\r\n\r\n  },\r\n\r\n  angleBetween : function(x0,y0,x1,y1) {\r\n\r\n    var angle = this.toDegree(Math.atan2(y1 - y0, x1 - x0));\r\n\r\n    if (angle < 0 && angle >= -180)\r\n      angle = 360 + angle;\r\n\r\n\r\n    return angle;\r\n\r\n  },\r\n\r\n  toDegree : function(radians) {\r\n\r\n    return radians * MathUtils.radToDeg;\r\n\r\n  },\r\n\r\n  toRadian : function(degrees) {\r\n\r\n    return degrees * MathUtils.degToRad;\r\n\r\n  }\r\n\r\n}\r\n\r\nObject.freeze(MathUtils);\r\n\r\nmodule.exports = MathUtils;\r\n\r\n//export default MathUtils;\r\n\r\n\r\n\r\n\r\n","\r\n/*\r\n\r\n\r\n* | a | b | x | * | 0 | 2 | 4 |\r\n* | c | d | y | * | 1 | 3 | 5 |\r\n* | 0 | 0 | 1 |\r\n\r\n* | 0 | 3 | 6 | * | a | c | x |\r\n* | 1 | 4 | 7 | * | b | d | y |\r\n* | 2 | 5 | 8 | * | 0 | 0 | 1 |\r\n\r\na = scale_x\r\nb = cos\r\nx = x translate\r\n\r\nc = scale_y\r\nd = sin\r\ny = y translate\r\n\r\nHTML5/CSS3 uses matrices in column-major order based.\r\n\r\n*/\r\n\r\nclass Matrix {\r\n  \r\n  /*\r\n  * Constructor is identity only\r\n  */\r\n  constructor(a, b) {\r\n\r\n    /*a = a || i;\r\n    b = b || 0;\r\n    x = x || 0;\r\n\r\n    c = c || 0;   \r\n    d = d || i;   \r\n    y = y || 0;*/\r\n\r\n    a = a || 0;\r\n    b = b || 0;\r\n\r\n    this.a = [];\r\n\r\n    // first column\r\n    this.a[0] = a;\r\n    this.a[1] = b;\r\n    this.a[2] = b;\r\n    // second column\r\n    this.a[3] = b;\r\n    this.a[4] = a;\r\n    this.a[5] = b;\r\n    // third column\r\n    this.a[6] = b; \r\n    this.a[7] = b;\r\n    this.a[8] = a;\r\n    //this.at = null;\r\n\r\n  }\r\n\r\n  at(i, j) {\r\n    return this.a[i + j * 3];\r\n  }\r\n\r\n  set(i, j, value) {\r\n    this.a[i + j * 3] = value;\r\n    return this;\r\n  }\r\n\r\n  setIdentity() {\r\n    return this.setTransform(\r\n      1,0,0,\r\n      0,1,0,\r\n      0,0,1\r\n    );\r\n  }\r\n\r\n  setTransform(a, b, c, d, e, f, g, h, i) {\r\n\r\n    this.a[0] = a;\r\n    this.a[1] = b;\r\n    this.a[2] = c; // 0\r\n\r\n    this.a[3] = d;\r\n    this.a[4] = e;\r\n    this.a[5] = f; // 0\r\n\r\n    this.a[6] = g; // x\r\n    this.a[7] = h; // y\r\n    this.a[8] = i;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  translate(x, y) {\r\n\r\n\r\n  /* | a | b | x | * | 0 | 2 | 4 |\r\n  *  | c | d | y | * | 1 | 3 | 5 |\r\n\r\n  * | 0 | 3 | 6 | * | a | c | x |\r\n  * | 1 | 4 | 7 | * | b | d | y |\r\n  * | 2 | 5 | 8 |\r\n  */\r\n    // 4 = 0 * x * 2 * y + 4\r\n    // 5 = 1 * x * 3 * y + 5\r\n\r\n    // 6 = 1 * x + 3 * y + 5\r\n    // 7 = 1 * x + 4 * y + 7\r\n    this.a[6] = this.a[0] * x + this.a[3] * y + this.a[6];\r\n    this.a[7] = this.a[1] * x + this.a[4] * y + this.a[7];\r\n    return this;\r\n  }\r\n\r\n  scale(x, y) {\r\n\r\n    this.a[0] *= x; // a\r\n    this.a[1] *= x; // b\r\n\r\n    this.a[3] *= y; // c\r\n    this.a[4] *= y; // d\r\n\r\n    this.a[6] *= x; // x\r\n    this.a[7] *= y; // y\r\n    return this;\r\n\r\n  }\r\n\r\n  rotate(radianAngle) {\r\n    let cos = Math.cos(radianAngle);\r\n    let sin = Math.sin(radianAngle);\r\n\r\n    return this.radianRotate(cos, sin);\r\n }\r\n\r\n radianRotate(cos, sin) {\r\n return this.transform(cos, sin, -sin, cos, 0, 0);\r\n }\r\n\r\n transform(a, b, c, d, x, y) {\r\n  let a00 = this.a[0]; // a\r\n  let a01 = this.a[1]; // b\r\n\r\n  let a10 = this.a[3]; // c\r\n  let a11 = this.a[4]; // d\r\n\r\n  let a20 = this.a[6]; // x\r\n  let a21 = this.a[7]; // y\r\n\r\n  this.a[0] = a * a00 + b * a10; // a * a0 + b * c0;\r\n  this.a[1] = a * a01 + b * a11; // a * b0 + b * d0;\r\n\r\n  this.a[3] = c * a00 + d * a10; // c * a0 + d * c0;\r\n  this.a[4] = c * a01 + d * a11; // c * b0 + d * d0;\r\n\r\n  this.a[6] = x * a00 + y * a10 + a20; // x * a0 + y * c0 + x0;\r\n  this.a[7] = x * a01 + y * a11 + a21; // x * b0 + y * d0 + y0;\r\n\r\n  return this;\r\n }  \r\n\r\n setModelMatrix(position, scale, rotation, origin) {\r\n    this.a[0] = rotation.x * scale.x; // a\r\n    this.a[1] = rotation.y * scale.x; // b\r\n    this.a[3] = -rotation.y * scale.y; // c\r\n    this.a[4] =  rotation.x * scale.y; // d\r\n    this.a[6] = position.x; // x\r\n    this.a[7] = position.y; // y\r\n\r\n    /*if (origin !== undefined) {\r\n      this.a[6] -= origin.x * this.a[0] + origin.y * this.a[3];\r\n      this.a[7] -= origin.y * this.a[1] + origin.y * this.a[4];\r\n    }*/\r\n\r\n    return this;\r\n    /*\r\n    a  =  transform._cosSin.x * transform.scale.x;\r\n    b  = transform._cosSin.y * transform.scale.x;\r\n    c  = -transform._cosSin.y * transform.scale.y;\r\n    d  =  transform._cosSin.x * transform.scale.y;\r\n    x =  transform.position.x;\r\n    y =  transform.position.y;\r\n\r\n    x -= transform.origin.x * a + transform.origin.y * c;\r\n    y -= transform.origin.y * b + transform.origin.y * d;\r\n    */\r\n\r\n    \r\n }\r\n\r\n\r\n multiply(other) {\r\n\r\n    // faster way\r\n    let a00 = this.a[0]; // a - 0\r\n    let a01 = this.a[1]; // b - 1\r\n    let a10 = this.a[3]; // c - 3\r\n    let a11 = this.a[4]; // d - 4\r\n    let a20 = this.a[6]; // x - 6\r\n    let a21 = this.a[7]; // y - 7\r\n\r\n    this.a[0] = other.a[0] * a00 + other.a[1] * a10; // a1 * a0 + b1 * c0;\r\n    this.a[1] = other.a[0] * a01 + other.a[1] * a11; // a1 * b0 + b1 * d0;\r\n\r\n    this.a[3] = other.a[3] * a00 + other.a[4] * a10; // c1 * a0 + d1 * c0;\r\n    this.a[4] = other.a[3] * a01 + other.a[4] * a11; // c1 * b0 + d1 * d0;\r\n\r\n    this.a[6] = other.a[6] * a00 + other.a[7] * a10 + a20; // x1 * a0 + y1 * c0 + x0;\r\n    this.a[7] = other.a[6] * a01 + other.a[7] * a11 + a21; // x1 * b0 + y1 * d0 + y0;\r\n\r\n    return this;\r\n }\r\n\r\n concat(other) {\r\n\r\n  let a = this.a[0]; // a - 0\r\n  let b = this.a[1]; // b - 1\r\n  let c = this.a[3]; // c - 3\r\n  let d = this.a[4]; // d - 4\r\n  let x = this.a[6]; // x - 6\r\n  let y = this.a[7]; // y - 7\r\n\r\n  this.a[0] = a * other.a[0] + b * other.a[3]; // a * pt.a + b * pt.c;\r\n  this.a[1] = a * other.a[1] + b * other.a[4]; // a * pt.b + b * pt.d;\r\n\r\n  this.a[3] = c * other.a[0] + d * other.a[3]; // c * pt.a + d * pt.c;\r\n  this.a[4] = c * other.a[1] + d * other.a[4]; // c * pt.b + d * pt.d;\r\n\r\n  this.a[6] = x * other.a[0] + y * other.a[3] + other.a[6]; // x * pt.a + y * pt.c + pt.x;\r\n  this.a[7] = x * other.a[1] + y * other.a[4] + other.a[7]; // x * pt.b + y * pt.d + pt.y;\r\n\r\n  return this;\r\n }\r\n\r\n transformPoint(x, y) {\r\n\r\n  let point = {x:0,y:0}\r\n\r\n  point.x = x * this.a[0] + y * this.a[3] + this.a[6];\r\n  point.y = x * this.a[1] + y * this.a[4] + this.a[7];\r\n\r\n  return point;\r\n}\r\n\r\n transpose() {\r\n  return this.setAll(\r\n    mat.a[0], mat.a[3], mat.a[6],\r\n    mat.a[1], mat.a[4], mat.a[7],\r\n    mat.a[2], mat.a[5], mat.a[8],\r\n  );\r\n }\r\n\r\n toString() {\r\n  let str = \"\";\r\n   for(let y = 0; y < 3; y++) {\r\n      for(let x = 0; x < 3; x++) {\r\n        let val = this.at(x, y); \r\n        //str += val.toString() + \" \";\r\n        //console.log(\"---- \" + (x + y * 3).toString());\r\n        str += val + \" \";\r\n      }\r\n      str += \"\\n\"\r\n   }\r\n\r\n   return str;\r\n    \r\n }\r\n \r\n \r\n static identity() { return new Matrix(1); }\r\n\r\n static zero() { return new Matrix(0); }\r\n\r\n static transpose(mat) {\r\n  let copy = Matrix.zero;\r\n  return copy.setAll(\r\n    mat.a[0], mat.a[3], mat.a[6],\r\n    mat.a[1], mat.a[4], mat.a[7],\r\n    mat.a[2], mat.a[5], mat.a[8],\r\n  );\r\n\r\n }\r\n\r\n static multiplySlow(a, b) {\r\n    var mat = Matrix.zero(); // zeroes\r\n    let val;\r\n\r\n    for (let i = 0; i < 3; ++i)\r\n    {\r\n      for (let j = 0; j < 3; ++j)\r\n      {\r\n        for (let k = 0; k < 3; ++k)\r\n        {\r\n          val = mat.at(i, k);\r\n          val += a.at(i, j) * b.at(j, k);\r\n          mat.set(i, k, val);\r\n        }\r\n      }\r\n    }\r\n\r\n    return mat;\r\n }\r\n\r\n}\r\n\r\nmodule.exports = Matrix;","\r\n/**\r\n* Simple class for rectangle. Usage for collision.\r\n* @class Rect\r\n* @constructor\r\n*/\r\n\r\nexport default class Rect {\r\n  \r\n  constructor(x, y, width, height) {\r\n    this.x = x || 0;\r\n    this.y = y || 0;\r\n    this.width = width || 0;\r\n    this.height = height || 0;\r\n  }\r\n\r\n  get center() {\r\n    var vec = {};\r\n    vec.x = this.x + this.width / 2;\r\n    vec.y = this.y + this.height / 2;\r\n    return vec;\r\n  }\r\n\r\n  set(x,y,width,height) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = width;\r\n    this.height = height;\r\n    return this;\r\n  }\r\n\r\n  setPostion(x,y) {\r\n    this.x = x;\r\n    this.y = y;\r\n    return this;\r\n  }\r\n\r\n  setSize(width, height) {\r\n    this.width = width;\r\n    this.height = height;\r\n    return this;\r\n  }\r\n\r\n  copy(rect) {\r\n    this.x = rect.x;\r\n    this.y = rect.y;\r\n    this.width = rect.width;\r\n    this.height = rect.height;\r\n    return this;\r\n  }\r\n\r\n  \r\n  intersects(rect) {\r\n    return Rect.intersects(this, rect);\r\n  }\r\n\r\n  contains(x,y) {\r\n  return Rect.contains(this,x,y);\r\n  }\r\n\r\n\r\n  static intersects(rect1, rect2) {\r\n\r\n    if (rect1.width <= 0 || rect1.height <= 0 || rect2.width <= 0 || rect2.height <= 0)\r\n      return false;\r\n  \r\n    return    !(rect1.x > rect2.x + rect2.width ||\r\n               rect1.x + rect1.width < rect2.x ||\r\n               rect1.y > rect2.y + rect2.height ||\r\n               rect1.y + rect1.height < rect2.y);\r\n  }\r\n\r\n  static contains(rect, x, y) {\r\n  \r\n    if (rect.width <= 0 && rect.height <= 0 )\r\n      return false;\r\n  \r\n    return (x > rect.x &&\r\n            x < rect.x + rect.width &&\r\n            y >= rect.y &&\r\n            y < rect.y + rect.height);\r\n  \r\n  }\r\n  \r\n  static intersectionArea(rect1,rect2) {\r\n  \r\n      var out = new scintilla.Rect();\r\n  \r\n      if (scintilla.Rect.intersects(rect1,rect2)) {\r\n  \r\n         out.y = Math.max(a.y, b.y);\r\n         out.x = Math.max(a.x, b.x);\r\n         out.width = Math.min(a.x + a.width, b.x + b.width) - out.x;\r\n         out.height = Math.min(a.y + a.height, b.y + b.height) - out.y;\r\n  \r\n      }\r\n  \r\n      return out;\r\n  \r\n  }\r\n  \r\n\r\n}\r\n\r\n\r\n\r\n","\r\n\r\nimport MathUtils from './MathUtils'\r\n\r\n/**\r\n* Class for points and vectors.\r\n* @class Vector\r\n* @constructor\r\n*/\r\nexport default class Vector {\r\n  \r\n  constructor(x,y, managed) {\r\n\r\n    this.x = x || 0;\r\n    this.y = y || 0;\r\n    this.managed = managed || undefined;\r\n  }\r\n\r\n  /*\r\n  set x(value) {\r\n    this.x = value;\r\n    return this.x;\r\n  }\r\n  get x() {return this.x;}\r\n  set y(value) {\r\n    this.y = value;\r\n    return this.y;\r\n  }\r\n  get y() {return this.y;}*/\r\n\r\n  set(x,y) {\r\n\r\n    this.x = x;\r\n    this.y = y || x\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n  }\r\n\r\n  move(x,y) {\r\n\r\n    this.x += x;\r\n    this.y += y;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  scale(x, y) {\r\n\r\n    this.x *= x;\r\n    this.y *= y || x;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  rotate(radians) {\r\n\r\n    let x = this.x;\r\n    let y = this.y;\r\n    this.x = x * Math.cos(radians) - y * Math.sin(radians);\r\n    this.y = x * Math.sin(radians) + y * Math.cos(radians);\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  rotateAround(radians, other) {\r\n\r\n    /*var x = this.x;\r\n    var y = this.y;*/\r\n    let dx = this.x-other.x;\r\n    let dy = this.y-other.y;\r\n\r\n    let c = Math.cos(radians);\r\n    let s = Math.sin(radians);\r\n\r\n    /*this.x = c * (x-other.x) - s * (y-other.y) + other.x;\r\n    this.y = s * (x-other.x) + c * (y-other.y) + other.y;*/\r\n\r\n\r\n    this.x =  other.x + (c * dx - s * dy);\r\n    this.y =  other.y + (s * dx + c * dy);\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  copy(otherVector) {\r\n\r\n    this.x = otherVector.x;\r\n    this.y = otherVector.y;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  normalize() {\r\n\r\n    let mag = this.length();\r\n    if (mag > 0) {\r\n      this.x = this.x / mag;\r\n      this.y = this.y / mag;\r\n    }\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  round() {\r\n    this.x = MathUtils.round(this.x);\r\n    this.y = MathUtils.round(this.y);\r\n    return this;\r\n  }\r\n\r\n  reverse() {\r\n    this.x = -this.x;\r\n    this.y = -this.y;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n  }\r\n\r\n  add(other) {\r\n    this.x += other.x;\r\n    this.y += other.y;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n  }\r\n\r\n  sub(other) {\r\n    this.x -= other.x;\r\n    this.y -= other.y;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n  }\r\n\r\n  perp() {\r\n\r\n    let x = this.x;\r\n    this.x = this.y;\r\n    this.y = -x;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n  }\r\n\r\n  \r\n\r\n  dot(other) {\r\n    return Vector.dot(this,other);\r\n  }\r\n\r\n  project(other) {\r\n    return Vector.project(this,other);\r\n  }\r\n\r\n  clone() {\r\n    return new Vector(this.x,this.y);\r\n  }\r\n\r\n  length() {\r\n    return Math.sqrt(this.squaredLenght());\r\n  }\r\n\r\n  toString() {\r\n    return \"{ x: \" + this.x + \", y: \" + this.y + \" }\"\r\n  }\r\n\r\n  squaredLenght() {\r\n    return Vector.dot(this,this);\r\n  }\r\n\r\n  static abs(vector) {\r\n    return new Vector(Math.abs(vector.x), Math.abs(vector.y));\r\n  }\r\n\r\n  static scalar(a, b) {\r\n    return a.x * b.y - a.y * b.x;\r\n  }\r\n\r\n  static distance(a, b) {\r\n    return MathUtils.distance(a.x,a.y,b.x,b.y);\r\n  }\r\n\r\n  static angleBetween(a, b) {\r\n    return MathUtils.angleBetween(a.x,a.y,b.x,b.y);\r\n  }\r\n\r\n  static dot(a, b) {\r\n    return (a.x * b.x) + (a.y * b.y);\r\n  }\r\n\r\n  static project(a,b) {\r\n    let dp = Vector.dot(a,b);\r\n    var proj = new Vector(\r\n      ( dp / (b.x*b.x + b.y*b.y) ) * b.x,\r\n      ( dp / (b.x*b.x + b.y*b.y) ) * b.y\r\n    );\r\n    return proj;\r\n  };\r\n\r\n  // project for unit vector\r\n  static projectNormal(a,b) {\r\n    let dp = Vector.dot(a,b);\r\n    let proj = new Vector(   dp / b.x,   dp / b.y );\r\n    return proj;\r\n  };\r\n\r\n  static reflect(vec,axis) {\r\n\r\n    let r = Vector.project(vec,axis);\r\n    r.scale(2);\r\n    r.sub(vec);\r\n    return r;\r\n\r\n  };\r\n\r\n  static reflectNormal(vec,axis) {\r\n\r\n    let r = Vector.projectNormal(vec,axis);\r\n    r.scale(2);\r\n    r.sub(vec);\r\n    return r;\r\n\r\n  };\r\n\r\n\r\n  static lerp(a, b, t) {\r\n    let vec = new Vector(\r\n      MathUtils.lerp(a.x,b.x,t),\r\n      MathUtils.lerp(a.y,b.y,t)\r\n    );\r\n    return vec;\r\n  }\r\n\r\n  get magnitude() {return Math.sqrt((this.x * this.x) + (this.y * this.y));}\r\n  get normal() {\r\n    let mag = this.magnitude;\r\n    let vec = new tobiJS.Vector(this.x / mag,this.y / mag);\r\n    return vec;\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = Vector;","import EaseIn from \"./EaseIn\";\r\nimport EaseOut from './EaseOut';\r\nimport EaseInOut from \"./EaseInOut\";\r\n\r\n/**\r\n * Easing functions\r\n */\r\nconst Ease = {\r\n\r\n\r\n    /**\r\n     * Ease-in functions\r\n     */\r\n    in: EaseIn,\r\n\r\n    /**\r\n     * Ease-out functions\r\n     */\r\n    out: EaseOut,\r\n\r\n    /**\r\n     * Ease-in-out functions\r\n     */\r\n    inout: EaseInOut\r\n\r\n\r\n\r\n}\r\n\r\nObject.freeze(Ease);\r\n\r\nmodule.exports = Ease;\r\n\r\nexport default Ease;","import MathUtils from \"../MathUtils\";\r\nimport EasingType, { EASE_BACK_CONST } from \"./EasingType\";\r\n\r\n\r\nclass EaseInFunctions {\r\n\r\n\r\n    /**\r\n     * \r\n     * @param {Number} from \r\n     * @param {Number} to \r\n     * @param {Number} t \r\n     * @param {Number} [duration]\r\n     */\r\n    linear(from, to, t) {\r\n        return MathUtils.lerp(from, to, t);\r\n    }\r\n\r\n    stepped(from, to, t) {\r\n\r\n        if (t < 0.5)\r\n            return from;\r\n\r\n        return from + to;\r\n    }\r\n\r\n    cut(from, to, t, levels) {\r\n        if (levels === undefined) levels = 2;\r\n        return MathUtils.lerp(from, to, MathUtils.floor(t * levels) / levels);\r\n    }\r\n\r\n    sine(from, to, t) {\r\n        return to * (Math.sin(t * MathUtils.HALFPI - MathUtils.HALFPI) + 1) + from;\r\n    }\r\n\r\n    power(from, to, t, power) {\r\n        return to * Math.pow(t, power) + from;\r\n    }\r\n\r\n    quadratic(from, to, t) {\r\n        return this.power(from, to, t, 2);\r\n    }\r\n\r\n    cubic(from, to, t) {\r\n        return this.power(from, to, t, 3);\r\n    }\r\n\r\n    quartic(from, to, t) {\r\n        return this.power(from, to, t, 4);\r\n    }\r\n\r\n    quintic(from, to, t) {\r\n        return this.power(from, to, t, 5);\r\n    }\r\n\r\n    exponential(from, to, t) {\r\n        return (t == 0) ? from : to * Math.pow(2, 10 * (t - 1)) + from;\r\n    }\r\n\r\n    circ(from, to, t) {\r\n        return -to * (Math.sqrt(1 - t * t) - 1) + from\r\n    }\r\n\r\n    elastic(from, to, t, duration) {\r\n        if (duration === undefined) duration = 1;\r\n\r\n        if (t == 0)\r\n            return from;\r\n        if ((t /= duration) == 1)\r\n            return from + to;\r\n\r\n        let p = duration * 0.3;\r\n        let s = p / 4;\r\n        // this is a fix, again, with post-increment operators\r\n        let postFix = to * Math.pow(2, 10 * (t -= 1));\r\n        return -(postFix * Math.sin((t * duration - s) * (2 * Math.PI) / p)) + from;\r\n    }\r\n\r\n    back(from, to, t) {\r\n        return to * t * t * ((EASE_BACK_CONST + 1) * t - EASE_BACK_CONST) + from;\r\n    }\r\n\r\n    /**\r\n     * Ease-in by specific EasingType.\r\n     * \r\n     * @param {EasingType} type The type of easing\r\n     * @param {Number} from Start point\r\n     * @param {Number} to End point\r\n     * @param {Number} t Normalized time\r\n     * @param {Number} [arg] Additional argument for specific types:\r\n     * \r\n     * @constant EasingType.CUT: The cell levels of the interpolation\r\n     * @constant EasintType.ELASTIC: The duration of the easing.\r\n     * @constant EasintType.POWER: The pow product.\r\n     */\r\n    by(type, from, to, t, arg) {\r\n\r\n        if (arg === undefined) arg = 3;\r\n\r\n        switch (type) {\r\n\r\n            case EasingType.NONE:\r\n                return t;\r\n            case EasingType.STEPPED:\r\n                return this.stepped(from, to, t);\r\n            case EasingType.CUT:\r\n                return this.cut(from, to, t, arg);\r\n            case EasingType.LINEAR:\r\n                return this.linear(from, to, t);\r\n            case EasingType.SINE:\r\n                return this.sine(from, to, t);\r\n            case EasingType.QUADRATIC:\r\n                return this.power(from, to, t, 2);\r\n            case EasingType.CUBIC:\r\n                return this.power(from, to, t, 3);\r\n            case EasingType.QUARTIC:\r\n                return this.power(from, to, t, 4);\r\n            case EasingType.QUINTIC:\r\n                return this.power(from, to, t, 5);\r\n            case EasingType.POWER:\r\n                return this.power(from, to, t, arg);\r\n            case EasingType.EXPONENTIAL:\r\n                return this.exponential(from, to, t);\r\n            case EasingType.CIRC:\r\n                return this.circ(from, to, t);\r\n            case EasingType.BACK:\r\n                return this.back(from, to, t);\r\n            case EasingType.ELASTIC:\r\n                return this.elastic(from, to, t, arg);\r\n        }\r\n\r\n        return t;\r\n    }\r\n\r\n\r\n};\r\n\r\nvar EaseIn = new EaseInFunctions();\r\n\r\nObject.freeze(EaseIn);\r\n\r\nexport default EaseIn;","import MathUtils from \"../MathUtils\";\r\nimport EaseIn from \"./EaseIn\";\r\nimport EasingType, { EASE_BACK_CONST } from \"./EasingType\";\r\n\r\n\r\nclass EaseInOutFunctions {\r\n\r\n    linear(from, to, t) {\r\n        return MathUtils.lerp(from, to, t);\r\n    }\r\n\r\n    stepped(from, to, t) {\r\n        return to * ((t < 0.5) ? 0 : 1) + from;\r\n    }\r\n\r\n    cut(from, to, t, levels) {\r\n        if (levels === undefined) levels = 2;\r\n        return MathUtils.lerp(from, to, MathUtils.floor(t * levels) / levels);\r\n    }\r\n\r\n    sine(from, to, t) {\r\n        return to * ((Math.sin(t * Math.PI - MathUtils.HALFPI) + 1) / 2) + from;\r\n    }\r\n\r\n    power(from, to, t, power) {\r\n\r\n        t *= 2;\r\n        if (t < 1)\r\n            return EaseIn.power(from, to, t, power) / 2;\r\n\r\n        let sign = (power % 2 == 0) ? -1 : 1;\r\n        return to * (sign / 2.0 * (Math.pow(s - 2, power) + sign * 2)) + from;\r\n    }\r\n\r\n    quadratic(from, to, t) {\r\n        return this.power(from, to, t, 2);\r\n    }\r\n\r\n    cubic(from, to, t) {\r\n        return this.power(from, to, t, 3);\r\n    }\r\n\r\n    quartic(from, to, t) {\r\n        return this.power(from, to, t, 4);\r\n    }\r\n\r\n    quintic(from, to, t) {\r\n        return this.power(from, to, t, 5);\r\n    }\r\n\r\n    exponential(from, to, t) {\r\n\r\n        if (t == 0.0 || t == 1.0)\r\n            return (to * t) + from;\r\n\r\n        if (t < 0.5) {\r\n            return (to * 0.5 * Math.pow(2, (20 * t) - 10)) + from;\r\n        } else {\r\n            return (to * -0.5 * Math.pow(2, (-20 * t) + 10) + 1) + from;\r\n        }\r\n    }\r\n\r\n    circ(from, to, t) {\r\n\r\n        if (t / 2 < 1)\r\n            return -to / 2 * (Math.sqrt(1 - t * t) - 1) + from;\r\n\r\n        return to / 2 * (Math.sqrt(1 - t * (t -= 2)) + 1) + from;\r\n\r\n    }\r\n\r\n    elastic(from, to, t, duration) {\r\n        if (duration === undefined) duration = 1;\r\n\r\n        if (t == 0)\r\n            return from;\r\n\r\n        if ((t /= duration / 2) == 2)\r\n            return from + to;\r\n\r\n        let p = duration * (0.3 * 1.5);\r\n\r\n\r\n        let s = p / 4;\r\n        let postFix = 0;\r\n\r\n\r\n        if (to >= Math.abs(to)) {\r\n            s = p / (2 * Math.PI) * Math.asin(to / to);\r\n        }\r\n\r\n        if (t < 1) {\r\n            postFix = to * Math.pow(2, 10 * (t -= 1));\r\n            return -0.5 * (postFix * Math.sin((t * duration - s) * (2 * Math.PI) / p)) + from;\r\n        }\r\n\r\n        // postIncrement is evil\r\n        postFix = to * Math.pow(2, -10 * (t -= 1));\r\n        return postFix * Math.sin((t * duration - s) * (2 * Math.PI) / p) * 0.5 + to + from;\r\n    }\r\n\r\n    back(from, to, t) {\r\n\r\n        if (t == 0)\r\n            return from;\r\n\r\n        if ((t /= 0.5) == 2)\r\n            return from + to;\r\n\r\n        let p = (.3 * 1.5);\r\n        let s = EASE_BACK_CONST;\r\n\r\n        if (t < 1)\r\n            return to / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + from;\r\n\r\n        return to / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + from;\r\n    }\r\n\r\n    /**\r\n     * Ease-in and ease out by specific EasingType.\r\n     * \r\n     * @param {EasingType} type The type of easing\r\n     * @param {Number} from Start point\r\n     * @param {Number} to End point\r\n     * @param {Number} t Normalized time\r\n     * @param {Number} [arg] Additional argument for specific types:\r\n     * \r\n     * @constant EasingType.CUT: The cell levels of the interpolation\r\n     * @constant EasintType.ELASTIC: The duration of the easing.\r\n     * @constant EasintType.POWER: The pow product.\r\n     */\r\n    by(type, from, to, t, arg) {\r\n\r\n        if (arg === undefined) arg = 1;\r\n\r\n        switch (type) {\r\n\r\n            case EasingType.NONE:\r\n                return t;\r\n            case EasingType.CUT:\r\n                return this.cut(from, to, t, arg);\r\n            case EasingType.LINEAR:\r\n                return this.linear(from, to, t);\r\n            case EasingType.SINE:\r\n                return this.sine(from, to, t);\r\n            case EasingType.QUADRATIC:\r\n                return this.power(from, to, t, 2);\r\n            case EasingType.CUBIC:\r\n                return this.power(from, to, t, 3);\r\n            case EasingType.QUARTIC:\r\n                return this.power(from, to, t, 4);\r\n            case EasingType.QUINTIC:\r\n                return this.power(from, to, t, 5);\r\n            case EasingType.POWER:\r\n                return this.power(from, to, t, arg);\r\n            case EasingType.EXPONENTIAL:\r\n                return this.exponential(from, to, t);\r\n            case EasingType.CIRC:\r\n                return this.circ(from, to, t);\r\n            case EasingType.BACK:\r\n                return this.back(from, to, t);\r\n            case EasingType.ELASTIC:\r\n                return this.elastic(from, to, t, arg);\r\n        }\r\n\r\n        return t;\r\n    }\r\n\r\n}\r\n\r\nvar EaseInOut = new EaseInOutFunctions();\r\n\r\nObject.freeze(EaseInOut);\r\n\r\nexport default EaseInOut;","import MathUtils from '../../math/MathUtils'\r\nimport EasingType, { EASE_BACK_CONST } from './EasingType';\r\n\r\nclass EaseOutFunction {\r\n\r\n    linear(from, to, t) {\r\n        return MathUtils.lerp(from, to, t);\r\n    }\r\n\r\n    stepped(from, to, t) {\r\n        return to * ((t < 0.5) ? 0 : 1) + from;\r\n    }\r\n\r\n    cut(from, to, t, levels) {\r\n        if (levels === undefined) levels = 2;\r\n        return MathUtils.lerp(from, to, MathUtils.floor(t * levels) / levels);\r\n    }\r\n\r\n    sine(from, to, t) {\r\n        return -from * (Math.sin(t * MathUtils.HALFPI) + 1) + from + to;\r\n    }\r\n\r\n    power(from, to, t, power) {\r\n        let sign = power % 2 == 0 ? -1 : 1;\r\n        return to * (sign * Math.pow(t - 1, power) + sign) + from;\r\n    }\r\n\r\n    quadratic(from, to, t) {\r\n        return this.power(from, to, t, 2);\r\n    }\r\n\r\n    cubic(from, to, t) {\r\n        return this.power(from, to, t, 3);\r\n    }\r\n\r\n    quartic(from, to, t) {\r\n        return this.power(from, to, t, 4);\r\n    }\r\n\r\n    quintic(from, to, t) {\r\n        return this.power(from, to, t, 5);\r\n    }\r\n\r\n    exponential(from, to, t) {\r\n        return (t == 1) ? from : to * (1 - Math.pow(2, 10 * t)) + from;\r\n    }\r\n\r\n    circ(from, to, t) {\r\n        return to * Math.sqrt(1 - (t - 1) * t) + from\r\n    }\r\n\r\n    elastic(from, to, t, duration) {\r\n        if (duration === undefined) duration = 1;\r\n\r\n        if (t == 0)\r\n            return from;\r\n        if ((t /= duration) == 1)\r\n            return from + to;\r\n\r\n        let p = duration * 0.3;\r\n        let s = p / 4;\r\n        return (to * Mathf.pow(2, -10 * t) * Math.sin((t - s) * (2 * Math.PI) / p) + 1) + from;\r\n    }\r\n\r\n    back(from, to, t) {\r\n        //let f = (1 - t);\r\n        //return to * (1 - (f * f * f - f * Mathf.Sin(f * Math.PI))) + from;\r\n        return to * ((t - 1) * t * ((EASE_BACK_CONST + 1) * t + EASE_BACK_CONST) + 1) + from;\r\n    }\r\n\r\n    /**\r\n     * Ease-out by specific EasingType.\r\n     * \r\n     * @param {EasingType} type The type of easing\r\n     * @param {Number} from Start point\r\n     * @param {Number} to End point\r\n     * @param {Number} t Normalized time\r\n     * @param {Number} [arg] Additional argument for specific types:\r\n     * \r\n     * @constant EasingType.CUT: The cell levels of the interpolation\r\n     * @constant EasintType.ELASTIC: The duration of the easing.\r\n     * @constant EasintType.POWER: The pow product.\r\n     */\r\n    by(type, from, to, t, arg) {\r\n\r\n        if (arg === undefined) arg = 1;\r\n\r\n        switch (type) {\r\n\r\n            case EasingType.NONE:\r\n                return t;\r\n            case EasingType.STEPPED:\r\n                return this.stepped(from, to, t);\r\n            case EasingType.CUT:\r\n                return this.cut(from, to, t, arg);\r\n            case EasingType.LINEAR:\r\n                return this.linear(from, to, t);\r\n            case EasingType.SINE:\r\n                return this.sine(from, to, t);\r\n            case EasingType.QUADRATIC:\r\n                return this.power(from, to, t, 2);\r\n            case EasingType.CUBIC:\r\n                return this.power(from, to, t, 3);\r\n            case EasingType.QUARTIC:\r\n                return this.power(from, to, t, 4);\r\n            case EasingType.QUINTIC:\r\n                return this.power(from, to, t, 5);\r\n            case EasingType.POWER:\r\n                return this.power(from, to, t, arg);\r\n            case EasingType.EXPONENTIAL:\r\n                return this.exponential(from, to, t);\r\n            case EasingType.CIRC:\r\n                return this.circ(from, to, t);\r\n            case EasingType.BACK:\r\n                return this.back(from, to, t);\r\n            case EasingType.ELASTIC:\r\n                return this.elastic(from, to, t, arg);\r\n        }\r\n\r\n        return t;\r\n    }\r\n\r\n}\r\n\r\nvar EaseOut = new EaseOutFunction();\r\n\r\nObject.freeze(EaseOut);\r\n\r\nexport default EaseOut;\r\n\r\nmodule.exports = EaseOut;","\r\n/**\r\n * Describes the easing method type\r\n */\r\nconst EasingType = {\r\n    /**\r\n     * No easing : 0\r\n     */\r\n    NONE : 0,\r\n    /**\r\n     * Clamped interpolation between tMin and tMax : 1\r\n     */\r\n    STEPPED : 1,\r\n    /**\r\n     * Linear interpolation : 2\r\n     */\r\n    LINEAR : 2,\r\n    CUT : 3,\r\n    SINE : 4,\r\n    QUADRATIC : 5,\r\n    CUBIC : 6,\r\n    QUARTIC : 7,\r\n    QUINTIC : 8,\r\n    POWER : 9,\r\n    EXPONENTIAL : 10,\r\n    CIRC : 11,\r\n    BACK : 12,\r\n    ELASTIC : 13,\r\n    BOUNCE : 14,\r\n    \r\n    \r\n}\r\n\r\nexport const EASE_BACK_CONST = 1.70158;\r\n\r\nObject.freeze(EasingType);\r\n\r\nexport default EasingType;\r\n\r\nmodule.exports = EasingType;","\r\nmodule.exports = {\r\n\r\n    Ease : require('./Ease'),\r\n    Type : require('./EasingType'),  \r\n    \r\n}","\r\nexport default class Module\r\n{\r\n    constructor(moduleType, moduleName, moduleManager)\r\n    {\r\n        this._moduleType = moduleType || \"none\";\r\n        this._moduleName = moduleName || \"noName\";\r\n        this._enabled = true;\r\n        this.entity = null;\r\n        this.moduleManager = moduleManager || undefined;\r\n\r\n        if (moduleManager !== undefined)\r\n        {\r\n            this.entity = moduleManager.entity;\r\n        }\r\n        //this.game = moduleManager.game || null;\r\n    }\r\n\r\n\r\n    get type() {return this._moduleType;}\r\n    get name() {return this._moduleName;}\r\n    get enabled() {return this._enabled;}\r\n    set enabled(value) {\r\n        value = !!value;\r\n\r\n        if (value !== this._enabled)\r\n        {\r\n            this._enabled = value;\r\n        }\r\n    }\r\n}\r\n\r\n//module.exports = Module;","import ModuleProvider from \"./ModuleProvider\";\r\n\r\n\r\nexport default class ModuleAttacher\r\n{\r\n    constructor(moduleManager) {\r\n        this.moduleManager = moduleManager;\r\n    }\r\n\r\n    sprite(tag) {\r\n        return ModuleProvider.attach(this.moduleManager, 'sprite', tag);\r\n    }\r\n\r\n    tilemap(tag) {\r\n\r\n        if (tag === undefined || tag == null)\r\n            throw new Error(\"ModuleAttacher.tilemap: Can not create Tilemap module without a proper tag name.\");\r\n\r\n        return ModuleProvider.attach(this.moduleManager, 'tilemap', tag);\r\n    }\r\n}","\r\nimport DataMap from '../structures/Map'\r\nimport DataList from '../structures/List'\r\nimport ModuleAttacher from './ModuleAttacher'\r\n\r\n\r\nexport default class ModuleManager\r\n{\r\n    constructor(entity)\r\n    {\r\n        this.entity = entity || null;\r\n        this.attached = new DataMap();\r\n        this._pendingModulesInitialization = new DataList();\r\n        this.attach = new ModuleAttacher(this);\r\n    }\r\n\r\n    detach(moduleName, index)\r\n    {\r\n        \r\n    }\r\n\r\n    has(moduleName) {\r\n        return this.attached.has(moduleName);\r\n    }\r\n\r\n    get(moduleName) {\r\n        return this.attached.get(moduleName);\r\n    }\r\n\r\n} ","\r\n\r\nimport DataMap from '../structures/Map'\r\nimport InitializeModuleBase from './components/InitializeModuleBase';\r\n\r\n\r\nclass ModuleProviderManager\r\n{\r\n    constructor()\r\n    {\r\n        this.proxyModules = new DataMap();\r\n    }\r\n\r\n    attach(modulesManager, moduleName, args)\r\n    {\r\n        let attached = modulesManager.attached;\r\n\r\n        if (attached.has(moduleName))\r\n            throw new Error('ModuleManager.attach: Could not attach module ' + moduleName + '. Already exists');\r\n\r\n        if (!this.proxyModules.has(moduleName))\r\n            throw new Error('ModuleManager.attach: Module type ' + moduleName + ' don\\'t exists.');\r\n\r\n        // create a new module\r\n        let newModule = this.proxyModules.get(moduleName)(modulesManager, args);\r\n\r\n        // initialize entity module\r\n        InitializeModuleBase(newModule, modulesManager.entity);\r\n\r\n        // attach the new module to manager\r\n        attached.set(newModule.type, newModule);\r\n\r\n        // add to pending initialization list\r\n        modulesManager._pendingModulesInitialization.push(newModule);\r\n\r\n        return newModule;\r\n    }\r\n\r\n    register(moduleName, func)\r\n    {\r\n        if (!ModuleProvider.proxyModules.has(moduleName))\r\n        ModuleProvider.proxyModules.set(moduleName, func); // { type: moduleType, func: func }\r\n        \r\n    }    \r\n}\r\n\r\nvar ModuleProvider = new ModuleProviderManager();\r\n\r\nexport default ModuleProvider;","import Renderable from \"../renderables/Renderable\";\r\nimport Tilemap from \"../renderables/tilemap/Tilemap\";\r\nimport Sprite from \"../renderables/Sprite\";\r\n\r\nexport default function AttachModuleInGame(entityModule, modulesManager, game) {\r\n \r\n    // RENDERABLES\r\n    if (entityModule instanceof Sprite) \r\n    {\r\n        game.system.render.layer.renderLayers.at(0).add(entityModule);\r\n    } \r\n    else if (entityModule instanceof Tilemap) {\r\n        for (let i = 0; i < entityModule.layers.length; i++) {\r\n            game.system.render.layer.renderLayers.at(0).add(entityModule.layers[i]);\r\n        \r\n    }\r\n\r\n       \r\n    }\r\n\r\n}","\r\nexport default function InitializeModuleBase(entityModule, instace) {\r\n\r\n    entityModule.entity = instace;\r\n    entityModule.moduleManager = instace.modules;\r\n\r\n}","import InitializeModuleBase from \"./InitializeModuleBase\";\r\nimport RenderableUpdate from \"../renderables/components/RenderableUpdate\";\r\nimport AttachModuleInGame from \"./AttachModuleInGame\";\r\n\r\nexport default function ModulesUpdater(modulesManager, game)\r\n{\r\n    let size = modulesManager._pendingModulesInitialization.size;\r\n    let entity = modulesManager.entity;\r\n\r\n    if (size > 0)\r\n    {\r\n        // add pending modules\r\n        modulesManager._pendingModulesInitialization.each(mod => {\r\n            AttachModuleInGame(mod, modulesManager, game);\r\n        });\r\n\r\n        modulesManager._pendingModulesInitialization.clear();\r\n    }\r\n\r\n    \r\n    let render = modulesManager.attached.get('render');\r\n    if (render !== undefined && render != null) {\r\n        RenderableUpdate(entity, render, game.system.camera, game.system.loop.updateStep);\r\n    }\r\n    \r\n}\r\n\r\n","\r\nmodule.exports = {\r\n    Module : require('./Module'),\r\n    ModuleProvider : require('./ModuleProvider'),\r\n    ModuleAttacher : require('./ModuleAttacher'),\r\n    Renderables : require('./renderables')\r\n}","\r\nimport BoundingBox from '../../math/BoundingBox';\r\nimport Vector from '../../math/Vector'\r\nimport Module from '../Module';\r\n\r\nexport default class Renderable extends Module\r\n{\r\n    constructor(moduleName, moduleManager)\r\n    {\r\n        super('render', moduleName || 'renderable', moduleManager);\r\n\r\n        this._layerID = 0;\r\n        this._depth = 0;\r\n        this._alpha = 1;\r\n        this._depthSorting = 0;\r\n        this._bounds = new BoundingBox();\r\n        this._originInPixels = {x:0, y:0};\r\n        this._originIsDirty = true;\r\n    }\r\n\r\n    get bounds() {return this._bounds;}\r\n\r\n    get depth() { return this._depthSorting; }\r\n    get layerName() { }\r\n    get layer() { return this._layerID; }\r\n    get alpha() { return this._alpha; }\r\n    set depth(value) {\r\n\r\n        if (this.entity.game !== undefined) {\r\n            if (value !== this._depthSorting)\r\n            {\r\n                this._depthSorting = value;\r\n                this.entity.game.system.event.dispatch('__render_layersorting', this._layerID);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    set layer(value) {\r\n        if (this.game != null)\r\n        {\r\n            if (value === 'number')\r\n            {\r\n                //this.game.render.get\r\n            }\r\n        }\r\n    }   \r\n\r\n    set alpha(value) {\r\n        this._alpha = alpha;\r\n        return this;\r\n    }\r\n\r\n\r\n\r\n}","import Renderable from \"./Renderable\";\r\nimport Rect from \"../../math/Rect\";\r\nimport DrawImage from \"./components/DrawImage\";\r\nimport ModuleProvider from \"../ModuleProvider\";\r\nimport UpdateTransformBounds from '../../transform/UpdateTransformBounds'\r\n\r\n\r\nexport default class Sprite extends Renderable {\r\n\r\n    constructor(moduleManager)\r\n    {\r\n        super('sprite', moduleManager);\r\n\r\n        //this._type = \"sprite\";\r\n        this.source = null;\r\n        this.frame = new Rect();\r\n   \r\n    \r\n    }\r\n\r\n    get width() {return this.frame.width; }\r\n    get height() {return this.frame.height; }\r\n\r\n    setFrame(x, y, width, height)\r\n    {\r\n        this.frame.set(x,y,width,height);\r\n    }\r\n\r\n    setFrameRect(rect)\r\n    {\r\n        this.frame.set(x,y,width,height);\r\n    }\r\n\r\n    setSprite(tag) {\r\n\r\n        if (this.entity != null || this.entity !== undefined) {\r\n            var sprite = this.entity.game.system.cache.image.get(tag);\r\n\r\n            if (sprite != null) {\r\n                this.setSource(sprite.data, true);\r\n            }\r\n        } else {\r\n            throw new Error(\"Sprite.setSprite: Can not set Sprite. The entity is not in the game\");\r\n        }\r\n        \r\n    }\r\n\r\n    setSource(image, changeFrame) {\r\n\r\n        if (changeFrame === undefined) changeFrame = false;\r\n      \r\n        if (this.source != image)\r\n          this.source = image;\r\n      \r\n        if (changeFrame)\r\n            this.setFrame(0,0,this.source.width,this.source.height);\r\n      \r\n      \r\n    }\r\n\r\n    render(context)\r\n    {\r\n        if (!this._enabled)\r\n            return false;\r\n\r\n        DrawImage(context, \r\n            this.source, this.frame,\r\n            this.entity.transform, this._originInPixels);\r\n   \r\n       return true;\r\n    }\r\n}\r\n\r\nModuleProvider.register('sprite', function(moduleManager, tag) {\r\n\r\n    var spr = new Sprite(moduleManager);\r\n\r\n    if (tag !== undefined)\r\n    {   \r\n        spr.setSprite(tag)\r\n    } \r\n\r\n\r\n    return spr;\r\n\r\n});","\r\nexport default function AnimateTilemap(tilemap, time) {\r\n\r\n    let animator = tilemap.animator;\r\n\r\n    if (animator === undefined)\r\n        return;\r\n\r\n    //console.log(time.hiDeltaTime);\r\n\r\n    let len = animator.animatedTiles.size;\r\n\r\n    if (len === 0)\r\n        return;\r\n\r\n    let delta = time.hiDeltaTime;\r\n\r\n\r\n    for (let i = 0; i < len; i++) {\r\n\r\n        let animatedTile = animator.animatedTiles.at(i); \r\n\r\n        animatedTile.t += delta;\r\n        \r\n        let GID = animatedTile.tileGID;\r\n        let currentKeyFrame = GID.keyFrames[animatedTile.frame];\r\n\r\n        if (animatedTile.t >= currentKeyFrame.duration) {\r\n\r\n            animatedTile.t = 0;\r\n           \r\n\r\n            if (animatedTile.frame + 1 < GID.keyFrames.length)\r\n                animatedTile.frame++;\r\n            else \r\n                animatedTile.frame = 0;\r\n            \r\n\r\n            let nextGID = GID.keyFrames[animatedTile.frame].tileID;//GID.tileset.getTile(GID.keyFrames[animatedTile.frame].tileID).id;\r\n            \r\n            GID.currentFrame = nextGID;\r\n\r\n            \r\n        }\r\n\r\n    }\r\n\r\n}","import MathUtils from \"../../../math/MathUtils\";\r\nimport CullingMethod from \"./CullingMethod\";\r\n\r\nfunction LimitCulling(culling, tilemap) {\r\n\r\n    // limit culling\r\n\r\n    if (culling.start.x < 0)\r\n    culling.start.x = 0;\r\n\r\n    if (culling.start.y < 0)\r\n    culling.start.y = 0;\r\n\r\n    if (culling.end.x > tilemap.width)\r\n    culling.end.x = tilemap.width;\r\n    \r\n    if (culling.end.y > tilemap.height)\r\n    culling.end.y = tilemap.height;\r\n\r\n}\r\n\r\nexport default function CullTiles(tilemap, camera) {\r\n    \r\n    let t = tilemap.entity.transform;\r\n    let rot = camera.transform.rotation + t.rotation;\r\n\r\n    // 90 DEGREE ROTATION\r\n    // We will use the linear culling that is faster\r\n\r\n\r\n\r\n    if (rot % MathUtils.HALFPI === 0) {\r\n\r\n        let tx = t.position.x - tilemap._originInPixels.x;\r\n        let ty = t.position.y - tilemap._originInPixels.y;\r\n\r\n\r\n        tilemap.culling.method = CullingMethod.LINEAR;\r\n\r\n            tilemap.culling.start.x =  Math.floor((camera.viewBounds.min.x - tx) / tilemap.tileWidth);\r\n            tilemap.culling.start.y =  Math.floor((camera.viewBounds.min.y - ty) / tilemap.tileHeight);\r\n            tilemap.culling.end.x =  Math.ceil((camera.viewBounds.max.x - tx) / tilemap.tileWidth);\r\n            tilemap.culling.end.y =  Math.ceil((camera.viewBounds.max.y - ty) / tilemap.tileHeight);\r\n\r\n        LimitCulling(tilemap.culling, tilemap);\r\n\r\n        // TODO FOR 90 Deg TILES\r\n\r\n\r\n    } else {\r\n\r\n        tilemap.culling.method = 1;\r\n\r\n        // TODO ROTATED TILES\r\n\r\n    }\r\n    \r\n\r\n}","\r\nconst CullingMethod = {\r\n    LINEAR : 0,\r\n    LINEAR90DEG : 1 \r\n}\r\n\r\nexport default CullingMethod;","\r\n\r\nfunction DrawImage(context, source, frame, transform, destination)\r\n{\r\n    \r\n\r\n    if (context === undefined) return false;\r\n\r\n    if (source === undefined || source == null) return false;\r\n\r\n    let matrix = transform.matrix;\r\n\r\n    context.setTransform(\r\n        matrix.a[0], matrix.a[1], // 2\r\n        matrix.a[3], matrix.a[4], // 5\r\n        matrix.a[6],\r\n        matrix.a[7]);\r\n    \r\n    //context.globalAlpha = this.alpha;\r\n    \r\n    context.drawImage(\r\n            source, // image\r\n            frame.x, // sx - pos crop x\r\n            frame.y, // sy - pos crop y\r\n            frame.width, // sWidth - crop width\r\n            frame.height, // sHeight - crop height\r\n            -destination.x, // destination x\r\n            -destination.y, // destination y\r\n            frame.width,\r\n            frame.height\r\n            );\r\n      \r\n        return true;\r\n        \r\n}\r\n\r\n\r\nexport default DrawImage;","import MathUtils from \"../../../math/MathUtils\";\r\nimport CullingMethod from \"./CullingMethod\";\r\n\r\nexport default function DrawTilemapLayer(context, tilemap, layer, transform) {\r\n\r\n    let draws = 0;\r\n    let matrix = transform.matrix;\r\n    let x = matrix.a[6];\r\n    let y = matrix.a[7];\r\n\r\n    if (tilemap.floorTiles)\r\n    {\r\n       x = MathUtils.round(x);\r\n       y = MathUtils.round(y);\r\n    }\r\n    context.setTransform(\r\n        matrix.a[0], matrix.a[1], // 2\r\n        matrix.a[3], matrix.a[4], // 5\r\n        x, y);\r\n\r\n    if (tilemap.culling.method <= 1) {\r\n\r\n        let idx = 0;\r\n\r\n        for (let j = tilemap.culling.start.y; j < tilemap.culling.end.y; j++) {\r\n            for (let i = tilemap.culling.start.x; i < tilemap.culling.end.x; i++) {\r\n    \r\n                //if (tilemap.culling.method == CullingMethod.LINEAR)\r\n                    idx = i + j * tilemap.width;\r\n                //else if (tilemap.culling.method == CullingMethod.LINEAR90DEG)\r\n                //    idx = j + i * tilemap.width;\r\n\r\n                let tile = layer.tiles[idx];\r\n\r\n                if (tile == null || tile === undefined) continue;\r\n\r\n                let frame;\r\n\r\n                if (tile.data.isAnimated === false || tile.data.isAnimated === undefined)\r\n                    frame = tile.data.st;\r\n                else\r\n                    frame = tile.data.tileset.getTile(tile.data.currentFrame).st;\r\n\r\n                \r\n\r\n                context.drawImage(\r\n                tile.data.tileset.image.data, // image\r\n                frame.x, // sx - pos crop x\r\n                frame.y, // sy - pos crop y\r\n                frame.width, // sWidth - crop width\r\n                frame.height, // sHeight - crop height\r\n                tile.x - tilemap._originInPixels.x, // destination x\r\n                tile.y - tilemap._originInPixels.y,  // destination y\r\n                frame.width,\r\n                frame.height\r\n                    );\r\n\r\n                draws++;\r\n            }\r\n        }\r\n    }\r\n    \r\n   //for (let i = 0; i < layer.culledTiles.lenght; i++) {\r\n    /*for (let i = 0; i < layer.tiles.length; i++) {\r\n\r\n        let tile = layer.tiles[i];\r\n\r\n        if (tile == null || tile === undefined) continue;\r\n\r\n        context.drawImage(\r\n            tile.data.tileset.image.data, // image\r\n            tile.frame.x, // sx - pos crop x\r\n            tile.frame.y, // sy - pos crop y\r\n            tile.frame.width, // sWidth - crop width\r\n            tile.frame.height, // sHeight - crop height\r\n            tile.x, // destination x\r\n            tile.y,  // destination y\r\n            tile.frame.width,\r\n            tile.frame.height\r\n                );\r\n\r\n        draws++;\r\n\r\n    }*/\r\n\r\n    return draws;\r\n\r\n}","import ComputeBounds from \"../../../transform/ComputeBounds\";\r\n\r\nexport default function RenderableBoundsUpdate(renderable, entity, camera) {\r\n\r\n    if (!entity.transform._isDirty && !camera.transform._isDirty)\r\n        return;\r\n\r\n    if (renderable._originIsDirty) {\r\n        // destination\r\n        renderable._originInPixels.x = entity.transform.origin.x * renderable.width;\r\n        renderable._originInPixels.y = entity.transform.origin.y * renderable.height;\r\n        // renderable._originIsDirty = false;\r\n    }\r\n\r\n    ComputeBounds(\r\n        renderable._bounds, entity.transform, \r\n        renderable.width, renderable.height,\r\n        renderable._originInPixels);\r\n\r\n}","\r\nimport CullTiles from \"./CullTiles\";\r\nimport AnimateTilemap from './AnimateTilemap'\r\nimport RenderableBoundsUpdate from \"./RenderableBoundsUpdate\";\r\n\r\n\r\nexport default function RenderableUpdate(entity, renderable, camera, gameTime) {\r\n\r\n    if (renderable.name == 'tilemap') {\r\n\r\n        if (renderable._originIsDirty) {\r\n            // destination\r\n            renderable._originInPixels.x = entity.transform.origin.x * renderable.pixelsWidth;\r\n            renderable._originInPixels.y = entity.transform.origin.y * renderable.pixelsHeight;\r\n        }\r\n\r\n        AnimateTilemap(renderable, gameTime);\r\n\r\n        if (!entity.transform._isDirty && !camera.transform._isDirty)\r\n            return;\r\n\r\n        CullTiles(renderable, camera)\r\n\r\n        for (let i = 0; i < renderable.layers.length; i++) {\r\n            RenderableBoundsUpdate(renderable, entity, camera);\r\n        }\r\n\r\n    } else {\r\n        \r\n        RenderableBoundsUpdate(renderable, entity, camera);\r\n    }\r\n\r\n\r\n}","\r\nmodule.exports = {\r\n    Renderable : require('./Renderable'),\r\n    Sprite : require('./Sprite'),\r\n    Tilemap : require('./tilemap/Tilemap')\r\n}","import Renderable from \"../Renderable\";\r\nimport ModuleProvider from \"../../ModuleProvider\";\r\nimport TilemapLayer from \"./TilemapLayer\";\r\nimport TilemapAnimator from \"./TilemapAnimator\";\r\n\r\nexport default class Tilemap extends Renderable {\r\n    \r\n    constructor(moduleManager, resource)\r\n    {\r\n        super('tilemap', moduleManager);\r\n\r\n        //this._type = \"tilemap\";\r\n        this.resource = resource;\r\n        this.tileWidth = resource.metaData.tileWidth;\r\n        this.tileHeight = resource.metaData.tileHeight;\r\n        this.width = resource.metaData.width;\r\n        this.height = resource.metaData.height;\r\n        this.orientation = resource.metaData.orientation;\r\n        this.pixelsWidth = resource.metaData.pixelsWidth;\r\n        this.pixelsHeight = resource.metaData.pixelsHeight;\r\n        this.animator = undefined;\r\n\r\n        this.culling = {\r\n            method : 0,\r\n            start : {x: 0, y: 0},\r\n            end : {x : 0, y : 0}\r\n        }\r\n\r\n        this.floorTiles = false;\r\n        this.tilesets = resource.tilesets;\r\n        this.layers = [];\r\n\r\n        let animations = false;\r\n\r\n        for (let i = 0; i < resource.layers.length; i++)\r\n        {\r\n            let layer = resource.layers.at(i);\r\n\r\n            if (layer.hasAnimatedTiles)\r\n                animations = true;\r\n\r\n            this.layers.push(new TilemapLayer(this, layer));\r\n        }\r\n\r\n        if (animations === true) {\r\n            this.animator = new TilemapAnimator(this, this.layers);\r\n        }\r\n\r\n    }   \r\n\r\n}\r\n\r\nModuleProvider.register('tilemap', function(moduleManager, tag) {\r\n\r\n    let res = null;\r\n    let cache = moduleManager.entity.game.system.cache;\r\n\r\n    if (cache !== undefined)\r\n        res = cache.tilemap.get(tag);\r\n\r\n    var tilemap = new Tilemap(moduleManager, res);\r\n    tilemap.floorTiles = moduleManager.entity.game.config.floorTiles || false;\r\n\r\n    return tilemap;\r\n\r\n});","import DataList from \"../../../structures/List\";\r\n\r\nexport default class TilemapAnimator {\r\n \r\n    constructor(tilemap, layers) {\r\n\r\n        this.tilemap = tilemap;\r\n        this.animatedTiles = new DataList();\r\n\r\n       \r\n\r\n        for(let i = 0; i < layers.length; i++) {\r\n\r\n            if (!layers[i].layerData.hasAnimatedTiles) continue;\r\n\r\n            let animatedSet = layers[i].layerData.animatedTiles;\r\n\r\n            \r\n\r\n            for (let j = 0; j < animatedSet.size; j++) {\r\n\r\n                let animID = animatedSet.at(j);\r\n               \r\n                let tileGID = tilemap.resource.getTileGID(animID)\r\n\r\n                let hasGid = this.animatedTiles.find(\r\n                    (a) => {\r\n                    return a.tileGID.gid === tileGID.gid;\r\n                });\r\n                \r\n                if (hasGid !== null)\r\n                    continue;\r\n\r\n                   \r\n                \r\n\r\n                this.animatedTiles.push(\r\n                {\r\n                  t : 0, // frameTime\r\n                  frame : 0,\r\n                  tileGID : tileGID\r\n                });\r\n            }\r\n            \r\n        }\r\n\r\n    }\r\n\r\n    update() {\r\n        \r\n    }\r\n\r\n}","import Renderable from \"../Renderable\";\r\nimport DrawTilemapLayer from \"../components/DrawTilemapLayer\";\r\n\r\nexport default class TilemapLayer extends Renderable {\r\n\r\n    constructor(tilemap, layerData) {\r\n\r\n        super('tilemapLayer', tilemap.moduleManager);     \r\n        this.tilemap = tilemap;\r\n        this.layerData = layerData;\r\n    }\r\n\r\n\r\n    get width() {return this.layerData.width * this.tilemap.tileWidth;}\r\n    get height() {return this.layerData.height * this.tilemap.tileHeight;}\r\n\r\n\r\n    render(context) {\r\n\r\n        if (!this._enabled && !this.tilemap._enabled)\r\n            return false;\r\n\r\n        return DrawTilemapLayer(context, this.tilemap, this.layerData, this.tilemap.moduleManager.entity.transform);\r\n\r\n    }\r\n\r\n}","\r\nimport SAT from './sat/SAT'\r\nimport SATResponse from './sat/SATResponse'\r\n\r\nexport default class Physics {\r\n\r\n\r\n  constructor(game) {\r\n\r\n    this.game = null;\r\n    this.sat = null;\r\n    this.response = null;\r\n\r\n   \r\n    this.game = game;\r\n    this.colliadables = [];\r\n\r\n  }\r\n\r\n  init() {\r\n\r\n    this.sat = new SAT();\r\n    this.response = new SATResponse();\r\n\r\n  }\r\n\r\n  getColliadables() {\r\n    return this.colliadables;\r\n  }\r\n\r\n  addColliderObj(obj) {\r\n    this.colliadables.push(obj);\r\n  }\r\n\r\n  removeColliderObj(obj) {\r\n\r\n    var i = this.colliadables.indexOf(obj);\r\n\r\n    if(i != -1) {\r\n      this.colliadables.splice(i, 1);\r\n    }\r\n\r\n  }\r\n\r\n  clear() {\r\n\r\n    this.colliadables = [];\r\n    this.colliadables.length = 0;\r\n\r\n  }\r\n\r\n\r\n\r\n  get length() {return this.colliadables.length;}\r\n\r\n}\r\n\r\n","\r\nimport Vector from '../../math/Vector' \r\n\r\nexport default class SAT {\r\n\r\n  constructor()\r\n  {\r\n\r\n    this.VECTORS = [];\r\n    for (var v = 0; v < 10; v++) { \r\n      VECTORS.push(new Vector()); \r\n    }\r\n\r\n    this.ARRAYS = [];\r\n    for (var a = 0; a < 5; a++) { \r\n      ARRAYS.push([]); \r\n    }\r\n  }\r\n\r\n  flattenPointsOn(points, normal, result) {\r\n          var min = Number.MAX_VALUE;\r\n          var max = -Number.MAX_VALUE;\r\n          var len = points.length;\r\n          for (var i = 0; i < len; i++) {\r\n              // The magnitude of the projection of the point onto the normal\r\n              var dot = points[i].dot(normal);\r\n              if (dot < min) { min = dot; }\r\n              if (dot > max) { max = dot; }\r\n          }\r\n          result[0] = min;\r\n          result[1] = max;\r\n  };\r\n\r\n  isSeparatingAxis(posA, posB, pointsA, pointsB, axis, response) {\r\n\r\n    var rangeA = ARRAYS.pop();\r\n    var rangeB = ARRAYS.pop();\r\n\r\n    // magnitude between the two polygons\r\n    var offsetV = VECTORS.pop().copy(posB).sub(posA);\r\n    var projectedOffset = offsetV.dot(axis);\r\n\r\n    // Project the polygons onto the axis.\r\n    flattenPointsOn(pointsA, axis, rangeA);\r\n    flattenPointsOn(pointsB, axis, rangeB);\r\n\r\n    // Move B's range to its position relative to A.\r\n    rangeB[0] += projectedOffset;\r\n    rangeB[1] += projectedOffset;\r\n\r\n    // Check if there is a gap. If there is, this is a separating axis and we can stop\r\n    if (rangeA[0] > rangeB[1] || rangeB[0] > rangeA[1]) {\r\n        VECTORS.push(offsetV);\r\n        ARRAYS.push(rangeA);\r\n        ARRAYS.push(rangeB);\r\n        return true;\r\n    }\r\n\r\n    if (response) {\r\n        var overlap = 0;\r\n        // A starts further left than B\r\n        if (rangeA[0] < rangeB[0]) {\r\n\r\n          response.aInB = false;\r\n\r\n          // A ends before B does. We have to pull A out of B\r\n          if (rangeA[1] < rangeB[1]) {\r\n\r\n            overlap = rangeA[1] - rangeB[0];\r\n            response.bInA = false;\r\n\r\n          // B is fully inside A.  Pick the shortest way out.\r\n          } else {\r\n\r\n            var option1 = rangeA[1] - rangeB[0];\r\n            var option2 = rangeB[1] - rangeA[0];\r\n            overlap = option1 < option2 ? option1 : -option2;\r\n\r\n          }\r\n        // B starts further left than A\r\n        } else {\r\n\r\n          response.bInA = false;\r\n\r\n          // B ends before A ends. We have to push A out of B\r\n          if (rangeA[1] > rangeB[1]) {\r\n\r\n            overlap = rangeA[0] - rangeB[1];\r\n            response.aInB = false;\r\n\r\n          // A is fully inside B.  Pick the shortest way out.\r\n          } else {\r\n\r\n            var option1 = rangeA[1] - rangeB[0];\r\n            var option2 = rangeB[1] - rangeA[0];\r\n            overlap = option1 < option2 ? option1 : -option2;\r\n\r\n          }\r\n        }\r\n        // If this is the smallest amount of overlap we've seen so far, set it as the minimum overlap.\r\n        var absOverlap = Math.abs(overlap);\r\n\r\n        if (absOverlap < response.overlap) {\r\n\r\n          response.overlap = absOverlap;\r\n          response.overlapN.copy(axis);\r\n\r\n          if (overlap < 0)\r\n            response.overlapN.reverse();\r\n        }\r\n      }\r\n\r\n      VECTORS.push(offsetV);\r\n      ARRAYS.push(rangeA);\r\n      ARRAYS.push(rangeB);\r\n\r\n\r\n\r\n      return false;\r\n\r\n  };\r\n\r\n  testPolygonPolygon(a,b,response) {\r\n\r\n    // collider a\r\n\r\n    var pointsA = a.shape.getPoints();\r\n    var normalsA =  a.shape.getNormals();\r\n    var normalsALen = normalsA.length;\r\n\r\n    // collider b\r\n\r\n    var pointsB = b.shape.getPoints();\r\n    var normalsB =  b.shape.getNormals();\r\n    var normalsBLen = normalsB.length;\r\n\r\n\r\n    // If any of the edge normals of A is a separating axis, no intersection.\r\n    while (normalsALen--) {\r\n        if (isSeparatingAxis(a.position, b.position, pointsA, pointsB, normalsA[normalsALen],response)) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    // If any of the edge normals of B is a separating axis, no intersection.\r\n    while (normalsBLen--) {\r\n        if (isSeparatingAxis(a.position, b.position, pointsA, pointsB, normalsB[normalsBLen], response)) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n\r\n\r\n    // Since none of the edge normals of A or B are a separating axis, there is an intersection\r\n    // and we've already calculated the smallest overlap (in isSeparatingAxis).  Calculate the\r\n    // final overlap vector.\r\n      if (response) {\r\n          response.a = a;\r\n          response.b = b;\r\n          response.overlapV.copy(response.overlapN).scale(response.overlap);\r\n      }\r\n    return true;\r\n\r\n  };\r\n\r\n}\r\n\r\n\r\n","\r\nexport default class SATResponse {\r\n\r\n    constructor()\r\n    {\r\n        this.a = null;\r\n        this.b = null;\r\n        this.overlapN = new Vector();\r\n        this.overlapV = new Vector();\r\n        this.aInB = true;\r\n        this.bInA = true;\r\n        this.overlap = Number.MAX_VALUE;\r\n        this.indexShapeA = -1;\r\n        this.indexShapeB = -1;\r\n        this.clear();\r\n    }\r\n\r\n    clear()\r\n    {\r\n        this.aInB = true;\r\n        this.bInA = true;\r\n        this.overlap = Number.MAX_VALUE;\r\n        this.indexShapeA = -1;\r\n        this.indexShapeB = -1;\r\n        return this;\r\n    }\r\n}\r\n","\r\nexport const RenderingType = {\r\n    NEAREST : 0,\r\n    LINEAR : 1\r\n}","import RenderLayerManagment from './layer/RenderLayersManagement';\r\n\r\nexport default class Render {\r\n    \r\n\r\n    constructor(game) {\r\n        \r\n        this.game = game;\r\n        this.doubleBuffer = false;\r\n        this.smoothing = undefined;\r\n        this.imageRendering = undefined;\r\n        this.canvas = undefined;\r\n        this.context = undefined;\r\n        this.layer = new RenderLayerManagment(this.game);\r\n        this._backgroundColor = '#000';     \r\n        this._alpha = 1;\r\n        this._enable = true;\r\n        this.clear = true;\r\n        this.drawCalls = 0;\r\n    }\r\n\r\n    get backgroundColor() {return this._backgroundColor;}\r\n    set backgroundColor(value) {\r\n        this._backgroundColor = value;\r\n    }\r\n    get alpha() {return this._alpha;}\r\n    set alpha(value) {\r\n\r\n        if (this._alpha !== value)\r\n        {\r\n            this.currentContext.globalAlpha = value;\r\n            this._alpha = value;\r\n        }\r\n\r\n        return this._alpha;\r\n    }\r\n}\r\n\r\n//System.register('Render', Render, 'render');","\r\n\r\nconst CanvasInterpolation = {\r\n\r\n    crisp : function(canvas)\r\n    {\r\n        var types = [ 'optimizeSpeed', 'crisp-edges', '-moz-crisp-edges', '-webkit-optimize-contrast', 'optimize-contrast', 'pixelated' ];\r\n        types.forEach(function (type)\r\n        {\r\n            canvas.style['image-rendering'] = type;\r\n        });\r\n        canvas.style.msInterpolationMode = 'nearest-neighbor';\r\n        return canvas;\r\n    },\r\n\r\n    bicubic : function(canvas)\r\n    {\r\n        canvas.style['image-rendering'] = 'auto';\r\n        canvas.style.msInterpolationMode = 'bicubic';\r\n        return canvas;\r\n    }\r\n};\r\n\r\nObject.freeze(CanvasInterpolation);\r\n\r\nexport default CanvasInterpolation;","\r\nimport DataList from '../../structures/List';\r\n\r\n// based in pixi\r\nclass CanvasListManager {\r\n\r\n    constructor() {\r\n        this.list = new DataList();\r\n    }\r\n\r\n    create(gameParent, width, height) {\r\n\r\n        let canvasContainer = this.firstFree();\r\n        let canvas;\r\n\r\n        // no parent found\r\n        if (canvasContainer === null) {\r\n\r\n            canvasContainer = {\r\n                parent: gameParent,\r\n                canvas: document.createElement('canvas')\r\n            };\r\n\r\n            this.list.push(canvasContainer);\r\n\r\n            canvas = canvasContainer.canvas;\r\n\r\n        } else {\r\n\r\n            canvasContainer.parent = gameParent;\r\n            canvas = canvasContainer.canvas;\r\n        }\r\n\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n\r\n        return canvas;\r\n    }\r\n\r\n    filter(gameParent) { // functional programming\r\n\r\n        var list = scintilla.CanvasList.list;\r\n\r\n        return list.parent === gameParent;\r\n\r\n    }\r\n\r\n    firstFree() {\r\n\r\n        this.list.each((canvas) => {\r\n\r\n            if (!canvas.parent) {\r\n                return canvas;\r\n            }\r\n\r\n        });\r\n\r\n        return null;\r\n    }\r\n\r\n    remove(parent) {\r\n\r\n        var list = this.list;\r\n\r\n        for (var i = 0; i < list.length; i++)\r\n        {\r\n            if (list[i].parent === parent)\r\n            {\r\n                list[i].parent = null;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    clear() {\r\n        /// TODO\r\n    }\r\n\r\n}\r\n\r\nvar CanvasManager = new CanvasListManager();\r\n\r\nObject.seal(CanvasManager);\r\n\r\nexport default CanvasManager;","import { RenderingType } from \"../Define\";\r\n\r\n\r\nexport default class CanvasSmoothing {\r\n\r\n    constructor(context) {\r\n        this.context = context;\r\n        this.prefix = this.getPrefix(context);\r\n    }\r\n\r\n    getPrefix(context) {\r\n\r\n        let vendors = [ 'i', 'webkitI', 'msI', 'mozI', 'oI' ];\r\n        for (let i = 0; i < vendors.length; i++)\r\n        {\r\n            let s = vendors[i] + 'mageSmoothingEnabled';\r\n\r\n            if (s in context)\r\n                return s;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    setEnable(flag) {\r\n\r\n        if (flag === 'undefined') flag = true;\r\n\r\n        if (this.prefix === '' || this.prefix === undefined)\r\n            this.prefix = this.getPrefix(this.context);\r\n\r\n        if (this.prefix)\r\n            this.context[this.prefix] = flag;\r\n\r\n        return this.context;\r\n    }\r\n\r\n    set(renderType) {\r\n        if (renderType == RenderingType.NEAREST)\r\n            this.setEnable(false);\r\n        else\r\n            this.setEnable(true);\r\n    }\r\n\r\n}\r\n","\r\nmodule.exports = {\r\n    Smoothing : require('./CanvasSmoothing'),\r\n    Manager : require('./CanvasListManager'),\r\n    Interpolation : require('./CanvasInterpolation')\r\n};","\r\nimport MathUtils from '../../math/MathUtils'\r\nimport ParseColor from './components/ParseColor';\r\nimport Ease from '../../math/easing/Ease';\r\nimport EasingType from '../../math/easing/EasingType';\r\nimport MakeImmutable from '../../utils/object/MakeImmutable';\r\n\r\n\r\nfunction ColorNormUpdate(color) {\r\n    color._css = 'rgba(' + \r\n    MathUtils.floor(color.r * 255) + ',' + \r\n    MathUtils.floor(color.g * 255) + ',' +\r\n    MathUtils.floor(color.b * 255) + ',' +\r\n    color.a + ')';\r\n}\r\n\r\nfunction ColorUpdate(color) {\r\n    color._css = 'rgba(' + \r\n    color._r + ',' + \r\n    color._g + ',' +\r\n    color._b + ',' +\r\n    color._a + ')';\r\n}\r\n\r\nclass Color {\r\n\r\n    constructor(r, g, b, a) {\r\n        this._r = r || 0;\r\n\r\n        this._g = g || 0;\r\n        this._b = b || 0;\r\n        this._a = a || 1;\r\n        this._css = null;\r\n\r\n        ColorUpdate(this);\r\n    }\r\n\r\n\r\n    get rgba() {return this._css;}\r\n    get r() {return this._r;}\r\n    get g() {return this._g;}\r\n    get b() {return this._b;}\r\n    get a() {return this._a;}\r\n\r\n        \r\n    set a(value) {\r\n        this._a = value;\r\n        ColorUpdate(this);\r\n    }\r\n\r\n    set(r, g, b, a) {\r\n\r\n        this._r = r || 0;    \r\n        this._g = g || 0;\r\n        this._b = b || 0;\r\n\r\n        if (a !== undefined)\r\n            this._a = a;\r\n\r\n        ColorUpdate(this);\r\n\r\n        return this;\r\n    }\r\n\r\n    setRGBA(r, g, b, a) {\r\n        if (r === undefined)\r\n            return;\r\n\r\n        this._r = Math.round(r / 255.0);\r\n        this._g = Math.round(g / 255.0);\r\n        this._b = Math.round(b / 255.0);\r\n\r\n        if (a !== undefined)\r\n            this._a = Math.round(a / 255.0);\r\n\r\n        ColorUpdate(this);\r\n\r\n        return this;\r\n    }\r\n\r\n    setColor(color, a) {\r\n        this._r = color.r;\r\n        this._g = color.g;\r\n        this._b = color.b;\r\n        if (a !== undefined)\r\n            this._a = a;\r\n        else\r\n            this._a = color.a;\r\n        ColorUpdate(this);\r\n        return this;\r\n    }\r\n\r\n    parse(value) {\r\n        let parsedValue = ParseColor(value);\r\n        this._r = parsedValue.r;\r\n        this._g = parsedValue.g;\r\n        this._b = parsedValue.b;\r\n        this._a = parsedValue.a;\r\n        ColorUpdate(this);\r\n        return this;\r\n    }\r\n\r\n    lerp(toColor, t) {\r\n\r\n        this._r = MathUtils.lerp(this._r, toColor.r);\r\n        this._g = MathUtils.lerp(this._g, toColor.g);\r\n        this._b = MathUtils.lerp(this._b, toColor.b);\r\n        this._a = MathUtils.lerp(this._a, toColor.a);\r\n        ColorUpdate(this);\r\n        return this;\r\n\r\n    }\r\n\r\n    /*ease(to, t, easingType, easingMode, easingArg) {\r\n         if (easingType === undefined) easingType = EasingType.LINEAR;\r\n         if (easingMode === undefined) easingMode = 0;\r\n         if (easingArg === undefined) easingArg = 1;\r\n \r\n        let easer = Ease.in;\r\n\r\n         switch (easingMode) {\r\n             case 1: {\r\n                easer = Ease.out;\r\n                break;\r\n             }\r\n             case 2: {\r\n                easer = Ease.inout;\r\n                break;\r\n             }\r\n         }\r\n\r\n         this._r = easer.by(easingType, this._r, to.r, t, easingArg);\r\n         this._g = easer.by(easingType, this._g, to.g, t, easingArg);\r\n         this._b = easer.by(easingType, this._b, to.b, t, easingArg);\r\n         this._a = easer.by(easingType, this._a, to.a, t, easingArg);\r\n\r\n         ColorUpdate(this);\r\n         return this;\r\n    }*/\r\n\r\n    to32() {\r\n        /// TODO\r\n    }\r\n\r\n    toCSS() {\r\n        /// TODO\r\n    }\r\n\r\n    toInt() {\r\n        /// TODO\r\n    }\r\n\r\n    toHex() {\r\n        /// TODO\r\n    }\r\n\r\n    // static functions\r\n\r\n    static ease(from, to, t, easingType, easingMode, easingArg, destinationColor) {\r\n\r\n        if (easingType === undefined) easingType = EasingType.LINEAR;\r\n        if (easingMode === undefined) easingMode = 0;\r\n        if (easingArg === undefined) easingArg = 3;\r\n\r\n\r\n       let easer = Ease.in;\r\n\r\n        switch (easingMode) {\r\n            case 1: {\r\n               easer = Ease.out;\r\n               break;\r\n            }\r\n            case 2: {\r\n               easer = Ease.inout;\r\n               break;\r\n            }\r\n        }\r\n\r\n        if (destinationColor === undefined)\r\n            destinationColor = new Color();\r\n\r\n            destinationColor.set(\r\n            easer.by(easingType, from.r, to.r, t, easingArg),\r\n            easer.by(easingType, from.g, to.g, t, easingArg),\r\n            easer.by(easingType, from.b, to.b, t, easingArg),\r\n            easer.by(easingType, from.a, to.a, t, easingArg));\r\n\r\n        return destinationColor;\r\n    }\r\n\r\n    static get red() {return new Color(255, 0, 0);}\r\n    static get green() {return new Color(0, 255, 0);}\r\n    static get blue() {return new Color(0, 0, 255);}\r\n    static get cyan() {return new Color(0, 255, 255);}\r\n    static get magenta() {return new Color(255, 0, 255);}\r\n    static get yellow() {return new Color(255, 255, 0);}\r\n    static get black() {return new Color(0);}\r\n    static get white() {return new Color(255);}\r\n    static get gray() {return new Color(255/2.0);}\r\n    static get transparent() {return new Color(0, 0, 0, 0);}\r\n\r\n    \r\n\r\n}\r\n\r\nexport default Color;\r\n\r\n/*MakeImmutable([\r\n    Color.red,\r\n    Color.green,\r\n    Color.blue,\r\n    Color.cyan,\r\n    Color.magenta,\r\n    Color.yellow,\r\n    Color.black,\r\n    Color.white,\r\n    Color.gray,\r\n    Color.transparent], false);*/\r\n\r\n/*\r\nMakeImmutable([\r\nColor.red = new Color(255, 0, 0),\r\nColor.green = new Color(0, 255, 0),\r\nColor.blue = new Color(0, 0, 255),\r\nColor.cyan = new Color(0, 255, 255),\r\nColor.magenta = new Color(255, 0, 255),\r\nColor.yellow = new Color(255, 255, 0),\r\nColor.black = new Color(0),\r\nColor.white = new Color(255),\r\nColor.gray = new Color(255/2.0),\r\nColor.transparent = new Color(0, 0, 0, 0),], true);*/\r\n\r\n","import Color from \"../Color\";\r\n\r\nconst CSS_REGEX_PATTERN = /^(?:\\w*|rgba?)\\(?\\s*(\\d+)\\s*\\,?(?:\\s*(\\d+)\\s*)?\\,?(?:\\s*(\\d+)\\s*)?\\,?(?:\\s*(\\d+(?:\\.\\d+)?))?\\s*\\)?$/;\r\n\r\nexport default function CSSToColor(value) {\r\n\r\n    let color = new Color();\r\n\r\n    let regex = (CSS_REGEX_PATTERN).exec(value.toLowerCase());\r\n\r\n    if (regex) {\r\n        let r = parseInt(regex[0], 10) || 0;\r\n        let g = parseInt(regex[1], 10) || 0;\r\n        let b = parseInt(regex[3], 10) || 0;\r\n        let a = 1;\r\n\r\n        if (regex[4] !== undefined)\r\n            a = parseFloat(regex[4], 10) || 1;\r\n\r\n        color.set(r,g,b,a);\r\n    }\r\n\r\n    return color;\r\n\r\n}","import Color from \"../Color\";\r\n\r\nconst HEX_SHORTHAND_REGEX_PATTERN = /^#?([a-f\\d])([a-f\\d])([a-f\\d])([a-f\\d])?$/i;\r\nconst HEX_REGEX_PATTERN = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})?$/i;\r\n\r\n// Source: https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\r\nexport default function HexToColor(value) {\r\n\r\n    let color = new Color();\r\n\r\n    // Hexadecimal can contains alpha in short '#f00e' or full '#F00eaecd'\r\n    // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\r\n    hex = hex.replace(HEX_SHORTHAND_REGEX_PATTERN,\r\n        function (m, r, g, b, a) {\r\n\r\n            if (a !== undefined)\r\n                a = 'F';\r\n\r\n            return r + r + g + g + b + b + a + a;\r\n        });\r\n\r\n    let result = HEX_REGEX_PATTERN.exec(hex);\r\n\r\n    if (result) {\r\n        color.set(\r\n            parseInt(result[1], 16),\r\n            parseInt(result[2], 16),\r\n            parseInt(result[3], 16),\r\n            (result[4] === undefined) ? 1 : parseInt(result[4], 16)\r\n        );\r\n    }\r\n\r\n    return color;\r\n\r\n}","import Color from \"../Color\";\r\n\r\nexport default function IntToColor(value) {\r\n\r\n    let color = new Color();\r\n    let r, g, b, a;\r\n\r\n    if (value >= 16777216) // 256 ^ 3\r\n        a = color >>> 24;\r\n    else\r\n        a = 1;\r\n\r\n\r\n    r = color >> 16 & 0xFF;\r\n    g = color >> 8 & 0xFF;\r\n    b = color & 0xFF;\r\n\r\n    color.set(r, g, b, a);\r\n\r\n    return color;\r\n\r\n}","export default function ObjectToColor(value) {\r\n\r\n    return new Color(value.r, value.g, value.b, value.a);\r\n\r\n}","import IntToColor from \"./IntToColor\";\r\nimport CSSToColor from \"./CSSToColor\";\r\nimport HexToColor from \"./HexToColor\";\r\nimport ObjectToColor from \"./ObjectToColor\";\r\n\r\nexport default function ParseColor(value) {\r\n\r\n    let type = typeof value;\r\n  \r\n    if (type === 'number') {\r\n  \r\n      return IntToColor(value);\r\n  \r\n    } else if (type === 'string') {\r\n  \r\n      if (value.substr(0, 3).toLowerCase() === 'rgb') {\r\n        return CSSToColor(value);\r\n      } else {\r\n        return HexToColor(value);\r\n      }\r\n  \r\n    } else if (type === 'object') {\r\n  \r\n        return ObjectToColor(value);\r\n    }\r\n  \r\n}","\r\nexport default function BeginDrawRender(render) {\r\n\r\n    if (render.clear)\r\n    {\r\n        render.context.clearRect(0, 0, render.canvas.width, render.canvas.height);\r\n    }\r\n\r\n    render.context.fillStyle = render._backgroundColor;  \r\n    render.context.fillRect(0, 0, render.canvas.width, render.canvas.height);\r\n\r\n    render.drawCalls = 0;\r\n\r\n}","\r\nimport DrawRenderLayer from './DrawRenderLayer';\r\nimport RenderScene from '../../scene/components/RenderScene';\r\n\r\nexport default function DrawRender(render, camera, delta) {\r\n        \r\n    if (!render._enable)\r\n        return;\r\n\r\n       /* let clip = (camera.x !== 0 ||\r\n             camera.y !== 0 ||\r\n             camera.width !== render.context.canvas.width ||\r\n             camera.height !== render.context.canvas.height);*/\r\n\r\n    // alpha\r\n    if (render._alpha !== 1)\r\n    {\r\n        render.context.globalAlpha = 1;\r\n        render._alpha = 1;\r\n    }\r\n\r\n    // blend\r\n    render.context.globalCompositeOperation = 'source-over';\r\n   \r\n   \r\n    if (render.game.scene._setup === true) {\r\n    \r\n        for (let i = 0; i < render.layer.renderLayers.length; i++)\r\n        {\r\n            let layer = render.layer.renderLayers.at(i);\r\n\r\n            if (!layer.enable)\r\n                continue;\r\n\r\n            let drawCalls = 0;   \r\n            drawCalls += DrawRenderLayer(layer,camera, render.context);\r\n\r\n            render.drawCalls += drawCalls;\r\n        }\r\n\r\n        //camera.game.system.draw.bounds(camera.bounds);\r\n    }\r\n\r\n\r\n  \r\n\r\n    \r\n}","import SortDepth from \"../layer/SortDepth\";\r\n\r\n\r\nexport default function DrawRenderLayer(layer, camera, context)\r\n{\r\n    \r\n    if (!layer.__enable)\r\n        return 0;\r\n\r\n    let drawCalls = 0;\r\n\r\n    if (layer.__isDirty)\r\n    {\r\n        layer.renderList.sort(SortDepth);\r\n\r\n        layer.__isDirty = false;\r\n    }\r\n\r\n    var self = this;\r\n    let size = layer.renderList.size;\r\n\r\n    for (let i = 0; i < size; i++)\r\n    {\r\n        let element = layer.renderList.at(i);\r\n\r\n        if (camera.bounds.intersects(element.bounds))\r\n        {\r\n            drawCalls += element.render(context);\r\n\r\n        //camera.game.system.draw.bounds(element.bounds);\r\n        }\r\n    }\r\n\r\n    return drawCalls;\r\n\r\n}","\r\nexport default function EndDrawRender(render) {\r\n\r\n    \r\n    render.context.globalAlpha = 1;\r\n    render.context.globalCompositeOperation = 'source-over';\r\n\r\n}\r\n","\r\nexport default function RequestDepthSorting(layerID) {\r\n\r\n    let layer = this.layer.renderLayers.at(layerID);\r\n\r\n    if (layer === undefined) return;\r\n\r\n    if (layer.__isDirty === true)\r\n        return;\r\n\r\n    layer.__isDirty = true;\r\n\r\n}","\r\n/// TODO - BETTER\r\nexport default function RequestRenderableLayerIDChange(renderable, oldLayerID, toLayerID) {\r\n\r\n    // if the to layer is the same of old, we don't change\r\n    if (oldLayerID === toLayerID)\r\n        return oldLayerID;\r\n\r\n    let oldLayer = this.layer.renderLayers.at(oldLayerID);\r\n    \r\n\r\n    // if we don't find the old layer ID \r\n    if (oldLayer === undefined) {\r\n\r\n        // we need to check if the renderable is somewhere\r\n        oldLayer = this.layer.findRenderableLayer(renderable);\r\n\r\n        // still undefined\r\n        if (oldLayer === undefined) {\r\n\r\n            // we add to default layer\r\n            this.layer.renderLayers.at(0).add(renderable);\r\n            return 0;\r\n        }\r\n    }\r\n\r\n    let toLayer = this.layer.renderLayers.at(toLayerID);\r\n\r\n    // if tolayer is undefined or same has oldLayer\r\n    if (toLayer === undefined || toLayer === oldLayer)\r\n        return oldLayerID;\r\n    \r\n\r\n    // find the renderable index\r\n    let index = oldLayer.renderList.indexOf(renderer);\r\n\r\n    if (index === -1)\r\n        return oldLayerID;\r\n\r\n    oldLayer.removeAt(index);\r\n    toLayer.add(renderer);\r\n\r\n    return toLayerID;\r\n    \r\n    \r\n}","\r\nmodule.exports = {\r\n    Canvas : require('./canvas'),\r\n    RenderLayer : require('./layer/RenderLayer'),\r\n    RenderLayerManagement : require('./layer/RenderLayersManagement'),\r\n    Render : require('./Render'),\r\n    UI : require('./ui/UI'),\r\n    Transition : require('./transition/Transition')\r\n};","import DataList from \"../../structures/List\";\r\n\r\nexport default class RenderLayer { \r\n    \r\n    constructor(game,layerName) {\r\n\r\n        this._name = layerName;\r\n        this.game = game;       \r\n        this.renderList = new DataList(true);\r\n        this.__drawCalls = 0;\r\n        this.__enable = true;\r\n        this.__isDirty = false;\r\n    }\r\n\r\n    get drawCalls() {return this.__drawCalls;}\r\n\r\n    // Add renderable components\r\n    add(renderer) {\r\n    \r\n        if (renderer === undefined)\r\n            return;\r\n\r\n        this.renderList.push(renderer);\r\n        this.__isDirty = true;\r\n\r\n    }\r\n\r\n    has(renderer) {\r\n        return this.renderList.indexOf(renderer) !== -1;\r\n    }\r\n\r\n    remove(renderer) {\r\n        return this.renderList.remove(renderer);\r\n    }\r\n\r\n    removeAt(index) {\r\n        return this.renderList.eraseAt(index);\r\n    }\r\n\r\n    at(index)  {\r\n        if (index < 0 || index >= this.__renderers.size)\r\n        {\r\n            throw new Error('RenderLayer.at: Renderer at '+ index +' does not exist in the render layer list: \\\"' + name + \"\\\".\");\r\n        }\r\n        return this.renderList.at(index);\r\n\r\n    }\r\n\r\n    get length() {return this.__renderers.length;}\r\n    get name() {return this._name;}\r\n    get enable() {return this.__enable;}\r\n    set enable(value) {\r\n        value = !!value;\r\n    \r\n        if (value !== this._enabled)\r\n        {\r\n            //if (!value)\r\n            //    this.reset();\r\n\r\n            this._enabled = value;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n/*\r\n      this.__renderers.sort(\r\n\r\n          function(a, b) {\r\n      \r\n            if (a.depth > b.depth) {\r\n      \r\n              return 1;\r\n      \r\n            } else if (a.depth < b.depth) {\r\n      \r\n              return -1;\r\n      \r\n            } else {\r\n      \r\n              if (a.z > b.z) {\r\n                return 1;\r\n              } else {\r\n                return -1;\r\n              }\r\n      \r\n      \r\n            }\r\n          });\r\n*/","\r\nimport DataMap from '../../structures/Map';\r\nimport RenderLayer from './RenderLayer';\r\nimport DataList from '../../structures/List';\r\n\r\nexport default class RenderLayersManagement {\r\n\r\n    constructor(game) {\r\n        this.game = game;\r\n        this.renderLayers = new DataList();\r\n        //this.__renderLayersMap = new DataMap();\r\n        this.add('default');\r\n    }\r\n\r\n    has(id) {\r\n        return this.renderLayers.hasAt(id);\r\n    }\r\n\r\n\r\n    add(name) {\r\n\r\n        if (this.contains(name))\r\n        {\r\n            throw new Error(\"Render.add: There is already a RenderLayer called: \\\"\" +  name + \"\\\".\");\r\n        }\r\n       \r\n        //this.__renderLayersMap.set(name, this.__renderLayers.length);\r\n        this.renderLayers.push(new RenderLayer(this.game, name));\r\n    }\r\n\r\n    remove(name)\r\n    {\r\n        if (typeof name !== 'string')\r\n            throw new Error(\"Render.remove: The value name is not a string.\");\r\n\r\n        if (name === \"default\")\r\n            throw new Error(\"Render.remove: You can not remove the \\\"default\\\" layer.\");\r\n\r\n        if (!this.__renderLayersMap.has(name))\r\n            throw new Error(\"Render.remove: Could not remove layer. There is no layer named \\\"\" + name + \"\\\".\");\r\n\r\n        var index = this.__renderLayersMap.get(name);\r\n\r\n        this.renderLayers.erase(name);\r\n    }\r\n\r\n    contains(layerName)\r\n    {\r\n        if (typeof layerName !== 'string')\r\n            throw new Error(\"Render.contains: The value name is not a string.\");\r\n\r\n        let val = this.renderLayers.each(function(layer) {\r\n           \r\n            if (layer.name == layerName)\r\n            {\r\n                return true;\r\n            }\r\n        });\r\n\r\n        return val || false;\r\n    }\r\n\r\n\r\n    findRenderableLayer(renderable) {\r\n        return this.renderLayers.each(function(layer) {\r\n            if (layer.has(renderable))\r\n                return layer;\r\n        });\r\n    }\r\n\r\n}","\r\nexport default function SortDepth(a, b) {\r\n    return a._depthSorting - b._depthSorting;\r\n}","import TranstionStyle from \"./TransitionStyle\";\r\nimport TransitionState from \"./TransitionState\";\r\n\r\n\r\nexport default function DrawTransition(transition, canvas, context) {\r\n\r\n    if (transition._state === TransitionState.NONE)\r\n        return;\r\n\r\n    context.globalCompositeOperation = 'source-over';\r\n\r\n    let settings = transition.settings;\r\n\r\n    switch(settings.style) {\r\n        case TranstionStyle.NONE: return;\r\n        case TranstionStyle.FILL: {\r\n\r\n            context.fillStyle = transition._tColor.rgba;  \r\n            context.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n            break;\r\n        }\r\n    }\r\n\r\n}","import TransitionSettings from \"./TransitionSettings\";\r\nimport TransitionState from \"./TransitionState\";\r\nimport Color from \"../color/Color\";\r\nimport TransitionBehavior from \"./TranstionBehavior\";\r\nimport System from \"../../core/system/System\";\r\n\r\n\r\nexport default class Transition {\r\n \r\n    constructor(game) {\r\n        this.game = game;\r\n\r\n        this.settings = new TransitionSettings(this);\r\n        this._behaviour = TransitionBehavior.NONE;\r\n        this._state = TransitionState.NONE;\r\n        this._alpha = 0;     \r\n        this._tColor = Color.transparent;\r\n        this._startColor = new Color();\r\n        this._t = 0;\r\n    }\r\n\r\n    in() {\r\n\r\n        let old = this._behaviour;\r\n\r\n        if (old === TransitionBehavior.FADEIN)\r\n            return;\r\n\r\n        this._alpha = 0;\r\n        this._t = 0;\r\n        let oldAlpha = 0;//this._color.a;\r\n        this._startColor.setColor(this.settings.inColor, 0);\r\n        this._tColor.setColor(this._startColor, 0);\r\n        this.settings.inColor.a = 1;\r\n        this._behaviour = TransitionBehavior.FADEIN;\r\n        this._state = TransitionState.IN;\r\n\r\n    }\r\n\r\n    out() {\r\n\r\n        if (this._behaviour === TransitionBehavior.FADEOUT)\r\n            return;\r\n\r\n        this._t = 0;\r\n        this._startColor.setColor(this.settings.outColor, 1);\r\n        this._tColor.setColor(this._startColor, 1);\r\n        this.settings.outColor.a = 0;\r\n        this._behaviour = TransitionBehavior.FADEOUT;\r\n        this._state = TransitionState.OUT;\r\n\r\n    }\r\n\r\n    inout() {\r\n\r\n        this.in();\r\n        this._behaviour = TransitionBehavior.FADEINOUT;\r\n    }\r\n\r\n    by(type) {\r\n\r\n        switch(type) {\r\n            case TransitionBehavior.NONE: return;\r\n            case TransitionBehavior.FADEINOUT: return this.inout();\r\n            case TransitionBehavior.FADEIN: return this.in();\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        this._tColor.setColor(this._startColor, 0);\r\n        this._t = 0;\r\n        this._behaviour = TransitionBehavior.NONE;\r\n        this._state = TransitionState.NONE;\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nSystem.register('Transition', Transition, 'transition');","import Color from \"../color/Color\";\r\nimport EasingType from \"../../math/easing/EasingType\";\r\nimport TranstionStyle from \"./TransitionStyle\";\r\n\r\n\r\nexport default class TransitionSettings {\r\n\r\n    constructor(parent) {\r\n        this.transition = parent;\r\n\r\n        this.fromAlpha = 0;\r\n        this.toAlpha = 0;\r\n\r\n        this.inColor = Color.black;\r\n        this.outColor = Color.black;\r\n\r\n        this.inDuration = 0.5;\r\n        this.outDuration = 0.5;\r\n\r\n        this.pauseDuration = 0;\r\n        this.style = TranstionStyle.FILL;\r\n\r\n        this.timingInMethod = EasingType.LINEAR;\r\n        this.timingOutMethod = EasingType.LINEAR;\r\n        this.timingInArgument = 3; // step\r\n        this.timingOutArgument = 3;\r\n    }\r\n\r\n    setInColor(color) {\r\n        this.inColor.parse(color);\r\n        return this;\r\n    }\r\n\r\n    setOutColor(color) {\r\n        this.outColor.parse(color);\r\n        return this;\r\n    }\r\n\r\n    setDuration(duration) {\r\n        this.setInDuration(duration);\r\n        this.setOutDuration(duration);\r\n        return this;  \r\n    }\r\n\r\n    setInDuration(duration) {\r\n        this.inDuration = Math.abs(duration);\r\n        return this; \r\n    }\r\n\r\n    setOutDuration(duration) {\r\n        this.outDuration = Math.abs(duration);\r\n        return this; \r\n    }\r\n    \r\n    setPauseDuration(duration) {\r\n        this.pauseDuration = Math.abs(duration);\r\n        return this; \r\n    }\r\n\r\n    setEaseMethod(easingType, parameter) {\r\n        this.setInTiming(easingType, parameter);\r\n        this.setOutTiming(easingType, parameter);\r\n        return this;\r\n    }\r\n\r\n    setEaseInMethod(easingType, parameter) {\r\n        this.timingInMethod = easingType;\r\n        this.timingInArgument = parameter || 1;\r\n        return this; \r\n    }\r\n\r\n    setEaseOutMethod(easingType, parameter) {\r\n        this.timingOutMethod = easingType;\r\n        this.timingOutArgument = parameter || 1;\r\n        return this; \r\n    }\r\n}","\r\nconst TransitionState = {\r\n    NONE : 0,\r\n    IN : 1,\r\n    OUT : 2,\r\n    WAIT : 3,\r\n    IDLE : 4\r\n};\r\n\r\nObject.freeze(TransitionState);\r\n\r\nexport default TransitionState;\r\n","\r\nconst TranstionStyle = {\r\n    NONE : 0,\r\n    FILL : 1,\r\n};\r\n\r\nObject.freeze(TranstionStyle);\r\n\r\nexport default TranstionStyle;","\r\nconst TransitionBehavior = {\r\n    NONE : 0,\r\n    FADEIN : 1,\r\n    FADEOUT : 2,\r\n    FADEINOUT : 3,\r\n    IDLE : 4,\r\n};\r\n\r\nObject.freeze(TransitionBehavior);\r\n\r\nexport default TransitionBehavior;","import TransitionBehavior from \"./TranstionBehavior\";\r\nimport TransitionState from \"./TransitionState\";\r\nimport MathUtils from '../../math/MathUtils';\r\nimport Ease from \"../../math/easing/Ease\";\r\nimport Color from \"../color/Color\";\r\n\r\nexport default function UpdateTransition(transition, deltaTime) {\r\n\r\n    if (transition._behaviour === TransitionBehavior.NONE)\r\n        return;\r\n\r\n    let setg = transition.settings;\r\n    let changeState;\r\n\r\n    // UPDATE STATE\r\n    switch (transition._state) {\r\n\r\n        case TransitionState.IN:\r\n            {\r\n                transition._t += (deltaTime / setg.inDuration);\r\n\r\n                if (transition._t >= 1) {\r\n                    transition._t = 1;\r\n                    changeState = true;\r\n                }\r\n\r\n                // ease(to, t, easingType, easingMode, easingArg)\r\n                Color.ease(\r\n                    transition._startColor, setg.inColor, transition._t,\r\n                    setg.timingInMethod, 0, setg.timingInArgument, transition._tColor);\r\n\r\n                break;\r\n            }\r\n\r\n        case TransitionState.WAIT:\r\n            {\r\n                transition._t += deltaTime / setg.pauseDuration;\r\n\r\n                if (transition._t >= 1) {\r\n                    transition._t = 1;\r\n                    changeState = true;\r\n                }\r\n                break;\r\n            }\r\n\r\n        case TransitionState.OUT:\r\n            {\r\n                transition._t += deltaTime / setg.outDuration;\r\n\r\n                if (transition._t >= 1) {\r\n                    transition._t = 1;\r\n                    changeState = true;\r\n                }\r\n                Color.ease(\r\n                    transition._startColor, setg.outColor, transition._t,\r\n                    setg.timingOutMethod, 1, setg.timingOutArgument, transition._tColor);\r\n                break;\r\n            }\r\n    }\r\n\r\n    if (changeState === undefined)\r\n        return;\r\n\r\n\r\n    /// CHANGE TRANSITION STATE\r\n\r\n    transition._t = 0;\r\n\r\n    switch (transition._behaviour) {\r\n        case TransitionBehavior.FADEIN:\r\n        case TransitionBehavior.FADEOUT: // just fade in or out\r\n            {\r\n               \r\n                transition._behaviour = TransitionBehavior.NONE;\r\n                transition._state = TransitionState.IDLE;\r\n                if (transition._behaviour === TransitionBehavior.FADEOUT) {\r\n                    transition._behaviour = TransitionBehavior.FADEOUT;\r\n                }\r\n                transition.game.system.event.dispatch('transition_end');\r\n                break;\r\n            }\r\n        case TransitionBehavior.FADEINOUT: // fade in and out\r\n            {\r\n                if (transition._state === TransitionState.IN) { // end fade in\r\n                    transition._color.setColor(setg.outColor);\r\n                    \r\n                    if (setg.pauseDuration > 0) {\r\n                        transition._state = TransitionState.WAIT;\r\n                    } else {\r\n                        transition._state = TransitionState.OUT;\r\n                    }\r\n                } else if (transition._state === TransitionState.WAIT) { // end pause beteween\r\n                   \r\n                    transition._state = TransitionState.OUT;\r\n                    transition.game.system.event.dispatch('transition_pause_end');\r\n                } else if (transition._state === TransitionState.OUT) { // end fade out\r\n                   \r\n                    transition._state = TransitionState.IDLE;\r\n                    transition._behaviour = TransitionBehavior.NONE;\r\n                    transition.game.system.event.dispatch('transition_end');\r\n                }\r\n                break;\r\n            }\r\n    }\r\n}","\r\nmodule.exports = {\r\n    State : require('./TransitionState'),\r\n    Style : require('./TransitionStyle'),\r\n    Behavior : require('./TranstionBehavior')\r\n}","\r\nconst AspectRatio = {\r\n    Square : 0,\r\n    Pillarbox : 1,\r\n    Letterbox : 2,\r\n\r\n    computeViewPort(currentAspectRatio, desiredAspect) {\r\n\r\n        let ratioBox = {\r\n            x : 0,\r\n            y : 0,\r\n            w : 1,\r\n            h : 1,\r\n            style : 0,\r\n        };\r\n\r\n        // If the current aspect ratio is already approximately equal to the desired aspect ratio,\r\n        // use a full-screen Rect (in case it was set to something else previously)\r\n        if (Math.round(currentAspectRatio * 100) / 100 == Math.round(desiredAspect * 100) / 100)\r\n        {\r\n            return ratioBox;\r\n        }\r\n\r\n        // Pillarbox\r\n        if (currentAspectRatio > desiredAspect)\r\n        {\r\n            let inset = 1.0 - desiredAspect / currentAspectRatio;\r\n            ratioBox.x = inset / 2;\r\n            ratioBox.y = 0;\r\n            ratioBox.w = 1.0 - inset;\r\n            ratioBox.h =  1.0;\r\n            ratioBox.style = AspectRatio.Pillarbox;\r\n        }\r\n        else  // Letterbox\r\n        {\r\n            let inset = 1.0 - currentAspectRatio / desiredAspect;\r\n\r\n            ratioBox.x = 0;\r\n            ratioBox.y = inset / 2;\r\n            ratioBox.w = 1.0;\r\n            ratioBox.h = 1.0 - inset;\r\n            ratioBox.style = AspectRatio.Letterbox;\r\n        }\r\n\r\n        return ratioBox;\r\n    }\r\n}\r\n\r\nexport default AspectRatio;","\r\nexport default class Debug {\r\n  \r\n  constructor(game, drawer) {\r\n\r\n    this.game = game;\r\n    this.draw = drawer;\r\n    this.context = drawer.context;\r\n    this.x = 8;\r\n    this.y = 12;\r\n    this.lineHeight = 14;\r\n    this.column = 100;\r\n    this.font =\"10px Verdana\";\r\n    this.textColor = 'white';\r\n    this.bgcolor = '#000';\r\n    this.textShadow = '#000';\r\n\r\n  }\r\n\r\n  test() {\r\n\r\n    this.draw.disablePointTransform = true;\r\n    this.x = 4;\r\n    this.y = 12;\r\n    //this.context.setTransform(1, 0, 0, 1, 0, 0);\r\n    this.context.strokeStyle = this.bgcolor;\r\n    this.context.font = this.font;\r\n    this.draw.alpha = 0.5;\r\n    this.draw.rect(0,0,this.game.width,(14 * 3)+ 4,this.bgcolor);\r\n    this.draw.alpha = 1;\r\n    this.drawLine(\"FPS: \" + Math.round(this.game.time.fps) + \" / \" + this.game.time.desiredFps);\r\n    //this.drawLine(\"Instances in view: \" + this.game.camera.instancesInView);\r\n    this.drawLine(\"Instances: \" + this.game.system.entityList.length);\r\n    this.drawLine(\"Draw Calls: \" + this.game.system.render.drawCalls);/*this.game.physics.length);*/\r\n    this.x += this.game.width / 2;\r\n    //this.y = 12+8;\r\n    //this.drawLine(\"Sounds count \" + this.game.sound.length);\r\n    \r\n    //this.y = 12+8;\r\n\r\n    this.draw.disablePointTransform = false;\r\n\r\n  }\r\n\r\n  drawLine(textLine) {\r\n\r\n    var xx = this.x;\r\n\r\n            this.context.fillStyle = this.textShadow;\r\n            this.context.fillText(textLine, xx + 1, this.y + 1);\r\n            this.context.fillStyle = this.textColor;\r\n\r\n        this.context.fillText(textLine, xx, this.y);\r\n\r\n\r\n    this.y += this.lineHeight;\r\n\r\n  }\r\n\r\n\r\n\r\n}\r\n","import UpdateUIMatrix from \"./UpdateUIMatrix\";\r\nimport RenderScene from \"../../scene/components/RenderScene\";\r\n\r\nexport default function DrawUI(gui, sceneManager) {\r\n\r\n    UpdateUIMatrix(gui);\r\n\r\n \r\n    // blend\r\n    gui.context.globalCompositeOperation = 'source-over';\r\n\r\n    let clip = (gui.viewport.x !== 0 || gui.viewport.x !== 0 || gui.viewport.width !== gui.canvas.width || gui.viewport.height !== gui.canvas.height);\r\n\r\n    if (clip)\r\n    {\r\n        gui.context.save();\r\n        gui.context.beginPath();\r\n        gui.context.rect(\r\n            0,\r\n            0,\r\n            gui.viewport.width,\r\n            gui.viewport.height);\r\n        gui.context.clip();\r\n    }\r\n\r\n    gui.context.setTransform(\r\n        gui.matrix.a[0], gui.matrix.a[1], \r\n        gui.matrix.a[3], gui.matrix.a[4], \r\n        gui.matrix.a[6], gui.matrix.a[7]);\r\n\r\n   \r\n    if (gui.backgroundAlpha > 0)\r\n    {\r\n        gui.context.globalAlpha = gui.backgroundAlpha;\r\n        gui.context.fillStyle = gui.backgroundColor;  \r\n        gui.context.fillRect(0, 0, gui.width, gui.height);\r\n    }\r\n\r\n    // alpha\r\n    if (gui._alpha !== 1)\r\n    {\r\n        gui.context.globalAlpha = 1;\r\n        gui._alpha = 1;\r\n    }\r\n\r\n\r\n        RenderScene(sceneManager, gui.draw);\r\n\r\n\r\n    if (clip) {\r\n        gui.context.restore();\r\n    }\r\n\r\n\r\n       \r\n\r\n}\r\n\r\n","import Debug from \"./Debug\";\r\n\r\nexport default function InitializeUI() {\r\n    this.canvas = this.game.system.render.canvas;\r\n    this.context = this.game.system.render.context;\r\n    this.draw.init();\r\n\r\n    if (this.game.config.debug)\r\n        this.debug = new Debug(this.game, this.draw);\r\n}","\r\nimport System from '../../core/system/System';\r\nimport Rect from '../../math/Rect'\r\nimport AspectRatio from './AspectRatio';\r\nimport Matrix from '../../math/Matrix'\r\nimport GUIResize from './UIResize';\r\nimport Debug from './Debug';\r\nimport MathUtils from '../../math/MathUtils';\r\nimport UIDrawer from './UIDrawer';\r\nimport InitializeUI from './InitializeUI';\r\n\r\n\r\n\r\n\r\nexport default class UI {\r\n\r\n    constructor(game) {\r\n        this.game = game;\r\n        this.canvas = null;\r\n        this.width = this.game.width;\r\n        this.height = this.game.height;\r\n        this.viewport = new Rect(0, 0, this.width, this.height);\r\n        this.ratiobox = null;\r\n        this.aspectRatio = this.width / this.height;\r\n        this.pixelUnit = {x:1,y:1};\r\n        this._isDirty = true;\r\n        this.matrix = new Matrix(1);\r\n        this.context = null;\r\n        this._alpha = 1;\r\n        this.backgroundColor = '#000'\r\n        this.backgroundAlpha = 0;\r\n        this.debug = null;\r\n        this.draw = new UIDrawer(game, this);\r\n    }\r\n\r\n    get alpha() {return this._alpha; }\r\n    set alpha(value) {this._alpha = value;}\r\n\r\n\r\n    setSize(width, height) {\r\n        GUIResize(this, width, height);\r\n        return this;\r\n    }\r\n\r\n    setViewport(x0, y0, x1, y1) {\r\n        this.viewport.x = x0; \r\n        this.viewport.y = y0;\r\n        this.viewport.width = x1;\r\n        this.viewport.height = y1;\r\n        this._isDirty = true;\r\n        return this;\r\n    }\r\n\r\n    setViewportByAspectRatio(aspectRatio) {\r\n\r\n        // TODO: IMPROVE THAT\r\n        let canvasWidth = this.game.system.render.canvas.width;//this.game.system.render.canvas.clientWidth;\r\n        let canvasHeight = this.game.system.render.canvas.height;//this.game.system.render.canvas.clientHeight\r\n\r\n        this.ratiobox = AspectRatio.computeViewPort(canvasWidth / canvasHeight, aspectRatio);\r\n        let borderX = 0;\r\n        let borderY = 0;//rect.y * this.canvas.clientHeight;\r\n\r\n        if (this.ratiobox.style === AspectRatio.Square) {\r\n            this.viewport.set(\r\n                0,\r\n                0,\r\n                canvasWidth,\r\n                canvasHeight);\r\n\r\n            return this;\r\n\r\n        } else {\r\n\r\n            if (this.ratiobox.style === AspectRatio.Pillarbox)\r\n                borderX = this.ratiobox.x * this.width;//this.canvas.clientWidth;\r\n            else if (this.ratiobox.style === AspectRatio.Letterbox)\r\n                borderY = this.ratiobox.y * this.height;//this.canvas.clientHeight;\r\n            \r\n            this.viewport.set(\r\n                borderX,\r\n                borderY,\r\n                (this.width * (canvasWidth/ this.width)) - (borderX*2),\r\n                (this.height * (canvasHeight / this.height)) - (borderY*2));\r\n\r\n        }\r\n        \r\n        let canvasRatioX = canvasWidth * (this.ratiobox.x * 2);\r\n        let canvasRatioY =canvasHeight * (this.ratiobox.y * 2);\r\n        let areaRatio = (this.canvas.clientWidth - canvasRatioX) / canvasHeight;\r\n        let orthoSize = this.height / 2;\r\n        let pixelUnit = (canvasHeight / (orthoSize * 2)) * areaRatio;\r\n        \r\n        this.pixelUnit.x = pixelUnit;//(this.canvas.clientWidth - canvasRatioX) / this.width;\r\n        this.pixelUnit.y = pixelUnit;//(this.canvas.clientHeight - canvasRatioY) / this.height;\r\n\r\n        this._isDirty = true;\r\n        return this;\r\n    }\r\n\r\n    setSizeByCanvas() {\r\n        GUIResize(this, this.game.system.render.canvas.width, this.game.system.render.canvas.height);\r\n        return this;\r\n    }\r\n\r\n    setSizeByCamera() {\r\n        GUIResize(this, this.game.system.camera.width, this.game.system.camera.height);\r\n        return this;\r\n    }\r\n\r\n    setSizeByAspectRatio(aspectRatio) {\r\n        GUIResize(this, this.game.system.render.canvas.width * aspectRatio, this.game.system.render.canvas.height * aspectRatio);\r\n        return this;\r\n    }\r\n\r\n}\r\n\r\nSystem.register('UserInterface', UI, 'ui', InitializeUI)","//import GameSystemManager from \"../core/GameSystemManager\";\r\nimport Validate from \"../../utils/Validate\";\r\n\r\n\r\n\r\n\r\nexport default class UIDrawer {\r\n\r\n  constructor(game, ui) {\r\n    this.game = game;\r\n    this.cache = null;\r\n    this.context = null;\r\n    this.ui = ui;\r\n    this.lastAlpha = 1;\r\n    this.lastColor = '#000';\r\n    this.currentColor = '#FFF';\r\n    this.currentTextAlign = 'center';\r\n    this.disablePointTransform = false;\r\n  }\r\n\r\n  init() {\r\n\r\n    this.cache = this.game.system.cache;\r\n    this.context = this.game.system.render.context;\r\n\r\n    return this;\r\n  }\r\n\r\n  set color(value) {\r\n    this.lastColor = this.context.fillStyle;\r\n    this.context.fillStyle = value;\r\n    this.currentColor = this.context.fillStyle;\r\n  }\r\n\r\n  set alpha(value) {\r\n    this.lastAlpha = this.context.globalAlpha;\r\n    this.context.globalAlpha = value;\r\n  }\r\n\r\n  set align(value) {\r\n    this.context.textAlign = value;\r\n    this.currentTextAlign = this.context.textAlign;\r\n  }\r\n\r\n  transformPosition(x, y, w, h) {\r\n\r\n    if (this.disablePointTransform) {\r\n      return {\r\n        x: x,\r\n        y: y,\r\n        w: w || 0,\r\n        h: h || 0,\r\n      };\r\n    } else {\r\n\r\n      return {\r\n        x: x - this.ui.viewport.x,\r\n        y: y - this.ui.viewport.y,\r\n        w: (w - this.ui.viewport.x) || 0,\r\n        h: (h - this.ui.viewport.y) || 0,\r\n      };\r\n    }\r\n  }\r\n\r\n  font(fontname, size, style) {\r\n\r\n    if (Validate.isNumber(size))\r\n      size = size.toString() + 'px';\r\n\r\n    if (style === undefined) style = \"normal\";\r\n\r\n    this.context.font = style + \" \" + size + \" \\'\" + fontname + \"\\'\";\r\n\r\n  }\r\n\r\n  text(text, x, y, color, align) {\r\n\r\n    if (color !== undefined)\r\n      this.color = color;\r\n    if (align !== undefined) \r\n      this.align = align;\r\n\r\n    let pos = this.transformPosition(x, y);\r\n    \r\n    this.context.textAlign = align;\r\n\r\n    //this.context.save();\r\n    //this.context.translate(x, y);\r\n    this.context.fillText(text, pos.x , pos.y);\r\n    //this.context.restore();\r\n\r\n  }\r\n\r\n  image(source, x, y, scalex, scaley) {\r\n\r\n\r\n    let pos = this.transformPosition(x, y);\r\n\r\n    this.context.drawImage(source,\r\n      0, 0,\r\n      source.width, source.height,\r\n      pos.x, pos.y,\r\n      source.width, source.height\r\n    );\r\n  }\r\n\r\n  imageExtra(source, x, y, scalex, scaley, halign, valign) {\r\n    if (source === undefined || source === null) return;\r\n    if (scalex === undefined) scalex = 1;\r\n    if (scaley === undefined) scaley = 1;\r\n    if (halign === undefined) halign = 0;\r\n    if (valign === undefined) valign = 0;\r\n\r\n    let pos = this.transformPosition(x, y);\r\n    let dx = source.width * halign;\r\n    let dy = source.height * valign;\r\n\r\n    this.context.save();\r\n    this.context.translate(pos.x, pos.y);\r\n    this.context.scale(scalex, scaley);\r\n    //this.context.rotate(scalex, scaley);\r\n\r\n    this.context.drawImage(\r\n      source,\r\n      0, // sx - pos crop x \r\n      0, // sy - pos crop y\r\n      source.width, // sWidth - crop width\r\n      source.height, // sHeight - crop height\r\n      -dx, // destination x\r\n      -dy, // destination y\r\n      source.width, source.height\r\n    );\r\n\r\n    this.context.restore();\r\n  }\r\n\r\n  sprite(tag, x, y, halign, valign) {\r\n\r\n    let source = this.cache.image.get(tag);\r\n\r\n    if (source !== null) {\r\n\r\n      if (halign === undefined) halign = 0;\r\n      if (valign === undefined) valign = 0;\r\n\r\n      let pos = this.transformPosition(x, y);\r\n      let dx = source.width * halign;\r\n      let dy = source.height * valign;\r\n\r\n      this.context.save();\r\n      this.context.translate(pos.x, pos.y);\r\n      this.context.drawImage(\r\n        source.data,\r\n        0, // sx - pos crop x \r\n        0, // sy - pos crop y\r\n        source.width, // sWidth - crop width\r\n        source.height, // sHeight - crop height\r\n        -dx, // destination x\r\n        -dy, // destination y\r\n        source.width, source.height\r\n      );\r\n      this.context.restore();\r\n\r\n    }\r\n\r\n  }\r\n\r\n  spriteTransformed(tag, x, y, xscale, yscale, angle) {\r\n\r\n\r\n  }\r\n\r\n  rect(x, y, width, height, color) {\r\n\r\n\r\n    let pos = this.transformPosition(x, y, width, height);\r\n\r\n    this.context.save();\r\n    this.context.fillStyle = color || this.currentColor;\r\n    this.context.translate(pos.x, pos.y);\r\n\r\n    this.context.fillRect(0, 0, pos.w, pos.h)\r\n    this.context.restore();\r\n\r\n  }\r\n\r\n  outlineRect(x, y, width, height, outlineWidth, color) {\r\n\r\n    color = color || this.currentColor;\r\n\r\n    let pos = this.transformPosition(x, y, width, height);\r\n    //this.context.setLineDash([6]);\r\n    this.context.save();\r\n    this.context.translate(pos.x, pos.y);\r\n    this.context.lineWidth = outlineWidth || 1;\r\n    this.context.strokeStyle = color;\r\n    this.context.strokeRect(0, 0, pos.w, pos.h);\r\n    this.context.restore();\r\n    //this.context.rect(x,y,width,height);\r\n    //this.context.stroke();\r\n\r\n  }\r\n\r\n  bounds(bb, color) {\r\n\r\n    if (color === undefined)\r\n      color = 'red';\r\n    this.context.setTransform(1, 0, 0, 1, 0, 0);\r\n    this.outlineRectangle(bb.min.x, bb.min.y, bb.max.x - bb.min.x, bb.max.y - bb.min.y, color, 1);\r\n\r\n  }\r\n\r\n}\r\n\r\n//GameSystemManager.register('UIDrawer',UIDraw,'draw');","\r\nexport default function UIResize(gui, w, h) {\r\n    gui.width = w;\r\n    gui.height = h;\r\n    gui.aspectRatio = w / h;\r\n    gui.pixelUnit.x = gui.canvas.width / w;\r\n    gui.pixelUnit.y = gui.canvas.height / h;\r\n    gui._isDirty = true;\r\n}\r\n","\r\nexport default function UpdateUIMatrix(gui) {\r\n\r\n    if (!gui._isDirty)\r\n        return;\r\n\r\n    gui.matrix.setIdentity()\r\n    .scale(gui.pixelUnit.x, gui.pixelUnit.y)\r\n    .translate(gui.viewport.x, gui.viewport.y);\r\n\r\n    gui._isDirty = false;\r\n\r\n    console.log(gui.matrix);\r\n\r\n}\r\n","import Resource from \"./Resource\";\r\nimport ResourceType from \"./ResourceType\";\r\n\r\n/**\r\n* Image that holds image data.\r\n* @class Image\r\n* @constructor\r\n*/\r\nexport default class ImageResource extends Resource {\r\n\r\n    constructor(name, data) {\r\n\r\n      super(name);\r\n      \r\n      this.data = data;\r\n      this.width = 0;\r\n      this.height = 0;\r\n      this.imageUrl = null;\r\n      this.type = ResourceType.Image;\r\n\r\n      if ((this.data.complete || this.data.getContext) && this.data.width && this.data.height) {\r\n\r\n          this.width = this.data.naturalWidth || this.data.width;\r\n          this.height = this.data.naturalHeight || this.data.height;\r\n\r\n      }\r\n  }\r\n\r\n}","import ResourceType from \"./ResourceType\";\r\n\r\n\r\nexport default class Resource {\r\n\r\n    constructor(name, data)\r\n    {\r\n        //this.data = data || undefined;\r\n        this.name = name || 'Resource';\r\n        this.type = ResourceType.None;\r\n    }\r\n\r\n}","\r\nconst ResourceType = {\r\n    None : -1,\r\n    Image : 0,\r\n    Tilemap : 1,\r\n}\r\n\r\nexport default ResourceType;","\r\nmodule.exports = {\r\n    ResourceType : require('./ResourceType'),\r\n    ImageResource : require('./ImageResource'),\r\n    TilemapResource : require('./tilemap/TilemapResource')\r\n}","\r\nimport Resource from \"../Resource\";\r\nimport TilemapMetadata from \"./data/TilemapMetadata\";\r\nimport ParseTilesets from \"./parser/ParseTileset\";\r\nimport ParseLayers from \"./parser/ParseLayers\";\r\nimport ResourceType from '../ResourceType'\r\n\r\nexport default class TilemapResource extends Resource {\r\n\r\n    constructor(name, source, cache) {\r\n\r\n        super(name);\r\n\r\n        this.metaData = new TilemapMetadata ({\r\n            name: source.name,\r\n            width: source.width,\r\n            height: source.height,\r\n            tileWidth: source.tilewidth,\r\n            tileHeight: source.tileheight,\r\n            orietation: source.orietation\r\n        });\r\n\r\n        this.name = name;\r\n        this.tilesets = ParseTilesets(source, cache);\r\n        this.layers = ParseLayers(source, this);\r\n        this.type = ResourceType.Tilemap;\r\n        \r\n\r\n    }\r\n\r\n    getTilesetByGID(gid) {\r\n\r\n        return this.tilesets.each((set)=>{\r\n            if (set.hasGID(gid)) {\r\n                return set;\r\n            }\r\n        }) || null;\r\n\r\n    }\r\n\r\n    getTileGID(gid) {\r\n        return this.tilesets.each((set)=>{\r\n\r\n            let tileGID = set.getTileGID(gid);\r\n\r\n            if (tileGID !== undefined) {\r\n                return tileGID;\r\n            }\r\n        }) || null;\r\n    }\r\n\r\n}\r\n","\r\nexport default class Tile {\r\n\r\n    constructor(layer, tileData, tileX, tileY, id) {\r\n        this.layer = layer;\r\n        this.data = tileData;\r\n        this.tileX = tileX;\r\n        this.tileY = tileY;\r\n        this.id = id;\r\n        this.frame = tileData.st;\r\n        // pixels positions\r\n        this.x = Math.round(tileX * tileData.st.width);\r\n        this.y = Math.round(tileY * tileData.st.height);\r\n    }\r\n\r\n}","import Rect from \"../../../math/Rect\";\r\n\r\nexport default class TileGID {\r\n\r\n    constructor(tileset, gid, tileID, u, v, umax, vmax) {\r\n        this.id = tileID;\r\n        this.gid = gid;\r\n        this.tileset = tileset || null;\r\n        this.st = new Rect(u,v,umax,vmax); // tex coords\r\n        this.keyFrames = undefined;\r\n        this.isAnimated = false;\r\n        this.currentFrame = 0;\r\n    }\r\n    \r\n}","\r\nimport ObjectGet from '../../../utils/object/ObjectGet'\r\n\r\nexport default class TilemapLayerData {\r\n\r\n    constructor(config) {\r\n        this.width = ObjectGet.value(config,'width', 0);\r\n        this.height = ObjectGet.value(config,'height',0);\r\n        this.x = ObjectGet.value(config,'x', 0);\r\n        this.y = ObjectGet.value(config,'y', 0);\r\n        this.name = ObjectGet.value(config,'name', 'tilemaplayer');\r\n        this.alpha = ObjectGet.value(config,'alpha', 1);\r\n        //this.type =\"tilelayer\";\r\n        this.visible = ObjectGet.value(config,'visible', true);\r\n        this.tiles =  ObjectGet.value(config,'tiles', []);\r\n        this.hasAnimatedTiles = false;\r\n    }\r\n\r\n}","import ObjectGet from \"../../../utils/object/ObjectGet\";\r\n\r\nexport default class TilemapMetadata {\r\n\r\n    constructor(config) {\r\n\r\n        this.name = ObjectGet.value(config,'name','tilemap');\r\n        this.width =  ObjectGet.value(config,'width',0);\r\n        this.height =  ObjectGet.value(config,'height',0);\r\n        this.tileWidth =  ObjectGet.value(config,'tileWidth',16);\r\n        this.tileHeight =  ObjectGet.value(config,'tileHeight',16);\r\n        this.pixelsWidth = ObjectGet.value(config,'pixelsWidth',this.width * this.tileWidth);\r\n        this.pixelsHeight = ObjectGet.value(config,'pixelsHeight',this.height * this.tileHeight);\r\n        this.orientation = ObjectGet.value(config, 'orientation', 'orthogonal');\r\n    }\r\n\r\n\r\n}","import DataList from \"../../../structures/List\";\r\nimport TileGID from './TileGID'\r\n\r\n\r\n\r\nexport default class Tileset {\r\n\r\n    constructor(name, firstgid, tileWidth, tileHeight, margin, spacing) {\r\n\r\n        this.name = name;\r\n        this.firstgid = firstgid || 1;\r\n        this.tileWidth = tileWidth || 16;\r\n        this.tileHeight = tileHeight || 16;\r\n        this.margin = margin || 0;\r\n        this.spacing = spacing || 0;\r\n        this.image = null;\r\n        this.data = new DataList();\r\n        this.rows = 0;\r\n        this.collumns = 0;\r\n        this.gidCount = 0;\r\n    }\r\n\r\n    getTileGID(gid) {\r\n\r\n        if (gid === 'string') gid = parseInt(gid);\r\n\r\n        if (gid < this.firstgid && gid >= this.firstgid + this.gidCount)\r\n            return null;\r\n\r\n        return this.data.at(gid - this.firstgid);\r\n    }\r\n\r\n    getTile(index) {\r\n\r\n        if (index === 'string') index = parseInt(index);\r\n\r\n        return this.data.at(index);\r\n    }\r\n\r\n    hasGID(gid) {\r\n        return (\r\n            gid >= this.firstgid &&\r\n            gid < this.firstgid + this.gidCount\r\n        );\r\n    }\r\n\r\n    updateData(imageWidth, imageHeight) {\r\n\r\n        if (this.image !== undefined || this.image != null)\r\n        {\r\n            imageWidth = this.image.width;\r\n            imageHeight = this.image.height;\r\n        }\r\n\r\n        //slice into tiles\r\n        let columns = (imageHeight - this.margin * 2 + this.spacing) / (this.tileHeight + this.spacing);\r\n        let rows = (imageWidth - this.margin * 2 + this.spacing) / (this.tileWidth + this.spacing);\r\n\r\n        this.rows = Math.floor(rows);\r\n        this.collumns =  Math.floor(columns);\r\n        this.gidCount = rows * columns;\r\n\r\n        let u = this.margin;\r\n        let v = this.margin;\r\n        let x = 0;\r\n\r\n        this.data.clear();\r\n\r\n        for (let i = 0; i < this.gidCount; i++) {\r\n\r\n                this.data.push(new TileGID(\r\n                    this, \r\n                    this.firstgid + i,\r\n                    i,\r\n                    u, v,\r\n                    this.tileWidth, this.tileHeight));\r\n\r\n            u += this.tileWidth + this.spacing;             \r\n            x++;\r\n\r\n            if (x >= rows)\r\n            {\r\n                x = 0;\r\n                u = this.margin;\r\n                v += this.tileHeight + this.spacing;\r\n            }\r\n\r\n            \r\n        }\r\n\r\n       \r\n    }\r\n\r\n    \r\n\r\n}","\r\n// Bits on the far end of the 32-bit global tile ID are used for tile flags\r\nconst FLIPPED_HORIZONTALLY_FLAG = 0x80000000;\r\nconst FLIPPED_VERTICALLY_FLAG   = 0x40000000;\r\nconst FLIPPED_DIAGONALLY_FLAG   = 0x20000000;\r\n\r\nfunction ParseGIDFlags(flipped_horizontally, flipped_vertically, flipped_diagonally) {\r\n\r\n    let flip = false;\r\n    let rot = 0;\r\n\r\n    return {flipped: flip, rotation : rot};\r\n\r\n}\r\n\r\n// http://docs.mapeditor.org/en/latest/reference/tmx-map-format/\r\nexport default function ParseGID(global_tile_id) {\r\n\r\n    // The global_tile_id is alredy parsed on Base64.decodeToUint32() phase.\r\n\r\n    /* unsigned global_tile_id = data[tile_index] |\r\n                              data[tile_index + 1] << 8 |\r\n                              data[tile_index + 2] << 16 |\r\n                              data[tile_index + 3] << 24;*/\r\n\r\n    // Read out the flags\r\n    let flipped_horizontally = Boolean(global_tile_id & FLIPPED_HORIZONTALLY_FLAG);\r\n    let flipped_vertically = Boolean(global_tile_id & FLIPPED_VERTICALLY_FLAG);\r\n    let flipped_diagonally = Boolean(global_tile_id & FLIPPED_DIAGONALLY_FLAG);\r\n\r\n    // Clear the flags\r\n     global_tile_id = global_tile_id & ~(FLIPPED_HORIZONTALLY_FLAG |\r\n        FLIPPED_VERTICALLY_FLAG |\r\n        FLIPPED_DIAGONALLY_FLAG);\r\n\r\n\r\n    let flags = ParseGIDFlags(flipped_horizontally, flipped_vertically, flipped_diagonally);\r\n\r\n    return {\r\n        gid : global_tile_id,\r\n        flipHorizontal : flipped_horizontally,\r\n        flipVertical : flipped_vertically,\r\n        flipDiagonal : flipped_diagonally,\r\n        flipped: flags.flipped,\r\n        rotation : flags.rotation        \r\n    };\r\n\r\n}","\r\nimport ObjectGet from '../../../utils/object/ObjectGet'\r\nimport Base64Utils from '../../../utils/Base64Utils';\r\nimport DataSet from '../../../structures/Set';\r\nimport DataList from '../../../structures/List';\r\nimport ParseGID from './ParseGID'\r\nimport TilemapLayerData from '../data/TilemapLayerData';\r\nimport Tile from '../data/Tile';\r\n\r\n\r\nexport default function ParseLayers(json, map) {\r\n\r\n    let size = json.layers.length;\r\n    let tileLayers = new DataList();\r\n\r\n    if (size <= 0)\r\n        return tileLayers;\r\n\r\n    for (let i = size - 1; i >= 0; i--) {\r\n\r\n        let jsonLayer = json.layers[i];\r\n\r\n        if (jsonLayer.type !== \"tilelayer\") continue;\r\n\r\n        if (jsonLayer.enconding) {\r\n            if (jsonLayer.enconding === 'base64') {\r\n                //  should be interpreted as an array of unsigned 32-bit integers using little-endian byte ordering.\r\n                jsonLayer.data = Base64Utils.decodeToUint32(jsonLayer.data);\r\n                delete jsonLayer.enconding;\r\n            }\r\n        }\r\n\r\n        let newLayer = new TilemapLayerData({\r\n            name: jsonLayer.name,\r\n            x: ObjectGet.value(jsonLayer, 'offsetx', 0) + jsonLayer.x,\r\n            y: ObjectGet.value(jsonLayer, 'offsety', 0) + jsonLayer.y,\r\n            width: jsonLayer.width,\r\n            height: jsonLayer.height,\r\n            tileWidth: jsonLayer.tilewidth,\r\n            tileHeight: jsonLayer.tileheight,\r\n            alpha: jsonLayer.opacity,\r\n            visible: jsonLayer.visible,\r\n            //properties: GetFastValue(layer, 'properties', {})\r\n        });\r\n\r\n        let tiles = [];\r\n        let x = 0;\r\n        let y = 0;\r\n        let hasAnimatedTiles = false;\r\n        let animatedTilesGID = new DataSet();\r\n\r\n        for (let j = 0; j < jsonLayer.data.length; j++) {\r\n\r\n            let gidProp = ParseGID(jsonLayer.data[j]);\r\n            let id = x + y * newLayer.width;\r\n            let tile = null;\r\n\r\n            // The first tileset always has a firstgid value of 1. \r\n            if (gidProp.gid > 0) {\r\n                let gid = gidProp.gid;\r\n                let tileset = map.getTilesetByGID(gid);\r\n                let tileData = tileset.getTileGID(gid);\r\n                \r\n                if (tileData.isAnimated) {\r\n                    animatedTilesGID.set(gid);\r\n                    hasAnimatedTiles = true;\r\n\r\n                }\r\n\r\n                tile = new Tile(newLayer, tileData, x, y, id);\r\n            } \r\n\r\n            tiles.push(tile);\r\n\r\n            x++;\r\n\r\n            if (x >= newLayer.width) {\r\n                x = 0;\r\n                y++;\r\n            }\r\n        }\r\n\r\n        newLayer.tiles = tiles;\r\n        newLayer.hasAnimatedTiles = hasAnimatedTiles;\r\n        newLayer.animatedTiles = (animatedTilesGID.size > 0) ? animatedTilesGID : undefined;\r\n\r\n        tileLayers.push(newLayer);\r\n\r\n    }\r\n\r\n   \r\n    return tileLayers;\r\n\r\n}","\r\nexport default function ParseTilesProperties(tileset, tilesetTilesProperties) {\r\n\r\n    for (let tileIndex in tilesetTilesProperties) {\r\n\r\n        let tileData = tileset.getTile(tileIndex);\r\n\r\n        if (tileData === null || tileData === undefined) continue;\r\n\r\n\r\n        let tileProperties = tilesetTilesProperties[tileIndex];\r\n\r\n        // check properties\r\n        for (let property in tileProperties) {\r\n        \r\n            let propertyContent = tileProperties[property];\r\n\r\n            if (property == 'animation') {\r\n\r\n                let animationSize = propertyContent.length;\r\n\r\n                if (animationSize > 1) {\r\n                    tileData.isAnimated = true;\r\n\r\n                    let keyFrames = [];\r\n\r\n                    for (let i = 0; i < animationSize; i++) {\r\n                        let anim = propertyContent[i];\r\n                        keyFrames.push({\r\n                            duration: anim.duration,\r\n                            tileID : anim.tileid \r\n                        });\r\n                    }\r\n                    \r\n                    tileData.keyFrames = keyFrames;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n  \r\n}","import Tileset from \"../data/Tileset\";\r\nimport DataList from \"../../../structures/List\";\r\nimport Path from '../../../utils/Path'\r\nimport ParseTilesProperties from \"./ParseTilesProperties\";\r\n\r\n\r\nexport default function ParseTilesets(json, cache) {\r\n\r\n    let size = json.tilesets.length || 0;\r\n\r\n    let tileSets = new DataList();    \r\n\r\n    for (let i = 0; i < size; i++) {\r\n\r\n        let jsonTileset = json.tilesets[i];\r\n\r\n        if (jsonTileset.image) {\r\n\r\n            var newTileSet = new Tileset(\r\n                jsonTileset.name, \r\n                jsonTileset.firstgid, \r\n                jsonTileset.tilewidth, \r\n                jsonTileset.tileheight, \r\n                jsonTileset.margin, \r\n                jsonTileset.spacing);\r\n\r\n            newTileSet.image = cache.image.get(Path.getFilenameWithoutExtension(jsonTileset.image) || jsonTileset.name);\r\n\r\n            newTileSet.updateData(jsonTileset.imagewidth, jsonTileset.imageheight);\r\n\r\n            // check tile properties\r\n            if (jsonTileset.tiles !== undefined)\r\n                ParseTilesProperties(newTileSet, jsonTileset.tiles);\r\n                \r\n            tileSets.push(newTileSet);\r\n        }\r\n    }\r\n\r\n    return tileSets;\r\n\r\n}","import PostPreloadingScene from \"./components/PostPreloadingScene\";\r\n\r\nexport default class Scene {\r\n  \r\n  constructor(name) {\r\n\r\n    this.name = name || 'New Scene';\r\n    //this.childs = new EntityHierarchy(\"SceneHierarchy\", this.game);\r\n    /*this.camera = null;\r\n    this.x = 0;\r\n    this.y = 0;\r\n    this.width = 0;\r\n    this.height = 0;\r\n    this.view = 0;*/\r\n\r\n\r\n    /*if (myGame != null) {\r\n      this.width = myGame.width;\r\n      this.height = myGame.height;\r\n    }*/\r\n  }\r\n\r\n\r\n  preloadDone(transition) {\r\n\r\n    if (this.scene === undefined) return;\r\n\r\n    PostPreloadingScene(this.scene, transition);\r\n  }\r\n\r\n  instanceDestroy(gameObject) {\r\n\r\n    if (gameObject['destroy'])\r\n      gameObject.destroy();\r\n\r\n      //console.log(\"deleted \" + gameObject._id)\r\n\r\n    let index = this.instances.indexOf( gameObject);\r\n\r\n    this.instances.splice( index, 1 );\r\n\r\n  }\r\n\r\n  addGameObject(gameObject, clone) {\r\n\r\n    let obj;\r\n    let cl = false;\r\n\r\n    if (arguments.length == 0)\r\n      obj = new scintilla.GameObject();\r\n    else {\r\n\r\n      if (clone === undefined)\r\n        cl = false;\r\n      else\r\n        cl = clone;\r\n\r\n\r\n        if (cl)\r\n          obj = gameObject.clone();\r\n        else\r\n          obj = gameObject;\r\n\r\n    }\r\n\r\n    obj._id = this.instances.length;\r\n    obj._game = this.game;\r\n    this.instances.push(obj);\r\n\r\n    obj.start();\r\n    return obj;\r\n\r\n  }\r\n\r\n  setBounds(x,y,width,height) {\r\n\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = width;\r\n    this.height = height;\r\n    \r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n","\r\nimport System from '../core/system/System';\r\nimport DataMap from '../structures/Map';\r\nimport Scene from './Scene';\r\nimport ScintillaLoadingScreen from './builtin/ScintillaLoadingScene';\r\nimport SetScene from './components/SetScene';\r\nimport InjectSystems from '../core/system/components/InjectSystems';\r\nimport CreateSceneFrom from './components/CreateSceneFrom';\r\nimport Validate from '../utils/Validate';\r\n\r\nexport default class SceneManager {\r\n  \r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    this._scenes = new DataMap();\r\n\r\n    this.currentScene = null;\r\n    this._currentSceneName = '';\r\n    this._changeScene = null;\r\n    this._transition = null;\r\n    this._isTranistioning = false;\r\n\r\n    this._setup = false;\r\n    this._clearCache = false;\r\n\r\n    this._scintillaLoading = false;\r\n\r\n    // callbacks\r\n    \r\n    this.onStartCallback = null;\r\n    this.onLoadingCallback = null;\r\n    this.onLoadingRenderCallback = null;\r\n    this.onPreloadCallback = null;\r\n    this.onUpdateCallback = null;\r\n    this.onRenderCallback = null;\r\n    this.onDestroyCallback = null;\r\n    this._loadingPlaceHolder = new ScintillaLoadingScreen(this.game);\r\n\r\n  }\r\n\r\n  add(sceneName, scene) {\r\n\r\n    if (sceneName === undefined) {\r\n      throw new Error(\"SceneManager.add: Could not add Scene. \\'sceneName\\' is undefined.\"); \r\n    }\r\n\r\n    if (!Validate.isString(sceneName)) {\r\n      throw new Error(\"SceneManager.add: Could not add Scene. \\'sceneName\\' is not string.\"); \r\n    }\r\n\r\n    if (this._scenes.has(sceneName)) {\r\n      throw new Error(\"SceneManager.add: Could not add Scene. There is already a scene with name \\\"\" + sceneName + \"\\\".\"); \r\n    }\r\n\r\n    let newScene = CreateSceneFrom(scene, sceneName);\r\n    this._scenes.set(sceneName, newScene);\r\n    return this;\r\n  }\r\n\r\n  new(sceneName) {\r\n\r\n    if (this._scenes.has(sceneName))\r\n    {\r\n      throw new Error(\"Could not create new Scene. The scene name \\\"\" + name + \"\\\" already exists.\"); \r\n    }\r\n\r\n    var newScene = new Scene(this.game, sceneName);\r\n    this._scenes.set(sceneName,newScene);\r\n\r\n    return newScene;\r\n\r\n  }\r\n\r\n  set(sceneName, clearCache) {\r\n    return SetScene(this, sceneName, clearCache);\r\n  }\r\n\r\n  transition(sceneName, type) {\r\n    SetScene(this, sceneName, false, type);\r\n    /// TODO\r\n  }\r\n\r\n  restart(clearCache) {\r\n\r\n    if (clearCache === undefined) { clearCache = false; }\r\n\r\n    this._changeScene = this._currentSceneName;\r\n    this._clearCache = clearCache;\r\n\r\n  }\r\n\r\n  remove(sceneName) {\r\n\r\n    if (this._currentSceneName === sceneName) {\r\n\r\n      this.currentScene = null;\r\n\r\n      this.onStartCallback = null;\r\n      this.onLoadingCallback = null;\r\n      this.onLoadingRenderCallback = null;\r\n      this.onPreloadCallback = null;\r\n      this.onUpdateCallback = null;\r\n      this.onRenderCallback = null;\r\n      this.onDestroyCallback = null;\r\n\r\n\r\n    }\r\n\r\n    delete this.scenes[sceneName];\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\nSystem.register('SceneManager', SceneManager, 'scene', function()\r\n{\r\n  InjectSystems(this.game, this._loadingPlaceHolder);\r\n});\r\n","\r\n// TODO - FUTURE\r\nconst SceneState = {\r\n    NONE : 0,\r\n    START : 1,\r\n    LOADING : 2,\r\n    RUNNING : 3\r\n};\r\n\r\n\r\nObject.freeze(SceneState);\r\n\r\nmodule.exports = SceneState;","import Scene from \"../Scene\";\r\nimport Version from \"../../Define\";\r\nimport MathUtils from \"../../math/MathUtils\";\r\nimport TransitionBehavior from \"../../render/transition/TranstionBehavior\";\r\n\r\nexport default class ScintillaLoadingScreen extends Scene {\r\n\r\n    constructor(game) {\r\n        super('Scintilla Loading Scene');\r\n\r\n        let blob;\r\n        let logoData = [\"%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath d='M224%20387.814V512L32 320l192-192v126.912C447.375 260.152 437.794 103.016 380.93 0 521.287 151.707 491.48 394.785 224 387.814z'/%3E%3C/svg%3E\"];\r\n\r\n\r\n        try {\r\n            blob = new window.Blob(logoData, { type: 'data:image/svg+xml;charset=utf-8' });\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n\r\n \r\n        this.scintillaLogo = new Image();\r\n        this.scintillaLogo.src = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQwIiBoZWlnaHQ9IjI2MC45OCIgdmlld0JveD0iMCAwIDYzLjUgNjkuMDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2RjMzBhOSI+PHBhdGggZD0iTTQzLjQ5IDM2Ljg1NmwtMTQuMTgtNi40MzRMNi45NTYgNDkuNzg0bDE5LjM2Mi0yNy4yNC02LjU3Ni05LjU2OCAxNC40NTUgNi41NzVMNTYuNTUxLjE5IDM3LjE5IDI3LjQzeiIgcGFpbnQtb3JkZXI9InN0cm9rZSBtYXJrZXJzIGZpbGwiLz48cGF0aCBkPSJNMTEuMTIgMzYuOTA4bC0uNTQzLTEuMDQxLTEuMDM2LjU0My41MzggMS4wMzZ6bS0xLjg4OC00LjE3NmwtLjM2LTEuMTE2LTEuMTE2LjM2MS4zNjYgMS4xMTV6bS0xLjA2NC00LjQ1NmwtLjA5Ny0uNjM1di0uMDNsLS4wMDYtLjAzLS4wMy0uNDI5LTEuMTY2LjA4LjAzNC40OC4wMDYuMDQ3LjEwMy42ODZ6bS0uMTAzLTUuNjk4bC0xLjE2Ny0uMTA4LS4xMDggMS4xNjcgMS4xNjcuMTA4em0uODY0LTQuNDMzbC4wMDYtLjAzLjAwNi0uMDMtLjMwMy0uMDgtLjgxMi0uMjgxLS4wMDYuMDMtLjAxMi4wNDYtLjI4NiAxLjExNSAxLjEzMi4yOTN6bTEuNDE5LTMuNjMzbC4zMzctLjYyMy0xLjAzLS41NTUtLjM2LjY2My0uMDE4LjA0Mi0uMTcxLjM4MyAxLjA3NS40N3ptMi44NTQtNC40NWwtLjkyNi0uNzIxLS43MjEuOTI3LjkyNy43MTV6bTMuMTg3LTMuMjlsLS43OS0uODYzLS44NjQuNzk1Ljc5Ni44NTh6bTMuMTgtMi4yNjVsLjAzLS4wM2guMDExbC41MjEtLjI4LS41Ni0xLjAzLS41NjEuMzAyLS4wNC4wMy0uNDQ3LjI5My42NDEuOTg0ek00Mi42NDUgMi41bC0uMjUxLS4xMzItLjA0Ni0uMDMtLjgxOC0uMzQzLS40NTIgMS4wNzUuNzcyLjMyNi4yNTIuMTMyem0tMTguMzIzLS4xMzJsLS4zODMtMS4xMS0xLjEwNC4zODQuMzgzIDEuMTA0ek0zOC4xMi44MjhMMzYuOTgyLjU1M2wtLjI2OSAxLjE0NCAxLjEzOC4yN3ptLTkuNTA3LjUzOGguMTMzTDI4LjY0My4xOTloLS4xODNsLTEuMDE4LjE3OC4yIDEuMTU2em00LjgtMS4zMDRMMzIuNTIgMGgtLjMyNmwuMDEyIDEuMTY3aC4yMzVsLjg4Ni4wNjJ6TTUyLjM4IDEzLjA2NWwuNTM4IDEuMDQgMS4wNC0uNTQyLS41NDMtMS4wMzZ6bTEuODgyIDQuMTc2bC4zNjYgMS4xMTUgMS4xMS0uMzYtLjM2LTEuMTE2em0xLjA2NCA0LjQ1NmwuMTAzLjY0di4wM2wuMDA2LjAzLjAyOS40MyAxLjE2Ny0uMDc4LS4wMzQtLjQ4LS4wMDYtLjA0Ny0uMTAzLS42ODZ6bS4xMDkgNS42OThsMS4xNjcuMTA4LjEwMy0xLjE2Ny0xLjE2Ny0uMTA4em0tLjg2NCA0LjQzM2wtLjAwNi4wMy0uMDA2LjAzLjI5Mi4wOC44MTguMjgxLjAxMi0uMDMuMDEyLS4wNDguMjg1LTEuMTEtMS4xMzItLjI5MnptLTEuNDAyIDMuNTkzbC0uMDEyLjAzLS4wMTIuMDMtLjMzNy42MTcgMS4wMzUuNTU1LjM1NS0uNjYzLjAyMy0uMDQyLjE2Ni0uMzg0LTEuMDctLjQ2OXptLTIuODcxIDQuNDlsLjkyNi43MjEuNzE1LS45MjctLjkyNi0uNzE1em0tMy4xOTIgMy4yOWwuNzk1Ljg2My44NjMtLjc5NS0uNzk1LS44NTh6bS0zLjE3NSAyLjI2NWwtLjAzLjAzaC0uMDEybC0uNTIuMjguNTU1IDEuMDMuNTYtLjMwMy4wNDYtLjAzLjQ0Ni0uMjkzLS42NC0uOTg0em0tMjMuMDc2IDIuMDA4bC4yNTEuMTMyLjA0LjAzLjgxOS4zNDMuNDU3LTEuMDc2LS43NzgtLjMyNmgtLjAwNmwtLjAzNC0uMDMtLjIxMi0uMTE0em0xOC4zMTcuMTM4bC4zODMgMS4xMDQgMS4xMS0uMzg0LS4zODQtMS4xMDR6bS0xMy43OTggMS41MzNsMS4xNDQuMjc1LjI2OS0xLjE0NC0xLjE0NC0uMjd6bTkuNTEzLS41MzhoLS4xMzhsLjEwOCAxLjE2N2guMTgzbDEuMDE5LS4xNzgtLjItMS4xNTZ6bS00LjggMS4zMDRsLjg5My4wNjRoLjMybC0uMDEyLTEuMTY3aC0uMjI5bC0uODkyLS4wNjR6IiBjb2xvcj0iIzAwMCIgc29saWQtY29sb3I9IiMwMDAwMDAiIHN0eWxlPSJmb250LWZlYXR1cmUtc2V0dGluZ3M6bm9ybWFsO2ZvbnQtdmFyaWFudC1hbHRlcm5hdGVzOm5vcm1hbDtmb250LXZhcmlhbnQtY2Fwczpub3JtYWw7Zm9udC12YXJpYW50LWxpZ2F0dXJlczpub3JtYWw7Zm9udC12YXJpYW50LW51bWVyaWM6bm9ybWFsO2ZvbnQtdmFyaWFudC1wb3NpdGlvbjpub3JtYWw7aXNvbGF0aW9uOmF1dG87bWl4LWJsZW5kLW1vZGU6bm9ybWFsO3NoYXBlLXBhZGRpbmc6MDt0ZXh0LWRlY29yYXRpb24tY29sb3I6IzAwMDt0ZXh0LWRlY29yYXRpb24tbGluZTpub25lO3RleHQtZGVjb3JhdGlvbi1zdHlsZTpzb2xpZDt0ZXh0LWluZGVudDowO3RleHQtb3JpZW50YXRpb246bWl4ZWQ7dGV4dC10cmFuc2Zvcm06bm9uZSIgcGFpbnQtb3JkZXI9InN0cm9rZSBtYXJrZXJzIGZpbGwiIHdoaXRlLXNwYWNlPSJub3JtYWwiLz48cGF0aCBkPSJNNi4zMiA2NS43MjhxLS4xMDcgMS4zMzMtLjkxIDIuMjc2LS41MjguNjQyLTEuNDA1LjktLjQ3NS4xNDctMS4wODIuMTQ3LTEuMTMxIDAtMS44MTgtLjU1OS0uNTctLjQ2LS44NTgtMS4yNDMtLjI4OC0uNzg5LS4yNDUtMS44MTVsMS44MzQtLjEyNnEuMDIgMS4xMS40NCAxLjYwNi4zMDYuMzc3Ljc1NS4zNTYuNjMtLjAzIDEuMDY0LS42MTQuMjI0LS4zLjI3Ni0uODQ1LjA3Ny0uODAzLS41NjctMS41ODUtLjUyMS0uNTM4LTEuNTU2LTEuNjEzLS44NjktLjkyMi0xLjE5LTEuNjU1LS4zNDYtLjgyMy0uMjU0LTEuNzg3LjE2Ni0xLjczOCAxLjQxOC0yLjYzMlEyLjk5MiA1NiA0LjA2IDU2cTEuMDI2IDAgMS43MTUuNDYxLjUzMS4zNTYuODE5Ljk5OS4yODguNjM1LjI4NSAxLjQ2NmwtMS44NzUuMzM1cS0uMDAyLS43ODItLjMzLTEuMjE1LS4yMzUtLjMyMS0uNzMtLjMyMS0uNTI0IDAtLjg0OC40NjgtLjI2LjM3Ny0uMzEzLjkzNS0uMDg0Ljg3My41ODMgMS43OC4yNTQuMzQzLjc3NC44MS42MTcuNTU5LjgxMi43ODIuNjM3LjcxMi45NjIgMS40MDQuMTUuMzIuMjM2LjYuMjA3LjY3Ny4xNjkgMS4yMjJ6bTQuOTYgMy4zMnEtMS4yNyAwLTIuMDcyLS44ODctLjgwMi0uODg2LS42ODEtMi4xNWwuNjY3LTYuOTc1cS4xMjEtMS4yNjMgMS4xLTIuMTUuOTgtLjg5NCAyLjIzNi0uODk0IDEuMjcgMCAyLjA2NS44OTQuOC44OTMuNjggMi4xNWwtLjEzOSAxLjQ1MmgtMS45OWwuMTQzLTEuNDg3cS4wNDQtLjQ2LS4yNTMtLjc4Mi0uMjktLjMyOC0uNzUtLjMyOC0uNDU1IDAtLjgwNy4zMjgtLjM1Mi4zMjItLjM5Ni43ODJsLS42NyA2Ljk4OXEtLjA0My40Ni4yNDcuNzgyLjI5LjMyMS43NDQuMzIxLjQ2MSAwIC44MTMtLjMyMS4zNTktLjMyMS40MDMtLjc4MmwuMTY4LTEuNzUyaDEuOTlsLS4xNyAxLjc3M3EtLjEyMiAxLjI3LTEuMSAyLjE1Ny0uOTc4Ljg4LTIuMjI4Ljg4em03LjE5LS4xNmgtMS45MTNsMS4yMi0xMi43MzVoMS45MTJ6bTUuNzQtMTIuNzM0bDEuNzIzIDguNTUzLjgxOC04LjU1M2gxLjkybC0xLjIxOSAxMi43MzVoLTIuMDZsLTEuODY1LTguMTU1LS43OCA4LjE1NWgtMS45MTRsMS4yMi0xMi43MzV6bTguNTMgMS45MjFoLTIuMDM5bC4xODQtMS45Mmg1Ljk5bC0uMTgzIDEuOTJIMzQuNjZMMzMuNjI1IDY4Ljg5aC0xLjkyem03LjAzIDEwLjgxM2gtMS45MTNsMS4yMi0xMi43MzVoMS45MTJ6bTcuNiAwaC01LjIzbDEuMjItMTIuNzM1aDEuOTEzbC0xLjAzNyAxMC44MjloMy4zMTZ6bTcuMjEgMGgtNS4yM2wxLjIyLTEyLjczNWgxLjkxM2wtMS4wMzcgMTAuODI5aDMuMzE2em00LjczLTIuOTJsLS43NDggMi45MjVoLTEuOTk3bDMuMzc3LTEyLjczNWgyLjY0NmwuOTEgMTIuNzM1aC0yLjAxbC0uMTc0LTIuOTI1em0xLjY2NS02Ljg5MWwtMS4xOTMgNS4wMmgxLjQyNXoiLz48L2c+PC9zdmc+\"\r\n        this._loaded = false;\r\n        let self = this;\r\n        this._finished = false;\r\n        //\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAA0CAQAAABxuOPTAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfiBAEENCBdKapvAAABjklEQVRYw+2YSxKDIAyGA6seyiXH8mgsORS7dAFpUMNDJ9CNmakFAnz8MVIswCPbkT8L7IqS4REVgSO2HKiGvQOMa+7yGbhY5XKdhFPV2ZpMLaz3gqeIPd5PeeJaWBX3qiNYqqnn7VVrPayqu/JZl3ISSWstEb2wPtDaHjLhbo4nUwunrHQUOyWN2kBFpRJ26iMjp49qgHuPTDvQKkpbW5+i1n1wa5fAijp7P21/OP+wT0Hnws3uefDUdP7pNLtY5ULgPexE4Ohr4tR31H11er322muPdqXrealWYrPrkQNQgI8ZXVDqGbt/GRh20eSp/jERz7jUQn7qe10Ut5Z+HmdTM08WsaxJx02GUMvIgabsYwMA+AIcsuqQO3vk75CRoQhnyCN5LPu5nKQUYz1G5KmPq5V9tbaWn+aKCGABnAmFonAIijPXVUtKSHXd79H9lNqIAM4AbBm7/fDJNqF8biM1W3WMx9JnA3hkRaXqdD1GQW6j1AqdMVS3zgB49FkvXT16dIaDPFaq+5kC4MwX1X+rgjIvVdUAAAAASUVORK5CYII=\";\r\n        //this.scintillaLogo.src = blob;\r\n\r\n        this.progress = 0;\r\n        this.fromProgress = 0;\r\n        this.toProgress = 0;\r\n        this.t = 0;\r\n        this.game = game;\r\n        this.nextScene = null;\r\n        this.preloadingDone = false;\r\n\r\n\r\n        let setLoadingPos = function() {\r\n            this._midPos = {x : (320 / 2), y: (240/2)};\r\n            this._barColor = '#dc30a9';\r\n            this._barPosX = 160 - (this.scintillaLogo.width * 0.3 * 0.5);\r\n            this._barPosY = 120 - 16 + (this.scintillaLogo.height * 0.3 * 0.5) + 8;\r\n            this._barPosW = this.scintillaLogo.width * 0.3;\r\n        };\r\n\r\n        this.scintillaLogo.onload = function() {\r\n            self._loaded = true;\r\n            setLoadingPos.call(self);\r\n        };\r\n\r\n        let drawFunc = function(draw) {\r\n            if (this._loaded) {\r\n                draw.imageExtra(this.scintillaLogo,160, 120-16, 0.3, 0.3, 0.5, 0.5); //131,73);\r\n    \r\n                draw.color = this._barColor;\r\n                draw.outlineRect(this._barPosX, this._barPosY, this._barPosW, 7);\r\n                draw.rect(this._barPosX + 2, this._barPosY + 2, (this._barPosW - 4) * this.progress, 3);\r\n                draw.font('Verdana', 6);\r\n                draw.text('WIP - ' + Version.VERSION, 320 - 4, 240 - 4,'#490c37','right');\r\n                \r\n            }\r\n            \r\n        };\r\n\r\n        let loadingFunc = function(dt) {\r\n\r\n            if (!this._finished) {\r\n            this.t += dt / 0.15;\r\n\r\n            if (this.t >= 1)\r\n                this.t = 1.0;\r\n\r\n            if (!this.preloadingDone)\r\n            {\r\n                let prog = this.load.progress;\r\n\r\n                if (prog >= 1.0)\r\n                    this.preloadingDone = true;\r\n\r\n                if (prog > this.progress)\r\n                {\r\n                    this.fromProgress = this.progress;\r\n                    this.toProgress = prog;\r\n                    this.t = 0;   \r\n                }\r\n\r\n                \r\n\r\n            } else {\r\n                this.wait += dt;\r\n\r\n                if (this.wait >= 1.5) {\r\n                    //this.preloadDone(TransitionBehavior.FADEIN);\r\n                    let done = function() {\r\n                        this.transition.reset();\r\n                        this.preloadDone();                 \r\n                    };\r\n                    this.transition.in();\r\n                    this.event.subscribeOnce('transition_end', done, this);\r\n                    this._finished = true;\r\n\r\n                }\r\n            }\r\n\r\n            this.progress = MathUtils.lerp(this.fromProgress, this.toProgress, this.t);\r\n           \r\n        }\r\n        };\r\n\r\n        this.loading = loadingFunc;\r\n        this.update = loadingFunc;\r\n        this.loadingGUI = drawFunc;\r\n        this.gui = drawFunc;\r\n    }\r\n\r\n    init(next) {\r\n        this.nextScene = next;\r\n        this.wait = 0;\r\n        this.t = 0;\r\n        this.progress = 0;\r\n        this.preloadingDone = false;\r\n        this.ui.setSize(320, 240);\r\n        this.ui.setViewportByAspectRatio(1.33333333333);\r\n        this.transition.settings.setInDuration(0.35);\r\n        \r\n    }\r\n\r\n    start() {\r\n        //this.progress = 1;\r\n    }\r\n\r\n}","import UnjectSystems from \"../../core/system/components/UnjectSystems\";\r\n\r\nexport default function ClearScene(game, sceneManager) {\r\n\r\n    if (sceneManager._currentSceneName)\r\n    {\r\n  \r\n      //game.system.unject(sceneManager.currentScene);\r\n      UnjectSystems(sceneManager.currentScene);\r\n\r\n      if (sceneManager.onDestroyCallback)\r\n      {\r\n        sceneManager.onDestroyCallback.call(sceneManager.currentScene, game);\r\n      }\r\n  \r\n      if (sceneManager._clearCache)\r\n      {\r\n        game.cache.clear();\r\n      }\r\n\r\n    }\r\n\r\n}","import Scene from \"../Scene\";\r\nimport Extend from '../../utils/object/Extend';\r\n\r\nexport default function CreateSceneFrom(value, sceneName) {\r\n\r\n    if (value === undefined) {\r\n        throw new Error(\"SceneManager.add: Could not add Scene. \\'scene\\' is undefined.\");\r\n    }\r\n\r\n    if (value === null) {\r\n        throw new Error(\"SceneManager.add: Could not add Scene. \\'scene\\' is null.\");\r\n    }\r\n\r\n    var newScene;\r\n\r\n    if (value instanceof Scene) {\r\n      newScene = scene;\r\n    } else if (typeof value === Scene) {\r\n      newScene = new value();\r\n    } else if (typeof value === 'object') {\r\n        let placeholder = new Scene(sceneName);\r\n        newScene = Extend(placeholder, value);\r\n    } else if (typeof value === 'function') {\r\n        let placeholder = new value();\r\n\r\n        if (value instanceof Scene) {\r\n            newScene = placeholder;\r\n        } else {\r\n            if (placeholder.name === undefined) {\r\n                placeholder.name = sceneName;\r\n            }\r\n            newScene = Extend(true, placeholder, Scene);\r\n            \r\n        }\r\n    }\r\n\r\n    return newScene;\r\n}","import TransitionBetweenScenes from \"./TransitionBetweenScenes\";\r\nimport TransitionBehavior from \"../../render/transition/TranstionBehavior\";\r\n\r\nexport default function PostPreloadingScene(sceneManger, transition) {\r\n\r\n    if (transition === undefined) transition = TransitionBehavior.NONE;\r\n\r\n    sceneManger._scintillaLoading = false;\r\n    sceneManger._transition = transition;\r\n\r\n    if (sceneManger.currentScene === undefined || sceneManger.currentScene === null) return;\r\n\r\n    function start() {\r\n\r\n        this._isTranistioning = false;\r\n\r\n        if (this.onStartCallback) {\r\n            this.onStartCallback.call(this.currentScene, this.game);\r\n        }\r\n    }\r\n\r\n    if (transition <= TransitionBehavior.NONE) {\r\n        start.call(sceneManger);\r\n    } else {\r\n\r\n        TransitionBetweenScenes(sceneManger, start.bind(sceneManger));\r\n    }\r\n}","import SetupScene from \"./SetupScene\";\r\nimport PreloadSceneComplete from \"./PreloadSceneComplete\";\r\nimport ClearScene from \"./ClearScene\";\r\nimport StartLoadAssets from \"../../loader/components/StartLoadAssets\";\r\n\r\nexport default function PreUpdateScene(sceneManager) {\r\n\r\n    if (!sceneManager.game.systemInited || sceneManager._changeScene === null)\r\n      return;\r\n\r\n\r\n      ClearScene(sceneManager, sceneManager.game);\r\n\r\n      SetupScene.call(sceneManager, sceneManager._changeScene);\r\n\r\n      if (sceneManager._currentSceneName !== sceneManager._changeScene)\r\n      {\r\n          return;\r\n      }\r\n      else\r\n      {\r\n        sceneManager._changeScene = null;\r\n      }\r\n\r\n      if (sceneManager.onPreloadCallback) {\r\n\r\n        sceneManager.game.system.load.reset();\r\n        sceneManager.onPreloadCallback.call(sceneManager.currentScene, sceneManager.game);\r\n\r\n        if (sceneManager.game.system.load.totalQueuedFiles === 0)\r\n        {\r\n          PreloadSceneComplete.call(sceneManager);\r\n\r\n        } else {\r\n\r\n            //sceneManager.game.system.load.start();\r\n            StartLoadAssets.call(sceneManager.game.system.load);\r\n        }\r\n\r\n      } else {\r\n\r\n        PreloadSceneComplete.call(sceneManager);\r\n      }\r\n}","import TransitionBehavior from \"../../render/transition/TranstionBehavior\";\r\nimport TransitionBetweenScenes from \"./TransitionBetweenScenes\";\r\n\r\n\r\nexport default function PreloadSceneComplete() {\r\n\r\n      if (this._setup === false && this.onLoadingCallback) {\r\n          this.onLoadingCallback.call(this.currentScene, this.game);\r\n      }\r\n\r\n\r\n\r\n      function start() {\r\n      if (this._scintillaLoading) {\r\n        this._loadingPlaceHolder.start();\r\n      } else {\r\n        if (this.onStartCallback) {\r\n          this.onStartCallback.call(this.currentScene, this.game);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this._transition <= TransitionBehavior.NONE) {\r\n        start.call(this);\r\n    } else {\r\n        TransitionBetweenScenes(this, start.bind(this));\r\n    }\r\n\r\n      this._setup = true;\r\n\r\n      \r\n\r\n}","\r\nexport default function RenderScene(sceneManager, drawer) {\r\n\r\n    if (sceneManager._setup) {\r\n\r\n        if (sceneManager._scintillaLoading) {\r\n            sceneManager._loadingPlaceHolder.gui(drawer);\r\n        } else {\r\n        if (sceneManager.onRenderCallback)\r\n            sceneManager.onRenderCallback.call(sceneManager.currentScene, drawer);\r\n        \r\n        }\r\n    } else {\r\n        if (sceneManager._scintillaLoading) {\r\n            sceneManager._loadingPlaceHolder.loadingGUI(drawer);\r\n        } else {\r\n            if (sceneManager.onLoadingRenderCallback)\r\n                sceneManager.onLoadingRenderCallback.call(sceneManager.currentScene, drawer);\r\n            \r\n        }\r\n    }\r\n\r\n}","import TransitionBehavior from \"../../render/transition/TranstionBehavior\";\r\n\r\n\r\nexport default function SetScene(manager, sceneName, clearCache, type) {\r\n\r\nif (!manager._scenes.has(sceneName))\r\n    throw new Error('SceneManager.set: Scene \\'' + sceneName + '\\' does not exist.')\r\n\r\n  if (clearCache === undefined) { clearCache = false; }\r\n  if (type === undefined) {type = TransitionBehavior.NONE;}\r\n\r\n  manager._transition = type;\r\n  manager._changeScene = sceneName;\r\n  manager._clearCache = clearCache;\r\n\r\n  return manager;\r\n  \r\n}","import InjectSystems from \"../../core/system/components/InjectSystems\";\r\n\r\n  export default function SetupScene(sceneName) {\r\n\r\n    this.currentScene = this._scenes.get(sceneName);\r\n  \r\n    this.onLoadingCallback = this.currentScene['loading'] || null;\r\n    this.onLoadingRenderCallback = this.currentScene['loadingGUI'] || null;\r\n  \r\n    let bothIsNull = (this.onLoadingCallback === null && this.onLoadingRenderCallback === null);\r\n  \r\n    if (this.onLoadingCallback === null || this.onLoadingRenderCallback === null)\r\n    {\r\n      if (bothIsNull)\r\n      {\r\n        this._loadingPlaceHolder.init(this.currentScene);\r\n        this._scintillaLoading = true;\r\n      } else {\r\n        this._scintillaLoading = false;\r\n      }\r\n    }\r\n  \r\n    this.onRenderCallback = this.currentScene['gui'] || null;\r\n    this.onUpdateCallback = this.currentScene['update'] || null;\r\n    this.onStartCallback = this.currentScene['start'] || null;\r\n    this.onPreloadCallback = this.currentScene['preload'] || null;    \r\n    this.onDestroyCallback = this.currentScene['destroy'] || null;\r\n  \r\n    InjectSystems(this.game, this.currentScene);\r\n    //this.game.system.inject(this.currentScene);\r\n  \r\n    this._currentSceneName = sceneName;\r\n  \r\n    this._setup = false;\r\n  \r\n}","import TransitionBehavior from \"../../render/transition/TranstionBehavior\";\r\n\r\nexport default function TransitionBetweenScenes(sceneManager, delegate) {\r\n\r\n    let transit = sceneManager._transition;\r\n\r\n    sceneManager.game.system.transition.by(transit);\r\n    if (transit === TransitionBehavior.FADEINOUT)\r\n    {\r\n        sceneManager.game.system.event.subscribeOnce('transition_pause_end', delegate);\r\n    } else {\r\n        sceneManager.game.system.event.subscribeOnce('transition_end', delegate);\r\n    }\r\n    sceneManager._transition = TransitionBehavior.NONE;\r\n    sceneManager._isTranistioning = true;\r\n\r\n}","\r\nexport default function UpdateScene(sceneManager, deltaTime) {\r\n\r\n    if (sceneManager._setup) {\r\n\r\n        if (sceneManager._scintillaLoading) {\r\n\r\n            sceneManager._loadingPlaceHolder.update(deltaTime);\r\n\r\n        } else {\r\n            if (sceneManager.onUpdateCallback)\r\n                sceneManager.onUpdateCallback.call(sceneManager.currentScene, deltaTime);\r\n        }\r\n    } else {\r\n        if (sceneManager._scintillaLoading) {\r\n\r\n            sceneManager._loadingPlaceHolder.loading(deltaTime);\r\n\r\n        } else {\r\n\r\n            if (sceneManager.onLoadingCallback)\r\n                sceneManager.onLoadingCallback.call(sceneManager.currentScene, deltaTime);\r\n        }\r\n    }\r\n\r\n}","\r\nmodule.exports = {\r\n    State : require('./SceneState'),\r\n    Scene : require('./Scene'),\r\n    SceneManager : require('./SceneManager')    \r\n};","\r\nimport MergeSort from './useful/MergeSort'\r\n\r\nexport default class DataList\r\n{\r\n    constructor(elements, unique)\r\n    {\r\n        this.unique = unique || true;\r\n        this.childs = [];\r\n\r\n        if (Array.isArray(elements))\r\n        {\r\n            for (let i = 0; i < elements.length; i++)\r\n                this.push(elements[i]);\r\n        }\r\n\r\n    }\r\n\r\n    get size() {return this.childs.length;}\r\n    get length() {return this.childs.length;}\r\n\r\n    get first() {\r\n        if (this.list.length > 0) \r\n            return this.childs[0];\r\n        else\r\n            return null;\r\n        \r\n    }\r\n\r\n    get last() {\r\n          if (this.childs.length > 0) {\r\n            let idx = this.childs.length - 1;\r\n            return this.childs[idx];\r\n          } else\r\n            return null;\r\n    }\r\n\r\n    push(child) {\r\n\r\n        if (this.unique) {\r\n            if (this.indexOf(child) === -1)\r\n                this.childs.push(child);\r\n        } else {\r\n            this.childs.push(child);\r\n        }\r\n\r\n        return child;\r\n    }\r\n\r\n    pushFront(child) {\r\n        if (this.unique) {\r\n            if (this.indexOf(child) === -1)\r\n                this.childs.unshift(child);\r\n        } else {\r\n            this.childs.unshift(child);\r\n        }\r\n        return child;\r\n    }\r\n\r\n    insert(child, index) {\r\n\r\n        if (index === undefined) \r\n            index = 0;\r\n\r\n        if (this.childs.length === 0) \r\n            return this.push(child);\r\n\r\n        if (index >= 0 && index <= this.childs.length) {\r\n        \r\n            if (this.unique) {\r\n                if (this.indexOf(child) === -1) \r\n                    this.childs.splice(index, 0, child);\r\n            } else {\r\n                this.childs.splice(index, 0, child);\r\n            }\r\n            \r\n        }\r\n\r\n        return child;\r\n    \r\n    }\r\n\r\n    indexOf(child) {\r\n        return this.childs.indexOf(child);\r\n    }\r\n\r\n    at(index) {\r\n        return this.childs[index];\r\n    }\r\n\r\n    erase(child) {\r\n\r\n        let idx = this.childs.indexOf(child);\r\n        var childToErase = null;\r\n\r\n        if (idx !== -1)\r\n            childToErase = this.childs.splice(idx, 1);\r\n        \r\n        return childToErase;\r\n    }\r\n\r\n    eraseAt(index) {\r\n        let child = this.childs[index];\r\n\r\n        if (child)\r\n            this.childs.splice(index, 1);\r\n\r\n        return child;\r\n    }\r\n\r\n    eraseList(listToRemove, size){\r\n        \r\n        if (size === undefined) size = listToRemove.size;\r\n\r\n        for (let i = 0; i < size; i++)\r\n        {\r\n            var child = listToRemove.childs[i];\r\n            this.erase(child);\r\n            /*let child = this.listToRemove[i];\r\n            let index = this._instances.indexOf(gameObject);\r\n\r\n            if (index > -1)\r\n               this._instances.splice(index, 1);*/\r\n            \r\n        }\r\n    }\r\n\r\n    pop() {\r\n        /// TODO\r\n    }\r\n\r\n    popFront() {\r\n        /// TODO\r\n    }\r\n\r\n    has(child) {\r\n        return (this.childs.indexOf(child) > -1);\r\n    }\r\n\r\n    hasAt(index) {\r\n        return this.childs[index] !== undefined;\r\n    }\r\n\r\n    empty() {\r\n        return (this.childs.length == 0)\r\n    }\r\n\r\n    clear() {\r\n        let i = this.childs.length;\r\n\r\n        while(i--) {\r\n            this.erase(this.childs[i]);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    splice(start, count) {\r\n        return this.childs.splice(start, count);\r\n    }\r\n\r\n    destroy() {\r\n        this.clear();\r\n        this.childs = [];\r\n        this.parent = null;\r\n    }\r\n\r\n    concat(otherList, clearOther) {\r\n        if (clearOther === undefined) clearOther = false;\r\n\r\n        if (clearOther) {\r\n            this.childs = this.childs.concat(otherList.childs.splice(0));\r\n        } else {\r\n            this.childs = this.childs.concat(otherList.childs);\r\n        }\r\n\r\n        \r\n        return this;\r\n    }\r\n\r\n    each(callback) {\r\n        let params = [];\r\n\r\n        let content = this.childs;\r\n        let r;\r\n\r\n        for (let i = 1; i < arguments.length; i++)\r\n            params.push(arguments[i]);\r\n\r\n        for (let i = 0; i < content.length; i++) {\r\n            r = callback(content[i], i, params);\r\n            if (r !== undefined) {\r\n                return r;\r\n            }\r\n           //break;\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    sort(predicate) {\r\n        if (predicate === undefined) return;\r\n        return MergeSort(this.childs, predicate);\r\n        \r\n        //childs.sort(predicate);\r\n    }\r\n\r\n    find(predicate) {\r\n        if (predicate === undefined) return;\r\n\r\n        let size = this.childs.length;\r\n\r\n        for (let i = 0; i < size; i++) {\r\n            if (predicate(this.childs[i])) {\r\n                return this.childs[i];\r\n            }\r\n        }\r\n    \r\n        return null;\r\n      }\r\n\r\n    swap(childA, childB) {\r\n\r\n        if (childA === childB)\r\n            return;\r\n\r\n        let idx0 = this.indexOf(childA);\r\n        let idx1 = this.indexOf(childB);\r\n\r\n        if (idx0 < 0 || idx1 < 0) {\r\n            throw new Error('DataList.swap: Could not swap childrens. The objects are not in the list.');\r\n        }\r\n\r\n        this.list[idx0] = childA;\r\n        this.list[idx1] = childB;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    swapByIndex(indexA, indexB) {\r\n        if (indexA === indexB)\r\n            return;\r\n\r\n        var cA = this.at(indexA);\r\n        var cB = this.at(indexB);\r\n\r\n        if (cA === undefined || cB === undefined) {\r\n            throw new Error('DataList.swapByIndex: Could not swap childrens by index. The objects are not in the list.');\r\n        }\r\n\r\n        this.list[indexA] = cA;\r\n        this.list[indexB] = cB;\r\n\r\n        return this;\r\n    }\r\n\r\n    reverse() {\r\n        this.childs.reverse();\r\n        return this;\r\n    }\r\n\r\n    content() {\r\n        return this.childs;\r\n    }\r\n\r\n\r\n    \r\n}","\r\n\r\n\r\n// DataMap simple class\r\nexport default class DataMap {\r\n  \r\n  constructor() {\r\n    this._content = {};\r\n    this._size = 0;\r\n  }\r\n\r\n  get size() {return this._size;}\r\n\r\n  /* \r\n  Add or set value to the map\r\n  key = keyName\r\n  value = value\r\n  */\r\n  set(key, value) {\r\n\r\n    if (!this.has(key))\r\n    {\r\n        this._size++;\r\n    }\r\n\r\n    this._content[key] = value;\r\n    \r\n    return this;\r\n\r\n  }\r\n\r\n  get(key) {\r\n      if (this.has(key))\r\n      {\r\n        return this._content[key];\r\n      }\r\n      else\r\n      {\r\n        return null;\r\n      }\r\n  }\r\n\r\n  has(key) {\r\n    return this._content.hasOwnProperty(key);\r\n  }\r\n\r\n  contains(value) {\r\n    for (var key in this._content)\r\n    {\r\n      if (entries[key] === value)\r\n      {\r\n        return true;\r\n      } else\r\n        continue;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  keys() {\r\n    return Object.keys(this._content);\r\n  }\r\n\r\n  values() {\r\n    var values = [];\r\n    var content = this._content;\r\n\r\n    for (var key in content)\r\n      values.push(entries[key]);\r\n        \r\n    return values;\r\n  }\r\n\r\n  remove(key) {\r\n\r\n    if (!this.has(key))\r\n      return null;\r\n\r\n    var prop =  this._content[key];\r\n    delete this._content[key];\r\n    this._size--;\r\n    return prop;\r\n\r\n  }\r\n\r\n  delete(key) {\r\n\r\n    if (!this.has(key))\r\n      return false;\r\n\r\n      delete this._content[key];\r\n      this._size--;\r\n\r\n      return true;\r\n  }\r\n\r\n  deleteAt(key) {\r\n\r\n    //if (!this.hasTagInKey(key))\r\n    //  return false;\r\n      this._size--;\r\n     delete this._content[key];\r\n\r\n  }\r\n\r\n  deleteByIndexedArray(array) {\r\n    for (var i = 0; i < array.length; i++) {\r\n      delete this._content[array[i]];\r\n      this._size--;\r\n    }\r\n\r\n  }\r\n\r\n  clear() {\r\n\r\n    for (var property in this._content) \r\n      delete this._content[property];\r\n    \r\n\r\n    this._size = 0;\r\n\r\n  }\r\n\r\n  slowSize() {\r\n    return Object.keys(_contents).length;\r\n  }\r\n\r\n  each(callback) {\r\n    var content = this._content;\r\n\r\n    for (var property in content) {\r\n\r\n      if (callback(property, content[property]) === false)\r\n          break;\r\n      \r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\n","import MergeSort from \"./useful/MergeSort\";\r\n\r\n\r\nexport default class DataSet {\r\n\r\n    constructor(elements) {\r\n        this._content = [];\r\n        this._size = 0;\r\n\r\n        if (Array.isArray(elements))\r\n        {\r\n            for (let i = 0; i < elements.length; i++)\r\n                this.set(elements[i]);\r\n        }\r\n\r\n    }\r\n\r\n    get size () { return this._content.length; }\r\n    get length () { return this._content.length; }\r\n\r\n    set(value) {\r\n        if (this._content.indexOf(value) === -1)\r\n            this._content.push(value);\r\n\r\n        return this;\r\n    }\r\n\r\n    get(value) {\r\n        let index = this._content.indexOf(value);\r\n        if (index > -1)\r\n        {\r\n            return this._content[index];\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    at(index) {\r\n        return this._content[index];\r\n    }\r\n\r\n    has(value) {\r\n        return (this._content.indexOf(value) > -1);\r\n    }\r\n\r\n    delete(value) {\r\n        var idx = this._content.indexOf(value);\r\n\r\n        if (idx > -1)\r\n            this._content.splice(idx, 1);\r\n\r\n        return this;\r\n    }\r\n\r\n    clear() {\r\n        this._content.length = 0;\r\n        return this;\r\n    }\r\n\r\n    each(callback, scope) {\r\n        var content = this._content.slice();\r\n        var size = content.length;\r\n        var i;\r\n\r\n        if (scope)\r\n        {\r\n            for (i = 0; i < size; i++)\r\n            {\r\n                if (callback.call(scope, content[i], i) === false)\r\n                    break;                \r\n            }\r\n        } else {\r\n            for (i = 0; i < size; i++)\r\n            {\r\n                if (callback(content[i], i) === false)\r\n                    break;                \r\n            }\r\n        }\r\n\r\n      return this;\r\n    }\r\n\r\n    sort(predicate) {\r\n        if (predicate === undefined) return;\r\n        return MergeSort(this._content, predicate);\r\n    }\r\n\r\n   values() {\r\n       return this._content;\r\n   }\r\n\r\n}\r\n","\r\nmodule.exports = {\r\n    Utils : require('./useful'),\r\n    Set : require('./Set'),\r\n    Map : require('./Map'),\r\n    List : require('./List'),\r\n}\r\n    ","\r\n// http://www.stoimen.com/blog/2010/07/02/friday-algorithms-javascript-merge-sort/\r\n// https://codereview.stackexchange.com/questions/87000/fast-merge-sort-in-javascript\r\nexport default function MergeSort(array, predicate)\r\n{\r\n    var size = array.length;\r\n\r\n    if (size < 2)\r\n        return array;\r\n\r\n    if (predicate === undefined)\r\n    {\r\n        predicate = function (a, b) {\r\n            return a < b ? -1 : a === b ? 0 : 1;\r\n        };\r\n    }\r\n\r\n\r\n    /*function merge(left, right)\r\n    {\r\n        var result = [];\r\n \r\n        while (left.length && right.length) {\r\n            if (left[0] <= right[0]) {\r\n                result.push(left.shift());\r\n            } else {\r\n                result.push(right.shift());\r\n            }\r\n        }\r\n     \r\n        while (left.length)\r\n            result.push(left.shift());\r\n     \r\n        while (right.length)\r\n            result.push(right.shift());\r\n     \r\n        return result;\r\n    }*/\r\n\r\n    function merge (begin, begin_right, end) {\r\n        // Create a copy of the left and right halves.\r\n        let left_size = begin_right - begin;\r\n        let right_size = end - begin_right;\r\n        let left = array.slice(begin, begin_right);\r\n        let right = array.slice(begin_right, end);\r\n        // Merge left and right halves back into original array.\r\n        let i = begin, j = 0, k = 0;\r\n        while (j < left_size && k < right_size)\r\n            if (predicate(left[j], right[k]) <= 0)\r\n                array[i++] = left[j++];\r\n            else\r\n                array[i++] = right[k++];\r\n        // At this point, at least one of the two halves is finished.\r\n        // Copy any remaining elements from left array back to original array.\r\n        while (j < left_size) \r\n            array[i++] = left[j++];\r\n        // Copy any remaining elements from right array back to original array.\r\n        while (k < right_size) \r\n            array[i++] = right[k++];\r\n\r\n        return array;\r\n    }\r\n\r\n    function msort(start, end)\r\n    {\r\n        let len = end - start;\r\n\r\n        if (len < 2)\r\n            return;\r\n\r\n        let mid = start + (len >>> 1);\r\n        //let left = list.slice(start, mid);\r\n        //let right = list.slice(mid, end);\r\n        msort(start, mid);\r\n        msort(mid, end);\r\n        return merge(start, mid, end);\r\n        \r\n    }\r\n\r\n    //let mid = 0 + (size >>> 1);\r\n\r\n    return msort(0,size);//mid,size);\r\n\r\n    \r\n}\r\n","\r\nmodule.exports = {\r\n    MergeSort : require('./MergeSort')\r\n}","\r\nexport default function DetectBrowser(userAgent) {\r\n\r\n    let browser = {\r\n        name : undefined,\r\n        version : 0,\r\n        manufacturer : {\r\n            firefox : false,\r\n            opera : false,\r\n            ie : false,\r\n            edge : false,\r\n            chrome : false,\r\n            blink : false,\r\n            safari : false,\r\n            silk : false\r\n        }\r\n    }\r\n\r\n    /// MAYBE IS BETTER TODO WITH REGEX\r\n\r\n    // Opera 8.0+\r\n    browser.manufacturer.opera = (!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;\r\n\r\n    // Firefox 1.0+\r\n    browser.manufacturer.firefox = typeof InstallTrigger !== 'undefined';\r\n\r\n    // Safari 3.0+ \"[object HTMLElementConstructor]\" \r\n    browser.manufacturer.safari = /constructor/i.test(window.HTMLElement) || (function (p) { return p.toString() === \"[object SafariRemoteNotification]\"; })(!window['safari'] || safari.pushNotification);\r\n\r\n    // Internet Explorer 6-11\r\n    browser.manufacturer.ie = /*@cc_on!@*/false || !!document.documentMode;\r\n\r\n    // Edge 20+\r\n    browser.manufacturer.edge = !browser.manufacturer.edge && !!window.StyleMedia;\r\n\r\n    // Chrome 1+\r\n    browser.manufacturer.chrome = !!window.chrome && !!window.chrome.webstore;\r\n\r\n    // Blink engine detection\r\n    browser.manufacturer.blink = (browser.manufacturer.chrome ||  browser.manufacturer.opera) && !!window.CSS;\r\n\r\n    /// GET VERSION\r\n\r\n    let pattern = /(\\w+)(?:\\D+|\\/)?((\\d+)?\\.?(\\d+)?)?;?/;\r\n    let match = pattern.exec(userAgent);\r\n    let version = 0;\r\n\r\n    browser.name = match[0];\r\n\r\n    if (match[1] !== undefined)\r\n        version = parseInt(match[1], 10);\r\n\r\n    browser.version = version;\r\n    \r\n\r\n    return browser;\r\n\r\n} ","\r\nexport default function DetectOS(userAgent) {\r\n\r\n    let silk = (/Silk/).test(userAgent);\r\n\r\n    // name, deviceType\r\n    let info = { \r\n        name: undefined, // pretty name\r\n        mobile: false, // is mobile\r\n        desktop: false, // is desktop\r\n        os : {  // operational system\r\n            windows : false,\r\n            windowsPhone : false,\r\n            macOS : false,\r\n            linux : false,\r\n            android : false,\r\n            iOS : false,\r\n            chromeOS : false,\r\n            kindle : false,\r\n        },\r\n        environment : { // environment\r\n            node : false,\r\n            electron : false,\r\n            cordova : false,\r\n            nodewebkit : false,\r\n            cocoonJS : false,\r\n            cocoonApp : false,\r\n            ejecta : false\r\n        }\r\n    };\r\n\r\n    if (/Windows/.test(userAgent)) {\r\n        info.name = 'Windows';\r\n        info.os.windows = true;\r\n    } else if (/Mac OS/.test(userAgent))  {\r\n        info.name = 'MacOS';\r\n        info.os.macOS = true;\r\n    }  else if (/Linux/.test(userAgent))  {\r\n        info.name = 'Linux';\r\n        info.os.linux = true;\r\n    } else if (/Android/.test(userAgent)) {\r\n        info.name = 'Android';\r\n        info.os.android = true;\r\n    } else if (/iP[ao]d|iPhone/i.test(userAgent)) {\r\n        info.name = 'iOS';\r\n        info.os.iOS = true;\r\n    } else if (/Kindle/.test(userAgent) || (/\\bKF[A-Z][A-Z]+/).test(userAgent) || (/Silk.*Mobile Safari/).test(userAgent)) {\r\n        info.name = \"Kindle\";\r\n        info.os.kindle = true;\r\n      \r\n    } else if (/CrOS/.test(userAgent)) {\r\n        info.name = 'ChromeOS';\r\n        info.os.chromeOS = true;\r\n    }\r\n\r\n    if (/Windows Phone/i.test(userAgent) || (/IEMobile/i).test(userAgent)) {\r\n        info.name = 'Windows Phone';\r\n        info.os.android = false;\r\n        info.os.iOS = false;\r\n        info.os.macOS = false;\r\n        info.os.windows = true;\r\n        info.os.windowsPhone = true;\r\n    }\r\n\r\n    if (info.os.windows || info.os.macOS || (info.os.linux && !silk) || info.os.chromeOS) {\r\n        info.desktop = true;\r\n        info.mobile = false;\r\n    }\r\n\r\n    if (info.os.windowsPhone || ((/Windows NT/i.test(userAgent)) && (/Touch/i.test(userAgent))))  {\r\n        info.os.desktop = false;\r\n        info.mobile = true;\r\n    }\r\n\r\n    if (window.cordova !== undefined) {\r\n        info.environment.cordova = true;\r\n    }\r\n    \r\n    if ((typeof process !== 'undefined') && (typeof process.versions.node !== 'undefined')) {\r\n        info.environment.node = true;\r\n    }\r\n    \r\n    if (info.environment.node && typeof process.versions === 'object') {\r\n        info.environment.nodeWebkit = !!process.versions['node-webkit'];\r\n        info.environment.electron = !!process.versions.electron;\r\n    }\r\n    \r\n    if (navigator.isCocoonJS) {\r\n        info.environment.cocoonJS = true;\r\n\r\n        try {\r\n            info.environment.cocoonApp = (typeof CocoonJS !== 'undefined');\r\n        } catch (error) {\r\n            info.environment.cocoonApp = false;\r\n        }\r\n    }\r\n\r\n    if (window.ejecta !== undefined) {\r\n        info.environment.ejecta = true;\r\n    }\r\n\r\n    return info;\r\n\r\n}","import DetectOS from \"./DetectOS\";\r\nimport DetectBrowser from \"./DetectBrowser\";\r\nimport DeepFreeze from \"../utils/object/DeepFreeze\";\r\n\r\nclass PlatformEnvironment {\r\n\r\n    constructor() {\r\n\r\n        this._userAgent = navigator.userAgent;\r\n        this._osInfo = DetectOS(this._userAgent);\r\n        this._browser = DetectBrowser(this._userAgent);\r\n\r\n    }\r\n\r\n    get info() {\r\n        return this._userAgent;\r\n    }\r\n\r\n    get browser() {\r\n        return this._browser.name;\r\n    }\r\n\r\n    get OS() {\r\n        return this._osInfo.name;\r\n    }\r\n\r\n    supportSVG() {\r\n        return (typeof SVGRect !== undefined && document.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#Image', '1.1')); \r\n    }\r\n\r\n}\r\n\r\nvar Platform = new PlatformEnvironment();\r\n\r\nDeepFreeze(Platform);\r\n\r\nexport default Platform;","\r\n// Wrapper class for game time\r\n\r\nexport default class GameTime {\r\n\r\n    constructor(game) {\r\n        this.game = game;\r\n\r\n    }\r\n\r\n    init(gameLoop) {\r\n        this._updateStep = gameLoop.updateStep;\r\n    }\r\n\r\n    get now() {\r\n        return this._updateStep.time;\r\n    }\r\n\r\n    get fps() {\r\n        return this._updateStep.fps;\r\n    }\r\n\r\n    get desiredFps() {\r\n        return this._updateStep.fpsDesired;\r\n    }\r\n\r\n    get delta() {\r\n        return this._updateStep.deltaTime;\r\n    }\r\n\r\n    get elapsed() {\r\n        return this._updateStep.elapsed;\r\n    }\r\n\r\n    get rawDelta() {\r\n        return this._updateStep.hiDeltaTime;\r\n    }\r\n\r\n}","import RequestAnimationFrame from \"../dom/RequestAnimationFrame\";\r\nimport ObjectGet from \"../utils/object/ObjectGet\";\r\nimport MathUtils from '../math/MathUtils'\r\n\r\nexport default class UpdateStep {\r\n\r\n    constructor(game, config) {\r\n        // CORE\r\n        this.game = game;\r\n        this.requestAnimationFrame = new RequestAnimationFrame(config.time.timeoutMode);\r\n        this.isRunning = false;\r\n        this.loop = null;\r\n        this.render = null;\r\n\r\n        // TIMER\r\n        this.startTime = 0; // start time\r\n        this.time = 0; // current hi-time\r\n        this.previousTime = 0; // last hi-time\r\n        this.elapsed = 0; // elapsed time\r\n        this.hiDeltaTime = 0; // raw delta time\r\n        this.deltaTime = 0; // delta time in miliseconds\r\n        // FPS\r\n        this.requireFpsUpdate = true;\r\n        this.fpsDesired = ObjectGet.value(config, 'fps', 60);\r\n        this.fps = this.fpsDesired;\r\n        this.currentFps = 0;\r\n        this._nextFpsUpdate = 0;\r\n        this._framesThisSecond = 0;\r\n\r\n        // ACCUMALATOR METHOD\r\n        this.interpolation = false;\r\n        this.timeStep = Math.ceil(1000 / this.fpsDesired);\r\n        this.minTimeStep = this.timeStep * 1.25;\r\n        this.accumalator = 0;\r\n        this.accumulatorMax = this.timeStep * 10;\r\n        this.updateLast = 0;\r\n        this.updateAverageDelta = 0;\r\n        this.frameCounter = 0;\r\n    }\r\n\r\n    init(gameLoop) {\r\n        \r\n        if (this.isRunning)\r\n            return;\r\n\r\n        this.reset();\r\n\r\n        this.loop = gameLoop.loop.bind(gameLoop);\r\n        this.render = gameLoop.render.bind(gameLoop);\r\n\r\n        this.startTime = window.performance.now();\r\n\r\n        this.requestAnimationFrame.start(this.update.bind(this));\r\n\r\n        this.isRunning = true;\r\n\r\n    }\r\n\r\n    update(timeStamp) {\r\n\r\n        this.hiDeltaTime = timeStamp - this.previousTime;\r\n\r\n        // current\r\n        this.time = timeStamp;\r\n\r\n        // game elapsed time\r\n        this.elapsed += this.hiDeltaTime;\r\n\r\n        // FPS Update\r\n        if (this.requireFpsUpdate)\r\n            this.fpsUpdate(timeStamp);\r\n\r\n         // set previous time\r\n         this.previousTime = timeStamp;\r\n\r\n         // game loop\r\n        this.accumalatorMethod(this.hiDeltaTime);\r\n\r\n        // game render\r\n        this.render(this.hiDeltaTime);\r\n\r\n    }\r\n\r\n    fpsUpdate(timeStamp) {\r\n\r\n        \r\n\r\n        if (timeStamp > this._nextFpsUpdate) {\r\n            this.currentFps = 0.25 * this._framesThisSecond + 0.75 * this.fps;\r\n            this.fps = MathUtils.clamp(~~this.currentFps, 0, this.fpsDesired);\r\n     \r\n            this._nextFpsUpdate = timeStamp + 1000;\r\n            this._framesThisSecond = 0;\r\n        }\r\n     \r\n        this._framesThisSecond++;\r\n    }\r\n\r\n\r\n\r\n    accumalatorMethod(deltaTime) {\r\n\r\n        if ((++this.frameCounter % this.frameRate) === 0) {\r\n\r\n            this.frameCounter = 0;\r\n\r\n            this.accumalator += deltaTime;//Math.max(Math.min(this.timeStep * 3, this.elapsed),0);\r\n            this.accumulator = Math.min(this.accumalator, this.accumalatorMax); //, this.updateAverage);\r\n\r\n            let deltaUpdate = (this.interpolation) ? deltaTime : this.timeStep;\r\n            let accumulatorUpdateDelta = (this.interpolation) ? deltaUpdate : Math.max(deltaUpdate, this.updateAverageDelta);\r\n            this.deltaTime = deltaUpdate / 1000;\r\n\r\n            while (this.accumalator >= accumulatorUpdateDelta || this.interpolation) {\r\n\r\n                let updateStart = window.performance.now();\r\n\r\n                // UPDATE GAME\r\n                this.loop(deltaUpdate / 1000.0);\r\n\r\n                let updateLast = window.performance.now();\r\n                this.updateAverageDelta = updateLast - updateStart;\r\n\r\n                this.accumalator -= accumulatorUpdateDelta;\r\n                if (this.interpolation) {\r\n                    this.accumalator = 0;\r\n                    break;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    accumalatorReset() {\r\n        this.frameCounter = 0;\r\n        this.frameRate = ~~(0.5 + 60 / this.fpsDesired);\r\n        this.accumalator = 0;\r\n        this.timeStep = 1000 / this.fpsDesired;\r\n        this.accumulatorMax = this.stepSize * 10;\r\n    }\r\n    \r\n    reset() {\r\n        let now = window.performance.now();\r\n\r\n        this.deltaTime = 0;\r\n        this.hiDeltaTime = 0;\r\n        this.time = now;\r\n        this.previousTimeTime = now;\r\n        this._nextFpsUpdate = now + 1000;\r\n        this._framesThisSecond = 0;\r\n\r\n        this.accumalatorReset();\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n/*\r\nif (this.game.systemInited) {\r\n\r\n    this.time.update(time);\r\n\r\n    if (this._spiraling > 1) {\r\n\r\n        this.time.deltaTime = 0;\r\n        this._spiraling = 0;\r\n        this.time.accumalator = 0;\r\n\r\n        this.render(this.time.accumulatorDelta);\r\n\r\n    } else {\r\n\r\n    var countFrames = 0;\r\n\r\n    while (this.time.accumalator >= this.time.accumulatorDelta) {\r\n\r\n      //  this.time.updateStart = window.performance.now();\r\n\r\n        this.time.deltaTime = Math.min(this.time.accumalator,this.time.accumulatorDelta) / 1000;\r\n\r\n        this.logic(this.time.deltaTime);\r\n\r\n        //this.time.updateLast =  window.performance.now();\r\n      //  this.time.updateAverage = this.time.updateLast - this.time.updateStart;\r\n\r\n        this.time.accumalator -= this.time.accumulatorDelta;\r\n\r\n        countFrames++;\r\n\r\n        this.time.refresh();\r\n\r\n        if (countFrames >= 240) { // SPIRAL\r\n            //panic();\r\n            this.time.accumalator = 0;\r\n\r\n            break;\r\n        }\r\n    }\r\n\r\n      if (countFrames > this._lastFrameCount)\r\n         this._spiraling++;\r\n     else if (countFrames < this._lastFrameCount)\r\n        this._spiraling = 0;\r\n\r\n        this._lastFrameCount = countFrames;\r\n\r\n        this.render(this.time.accumalator/this.time.accumulatorDelta);\r\n\r\n    }\r\n\r\n\r\n\r\n}*/","\r\nexport default function ComputeBounds(bounds, transform, width, height, origin) {\r\n    \r\n  if (origin === undefined) origin = {x:0,y:0}\r\n\r\n    let top = transform.matrix.transformPoint(-origin.x, -origin.y);\r\n    let left = transform.matrix.transformPoint(width - origin.x, -origin.y);\r\n    let bottom = transform.matrix.transformPoint(-origin.x, height - origin.y);\r\n    let right = transform.matrix.transformPoint(width - origin.x, height - origin.y);\r\n  \r\n    bounds.min.x = Math.min(top.x,left.x,bottom.x,right.x);\r\n    bounds.min.y = Math.min(top.y,left.y,bottom.y,right.y);\r\n    bounds.max.x = Math.max(top.x,left.x,bottom.x,right.x);\r\n    bounds.max.y = Math.max(top.y,left.y,bottom.y,right.y);\r\n  \r\n  }","\r\n\r\nexport default function ComputeDelimiterPoint(x, y, rotation, anchor) {\r\n\r\n    let coord = {x:0, y:0};\r\n\r\n\r\n    if (anchor === undefined) {\r\n        coord.x = (x * rotation.x) - (y * rotation.y);\r\n        coord.y = (x * rotation.y) - (y * rotation.x);\r\n    } else {\r\n      \r\n        \r\n        let xa = x - anchor.x;\r\n        let ya = y - anchor.y;\r\n    // cx = anchor.x + ((x-anchor.x) * Math.cos(rotation)) - ((y-anchor.y) * Math.sin(rotation));\r\n        coord.x = anchor.x + (xa * rotation.x) - (ya * rotation.y);\r\n    // cy = anchor.y - ((x-anchor.x) * Math.sin(rotation)) - ((y-anchor.y) * Math.cos(rotation));\r\n        coord.y = anchor.y - (xa * rotation.y) - (ya * rotation.x);\r\n    }\r\n\r\n    return coord;\r\n}","\r\nimport Vector from '../math/Vector'\r\nimport Matrix from '../math/Matrix'\r\nimport BoundingBox from '../math/BoundingBox'\r\n\r\nexport default class Transform {\r\n\r\n\r\n  constructor() {\r\n\r\n    this.matrix = new Matrix(1);\r\n    this.position = new Vector(0,0, this);\r\n    this.scale = new Vector(1,1, this);\r\n    this.origin = new Vector(0,0, this);\r\n    this.angle = 0;\r\n    this.rotation = 0;\r\n    this._cosSin = {x:1,y:0};\r\n    this._oldRotation = -1;\r\n    this._isDirty = true;\r\n    //this.worldPosition = new Vector(0,0);\r\n    //this.worldScale =  new Vector(1,1);\r\n    //this.worldRotation = 0;\r\n    //this.bounds = new BoundingBox(0,0,1,1); // the full bounds of the node - defined by render\r\n    //this.globalBounds = new BoundingBox(0,0,1,1); // defined by render\r\n  }\r\n\r\n  markDirty() {\r\n    this._isDirty = true;\r\n  }\r\n\r\n    destroy() {\r\n\r\n      delete this.position;\r\n      delete this.scale;\r\n      delete this.matrix;\r\n      delete this.worldPosition;\r\n      delete this.worldScale;\r\n      delete this.origin;\r\n      delete this.bounds;\r\n      delete this.globalBounds;\r\n      delete this._cosSin;\r\n\r\n    }\r\n\r\n    reset() {\r\n      this.matrix.setIdentity();\r\n      this._isDirty = true;\r\n      this._cosSin.x = 1;\r\n      this._cosSin.y = 0;\r\n      this.position.set(0,0);\r\n      this.angle = 0;\r\n      this.rotation = 0;\r\n      this._oldRotation = 0;\r\n      this.origin.set(0,0);\r\n      this.scale.set(0,0);\r\n\r\n    }\r\n  }\r\n\r\n","import ComputeDelimiterPoint from \"./ComputeDelimiterPoint\";\r\n\r\n\r\nexport default function UpdateBounds(bounds, x, y, width, height, cosSin, origin) {\r\n\r\n    let coords = [];\r\n\r\n    coords[0] = ComputeDelimiterPoint( x, y, cosSin, origin);\r\n    coords[1] = ComputeDelimiterPoint( x + width,  y, cosSin, origin);\r\n    coords[2] = ComputeDelimiterPoint( x, y + height, cosSin, origin);\r\n    coords[3] = ComputeDelimiterPoint( x + width , y + height, cosSin, origin);\r\n  \r\n    bounds.min.x = Math.min(coords[0].x,coords[1].x,coords[2].x,coords[3].x);\r\n    bounds.min.y = Math.min(coords[0].y,coords[1].y,coords[2].y,coords[3].y);\r\n\r\n    bounds.max.x = Math.max(coords[0].x,coords[1].x,coords[2].x,coords[3].x);\r\n    bounds.max.y = Math.max(coords[0].y,coords[1].y,coords[2].y,coords[3].y);\r\n\r\n    \r\n\r\n}","\r\nimport MathUtils from '../math/MathUtils'\r\nimport Matrix from '../math/Matrix'\r\n\r\n/*\r\n\r\n* | a | b | x |\r\n* | c | d | y |\r\n* | 0 | 0 | 1 |\r\n\r\n* | 0 | 3 | 6 | * | a | d | x |\r\n* | 1 | 4 | 7 | * | b | e | y |\r\n* | 2 | 5 | 8 | * | c | f | 1 |\r\n\r\n*/\r\n\r\nexport default function UpdateTransform(transform, parentTransform) {\r\n\r\n    //if (parentMatrix === undefined) parentMatrix = null;\r\n    if (!transform._isDirty && !parentTransform._isDirty)\r\n        return;\r\n\r\n\r\n    transform.rotation = transform.angle * MathUtils.degToRad;\r\n\r\n     // if (transform.rotation % MathUtils.TAU) {\r\n      \r\n\r\n        if (transform.rotation !== transform._oldRotation)\r\n        {\r\n            transform._oldRotation = transform.rotation;\r\n            transform._cosSin.y = Math.sin(transform.rotation);\r\n            transform._cosSin.x = Math.cos(transform.rotation);\r\n        }\r\n\r\n\r\n        transform.matrix.setModelMatrix(\r\n          transform.position, \r\n          transform.scale, \r\n          transform._cosSin, \r\n          transform.origin)\r\n        .concat(parentTransform.matrix);\r\n\r\n\r\n\r\n     // } else {\r\n\r\n        /*a  = transform.scale.x;\r\n        d  = transform.scale.y;\r\n        x =  transform.position.x;\r\n        y =  transform.position.y;\r\n        x -= transform.origin.x * a;\r\n        y -= transform.origin.y * d;\r\n\r\n        wt.a  = a  * pt.a;\r\n        wt.b  = a  * pt.b;\r\n        wt.c  = d  * pt.c;\r\n        wt.d  = d  * pt.d;\r\n        wt.x = x * pt.a + y * pt.c + pt.x;\r\n        wt.y = x * pt.b + y * pt.d + pt.y;*/\r\n\r\n\r\n    //  }\r\n\r\n      //transform.worldPosition.set(wt.x ,wt.y);\r\n      //transform.worldScale.set(Math.sqrt(wt.a * wt.a + wt.b * wt.b), Math.sqrt(wt.c * wt.c + wt.d * wt.d));\r\n      //transform.worldRotation = Math.atan2(-wt.c, wt.d);\r\n    \r\n}\r\n","\r\nimport MathUtils from '../math/MathUtils'\r\nimport Vector from '../math/Vector'\r\nimport ComputeDelimiterPoint from './ComputeDelimiterPoint';\r\n\r\n\r\n\r\nexport default function UpdateTransformBounds(bounds, frame, transform) {\r\n    \r\n  let coords = [];\r\n /* let scale = Vector.abs(transform.scale);\r\n  let pos = transform.position;\r\n  let anchor = transform.origin;\r\n  let size = {\r\n    x : frame.width * scale.x,\r\n    y : frame.height * scale.y\r\n  };\r\n\r\n  anchor.x *= scale.x;\r\n  anchor.y *= scale.y;\r\n  pos.x -= anchor.x;\r\n  pos.y -= anchor.y;\r\n  anchor.x += pos.x;\r\n  anchor.y += pos.y;*/\r\n  \r\n  //coords[0] = ComputeDelimiterPoint( pos.x, pos.y, transform._cosSin, anchor);\r\n  //coords[1] = ComputeDelimiterPoint( pos.x + size.x,  pos.y, transform._cosSin, anchor);\r\n  //coords[2] = ComputeDelimiterPoint( pos.x , pos.y + size.y, transform._cosSin, anchor);\r\n  //coords[3] = ComputeDelimiterPoint( pos.x + size.x , pos.y + size.y, transform._cosSin, anchor);\r\n\r\n  let top = transform.matrix.transformPoint(0, 0);\r\n  let left = transform.matrix.transformPoint(frame.width, 0);\r\n  let bottom = transform.matrix.transformPoint(0, frame.height);\r\n  let right = transform.matrix.transformPoint(frame.width, frame.height);\r\n\r\n  bounds.min.x = Math.min(top.x,left.x,bottom.x,right.x);\r\n  bounds.min.y = Math.min(top.y,left.y,bottom.y,right.y);\r\n  bounds.max.x = Math.max(top.x,left.x,bottom.x,right.x);\r\n  bounds.max.y = Math.max(top.y,left.y,bottom.y,right.y);\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n  // position (vector)\r\n  // scale (vector)\r\n  // rotation (vector x = cos, y = sin)\r\n  /*\r\n  setup(pos, scale, rotation, anchor, width, height) {\r\n\r\n    var coords = [];\r\n    var negx = 1;\r\n    var negy = 1;\r\n\r\n    if (scale.x < 0)\r\n          negx = -1;\r\n    if (scale.y < 0)\r\n          negy = -1;\r\n\r\n\r\n\r\n    this.size.x = width*scale.x*negx;\r\n    this.size.y = height*scale.y*negy;\r\n    anchor.x *= scale.x*negx;\r\n    anchor.y *= scale.y*negy;\r\n    pos.x -= anchor.x;\r\n    pos.y -= anchor.y;\r\n    anchor.x += pos.x;\r\n    anchor.y += pos.y;\r\n\r\n    var callback = null;\r\n\r\n    if (rotation instanceof  scintilla.Vector)\r\n        callback = this['calcCoordsCosSin'];\r\n      else\r\n        callback = this['calcCoords'];\r\n\r\n    coords[0] = callback( pos.x, pos.y, anchor, rotation);\r\n    coords[1] = callback( pos.x + this.size.x,  pos.y, anchor,rotation);\r\n\r\n    coords[2] = callback( pos.x , pos.y + this.size.y, anchor,rotation);\r\n    coords[3] = callback( pos.x + this.size.x , pos.y + this.size.y,anchor, rotation);\r\n\r\n\r\n\r\n    this.min.x = Math.min(coords[0].x,coords[1].x,coords[2].x,coords[3].x);\r\n    this.min.y = Math.min(coords[0].y,coords[1].y,coords[2].y,coords[3].y);\r\n\r\n    this.max.x = Math.max(coords[0].x,coords[1].x,coords[2].x,coords[3].x);\r\n    this.max.y = Math.max(coords[0].y,coords[1].y,coords[2].y,coords[3].y);\r\n    this.center.x = pos.x+(this.max.x-this.min.x)/2;\r\n    this.center.y = pos.y+(this.max.y-this.min.y)/2;\r\n    this.box.set(this.min.x,this.min.y,this.max.x-this.min.x,this.max.y-this.min.y);\r\n\r\n  }\r\n\r\n\r\n  setByGameObject(gameObject, local) {\r\n\r\n    //if (gameObject.render != null) {\r\n\r\n      if (local) {\r\n        this.setup(gameObject.position,\r\n                gameObject.scale,\r\n                gameObject._cosSin,\r\n                gameObject.render.origin,\r\n                gameObject.render.width,\r\n                gameObject.render.height\r\n              );\r\n      } else {\r\n\r\n        var frame = gameObject.component['render'].frame;\r\n\r\n        var pos = {x:gameObject.worldPosition.x, y:gameObject.worldPosition.y};\r\n        var org = {\r\n          x:gameObject.origin.x * frame.width,\r\n          y:gameObject.origin.y * frame.height};\r\n\r\n        pos.x += gameObject.game.camera.view.x;\r\n        pos.y += gameObject.game.camera.view.y;\r\n\r\n        this.setup(pos,\r\n                gameObject.worldScale,\r\n                gameObject.worldRotation,\r\n                org,\r\n                frame.width,\r\n                frame.height\r\n              );\r\n      }\r\n\r\n\r\n    return this;\r\n\r\n\r\n  }\r\n\r\n\r\n  setByShape(shape,position) {\r\n\r\n\r\n    var minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;\r\n    var type = shape.getType();\r\n\r\n    if (type == \"Polygon\") {\r\n\r\n      var points = shape.getPoints();\r\n\r\n      points.forEach(function (point) {\r\n          minX = Math.min(minX, point.x);\r\n          minY = Math.min(minY, point.y);\r\n          maxX = Math.max(maxX, point.x);\r\n          maxY = Math.max(maxY, point.y);\r\n\r\n      });\r\n    }\r\n\r\n    if (position !== undefined) {\r\n      minX += position.x;\r\n      minY += position.y;\r\n      maxX += position.x;\r\n      maxY += position.y;\r\n    }\r\n\r\n\r\n    this.min.set(minX,minY);\r\n    this.max.set(maxX,maxY)\r\n    this.box.set(minX,minY,maxX-minX,maxY-minY);\r\n\r\n  }\r\n\r\n  calcCoordsCosSin(x, y, anchor, cos_and_sin) {\r\n\r\n    var coord = {x:0,y:0};\r\n\r\n    coord.x = anchor.x + ((x-anchor.x) * cos_and_sin.x) - ((y-anchor.y) * cos_and_sin.y);\r\n    coord.y = anchor.y - ((x-anchor.x) * cos_and_sin.y) - ((y-anchor.y) * cos_and_sin.x);\r\n\r\n      return coord;\r\n\r\n  }\r\n\r\n  calcCoords(x,y,anchor,rotation) {\r\n\r\n    var coord = {x:0,y:0};\r\n\r\n    coord.x = anchor.x + ((x-anchor.x) * Math.cos(rotation)) - ((y-anchor.y) * Math.sin(rotation));\r\n    coord.y = anchor.y - ((x-anchor.x) * Math.sin(rotation)) - ((y-anchor.y) * Math.cos(rotation));\r\n\r\n      return coord;\r\n\r\n  }*/","\r\nconst Base64Utils = {\r\n    decode(str) {\r\n        return window.atob(str);\r\n        // Base64.decode(encodedString);\r\n    },\r\n\r\n    decodeToUint32(str) {\r\n        let bin = window.atob(str);\r\n        let len = bin.length;\r\n        let bytes = new Array(len);\r\n\r\n        for (let i = 0; i < len; i += 4) {\r\n            bytes[i / 4] = (\r\n                bin.charCodeAt(i) |\r\n                bin.charCodeAt(i + 1) << 8 |\r\n                bin.charCodeAt(i + 2) << 16 |\r\n                bin.charCodeAt(i + 3) << 24\r\n            ) >>> 0;\r\n        }\r\n\r\n        return bytes;\r\n    },\r\n\r\n    encode(str) {\r\n        return window.btoa(str);\r\n        // Base64.encode(string);\r\n    }\r\n}\r\n\r\n\r\nObject.freeze(Base64Utils);\r\n\r\nmodule.exports = Base64Utils;","\r\nconst Path = {\r\n\r\n  getExtension(filename) {\r\n    return filename.substring(filename.lastIndexOf('.')+1, filename.length) || \"\";\r\n  },\r\n\r\n  getFilename(path) {\r\n    return path.split('\\\\').pop().split('/').pop() || path;\r\n  },\r\n  \r\n  getFilenameWithoutExtension(path) {\r\n    return this.removeExtension(this.getFilename(path));\r\n  },\r\n\r\n  removeExtension(path) {\r\n    return path.substr(0, path.lastIndexOf('.')) || path;\r\n  },\r\n\r\n  getPath(path) {\r\n    return path.substr(0, path.lastIndexOf(\"/\") + 1) || \"\";\r\n  },\r\n\r\n  getRootPath(path) {\r\n    return path.substr(0, path.indexOf(\"/\") + 1) || path;\r\n  },\r\n\r\n  getPathWithoutRoot(path) {\r\n    let s = (path.indexOf(\"/\") + 1) || 0;\r\n    let l = (path.lastIndexOf(\"/\") - s + 1) || path.length;\r\n    return path.substr(s, l) || path;\r\n  },\r\n\r\n  getDirectoryName(path) {\r\n      let dir = path.split('/');\r\n      let len = dir.length;\r\n      if (len <= 1)\r\n        return dir[dir.length - 1];\r\n      else\r\n        return dir[dir.length - 2];\r\n  },\r\n\r\n  getURL(url, baseURL) {\r\n    if (!url)\r\n        return null;\r\n    \r\n        \r\n    if (url.match(/^(?:blob:|data:|http:\\/\\/|https:\\/\\/|\\/\\/)/))\r\n        return url;\r\n    else\r\n        return baseURL + url;\r\n  }\r\n\r\n}\r\n\r\nObject.freeze(Path);\r\n\r\nexport default Path;\r\n\r\nmodule.exports = Path;","\r\nconst Validate = {\r\n    isFunction(value) {\r\n       // return (value instanceof Function);\r\n       return  typeof value === \"function\" && typeof value.nodeType !== \"number\";\r\n    },\r\n\r\n    isClass(value) {\r\n        return !!(value && value.constructor && value.call && value.apply);\r\n    },\r\n\r\n    isArray(value) {\r\n        return Array.isArray(value);\r\n    },\r\n\r\n    isNumber(value) {\r\n        return !isNaN(value);\r\n    },\r\n\r\n    isString(value) {\r\n        return typeof value === 'string' || value instanceof String;\r\n    }\r\n\r\n    \r\n};\r\n\r\nObject.freeze(Validate);\r\n\r\nexport default Validate;\r\n\r\nmodule.exports = Validate;","\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\r\n// To do so, we use this function.\r\nexport default function DeepFreeze(obj) {\r\n\r\n    // Retrieve the property names defined on obj\r\n    var propNames = Object.getOwnPropertyNames(obj);\r\n\r\n    // Freeze properties before freezing self\r\n    propNames.forEach(function(name) {\r\n    var prop = obj[name];\r\n\r\n    // Freeze prop if it is an object\r\n    if (typeof prop == 'object' && prop !== null)\r\n        DeepFreeze(prop);\r\n    });\r\n\r\n    // Freeze self (no-op if already frozen)\r\n    return Object.freeze(obj);\r\n}","import IsPlainObject from \"./IsPlainObject\";\r\nimport Validate from '../Validate';\r\n\r\n// https://api.jquery.com/jQuery.extend/\r\n// Merge the contents of two or more objects together into the first object.\r\nexport default function Extend() {\r\n\r\n    let options, name, src, copy, copyIsArray, clone;\r\n    let target = arguments[0] || {};\r\n    let i = 1;\r\n    let length = arguments.length;\r\n    let deep = false;\r\n\r\n    // Handle a deep copy situation\r\n    if (typeof target === \"boolean\") {\r\n        deep = target;\r\n\r\n        // Skip the boolean and the target\r\n        target = arguments[i] || {};\r\n        i++;\r\n    }\r\n\r\n    // Handle case when target is a string or something (possible in deep copy)\r\n    if (typeof target !== \"object\" && !Validate.isFunction(target)) {\r\n        target = {};\r\n    }\r\n\r\n    // Extend scintilla itself if only one argument is passed\r\n    if (i === length) {\r\n        target = this;\r\n        i--;\r\n    }\r\n\r\n    for (; i < length; i++) {\r\n\r\n        // Only deal with non-null/undefined values\r\n        if ((options = arguments[i]) != null) {\r\n\r\n            for (name in options) {\r\n\r\n                src = target[name];\r\n                copy = options[name];\r\n\r\n                // Prevent never-ending loop\r\n                if (target === copy) {\r\n                    continue;\r\n                }\r\n\r\n                // Recurse if we're merging plain objects or arrays\r\n                if (deep && copy && (IsPlainObject(copy) || (copyIsArray = Array.isArray(copy)))) {\r\n\r\n                    if (copyIsArray) {\r\n                        copyIsArray = false;\r\n                        clone = src && Array.isArray(src) ? src : [];\r\n\r\n                    } else {\r\n                        clone = src && IsPlainObject(src) ? src : {};\r\n                    }\r\n\r\n                    // Never move original objects, clone them\r\n                    target[name] = Extend(deep, clone, copy);\r\n\r\n                    // Don't bring in undefined values\r\n                } else if (copy !== undefined) {\r\n                    target[name] = copy;\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    return target;\r\n\r\n}","\r\n/// From jQuery\r\n\r\nfunction HasOwn(classToType) {\r\n    return classToType.hasOwnProperty;\r\n}\r\n\r\nexport default function IsPlainObject(obj) {\r\n\r\n    // Detect obvious negatives\r\n    if (typeof(obj) !== 'object' || obj.nodeType || obj === obj.window) {\r\n        return false;\r\n    }\r\n\r\n    // Objects with no prototype (e.g., `Object.create( null )`) are plain\r\n    /*let proto = obj.getPrototypeOf;\r\n\r\n    if (!proto)\r\n        return true;*/\r\n\r\n    try\r\n    {\r\n        // Objects with prototype are plain if they were constructed by a global Object function\r\n        //  //!HasOwn.call(proto, 'constructor');\r\n        if ( obj.constructor && !({}).hasOwnProperty.call(obj.constructor.prototype, 'isPrototypeOf')) {\r\n            return false;\r\n        }\r\n    }\r\n    catch (e)\r\n    {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}","import DeepFreeze from \"./DeepFreeze\";\r\n\r\nexport default function MakeImmutable(value, deep) {\r\n\r\n    if (deep === undefined) deep = false;\r\n\r\n    if (Array.isArray(value))\r\n    {\r\n        for (let i = 0; i < value.length; i++)\r\n        {\r\n            if (deep) {\r\n                DeepFreeze(value[i])\r\n            } else {\r\n                Object.freeze(value[i]);\r\n            }\r\n        }\r\n    } else {\r\n\r\n        if (deep) {\r\n            DeepFreeze(value)\r\n        } else {\r\n            Object.freeze(value);\r\n        }\r\n    }\r\n\r\n    return value;\r\n\r\n}","\r\nclass ObjectGettter {\r\n\r\n  value(obj, key, defaultValue)\r\n  {\r\n    var type = typeof(obj);\r\n\r\n    if (!obj || type === 'number' || type === 'string')\r\n        return defaultValue;\r\n    else if (obj.hasOwnProperty(key) && obj[key] !== undefined)\r\n        return obj[key];\r\n    else\r\n        return defaultValue;\r\n\r\n  }\r\n\r\n  // Get value in complex object\r\n  propertyValue(source, key, defaultValue)\r\n    {\r\n        if (!source || typeof source === 'number')\r\n            return defaultValue;\r\n        else if (source.hasOwnProperty(key))\r\n            return source[key];\r\n        else if (key.indexOf('.'))\r\n        {\r\n            var keys = key.split('.');\r\n            var parent = source;\r\n            var value = defaultValue;\r\n\r\n            for (var i = 0; i < keys.length; i++)\r\n            {\r\n                if (parent.hasOwnProperty(keys[i]))\r\n                {\r\n                    value = parent[keys[i]];\r\n                    parent = parent[keys[i]];\r\n                }\r\n                else\r\n                {\r\n                    value = defaultValue;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            return value;\r\n        }\r\n        else\r\n        {\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n  \r\n\r\n};\r\n\r\nvar ObjectGet = new ObjectGettter();\r\n\r\nObject.freeze(ObjectGet);\r\n\r\nexport default ObjectGet;"],"sourceRoot":""}