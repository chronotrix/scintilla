{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///../node_modules/webpack/buildin/global.js","webpack:///./Scintilla.js","webpack:///./cache/CacheManager.js","webpack:///./cache/resources/imageResource.js","webpack:///./cache/resources/resource.js","webpack:///./cache/resources/tilemap/parseLayers.js","webpack:///./cache/resources/tilemap/parseTileset.js","webpack:///./cache/resources/tilemap/tilemapData.js","webpack:///./cache/resources/tilemap/tileset.js","webpack:///./cache/resources/tilemapResource.js","webpack:///./camera/camera.js","webpack:///./camera/updateCamera.js","webpack:///./core/config.js","webpack:///./core/game.js","webpack:///./core/gameLoop.js","webpack:///./core/gameSystemManager.js","webpack:///./core/index.js","webpack:///./core/scenesystem.js","webpack:///./dom/requestAnimationFrame.js","webpack:///./entities/entity.js","webpack:///./entities/entityFactory.js","webpack:///./entities/entityhierarchy.js","webpack:///./entities/entityupdatelist.js","webpack:///./entities/index.js","webpack:///./entities/sceneentity.js","webpack:///./input/index.js","webpack:///./input/input.js","webpack:///./input/key.js","webpack:///./input/keyboard.js","webpack:///./input/keycode.js","webpack:///./input/mouse.js","webpack:///./input/mousebutton.js","webpack:///./loader/URLobject.js","webpack:///./loader/XHR.js","webpack:///./loader/assets/imagefile.js","webpack:///./loader/assets/index.js","webpack:///./loader/assets/jsonfile.js","webpack:///./loader/assets/textfile.js","webpack:///./loader/assets/tilemapJSON.js","webpack:///./loader/assetsType.js","webpack:///./loader/file.js","webpack:///./loader/index.js","webpack:///./loader/listinjector.js","webpack:///./loader/loaderstate.js","webpack:///./loader/loadmanager.js","webpack:///./math/boundingbox.js","webpack:///./math/mathutils.js","webpack:///./math/matrix.js","webpack:///./math/rect.js","webpack:///./math/vector.js","webpack:///./modules/core/computeDelimiterPoint.js","webpack:///./modules/core/transform.js","webpack:///./modules/core/updateBounds.js","webpack:///./modules/core/updateModules.js","webpack:///./modules/core/updateTransform.js","webpack:///./modules/core/updateTransformBounds.js","webpack:///./modules/index.js","webpack:///./modules/module.js","webpack:///./modules/moduleAttacher.js","webpack:///./modules/moduleManager.js","webpack:///./modules/moduleProvider.js","webpack:///./modules/renderables/drawImage.js","webpack:///./modules/renderables/index.js","webpack:///./modules/renderables/renderable.js","webpack:///./modules/renderables/sprite.js","webpack:///./others/debug.js","webpack:///./physics/physics.js","webpack:///./physics/sat.js","webpack:///./physics/satresponse.js","webpack:///./render/canvas/canvas.js","webpack:///./render/canvas/smoothing.js","webpack:///./render/define.js","webpack:///./render/draw.js","webpack:///./render/index.js","webpack:///./render/render.js","webpack:///./render/renderlayer.js","webpack:///./render/renderlayersmanagement.js","webpack:///./scene/scene.js","webpack:///./scene/scenemanager.js","webpack:///./structures/index.js","webpack:///./structures/list.js","webpack:///./structures/map.js","webpack:///./structures/set.js","webpack:///./structures/useful/index.js","webpack:///./structures/useful/mergesort.js","webpack:///./time/gameTime.js","webpack:///./time/updateStep.js","webpack:///./utils/Base64Utils.js","webpack:///./utils/color.js","webpack:///./utils/objectutils.js","webpack:///./utils/pathutils.js"],"names":["scintilla","VERSION","Core","require","Struct","Render","KeyCode","MouseButton","Input","MathUtils","Matrix","Camera","Module","Entity","Cache","Loader","Game","Color","ShapeType","Rect","Circle","Polygon","module","exports","global","CacheManager","game","_cache","images","sounds","json","tilemap","tag","dataFormat","url","data","tagExists","removeTagAt","img","webAudio","decoded","audio","usingWebAudio","isDecoding","sound","getAssetInfo","cacheType","undefined","asset","property","register","ImageResource","source","name","width","height","imageUrl","type","Image","complete","getContext","naturalWidth","naturalHeight","ResourceType","None","Tilemap","Resource","ParseLayers","mapdata","size","layers","lenght","i","layer","enconding","decodeToUint32","newLayer","LayerData","x","getValue","y","tileWidth","tilewidth","tileHeight","tileheight","alpha","opacity","visible","ParseTilesets","cache","tilesets","length","tileset","image","newTileSet","firstgid","margin","spacing","getAsset","updateData","imagewidth","imageheight","push","TilemapData","config","widthPixels","heightPixels","orientation","TileGID","gid","xmax","ymax","isAnimated","Tileset","tilesGID","rows","collumns","count","tileIndex","at","imageWidth","imageHeight","rowCount","colCount","Math","floor","u","v","clear","columns","tileMargin","TilemapResource","orietation","_bounds","transform","camera","_onResize","_resolution","aspectRatio","_backgroundColor","rgbToHex","_roundPixels","_isDirty","entity","position","r","g","b","a","rgba","reset","value","scale","angle","rotation","degToRad","origin","color","flag","_view","UpdateCamera","canvas","t","pixelUnit","roundPixels","round","_oldRotation","_cosSin","sin","cos","matrix","setIdentity","translate","radianRotate","Config","callback","callback_2","getPropertyValue","parent","debug","loader","baseURL","path","responseType","async","fps","time","timeoutMode","pixelated","systemInited","isRunning","debugMode","timeMode","scene","input","pool","systems","context","parseConfiguration","init","physics","system","loop","console","log","destroy","load","draw","universe","world","render","component","instance","animationCache","updateGameMethod","GameLoop","updateStep","entityUpdateList","currentScene","entityList","deltaTime","update","shouldUpdate","preUpdate","_setup","loading","lateUpdate","renderBegin","renderEnd","gameSystems","GameSystemManager","sys","_game","keyboard","mouse","key","systemName","SceneSystem","RequestAnimationFrame","_isTimeOutMode","thick","lastTime","loopCallback","timeOutIdentifier","self","updateRequestAnimationFrame","timeStamp","window","requestAnimationFrame","updateTimeout","dateTime","Date","now","delay","max","setTimeout","clearTimeout","cancelAnimationFrame","stop","loopingCallback","_name","_active","EntityFactory","entityName","modules","attach","sprite","current_scene","add","EntityHierarchy","children","child","addChildAt","index","removeChild","splice","_changeDepth","Error","indexOf","removeChildAt","getChildAt","EntityUpdateList","_instances","_destroyInstances","_pendingInstances","_camera","dt","each","element","active","removeSize","insertSize","eraseList","concat","childs","SceneEntity","Key","Keyboard","Mouse","KeyEvent","NONE","IDLE","PRESSED","RELEASED","keycode","keyCode","_enabled","status","press","release","_event","pressTime","pressDuration","releaseTime","releaseDuration","_keyMapping","_keyWatch","_keyGarbage","lastKey","_onKeyDown","_onKeyUp","_onKeyPress","prop","hasOwnProperty","set","event","processKeyDown","processKeyUp","addEventListener","removeEventListener","preventDefault","keyObj","get","onKeyUp","onKeyDown","has","deleteByIndexedArray","isPressed","isReleased","Backspace","Tab","Enter","Shift","Ctrl","Alt","Pause","CapsLock","Escape","Space","PageUp","PageDown","End","Home","Left","Up","Right","Down","Insert","Delete","Num0","Num1","Num2","Num3","Num4","Num5","Num6","Num7","Num8","Num9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","LSystem","RSystem","SelectK","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","Multiply","Add","Subtract","DecimalPoint","Divide","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","NumLock","ScrollLock","SemiColon","Equal","Comma","Dash","Period","Slash","LBraket","BackSlash","RBracket","Quote","MouseEvent","PRESS","RELEASE","button","wheelDelta","_mouseButtons","_mouseButtonsLocks","_mouseButtonsLocksPressed","_mouseDownDuration","_onMouseDown","_onMouseMove","onMouseDown","_onMouseUp","onMouseUp","onMouseMove","_onMouseOver","_onMouseOut","rect","getBoundingClientRect","clientX","left","right","clientY","top","bottom","buttonLock","hit","object","vec2","Middle","WheelUp","WheelDown","URLObject","create","response","URL","src","createObjectURL","reader","FileReader","onload","removeAttribute","result","split","onerror","readAsDataURL","revoke","revokeObjectURL","file","settings","xhrSettings","XHR","merge","xmlHttpRequest","XMLHttpRequest","open","timeout","onLoad","bind","onError","onprogress","onProgress","onReadyStateChange","onreadystatechange","send","doAsync","out","createSettings","setting","ImageFile","assetTag","fileConfig","ext","getExtension","processingCallback","state","PROCESSING","crossOrigin","onDone","warn","ERROR","xhrRequest","force","addAsset","TextFile","JSONFile","TilemapJSON","DONE","JSON","parse","xhrLoader","responseText","useExternal","text","endPointPath","CheckImagesSources","fullPath","getFilenameWithoutExtension","getPathWithoutRoot","getFilename","TilemapFileJSON","tilemapJSON","AssetsType","File","PENDING","totalBytes","loadedBytes","progress","gameLoader","FINISHED","nextFile","getURL","createFileRequest","xhr","XHRreset","target","next","onPostLoad","error","lengthComputable","loaded","total","min","Assets","LoaderState","LoaderManager","ListInjector","list","toObj","func","AssetTypeHandler","LOADER_STATE","LOADING","LoadManager","_filesQueue","_filesLoading","_successFiles","_failedFiles","_processedFiles","_filesQueueCount","_loadedFilesCount","isDownloading","_totalFiles","gameConfig","inject","substr","baseUrl","check","isOK","loadFinished","processFileQueue","delete","loadAsset","concludedFile","hasError","updateProgress","processingDone","sort","onProcessing","processingUpdate","deleteFromSuccessQueue","addImage","requestXHR","addSound","autoDecode","decode","addJSON","addTilemap","preloadComplete","_successCount","_fileErrorCount","BoundingBox","Infinity","minX","minY","maxX","maxY","box","bounds","xRadius","yRadius","mergeWithPoint","xmin","ymin","o","clamp","randomRange","random","irandomRange","lerp","fromValue","toValue","lerpAngle","end","start","difference","abs","rangeZero","distance","x0","y0","x1","y1","sqrt","angleBetween","toDegree","atan2","PI","radToDeg","TAU","radians","tobiJS","toRadian","degrees","j","setTransform","c","d","e","f","h","radianAngle","a00","a01","a10","a11","a20","a21","other","setAll","mat","str","val","copy","zero","k","intersects","contains","vec","rect1","rect2","Vector","dx","dy","s","otherVector","mag","dot","project","squaredLenght","magnitude","vector","dp","proj","axis","sub","projectNormal","ComputeDelimiterPoint","anchor","coord","Transform","worldPosition","worldScale","globalBounds","UpdateBounds","cosSin","coords","UpdateModules","modulesManager","_pendingModules","mod","attached","renderLayers","moduleUpdate","UpdateTransform","parentTransform","wt","setModelMatrix","UpdateTransformBounds","frame","pos","ModuleProvider","ModuleAttacher","Renderables","moduleManager","_type","instace","ModuleManager","moduleName","ModuleProviderManager","proxyModules","manager","args","DrawImage","resolution","drawImage","Renderable","Sprite","_layerID","_depth","_visible","_alpha","_depthDirty","_depthSorting","setSource","changeFrame","setFrame","spr","setSprite","Debug","lineHeight","column","font","textColor","bgcolor","textShadow","strokeStyle","rectangle","drawLine","desiredFps","drawCalls","textLine","xx","fillStyle","fillText","Physics","sat","colliadables","obj","objA","shapeA","shape","_gameObject","_selfDestroy","jit","objB","shapeB","getType","call","onCollision","SAT","VECTORS","ARRAYS","points","normal","Number","MAX_VALUE","len","posA","posB","pointsA","pointsB","rangeA","pop","rangeB","offsetV","projectedOffset","flattenPointsOn","overlap","aInB","bInA","option1","option2","absOverlap","overlapN","reverse","getPoints","normalsA","getNormals","normalsALen","normalsB","normalsBLen","isSeparatingAxis","overlapV","SATResponse","indexShapeA","indexShapeB","defaultDef","id","toString","class","container","style","CO","document","createElement","setAttribute","Canvas","appendDOM","appendTo","overflowHidden","getElementById","nodeType","body","appendChild","CanvasSmoothing","prefix","getPrefix","vendors","renderType","NEAREST","setEnable","RENDERING_TYPE","LINEAR","Draw","fontname","ctx","save","restore","xscale","yscale","fillRect","outlineWidth","beginPath","lineWidth","setLineDash","stroke","globalAlpha","bb","outlineRectangle","RenderLayer","RenderLayerManagement","imageRendering","smooth","_enable","clearRect","globalCompositeOperation","delta","clip","enable","test","currentContext","layerName","renderList","__drawCalls","__enable","__isDirty","renderer","remove","__renderers","sortDepth","RenderLayersManagement","__renderLayersMap","erase","Scene","gameObject","instances","clone","cl","arguments","GameObject","_id","SceneManager","_scenes","_currentSceneName","_changeScene","_clearCache","onStartCallback","onLoadingCallback","onLoadingRenderCallback","onPreloadCallback","onRenderCallback","onDestroyCallback","sceneName","newScene","prototype","isPrototypeOf","clearCache","onUpdateCallback","scenes","unject","clearCurrentScene","setupScene","totalQueuedFiles","Utils","Set","Map","List","DataList","elements","unique","Array","isArray","unshift","idx","childToErase","listToRemove","otherList","clearOther","params","content","predicate","childA","childB","idx0","idx1","indexA","indexB","cA","cB","DataMap","_content","_size","entries","Object","keys","values","array","_contents","DataSet","scope","slice","MergeSort","begin","begin_right","left_size","right_size","msort","mid","GameTime","gameLoop","_updateStep","fpsDesired","elapsed","hiDeltaTime","UpdateStep","startTime","previousTime","requireFpsUpdate","currentFps","_nextFpsUpdate","_framesThisSecond","interpolation","timeStep","ceil","minTimeStep","accumalator","accumulatorMax","updateLast","updateAverageDelta","frameCounter","performance","fpsUpdate","accumalatorMethod","frameRate","accumulator","accumalatorMax","deltaUpdate","accumulatorUpdateDelta","updateStart","stepSize","previousTimeTime","accumalatorReset","Base64Utils","atob","bin","bytes","charCodeAt","encode","btoa","HSLtoRGB","l","alp","q","p","hueToColor","componentToHex","hex","ObjectUtils","constructor","apply","defaultValue","match","PathUtils","filename","substring","lastIndexOf","removeExtension","getPath","getRootPath","getDirectoryName","dir"],"mappings":"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","file":"scintilla.dev.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Scintilla\"] = factory();\n\telse\n\t\troot[\"Scintilla\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./Scintilla.js\");\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","/**\r\n* @author       Tobias Beise Ulrich\r\n* @license      MIT\r\n*\r\n* @overview\r\n*\r\n* --- Scintilla ---\r\n*\r\n* v0.0.1\r\n*\r\n* tobiasbu.github.io\r\n*\r\n* Scintilla is simple 2D game engine for HTML5 games.\r\n* The first version is only for browsers based in canvas.\r\n*\r\n*/\r\n\r\n/**\r\n* @namespace scintilla\r\n*/\r\nvar scintilla = scintilla || {\r\n  VERSION: '0.0.1',\r\n\r\n  Core : require('./core'),\r\n\r\n  // DATA STRUCTURES\r\n  Struct : require('./structures'),\r\n  // RENDER\r\n  Render : require('./render'),\r\n  // INPUT\r\n  KeyCode : require('./input/keycode'),\r\n  MouseButton : require('./input/mousebutton'),\r\n  Input : require('./input'),\r\n  // MATH\r\n  MathUtils : require('./math/mathutils'),\r\n  Matrix : require('./math/matrix'),\r\n  // ENTITIES\r\n  Camera : require('./camera/camera'),\r\n  Module : require('./modules'),\r\n  Entity : require('./entities'),\r\n  // CORE\r\n  Cache : require('./cache/CacheManager'),\r\n  Loader : require('./loader'),\r\n  Game : require('./core/game'),\r\n  // UTILITIES\r\n  Color : require('./utils/color')\r\n};\r\n\r\nscintilla.ShapeType = {\r\nRect : 1,\r\nCircle : 2,\r\nPolygon : 3\r\n}\r\n\r\n\r\nmodule.exports = scintilla;\r\n\r\nglobal.scintilla = scintilla;","import ImageResource from \"./resources/imageResource\";\r\nimport GameSystemManager from \"../core/gameSystemManager\";\r\nimport TilemapResource from \"./resources/tilemapResource\";\r\n\r\n/**\r\n* Cache manager - holds file data\r\n* @class Cache\r\n* @constructor\r\n*/\r\nexport default class CacheManager {\r\n\r\nconstructor(game) {\r\n  this.game = game;\r\n  this._cache = {\r\n      images : {},\r\n      sounds : {},\r\n      json : {},\r\n      tilemap : {}\r\n  }\r\n}\r\n\r\n  addTilemap(tag, dataFormat) {\r\n    this._cache.tilemap[tag] = new TilemapResource(dataFormat, tag, this);\r\n  }\r\n\r\n  addJSON(tag, dataFormat) {\r\n    this._cache.json[tag] = dataFormat;\r\n  }\r\n\r\n  addImage(tag, url, data) {\r\n\r\n    if (this.tagExists('images',tag))\r\n      this.removeTagAt('images',tag);\r\n\r\n    \r\n    var img = new ImageResource(data,tag)\r\n\r\n    this._cache.images[tag] = img;\r\n\r\n  }\r\n\r\n  addSound(tag, url,data,webAudio) {\r\n\r\n    var decoded = false;\r\n\r\n    if (!webAudio)\r\n    {\r\n        decoded = true;\r\n    }\r\n\r\n    var audio = {\r\n            tag: tag,\r\n            url: url,\r\n            data: data,\r\n            usingWebAudio: webAudio,\r\n            decoded: decoded,\r\n            isDecoding: false\r\n    };\r\n\r\n    this._cache.sounds[tag] = audio;\r\n\r\n  }\r\n\r\n  soundDecoded(tag, data) {\r\n\r\n    var sound = this.getAssetInfo(\"sounds\",tag);\r\n\r\n    sound.data = data;\r\n    sound.decoded = true;\r\n    sound.isDecoding = false;\r\n\r\n  }\r\n\r\n  tagExists(cacheType, tag) {\r\n\r\n    if (this._cache[cacheType] === undefined)\r\n      return false;\r\n\r\n    if (this._cache[cacheType][tag])\r\n      return true;\r\n\r\n    return false;\r\n\r\n  }\r\n\r\n  removeTagAt(cacheType, tag) {\r\n\r\n    delete this._cache[cacheType][tag];\r\n\r\n  }\r\n\r\n  getAsset(cacheType, tag) { // return the cache container\r\n\r\n    if (this.tagExists(cacheType,tag)) {\r\n\r\n      var asset = this._cache[cacheType][tag];\r\n\r\n        return asset;\r\n\r\n\r\n    } else {\r\n      return null;\r\n    }\r\n\r\n  }\r\n\r\n  getAssetInfo(cacheType, tag) { // return the raw data\r\n\r\n    if (this.tagExists(cacheType,tag)) {\r\n\r\n      var asset = this._cache[cacheType][tag];\r\n\r\n      //if (cacheType == 'images')\r\n        return asset;\r\n\r\n\r\n    } else {\r\n      return null;\r\n    }\r\n\r\n  }\r\n\r\n  clear() {\r\n\r\n    //console.log(this._cache[property][tag]);\r\n\r\n    for (var property in this._cache) {\r\n\r\n         for (var tag in this._cache[property]) {\r\n\r\n            delete this._cache[property][tag];\r\n\r\n         }\r\n    }\r\n\r\n  }\r\n\r\n  // SOUND STUFF\r\n\r\n}\r\n\r\nGameSystemManager.register('Cache', CacheManager, 'cache');","import Resource, { ResourceType } from \"./resource\";\r\n\r\n/**\r\n* Image that holds image data.\r\n* @class Image\r\n* @constructor\r\n*/\r\nexport default class ImageResource extends Resource {\r\n\r\n    constructor(source, name) {\r\n\r\n      super(source, name);\r\n      \r\n      this.width = 0;\r\n      this.height = 0;\r\n      this.source = source;\r\n      this.imageUrl = null;\r\n      this.type = ResourceType.Image;\r\n\r\n      if (!source)\r\n        return this;\r\n      \r\n\r\n      if ((this.source.complete || this.source.getContext) && this.source.width && this.source.height) {\r\n\r\n          this.width = this.source.naturalWidth || this.source.width;\r\n          this.height = this.source.naturalHeight || this.source.height;\r\n\r\n      }\r\n  }\r\n\r\n}","\r\n\r\nexport const ResourceType = {\r\n    None : -1,\r\n    Image : 0,\r\n    Tilemap : 1,\r\n}\r\n\r\nexport default class Resource {\r\n\r\n    constructor(data, name)\r\n    {\r\n        this.data = data || null;\r\n        this.name = name;\r\n        this.type = ResourceType.None;\r\n    }\r\n\r\n}","\r\nimport ObjectUtils from '../../../utils/objectutils'\r\nimport Base64Utils from '../../../utils/Base64Utils';\r\n\r\nexport default function ParseLayers(json, mapdata) {\r\n\r\n    let size = json.layers.lenght;\r\n\r\n    if (size <= 0)\r\n        return;\r\n\r\n    for (let i = 0; i < size; i++) {\r\n\r\n        let layer = json.layers[i];\r\n\r\n        if (layer.enconding) {\r\n            if (layer.enconding === 'base64') {\r\n                layer.data = Base64Utils.decodeToUint32(layer.data);\r\n            }\r\n        }\r\n\r\n        let newLayer = new LayerData({\r\n            name: layer.name,\r\n            x: ObjectUtils.getValue(layer, 'offsetx', 0) + layer.x,\r\n            y: ObjectUtils.getValue(layer, 'offsety', 0) + layer.y,\r\n            width: layer.width,\r\n            height: layer.height,\r\n            tileWidth: layer.tilewidth,\r\n            tileHeight: layer.tileheight,\r\n            alpha: layer.opacity,\r\n            visible: layer.visible,\r\n            //properties: GetFastValue(layer, 'properties', {})\r\n        });\r\n\r\n    }\r\n\r\n}","import Tileset from \"./tileset\";\r\nimport DataList from \"../../../structures/list\";\r\n\r\nexport default function ParseTilesets(json, cache) {\r\n\r\n    let size = json.tilesets.length || -1;\r\n\r\n    if (size <= 0)\r\n        return null;\r\n\r\n    let tilesets = new DataList();\r\n\r\n    for (let i = 0; i < size; i++) {\r\n\r\n        let tileset = json.tilesets[i];\r\n\r\n        if (tileset.image) {\r\n\r\n            var newTileSet = new Tileset(\r\n                tileset.name, \r\n                tileset.firstgid, \r\n                tileset.tilewidth, \r\n                tileset.tileheight, \r\n                tileset.margin, \r\n                tileset.spacing);\r\n\r\n            newTileSet.image = cache.getAsset('image', tileset.name);\r\n\r\n            newTileSet.updateData(tileset.imagewidth, tileset.imageheight);\r\n\r\n            tilesets.push(newTileSet);\r\n        }\r\n    }\r\n\r\n    return tilesets;\r\n\r\n}","import ObjectUtils from \"../../../utils/objectutils\";\r\nimport DataList from \"../../../structures/list\";\r\n\r\nexport default class TilemapData {\r\n\r\n    constructor(config) {\r\n\r\n       // this.name = ObjectUtils.getValue(config,'name','tilemap');\r\n        this.width =  ObjectUtils.getValue(config,'width',0);\r\n        this.height =  ObjectUtils.getValue(config,'height',0);\r\n        this.tileWidth =  ObjectUtils.getValue(config,'tileWidth',0);\r\n        this.tileHeight =  ObjectUtils.getValue(config,'tileHeight',0);\r\n        this.widthPixels = ObjectUtils.getValue(config,'pixelsWidth',this.width * this.tileWidth);\r\n        this.heightPixels = ObjectUtils.getValue(config,'heightPixels',this.height * this.tileHeight);\r\n        this.orientation = ObjectUtils.getValue(config, 'orientation', 'orthogonal');\r\n        this.layers = null; //ObjectUtils.getValue(config, 'layers', new DataList());\r\n        this.tilesets = null; //GetFastValue(config, 'tilesets', []);\r\n    }\r\n\r\n}","import DataList from \"../../../structures/list\";\r\n\r\n\r\nclass TileGID {\r\n    constructor(gid, x, y, xmax, ymax) {\r\n        this.gid = gid;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.xmax = xmax;\r\n        this.ymax = ymax;\r\n        this.isAnimated = false;\r\n    }\r\n}\r\n\r\nexport default class Tileset {\r\n\r\n    constructor(name, firstgid, tileWidth, tileHeight, margin, spacing) {\r\n\r\n        this.name = name;\r\n        this.firstgid = firstgid;\r\n        this.tileWidth = tileWidth;\r\n        this.tileHeight = tileHeight;\r\n        this.margin = margin;\r\n        this.spacing = spacing;\r\n        this.image = null;\r\n        this.tilesGID = new DataList();\r\n        this.rows = 0;\r\n        this.collumns = 0;\r\n        this.count = 0;\r\n    }\r\n\r\n    getTile(gid) {\r\n\r\n        if (gid < this.firstgid && tileIndex >= this.firstgid + this.count)\r\n            return null;\r\n\r\n        return this.tilesGID.at(gid);\r\n    } \r\n\r\n    hasGID(gid) {\r\n        return (\r\n            gid >= this.firstgid &&\r\n            gid < this.firstgid + this.count\r\n        );\r\n    }\r\n\r\n    updateData(imageWidth, imageHeight) {\r\n\r\n        if (this.image != null)\r\n        {\r\n            imageWidth = this.image.width;\r\n            imageHeight = this.image.height;\r\n        }\r\n\r\n        let rowCount = (imageHeight - this.margin * 2 + this.spacing) / (this.tileHeight + this.spacing);\r\n        let colCount = (imageWidth - this.margin * 2 + this.spacing) / (this.tileWidth + this.spacing);\r\n\r\n        rowCount = Math.floor(rowCount);\r\n        colCount = Math.floor(colCount);\r\n\r\n        this.count = rowCount * colCount;\r\n\r\n        let u = this.margin;\r\n        let v = this.margin;\r\n\r\n        this.tilesGID.clear();\r\n        let gid = 0;\r\n\r\n        for (let y = 0; y < this.rows; y++) {\r\n\r\n            for (let x = 0; x < this.columns; x++) {\r\n                this.tilesGID.push(new TileGID(this.firstgid + gid, u, v, u + this.tileWidth, v + this.tileHeight));\r\n                u += this.tileWidth + this.spacing;\r\n                gid++;\r\n            }\r\n\r\n            u = this.tileMargin;\r\n            v += this.tileHeight + this.spacing;\r\n        }\r\n    }\r\n\r\n}","import Resource from \"./resource\";\r\nimport TilemapData from \"./tilemap/tilemapData\";\r\nimport { ResourceType } from \"./resource\";\r\nimport ParseTilesets from \"./tilemap/parseTileset\";\r\nimport ParseLayers from \"./tilemap/parseLayers\";\r\n\r\nexport default class TilemapResource extends Resource {\r\n\r\n    constructor(source, name, cache) {\r\n\r\n        super(null, name);\r\n\r\n        this.data = new TilemapData({\r\n            width: source.width,\r\n            height: source.height,\r\n            tileWidth: source.tileWidth,\r\n            tileHeight: source.tileHeight,\r\n            orietation: source.orietation\r\n        });\r\n\r\n        this.name = name;\r\n        this.data.tilesets = ParseTilesets(source, cache);\r\n        this.data.layers = ParseLayers(source);\r\n        this.type = ResourceType.Tilemap;\r\n        \r\n\r\n    }\r\n\r\n}\r\n","\r\nimport BoundingBox from '../math/boundingbox';\r\nimport Transform  from '../modules/core/transform';\r\nimport Color from '../utils/color'\r\nimport GameSystemManager from '../core/gameSystemManager';\r\nimport MathUtils from '../math/mathutils'\r\n\r\nexport default class Camera {\r\n  \r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    //this._view = new Rect(0, 0, game.config.width, game.config.height);\r\n    this._bounds = new BoundingBox();\r\n    this.transform = new Transform();\r\n    this.width = game.config.camera.width;\r\n    this.height = game.config.camera.height;\r\n    this._onResize(this.width, this.height);\r\n    //this.transform.origin.set(0.5,0.5)\r\n    //this.centerView();\r\n    this._resolution = 1;\r\n    this.aspectRatio = 1;\r\n\r\n    this._backgroundColor = Color.rgbToHex(0,0,0);\r\n    this._roundPixels = false;\r\n\r\n  }\r\n\r\n  get position() { \r\n    return { \r\n      x : this.transform.position.x, \r\n      y : this.transform.position.y\r\n    }; \r\n  }\r\n  set position(value) { \r\n    this.transform.position.x = value.x;\r\n    this.transform.position.y = value.y; \r\n    this._isDirty = true;\r\n    return this;\r\n  }\r\n  get x() {return this.transform.position.x;}\r\n  set x(value) { \r\n    this.transform.position.x = value; \r\n    this._isDirty = true;\r\n    return this;\r\n  }\r\n  \r\n  get y() {return this.transform.position.y;}\r\n  set y(value) { \r\n    this.transform.position.y = value; \r\n    this._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  get scale() { return this.transform.scale.x; }\r\n  set scale(value) { \r\n    this.transform.scale.x = value; \r\n    this._isDirty = true; \r\n    return this;\r\n  }\r\n\r\n  get angle() { return this.transform.angle; }\r\n  set angle(value) { \r\n    this.transform.angle = value; \r\n    this.transform.rotation = value * MathUtils.degToRad;\r\n    this._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  get origin() { return this.transform.origin; }\r\n  set origin(value) {\r\n    this.transform.origin.x = value.x;\r\n    this.transform.origin.y = value.y;\r\n    this._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  get rotation() { return this.transform.rotation; }\r\n\r\n  set backgroundColor(color) {\r\n    if (color === undefined) { color = 'rgba(0,0,0,0)'; }\r\n    this._backgroundColor = color;\r\n    return this;\r\n  }\r\n  get backgroundColor() {\r\n    return this._backgroundColor = color;\r\n  }\r\n\r\n  set roundPixels(flag) {\r\n    this._roundPixels = flag;\r\n    this._isDirty = true;\r\n    return this;\r\n  }\r\n  get size() {\r\n    return {x:this._view.width, y:this._view.height};\r\n  }\r\n\r\n  centerView() {\r\n    this.x = this.width * 0.5;\r\n    this.y = this.height * 0.5;\r\n    this._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  centerToEntity(entity) {\r\n    this.x = entity.position.x;\r\n    this.y = entity.position.y;\r\n    this._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  setBackgroundColor(r, g, b, a) {\r\n    if (r === undefined) { g = 0; }\r\n    if (g === undefined) { g = 0; }\r\n    if (b === undefined) { b = 0; }\r\n    if (a === undefined) { a = 1; }\r\n    this._backgroundColor = Color.rgba(r,g,b,a);\r\n    return this;\r\n  }\r\n\r\n  setSize(width, height) {\r\n    this._onResize(width, height);\r\n    this._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  setView(x, y, width, height) {\r\n    this.transform.position.x = x;\r\n    this.transform.position.y = y;\r\n    this._onResize(width, height);\r\n    this._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  reset() {\r\n    this.transform.reset();\r\n  }\r\n\r\n  _onResize(width, height) {\r\n\r\n    this.width = width;\r\n    this.height = height;\r\n    this.aspectRatio = this.width / this.height;\r\n    //this._areaRatio = (this.width - (_aspectPreviewRatioBox.x * 2)) / height;\r\n    //this._pixelUnit =  (height / (settings.OrthographicSize * 2)) * _areaRatio;\r\n  }\r\n\r\n}\r\n\r\nGameSystemManager.register('Camera', Camera, 'camera');","import UpdateBounds from \"../modules/core/updateBounds\";\r\n\r\n\r\nexport default function UpdateCamera(camera, canvas) {\r\n    \r\n    if (!camera.transform._isDirty)\r\n        return;\r\n\r\n    let t = camera.transform;\r\n\r\n\r\n  let pixelUnit = {x:0,y:0};\r\n\r\n    pixelUnit.x = canvas.width / camera.width;\r\n    pixelUnit.y = canvas.height / camera.height;\r\n\r\n  if (camera.roundPixels) {\r\n    t.position.x = Math.round(t.position.x);\r\n    t.position.y = Math.round(t.position.y);\r\n  }\r\n\r\n  //camera._rotation = camera._angle * MathUtils.degToRad;\r\n\r\n  if (t.rotation != t._oldRotation) {\r\n    t._oldRotation = t.rotation;\r\n    t._cosSin.y = Math.sin(t.rotation);\r\n    t._cosSin.x = Math.cos(t.rotation);\r\n  }\r\n\r\n  let origin = {\r\n    x:camera.width * t.origin.x,\r\n    y:camera.height * t.origin.y\r\n  };\r\n\r\n  UpdateBounds(\r\n      camera._bounds, \r\n      t.position.x, t.position.y,\r\n      camera.width, camera.height,\r\n      t._cosSin);\r\n\r\n  // todo resolution\r\n  t.matrix.setIdentity()\r\n  .scale(pixelUnit.x, pixelUnit.y)\r\n  .translate(t.position.x + origin.x , t.position.y + origin.y)\r\n  .radianRotate(t._cosSin.x, t._cosSin.y)\r\n  .scale(t.scale.x, t.scale.x)\r\n  .translate(-origin.x, -origin.y)\r\n\r\n\r\n}","\r\nimport ObjectUtils from '../utils/objectutils';\r\n\r\nexport default class Config {\r\n\r\n    constructor(config)\r\n    {\r\n        if (config === undefined) \r\n            config = {};\r\n\r\n        var callback = ObjectUtils.getValue;\r\n        var callback_2 = ObjectUtils.getPropertyValue;\r\n\r\n        // view and canvas\r\n        this.width = callback(config, 'width', 640);\r\n        this.height = callback(config, 'height', 480);\r\n        this.parent = callback(config, 'parent', null);\r\n        this.debug =  callback(config, 'debug', false);\r\n        \r\n        // loader\r\n        this.loader = {\r\n            baseURL : callback_2(config, 'loader.baseURL', ''),\r\n            path : callback_2(config, 'loader.path', ''),\r\n            responseType : callback_2(config, 'loader.responseType', ''),\r\n            async : callback_2(config, 'loader.async', true),\r\n        }\r\n\r\n        this.fps = callback(config, 'fps', 60);\r\n\r\n        this.time = {\r\n            timeoutMode : callback_2(config, 'time.timeOutMode', false),\r\n           \r\n        }\r\n\r\n        this.camera = {\r\n            width : callback_2(config, 'camera.width', this.width),\r\n            height : callback_2(config, 'camera.height', this.height)\r\n        }\r\n\r\n        this.pixelated = callback(config, 'pixelated', false);\r\n        /* this.loaderEnableParallel = GetValue(config, 'loader.enableParallel', true);\r\n            this.loaderMaxParallelDownloads = GetValue(config, 'loader.maxParallelDownloads', 4);\r\n            this.loaderCrossOrigin = GetValue(config, 'loader.crossOrigin', undefined);\r\n            \r\n            this.loaderUser = GetValue(config, 'loader.user', '');\r\n            this.loaderPassword = GetValue(config, 'loader.password', '');\r\n    this.loaderTimeout = GetValue(config, 'loader.timeout', 0);*/\r\n\r\n\r\n    }\r\n\r\n}","\r\nimport Config from './config';\r\nimport Input from '../input/input'\r\nimport SceneManager from '../scene/scenemanager'\r\nimport Physics from '../physics/physics'\r\nimport Debug from '../others/debug'\r\nimport GameSystemManager from './gameSystemManager';\r\nimport GameTime from '../time/gameTime';\r\n\r\n/**\r\n* Main class of engine. Holds all main data.\r\n* @class Game\r\n* @constructor\r\n*/\r\nexport default class Game {\r\n\r\n  /**\r\n  * @property {string|HTMLElement} parent - The Games DOM parent.\r\n  * @default\r\n  */\r\n constructor()\r\n {\r\n  this.parent = 'body';\r\n  this.width = 800;\r\n  this.height = 600;\r\n\r\n  // object\r\n  this.config = new Config(config);\r\n\r\n  // boolean\r\n  this.systemInited = false;\r\n  this.isRunning = false;\r\n  this.debugMode = false;\r\n\r\n  // float\r\n  this.timeMode = false;\r\n\r\n\r\n  //objects\r\n  this.debug = null;\r\n  this.scene = null;\r\n  this.sound = null;\r\n  this.input = null;\r\n  this.pool = null;\r\n  this.systems =  null;\r\n  this.context = null;\r\n  this.time = null;\r\n\r\n  this.parseConfiguration(this.config);\r\n\r\n  this.init();\r\n }\r\n\r\n  parseConfiguration(config) {\r\n\r\n    //this.config = config;\r\n\r\n    if (config['debug'])\r\n    {\r\n        this.debugMode = config['debug'];\r\n\r\n    }\r\n\r\n    if (config['width'])\r\n    {\r\n        this.width = config['width'];\r\n    }\r\n\r\n    if (config['height'])\r\n    {\r\n        this.height = config['height'];\r\n    }\r\n\r\n    if (config['parent'])\r\n    {\r\n        this.parent = config['parent'];\r\n    }\r\n\r\n  }\r\n  /**\r\n    * Initialize engine\r\n    *\r\n    * @method tobiJS.Game#init()\r\n    * @protected\r\n    */\r\n  init() {\r\n\r\n    if (this.systemInited)\r\n        return;\r\n\r\n    this.physics = new Physics(this);\r\n    this.input = new Input(this);\r\n    this.scene = new SceneManager(this);\r\n    this.system = new GameSystemManager(this);\r\n    this.time = new GameTime(this);\r\n\r\n    this.system.init();\r\n    this.input.init();\r\n    this.time.init(this.system.loop);\r\n\r\n    if (this.debugMode)\r\n      this.debug = new Debug(this);\r\n\r\n    this.systemInited = true;\r\n    this.isRunning = true;\r\n\r\n\r\n    console.log(\"scintilla started!\");\r\n\r\n  }\r\n\r\n  destroy() {\r\n\r\n    this.physics.destroy();\r\n    this.sound.destroy();\r\n    this.input.destroy();\r\n\r\n    this.debug = null;\r\n    this.cache = null;\r\n    this.load = null;\r\n    this.canvas = null;\r\n    this.scene = null;\r\n    this.sound = null;\r\n    this.draw = null;\r\n    this.universe = null;\r\n    this.world = null;\r\n    this.input = null;\r\n    this.time = null;\r\n    this.render = null;\r\n    this.component = null;\r\n    this.instance = null;\r\n    this.animationCache = null;\r\n    this.updateGameMethod = null;\r\n\r\n\r\n  }\r\n\r\n}\r\n\r\n//scintilla.Game.prototype.constructor = scintilla.Game;\r\n\r\n\r\nmodule.exports = Game;","import RequestAnimationFrame from \"../dom/requestAnimationFrame\";\r\nimport GameSystemManager from \"./gameSystemManager\";\r\nimport UpdateStep from \"../time/updateStep\";\r\nimport UpdateCamera from \"../camera/updateCamera\";\r\n\r\n\r\n/*\r\n*\r\n* core game loop system\r\n*\r\n* @class GameLoop\r\n* @protected\r\n*/\r\nexport default class GameLoop {\r\n\r\n    constructor(game, system) {\r\n        this.game = game;\r\n        this.system = system;\r\n        this.updateStep = new UpdateStep(this.game, this.game.config);\r\n        this.entityUpdateList = null;\r\n        this.currentScene = null;\r\n        this.camera = null;\r\n        this.canvas = null;\r\n    }\r\n\r\n    init() {\r\n       this.updateStep.init(this);\r\n       this.entityUpdateList = this.game.system.entityList;\r\n       this.camera = this.system.camera;\r\n       this.canvas = this.system.render.canvas;\r\n    }\r\n\r\n    loop(deltaTime) {\r\n\r\n         // Core Managers\r\n\r\n         this.game.input.update();\r\n         \r\n\r\n         // Entities and Scene Update\r\n\r\n         this.currentScene = this.game.scene.currentScene;\r\n\r\n        let shouldUpdate = (this.currentScene != null && this.currentScene !== undefined);\r\n        //let changeScene = (this.game.scene._changeScene != null || this.game.scene._changeScene !== undefined)\r\n\r\n        //if (changeScene)\r\n            this.game.scene.preUpdate();\r\n        \r\n\r\n        if (shouldUpdate)\r\n        {\r\n            \r\n            if (this.game.scene._setup)\r\n            {\r\n                // global scene update\r\n                if (this.currentScene.update !== undefined)\r\n                    this.currentScene.update(deltaTime);\r\n            } else {\r\n                if (this.currentScene.loading !== undefined)\r\n                    this.currentScene.loading(deltaTime);\r\n            }\r\n\r\n            //console.clear();\r\n\r\n            UpdateCamera(this.camera, this.canvas);\r\n            \r\n            //console.log(this.camera.transform.matrix.toString())\r\n            \r\n\r\n            this.entityUpdateList.update(deltaTime);\r\n\r\n            this.entityUpdateList.lateUpdate(deltaTime);\r\n\r\n            if (this.camera._isDirty)\r\n                this.camera._isDirty = false;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    render(deltaTime) {\r\n\r\n        if (this.currentScene == null || this.currentScene === undefined)\r\n            return;\r\n\r\n        this.system.render.renderBegin();\r\n        this.system.render.render(deltaTime);\r\n        this.system.render.renderEnd();\r\n          \r\n    }\r\n\r\n}\r\n\r\nGameSystemManager.register('GameLoop', GameLoop, 'loop');","import SceneSystem from \"./scenesystem\";\r\n\r\n\r\nvar gameSystems = {};\r\n\r\nexport default class GameSystemManager\r\n{\r\n\r\n    constructor(game)\r\n    {\r\n        this.game = game;\r\n        //this.systems = {};\r\n    }\r\n\r\n    init() {\r\n        // register all game systems\r\n        for (let property in gameSystems) {\r\n\r\n            var sys = gameSystems[property];\r\n            this[sys.name] = new sys.system(this.game, this);\r\n        }\r\n\r\n        // initialize systems\r\n        for (let property in gameSystems) {\r\n\r\n            \r\n            var sys = this[gameSystems[property].name];\r\n            if (sys.init === undefined) continue;\r\n\r\n            sys.init();\r\n        }\r\n    }\r\n\r\n    get(system) {\r\n        return this[system];\r\n    }\r\n\r\n    inject(scene) {\r\n        \r\n        scene.game = this._game;\r\n\r\n        for (let property in SceneSystem)\r\n        {\r\n            \r\n            let sys = gameSystems[SceneSystem[property]];\r\n            scene[sys.name] = this[sys.name];\r\n        }\r\n\r\n        // Special injections, input and sound:\r\n\r\n        scene['key'] = this.game.input.keyboard;\r\n        scene['mouse'] = this.game.input.mouse;\r\n\r\n        /*for (let property in gameSystems) {\r\n\r\n            let sys = gameSystems[property];\r\n            scene[sys.name] = property[sys.system];\r\n        }*/\r\n    }\r\n\r\n    unject(scene) {\r\n\r\n        for (let property in gameSystems) {\r\n            scene[sys.name] = undefined;\r\n        }\r\n    }\r\n\r\n    update(time, deltaTime) {\r\n\r\n    }\r\n\r\n    static register(key, system, systemName)\r\n    {\r\n        gameSystems[key] = {name: systemName, system: system};\r\n    }\r\n    \r\n\r\n    \r\n}\r\n","\r\nmodule.exports = {\r\n    Config : require('./config'),\r\n    GameSystemManager : require('./gameSystemManager'),\r\n    SceneSystem : require('./scenesystem'),\r\n    GameLoop : require('./gameLoop')\r\n}","\r\n\r\nconst SceneSystem = [\r\n    'Cache',\r\n    'Draw',\r\n    'Loader',\r\n    'EntityFactory',\r\n    'Camera'\r\n]\r\n\r\nexport default SceneSystem;\r\n","\r\n\r\nexport default class RequestAnimationFrame {\r\n    \r\n    constructor(timeoutMode) {\r\n\r\n        if (timeoutMode === undefined) { timeoutMode = false; }\r\n\r\n        this.isRunning = false;\r\n        this._isTimeOutMode = timeoutMode;\r\n\r\n        this.thick = 0;\r\n        this.lastTime = 0;\r\n\r\n        //callbacks\r\n\r\n        // game loop\r\n        this.loopCallback = null;\r\n\r\n        // timeout/animation callback \r\n        this.timeOutIdentifier = null;\r\n\r\n        /*let vendors = [\r\n            'ms',\r\n            'moz',\r\n            'webkit',\r\n            'o'\r\n        ];\r\n\r\n        for (let x = 0; x < vendors.length && !window.requestAnimationFrame; x++)\r\n        {\r\n            window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n            window.cancelAnimationFrame  = window[vendors[x] + 'CancelAnimationFrame'];\r\n        }*/\r\n\r\n        var self = this;\r\n\r\n        this.updateRequestAnimationFrame = function(timeStamp) {\r\n\r\n            self.lastTime = self.thick;\r\n            self.thick = timeStamp;\r\n            //this.game.update(time);\r\n            self.loopCallback(timeStamp);\r\n    \r\n            self.timeOutIdentifier = window.requestAnimationFrame(self.updateRequestAnimationFrame);\r\n    \r\n        }\r\n    \r\n        this.updateTimeout = function() {\r\n    \r\n            let dateTime = Date.now();\r\n            let delay = Math.max(16 + self.lastTime - dateTime, 0);\r\n            self.lastTime = self.thick;\r\n            self.thick = delay;\r\n            self.loopCallback(delay);\r\n            //this.game.update(Date.now());\r\n            self.timeOutIdentifier = window.setTimeout(self.updateTimeout, delay);\r\n    \r\n        }\r\n    }\r\n\r\n\r\n\r\n    start(loopCallback) {\r\n\r\n        if (this.isRunning)\r\n            return;\r\n\r\n        this.isRunning = true;\r\n\r\n        this.loopCallback = loopCallback;\r\n\r\n        if (!window.requestAnimationFrame || this._isTimeOutMode) {\r\n            this._isTimeOutMode = true;\r\n            this.timeOutIdentifier = window.setTimeout(this.updateTimeout, 0);\r\n        } else {\r\n            this._isTimeOutMode = false;\r\n            this.timeOutIdentifier = window.requestAnimationFrame(this.updateRequestAnimationFrame);\r\n        }\r\n\r\n    }\r\n\r\n\r\n    stop() {\r\n\r\n        if (this._isTimeOutMode)\r\n        {\r\n            clearTimeout(this.timeOutIdentifier);\r\n        }\r\n        else\r\n        {\r\n            window.cancelAnimationFrame(this.timeOutIdentifier);\r\n        }\r\n\r\n        this.isRunning = false;\r\n\r\n    }\r\n\r\n    destroy() {\r\n        this.stop();\r\n        this.loopingCallback = null;\r\n    }\r\n\r\n}\r\n","\r\n\r\n/*\r\n*\r\n* Base class for Entities\r\n*\r\n*/\r\nexport default class Entity {\r\n\r\n    constructor(name, game)\r\n    {\r\n        this._name = name || 'New Entity';\r\n        this._active = true;\r\n        this.game = game || undefined; \r\n    }\r\n\r\n    get active() {return this._active;}\r\n    set active(value)\r\n    {\r\n        value = !!value;\r\n\r\n        if (value !== this._active)\r\n            this._active = value;\r\n\r\n        return this._active;\r\n    }\r\n\r\n    get name() {return this._name;}\r\n    set name(value)\r\n    {\r\n        value = !!value;\r\n\r\n        if (value !== this._name)\r\n            this._name = value;\r\n\r\n        return this._name;\r\n    }\r\n\r\n    destroy()\r\n    {\r\n        \r\n    }\r\n\r\n};","import GameSystemManager from \"../core/gameSystemManager\";\r\nimport SceneEntity from \"./sceneentity\";\r\n\r\nexport default class EntityFactory {\r\n    \r\n    constructor(game) {\r\n        this.game = game;\r\n        this.scene = null;\r\n        this.entityList = null;\r\n    }\r\n\r\n    init()\r\n    {\r\n        this.entityList = this.game.system.entityList;\r\n        this.scene = this.game.scene;\r\n    }\r\n\r\n    sprite(tag, entityName) {\r\n        var entity = new SceneEntity(entityName,this.game);\r\n        entity.modules.attach.sprite(tag);\r\n\r\n        if (this.scene.current_scene !== null)\r\n        {\r\n            this.entityList.add(entity);\r\n\r\n        }\r\n\r\n        return entity;\r\n    }\r\n\r\n}\r\n\r\nGameSystemManager.register('EntityFactory', EntityFactory, 'create');","\r\nimport Entity from './entity'\r\n\r\n// Hierarchy Tree of instances\r\n// Instance is a children of the Hierarchy tree\r\nexport default class EntityHierarchy extends Entity {\r\n\r\n  constructor(name, game) {\r\n    super(name, game);    \r\n    this.children = [];\r\n    this.parent = null;\r\n  }\r\n\r\n  get childCount() {return this.children.length;}\r\n\r\n  addChild(child) {\r\n    return this.addChildAt(child,this.children.length);\r\n  }\r\n\r\n  addChildAt(child,index) {\r\n        if(index >= 0 && index <= this.children.length)\r\n        {\r\n            if(child.parent)\r\n            {\r\n                child.parent.removeChild(child);\r\n            }\r\n\r\n            child.parent = this;\r\n\r\n            this.children.splice(index, 0, child);\r\n\r\n            this._changeDepth = true;\r\n\r\n            //if(this.stage)child.setStageReference(this.stage);\r\n\r\n            return child;\r\n        }\r\n        else\r\n        {\r\n            throw new Error(child + 'addChildAt: The index '+ index +' supplied is out of bounds ' + this.children.length);\r\n        }\r\n  }\r\n\r\n  removeChild(child)\r\n  {\r\n      var index = this.children.indexOf( child );\r\n\r\n      if(index === -1) return;\r\n\r\n      return this.removeChildAt( index );\r\n  }\r\n\r\n  removeChildAt(index)\r\n  {\r\n    var child = this.getChildAt( index );\r\n\r\n    child.parent = undefined;\r\n    this.children.splice( index, 1 );\r\n    return child;\r\n\r\n  }\r\n\r\n\r\n  getChildAt(index)\r\n  {\r\n      if (index < 0 || index >= this.children.length)\r\n      {\r\n          throw new Error('Hierarchy.getChildAt: Index '+ index +' does not exist in the child list');\r\n      }\r\n      return this.children[index];\r\n\r\n  }\r\n\r\n\r\n  /*preUpdate(time) {\r\n\r\n    for (var i = 0; i < this.children.length; i++)\r\n    {\r\n          this.children[i].preUpdate(time);\r\n\r\n    }\r\n\r\n  }\r\n\r\n  update() {\r\n\r\n    for (var i = 0; i < this.children.length; i++)\r\n    {\r\n          this.children[i].update();\r\n    }\r\n\r\n\r\n  }\r\n\r\n  _updateTransform() {\r\n    for (var i = 0; i < this.children.length; i++)\r\n    {\r\n        this.children[i]._updateTransform();\r\n    }\r\n  }*/\r\n}","import DataList from \"../structures/list\";\r\nimport GameSystemManager from \"../core/gameSystemManager\";\r\nimport UpdateTransform from '../modules/core/updateTransform'\r\nimport UpdateModules from '../modules/core/updateModules'\r\nimport Matrix from '../math/matrix'\r\n\r\nexport default class EntityUpdateList {\r\n\r\n    constructor(game)\r\n    {\r\n        this.game = game;\r\n        this._instances = null;\r\n        this._destroyInstances = null;\r\n        this._pendingInstances = null;\r\n        this._camera = null;\r\n    }\r\n\r\n    get length() {return this._instances.size;}\r\n\r\n    init()\r\n    {\r\n        this._instances = new DataList();\r\n        this._destroyInstances = new DataList();\r\n        this._pendingInstances = new DataList();\r\n        this._camera = this.game.system.camera;\r\n    }\r\n\r\n    add(instance) {\r\n        if (this._instances.indexOf(instance) === -1 && this._pendingInstances.indexOf(instance) === -1)\r\n        {\r\n            this._pendingInstances.push(instance);\r\n        }\r\n\r\n        return instance;\r\n    }\r\n\r\n    remove(instance) {\r\n\r\n    }\r\n\r\n    update(dt) {\r\n\r\n        \r\n\r\n        this._instances.each(element => {\r\n            \r\n            if (element.active)\r\n            {\r\n                \r\n                UpdateTransform(element.transform, this._camera.transform);\r\n\r\n                UpdateModules(element.modules, this.game);\r\n\r\n                if (element.transform._isDirty)\r\n                    element.transform._isDirty = false;\r\n\r\n                if (element.update !== undefined)\r\n                    element.update(dt);\r\n\r\n            }\r\n\r\n            \r\n        });\r\n    }\r\n\r\n    lateUpdate()\r\n    {\r\n        let removeSize = this._destroyInstances.size;\r\n        let insertSize = this._pendingInstances.size;\r\n        \r\n        if (insertSize === 0 && removeSize === 0)\r\n            return;\r\n\r\n\r\n        if (removeSize > 0)\r\n            this._instances.eraseList(this._destroyInstances, removeSize);\r\n\r\n        \r\n        /*this._pendingInstances.each(instance => {\r\n\r\n            this.initializeModules(instance);\r\n\r\n            this._instances.push(instance);\r\n        })\r\n\r\n        this._pendingInstances.clear();*/\r\n\r\n        this._instances.concat(this._pendingInstances, true);\r\n\r\n        this._pendingInstances.childs.length = 0;\r\n        this._destroyInstances.childs.length = 0;\r\n\r\n    }\r\n\r\n}\r\n\r\nGameSystemManager.register('EntityUpdateList', EntityUpdateList, 'entityList');\r\n\r\n","\r\nmodule.exports = {\r\n    Entity : require('./entity'),\r\n    SceneEntity : require('./sceneentity'),\r\n    EntityUpdateList : require('./entityupdatelist'),\r\n    EntityFactory : require('./entityFactory'),\r\n}","\r\nimport EntityHierarchy from './entityhierarchy'\r\nimport BoundingBox from '../math/boundingbox'\r\nimport Transform from '../modules/core/transform'\r\nimport ModuleManager from '../modules/moduleManager';\r\n\r\nexport default class SceneEntity extends EntityHierarchy\r\n{\r\n    constructor(name, game)\r\n    {\r\n        name = name || 'New SceneEntity';\r\n        super(name, game || null)\r\n        this.transform = new Transform();\r\n        this.type = null;\r\n        this.pool = null;\r\n        this.modules = new ModuleManager(this);\r\n        //this.bounds = new BoundingBox();\r\n        //this._transformDirty = false;\r\n        //this._currentScene = null;\r\n        \r\n        \r\n    }\r\n\r\n    get ['position']() { return this.transform.position; }\r\n    set ['position'](value) { this.transform.position = value; this.transform._isDirty = true; }\r\n    set ['position.x'](value) { this.transform.position.x = value; this.transform._isDirty = true;}\r\n    set ['position.y'](value) { this.transform.position.y = value; this.transform._isDirty = true;}\r\n\r\n    get ['origin']() { return this.transform.origin; }\r\n    set ['origin'](value) { this.transform.origin = value; this.transform._isDirty = true; }\r\n    set ['origin.x'](value) { this.transform.origin.x = value; this.transform._isDirty = true;}\r\n    set ['origin.y'](value) { this.transform.origin.y = value; this.transform._isDirty = true;}\r\n\r\n    get ['scale']() { return this.transform.scale; }\r\n    set ['scale'](value) { this.transform.scale = value; this.transform._isDirty = true; }\r\n    set ['scale.x'](value) { this.transform.scale.x = value; this.transform._isDirty = true;}\r\n    set ['scale.y'](value) { this.transform.scale.y = value; this.transform._isDirty = true;}\r\n\r\n    get ['angle']() { return this.transform.angle; }\r\n    set ['angle'](value) { this.transform.angle = value; this.transform._isDirty = true; }\r\n   \r\n    \r\n}","\r\nmodule.exports = {\r\n\r\n    Key : require('./key'),\r\n    Keyboard : require('./keyboard'),\r\n    Mouse : require('./keyboard'),\r\n    Input : require('./input')\r\n    \r\n}","\r\nimport Keyboard from \"./keyboard\";\r\nimport Mouse from \"./mouse\";\r\n\r\nexport default class Input {\r\n\r\n  constructor(game) {\r\n\r\n  this.game = game;\r\n  this.mouse = null;\r\n  this.keyboard = null;\r\n\r\n  }\r\n\r\n  init() {\r\n\r\n    //this.mouse = new tobiJS.Mouse(this.game);\r\n    this.keyboard = new Keyboard(this.game);\r\n    this.mouse = new Mouse(this.game);\r\n    this.keyboard.init();\r\n    this.mouse.init();\r\n\r\n  }\r\n\r\n  update() {\r\n\r\n    this.keyboard.update();\r\n    this.mouse.update();\r\n\r\n  }\r\n\r\n  reset()\r\n  {\r\n    this.keyboard.reset();\r\n    this.mouse.reset();\r\n  }\r\n\r\n}\r\n","\r\n\r\nexport const KeyEvent = {\r\n    NONE : -1,\r\n    IDLE: 0,\r\n    PRESSED : 1,\r\n    RELEASED : 2,\r\n};\r\n\r\nexport default class Key {\r\n    \r\n    constructor(keycode, game) {\r\n\r\n        this.game = game;\r\n        this.keyCode = keycode; \r\n\r\n        this._enabled = true;       \r\n        this.status = false;\r\n        this.press = false;\r\n        this.release = false;\r\n\r\n        this._event = KeyEvent.NONE;\r\n\r\n        this.pressTime = 0;\r\n        this.pressDuration = -2500;\r\n        this.releaseTime = 0;\r\n        this.releaseDuration = -2500;\r\n\r\n    }\r\n\r\n\r\n    onKeyDown()\r\n    {\r\n        if (!this._enabled)\r\n            return;\r\n\r\n        if (this.press)\r\n            return;\r\n\r\n        // set key properties\r\n        this.status = true;\r\n        this.press = true;\r\n        this.release = false;\r\n\r\n        // set press time duration\r\n        this.pressTime = this.game.time.time;\r\n        this.pressDuration = 0;\r\n        this.releaseDuration = this.game.time.time - this.releaseTime;\r\n    \r\n    }\r\n\r\n    onKeyUp()\r\n    {\r\n        if (!this._enabled)\r\n            return;\r\n\r\n        if (this.release)\r\n            return;\r\n\r\n        // set key properties\r\n        this.status = false;\r\n        this.press = false;\r\n        this.release = true;\r\n\r\n        // set press time duration\r\n        this.releaseTime = this.game.time.time;\r\n        this.pressDuration = this.game.time.time - this.pressTime;\r\n        this.releaseDuration = 0;\r\n\r\n    }\r\n\r\n    update()\r\n    {\r\n        if (!this._enabled)\r\n            return;\r\n\r\n  \r\n\r\n        if (this.press)\r\n        {\r\n            this.pressDuration = this.game.time.time - this.pressTime;\r\n            \r\n        }\r\n        else\r\n        {\r\n            this.releaseDuration = this.game.time.time - this.releaseTime;\r\n        }\r\n\r\n\r\n        if (this.press)\r\n        {\r\n            if (this.pressDuration == 0)\r\n            {\r\n                this._event = KeyEvent.PRESSED;\r\n            }\r\n\r\n        } else {\r\n\r\n            if (this.releaseDuration == 0)\r\n            {\r\n                this._event = KeyEvent.RELEASED;\r\n            } else {\r\n                this._event = KeyEvent.IDLE;\r\n            }\r\n\r\n        }\r\n\r\n        if (this._event == KeyEvent.IDLE)\r\n        {\r\n            this._event = KeyEvent.NONE;\r\n        }\r\n        \r\n    }\r\n\r\n    isPressing()\r\n    {\r\n        return this.status;\r\n    }\r\n\r\n    isPressed()\r\n    {\r\n        return (this.press && this.pressDuration == 0);\r\n    }\r\n\r\n    isReleased()\r\n    {\r\n        return (!this.press && this.releaseDuration == 0)\r\n    }\r\n\r\n    event()\r\n    {\r\n        return this._event;\r\n    }\r\n\r\n    reset()\r\n    {   \r\n        this.status = false;\r\n        this._event = KeyEvent.NONE;\r\n        this.press = false;\r\n        this.release = false;\r\n    \r\n        this.pressTime = 0;\r\n        this.pressDuration = -2500;\r\n        this.releaseTime = 0;\r\n        this.releaseDuration = -2500;\r\n    }\r\n\r\n    get enabled() {return this._enabled;}\r\n    set enabled(value) {\r\n        value = !!value;\r\n\r\n        if (value !== this._enabled)\r\n        {\r\n            if (!value)\r\n                this.reset();\r\n\r\n            this._enabled = value;\r\n        }\r\n    }\r\n};\r\n\r\n\r\n\r\n  \r\n","\r\n\r\nimport Key from './key'\r\nimport DataMap from '../structures/map'\r\nimport KeyCode from './keycode'\r\n\r\nexport default class Keyboard {\r\n  \r\n  constructor(game) {\r\n\r\n  this.game = game;\r\n  this.context = game.context;\r\n  this.active = true;\r\n  //this._keys = [];\r\n  this._keyMapping = new DataMap();\r\n  this._keyWatch = new DataMap();\r\n  this._keyGarbage = [];\r\n  //this._keyLock = [];\r\n  //this._keyLockPressed = [];\r\n  //this._keyDownDuration = [];\r\n  this.lastKey = null;\r\n\r\n  //callbacks\r\n  this._onKeyDown = null;\r\n  this._onKeyUp = null;\r\n  this._onKeyPress = null;\r\n  this.reset();\r\n}\r\n\r\n  reset() {\r\n\r\n    this._keyMapping.clear();\r\n    this._keyWatch.clear();\r\n    this._keyGarbage = [];\r\n    for (var prop in KeyCode){\r\n\r\n      if (KeyCode.hasOwnProperty(prop)) {\r\n        var value = KeyCode[prop];\r\n        this._keyMapping.set(value, new Key(value,this.game));\r\n      }\r\n      /*if (scintilla.KeyCode.hasOwnProperty(prop)) {\r\n\r\n        \r\n\r\n            var value = scintilla.KeyCode[prop];\r\n            this._keys[value] = false;\r\n            this._keyLock[value] = scintilla.KeyEvent.NONE;\r\n            this._keyLockPressed[value] = scintilla.KeyEvent.NONE;\r\n            this._keyDownDuration[value] = 0;\r\n      }*/\r\n    }\r\n\r\n  }\r\n\r\n  init() {\r\n\r\n    var self = this;\r\n\r\n    this.reset();\r\n\r\n      this._onKeyDown = function (event) {\r\n            return self.processKeyDown(event);\r\n    };\r\n\r\n    this._onKeyUp = function (event) {\r\n        return self.processKeyUp(event);\r\n    };\r\n\r\n    window.addEventListener('keydown', this._onKeyDown, false);\r\n    window.addEventListener('keyup', this._onKeyUp, false);\r\n  }\r\n\r\n  stop() {\r\n\r\n    window.removeEventListener('keydown', this._onKeyDown);\r\n    window.removeEventListener('keyup', this._onKeyUp);\r\n    this._onKeyDown = null;\r\n    this._onKeyUp = null;\r\n    this._onKeyPress = null;\r\n\r\n    this._keyMapping.clear();\r\n  }\r\n\r\n  processKeyUp(event) {\r\n\r\n    var key = event.keyCode;\r\n\r\n    event.preventDefault();\r\n\r\n    if (!this.active)\r\n      return;\r\n\r\n      var keyObj = this._keyMapping.get(key);\r\n      keyObj.onKeyUp();\r\n\r\n      /*this._keyLock[key] = scintilla.KeyEvent.RELEASE;\r\n      this._keyLockPressed[key] = scintilla.KeyEvent.NONE;\r\n      this._keys[key] = false;*/\r\n\r\n  }\r\n\r\n  processKeyDown(event) { \r\n\r\n    var key = event.keyCode;\r\n\r\n    event.preventDefault();\r\n\r\n    if (!this.active)\r\n    return;\r\n\r\n    this.lastKey = key;\r\n\r\n    var keyObj = this._keyMapping.get(key);\r\n    keyObj.onKeyDown();\r\n\r\n    if (!this._keyWatch.has(key))\r\n    {\r\n      this._keyWatch.set(key, keyObj);\r\n    }\r\n\r\n    //_keyMapping[]\r\n    //this._keys[key] = true;\r\n    /* if (this._keyLockPressed[key] != scintilla.KeyEvent.PRESSED && this._keyLockPressed[key] != scintilla.KeyEvent.PRESS) {\r\n      this._keyLockPressed[key] = scintilla.KeyEvent.PRESSED;\r\n      this._keyDownDuration[key] = 1;\r\n    }\r\n\r\n    this._keyLock[key] = scintilla.KeyEvent.PRESS;\r\n    this._keys[key] = true;\r\n    */\r\n\r\n\r\n  }\r\n\r\n  /*processKeyPress : function(event) { // commom characters\r\n\r\n    var key = event.keyCode;\r\n\r\n    event.preventDefault();\r\n\r\n    if (!this.active)\r\n      return;\r\n\r\n\r\n      this._keyLock[key] = tobiJS.KeyEvent.PRESS;\r\n      this._keys[key] = true;\r\n\r\n\r\n\r\n  },*/\r\n\r\n  update() {\r\n\r\n      /*var keys = this._keyMapping.keys();\r\n      for (var key in keys)\r\n      {\r\n        if (keys.hasOwnProperty(key)) {\r\n\r\n          var value = this._keyMapping.get(key);\r\n          value.update();\r\n\r\n        }\r\n      }*/\r\n\r\n    //var keyswatch = this._keyWatch; //.keys();\r\n\r\n      var self = this;\r\n\r\n    this._keyWatch.each(function (key, value) {\r\n        //var value = this._keyWatch.get(key);\r\n        value.update();\r\n\r\n        //console.log(value);\r\n\r\n        if (value.event() == KeyEvent.IDLE)\r\n        {\r\n        \r\n          // value.reset();\r\n            self._keyGarbage.push(key);\r\n        }\r\n    });\r\n      /*for (var key in keys)\r\n      {\r\n        //console.log(\"UPDATE\")\r\n\r\n        if (keys.hasOwnProperty(key)) {\r\n\r\n            var value = this._keyWatch.get(key);\r\n            value.update();\r\n\r\n            if (value.event() == scintilla.KeyEvent.IDLE)\r\n            {\r\n              // value.reset();\r\n                this._keyGarbage.push(key);\r\n            }\r\n        }\r\n      }*/\r\n\r\n      if (this._keyGarbage.length > 0)\r\n      {\r\n        this._keyWatch.deleteByIndexedArray(this._keyGarbage);\r\n        this._keyGarbage.splice(0, this._keyGarbage.length)\r\n      }\r\n\r\n  }\r\n\r\n  pressed(keycode) {\r\n\r\n    /*var keyLock = false;\r\n\r\n  if (this._keyLockPressed[keycode] == scintilla.KeyEvent.PRESSED) {\r\n      keyLock = true;\r\n      this._keyLockPressed[keycode] = scintilla.KeyEvent.PRESS;\r\n    }\r\n\r\n    var hit = this._keys[keycode] && keyLock;*/\r\n\r\n    //return hit;\r\n\r\n    return this._keyMapping.get(keycode).isPressed();\r\n    \r\n  /* if (this._keyMapping.has(keycode))\r\n    {\r\n      \r\n    } \r\n    else \r\n    {\r\n      return false;\r\n    }*/\r\n\r\n  }\r\n\r\n  release(keycode) {\r\n\r\n    /*var keyLock = false;\r\n\r\n    if (this._keyLock[keycode] ==  scintilla.KeyEvent.PRESSED ||\r\n      this._keyLock[keycode] ==  scintilla.KeyEvent.PRESS ||\r\n      this._keyLock[keycode] ==  scintilla.KeyEvent.NONE)\r\n      keyLock = false;\r\n    else\r\n      keyLock = true;\r\n\r\n    var hit = !this._keys[keycode] && keyLock;\r\n\r\n    this._keyLock[keycode] = scintilla.KeyEvent.NONE;\r\n\r\n    return hit;*/\r\n    return this._keyMapping.get(keycode).isReleased();\r\n\r\n  }\r\n\r\n  press(keycode) {\r\n\r\n\r\n    /*var key = this._keyWatch.get(keycode);\r\n\r\n    if (key === undefined)\r\n      return false;*/\r\n\r\n    return this._keyMapping.get(keycode).status;\r\n\r\n    /*var keyLock = false;\r\n\r\n    if (this._keyLock[keycode] ==  scintilla.KeyEvent.RELEASE ||\r\n      this._keyLock[keycode] ==  scintilla.KeyEvent.NONE)\r\n      keyLock = false;\r\n    else\r\n      keyLock = true;\r\n\r\n    var hit = this._keys[keycode] && keyLock;\r\n\r\n    return hit;*/\r\n\r\n  }\r\n}\r\n\r\n ","\r\nconst KeyCode = {\r\n    Backspace: 8,\r\n    Tab: 9,\r\n    Enter: 13,\r\n    Shift: 16,\r\n    Ctrl: 17,\r\n    Alt: 18,\r\n    Pause: 19,\r\n    CapsLock: 20,\r\n    Escape: 27,\r\n    Space:32,\r\n    PageUp: 33,\r\n    PageDown: 34,\r\n    End: 35,\r\n    Home: 36,\r\n    Left: 37,\r\n    Up: 38,\r\n    Right: 39,\r\n    Down: 40,\r\n    Insert: 45,\r\n    Delete:\t46,\r\n    Num0: 48,\r\n    Num1: 49,\r\n    Num2: 50,\r\n    Num3: 51,\r\n    Num4: 52,\r\n    Num5:\t53,\r\n    Num6: 54,\r\n    Num7: 55,\r\n    Num8: 56,\r\n    Num9: 57,\r\n    A: 65,\r\n    B: 66,\r\n    C: 67,\r\n    D: 68,\r\n    E: 69,\r\n    F: 70,\r\n    G: 71,\r\n    H: 72,\r\n    I: 73,\r\n    J: 74,\r\n    K: 75,\r\n    L: 76,\r\n    M: 77,\r\n    N: 78,\r\n    O: 79,\r\n    P: 80,\r\n    Q: 81,\r\n    R: 82,\r\n    S: 83,\r\n    T: 84,\r\n    U: 85,\r\n    V: 86,\r\n    W: 87,\r\n    X: 88,\r\n    Y: 89,\r\n    Z: 90,\r\n    LSystem: 91,\r\n    RSystem: 92,\r\n    SelectK:\t93,\r\n    Numpad0: 96,\r\n    Numpad1: 97,\r\n    Numpad2: 98,\r\n    Numpad3: 99,\r\n    Numpad4: 100,\r\n    Numpad5: 101,\r\n    Numpad6: 102,\r\n    Numpad7: 103,\r\n    Numpad8: 104,\r\n    Numpad9: 105,\r\n    Multiply: 106,\r\n    Add: 107,\r\n    Subtract: 109,\r\n    DecimalPoint: 110,\r\n    Divide: 111,\r\n    F1:\t112,\r\n    F2:\t113,\r\n    F3:\t114,\r\n    F4:\t115,\r\n    F5:\t116,\r\n    F6:\t117,\r\n    F7:\t118,\r\n    F8:\t119,\r\n    F9:\t120,\r\n    F10: 121,\r\n    F11: 122,\r\n    F12: 123,\r\n    NumLock: 144,\r\n    ScrollLock: 145,\r\n    SemiColon: 186,\r\n    Equal: 187,\r\n    Comma: 188,\r\n    Dash: 189,\r\n    Period:\t190,\r\n    Slash: 191,\r\n    LBraket: 219,\r\n    BackSlash: 220,\r\n    RBracket: 221,\r\n    Quote: 222,\r\n};\r\n    \r\nmodule.exports = KeyCode;","\r\n\r\nimport MouseButton from './mousebutton'\r\n  \r\n  export const MouseEvent = {\r\n  NONE : 0,\r\n  PRESS : 1,\r\n  PRESSED : 2,\r\n  RELEASE : 3\r\n  };\r\n\r\n\r\n  \r\n\r\nexport default class Mouse {\r\n  \r\n  constructor(game) {\r\n\r\n    this.x = 0;\r\n    this.y = 0;\r\n    this.game = game;\r\n    this.canvas = game.system.get('render').canvas;\r\n    this.button = 0;\r\n    this.wheelDelta = 0;\r\n    this.active = true;\r\n\r\n    this._mouseButtons = [];\r\n    this._mouseButtonsLocks = [];\r\n    this._mouseButtonsLocksPressed = [];\r\n    this._mouseDownDuration = [];\r\n\r\n    //callbacks\r\n    this._onMouseDown = null;\r\n    this._onMouseMove = null;\r\n\r\n    this.reset();\r\n  }\r\n\r\n  reset() {\r\n\r\n    for (var i = 0; i < 3; i++){\r\n\r\n\r\n            this._mouseButtons[i] = false;\r\n            this._mouseButtonsLocks[i] = MouseEvent.NONE;\r\n            this._mouseButtonsLocksPressed[i] = MouseEvent.NONE;\r\n            this._mouseDownDuration[i] = 0;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  init() {\r\n\r\n\r\n    var self = this;\r\n\r\n    this._onMouseDown = function (event) {\r\n            return self.onMouseDown(event);\r\n    };\r\n\r\n    this._onMouseUp = function (event) {\r\n            return self.onMouseUp(event);\r\n    };\r\n\r\n    this._onMouseMove = function (event) {\r\n            return self.onMouseMove(event);\r\n    };\r\n\r\n    this.canvas.addEventListener('mousedown', this._onMouseDown, true);\r\n    this.canvas.addEventListener('mousemove', this._onMouseMove, true);\r\n    this.canvas.addEventListener('mouseup', this._onMouseUp, true);\r\n    this.canvas.addEventListener('mouseover', this._onMouseOver, true);\r\n    this.canvas.addEventListener('mouseout', this._onMouseOut, true);\r\n\r\n  }\r\n\r\n  onMouseMove(event) {\r\n\r\n    if (!this.active)\r\n      return;\r\n\r\n\r\n    var rect = this.canvas.getBoundingClientRect();\r\n\r\n\r\n    this.x = Math.floor((event.clientX-rect.left)/(rect.right-rect.left)*this.canvas.width);\r\n    this.y = Math.floor((event.clientY-rect.top)/(rect.bottom-rect.top)*this.canvas.height);\r\n    //this.x = event.clientX - rect.left;\r\n    //this.y = event.clientY - rect.top;\r\n\r\n  }\r\n\r\n  onMouseDown(event) {\r\n\r\n    if (!this.active)\r\n      return;\r\n\r\n\r\n\r\n    var value = event.button;\r\n\r\n    if (this._mouseButtonsLocksPressed[value] != KeyEvent.PRESSED && this._mouseButtonsLocksPressed[value] != KeyEvent.PRESS) {\r\n      this._mouseButtonsLocksPressed[value] = MouseEvent.PRESSED;\r\n      this._mouseDownDuration[value] = 1;\r\n    }\r\n\r\n    this._mouseButtons[value] = true;\r\n    this._mouseButtonsLocks[value] = MouseEvent.PRESS;\r\n\r\n    event.preventDefault();\r\n\r\n  }\r\n\r\n  onMouseUp(event) {\r\n\r\n    if (!this.active)\r\n      return;\r\n\r\n    var value = event.button;\r\n\r\n    this._mouseButtons[value] = false;\r\n    this._mouseButtonsLocks[value] = MouseEvent.RELEASE;\r\n    this._mouseButtonsLocksPressed[value] = MouseEvent.NONE;\r\n\r\n    event.preventDefault();\r\n\r\n\r\n  }\r\n\r\n  pressed(button) {\r\n\r\n    var buttonLock = false;\r\n\r\n    if (this._mouseButtonsLocksPressed[button] == MouseEvent.PRESSED) {\r\n      buttonLock = true;\r\n      this._mouseButtonsLocksPressed[button] = MouseEvent.PRESS;\r\n    }\r\n\r\n    var hit = this._mouseButtons[button] && buttonLock;\r\n\r\n    return hit;\r\n\r\n  }\r\n\r\n  release(button) {\r\n\r\n    var buttonLock = false;\r\n\r\n  \tif (this._mouseButtonsLocks[button] ==  MouseEvent.PRESSED ||\r\n        this._mouseButtonsLocks[button] ==  MouseEvent.PRESS ||\r\n        this._mouseButtonsLocks[button] ==  MouseEvent.NONE)\r\n  \t\tbuttonLock = false;\r\n  \telse\r\n  \t\tbuttonLock = true;\r\n\r\n  \tvar hit = !this._mouseButtons[button] && buttonLock;\r\n\r\n  \tthis._mouseButtonsLocks[button] = MouseEvent.NONE;\r\n\r\n  \treturn hit;\r\n\r\n  }\r\n\r\n  press(button) {\r\n\r\n    var buttonLock = false;\r\n\r\n    if (this._mouseButtonsLocks[button] ==  MouseEvent.RELEASE ||\r\n      this._mouseButtonsLocks[button] ==  MouseEvent.NONE)\r\n      buttonLock = false;\r\n    else\r\n      buttonLock = true;\r\n\r\n    var hit = this._mouseButtons[button] && buttonLock;\r\n\r\n    return hit;\r\n\r\n\r\n  }\r\n\r\n  update() {\r\n\r\n    for (var i = 0; i < this._mouseButtons.length; i++) {\r\n\r\n          if (this._mouseButtonsLocksPressed[i] ==  MouseEvent.PRESSED) {\r\n              if (this._mouseDownDuration[i] > 0)\r\n                this._mouseDownDuration[i]--;\r\n              else\r\n                this._mouseButtonsLocksPressed[i] = MouseEvent.PRESS;\r\n          } else\r\n            continue;\r\n\r\n\r\n    }\r\n\r\n  }\r\n\r\n  posRelativeTo(object) {\r\n\r\n    var vec2 = {x:0,y:0};\r\n\r\n    vec2.x = this.x - object.x;\r\n    vec2.y = this.y - object.y;\r\n\r\n\r\n    return vec2;\r\n\r\n  }\r\n\r\n\r\n}\r\n\r\n","\r\nexport const MouseButton = {\r\n    Left : 0,\r\n    Middle : 1,\r\n    Right : 2,\r\n    WheelUp : 3,\r\n    WheelDown : 4\r\n};","\r\nvar URLObject = {\r\n\r\n    create : function(asset, response, type)\r\n    {\r\n\r\n\r\n        if (typeof URL === 'function')\r\n        {\r\n            asset.src = URL.createObjectURL(response);\r\n        }\r\n        else\r\n        {\r\n            var reader = new FileReader();\r\n\r\n            reader.onload = function ()\r\n            {\r\n                asset.removeAttribute('crossOrigin');\r\n                asset.src = 'data:' + (response.type || type) + ';base64,' + reader.result.split(',')[1];\r\n            };\r\n\r\n            reader.onerror = asset.onerror;\r\n\r\n            reader.readAsDataURL(response);\r\n        }   \r\n    },\r\n\r\n    revoke : function(data)\r\n    {\r\n        if (typeof URL === 'function')\r\n        {\r\n            URL.revokeObjectURL(data.src);\r\n        }\r\n    }\r\n};\r\n\r\nmodule.exports = URLObject;","\r\n\r\nexport default (\r\n    class XHR {\r\n\r\n    static createFileRequest(file, settings)\r\n    {\r\n        var xhrSettings = XHR.merge(settings, file.xhrSettings);\r\n\r\n        var xmlHttpRequest = new XMLHttpRequest();\r\n        xmlHttpRequest.open(\"GET\", file.source, xhrSettings.async);\r\n\r\n        if (file.xhrSettings.responseType !== undefined)\r\n            xmlHttpRequest.responseType = file.xhrSettings.responseType;\r\n        xmlHttpRequest.timeout = xhrSettings.timeout;\r\n\r\n        xmlHttpRequest.onload = file.onLoad.bind(file);\r\n        xmlHttpRequest.onerror = file.onError.bind(file);\r\n        xmlHttpRequest.onprogress = file.onProgress.bind(file);\r\n        \r\n        if (file.onReadyStateChange !== undefined)\r\n            xmlHttpRequest.onreadystatechange = file.onReadyStateChange.bind(file);\r\n\r\n        xmlHttpRequest.send();\r\n\r\n        return xmlHttpRequest;\r\n    }\r\n\r\n    static createSettings(type, doAsync, timeout)\r\n    {\r\n        if (type === undefined) \r\n            type = '';\r\n\r\n        if (doAsync === undefined) \r\n            doAsync = true;\r\n\r\n        if (timeout === undefined)\r\n            timeout = 0;\r\n\r\n        var settings = {\r\n            responseType: type,\r\n            timeout: timeout,\r\n            async: doAsync,\r\n        }\r\n\r\n        return settings;\r\n    }\r\n\r\n    static merge(a, b)\r\n    {\r\n        var out = {};\r\n\r\n        if (a === undefined)\r\n            out = XHR.createSettings(); // : Extend(global);\r\n        // else\r\n            // do something cool\r\n\r\n        if (b)\r\n        {\r\n            for (let setting in b)\r\n            {\r\n                if (b[setting] !== undefined)\r\n                    out[setting] = b[setting];\r\n            }\r\n        }\r\n    \r\n        return out;\r\n    }\r\n\r\n\r\n\r\n})\r\n\r\n","\r\nimport { LOADER_STATE, AssetTypeHandler} from '../loaderstate'\r\nimport File from '../file'\r\nimport URLObject from '../URLobject'\r\nimport ObjectUtils from '../../utils/objectutils'\r\nimport PathUtils from '../../utils/pathutils'\r\nimport AssetsType from '../assetsType';\r\n\r\nexport default class ImageFile extends File {\r\n    \r\n\r\n    constructor(tag, url, path, xhrSettings, config)\r\n    {\r\n        var assetTag = null;\r\n        \r\n        if (typeof tag === 'string')\r\n        {\r\n            assetTag = tag;\r\n        }\r\n        else\r\n        {\r\n            assetTag = ObjectUtils.getValue(tag, 'tag', '');\r\n        }\r\n\r\n        var fileConfig = {\r\n            type: AssetsType.image,\r\n            tag: assetTag,\r\n            ext: ObjectUtils.getValue(tag, 'ext', PathUtils.getExtension(url)),\r\n            url: ObjectUtils.getValue(tag, 'file', url),\r\n            path: path,\r\n            responseType: 'blob',\r\n            xhrSettings: ObjectUtils.getValue(tag, 'xhr', xhrSettings),\r\n            config: ObjectUtils.getValue(tag, 'config', config)\r\n        };\r\n\r\n        super(fileConfig);\r\n    }\r\n\r\n    onProcessing(processingCallback)\r\n    {\r\n        this.state = LOADER_STATE.PROCESSING;\r\n        this.data = new Image();\r\n        this.data.crossOrigin = this.crossOrigin;\r\n\r\n\r\n        var self = this;\r\n\r\n        this.data.onload = function () {\r\n\r\n            URLObject.revoke(self.data);\r\n\r\n            self.onDone();\r\n\r\n            processingCallback(self);\r\n        };\r\n\r\n        this.data.onerror = function () {\r\n\r\n            URLObject.revoke(self.data);\r\n\r\n            console.warn(\"Loader.ImageFile: Error on load file: \" + self.url + \".\")\r\n\r\n            self.state = LOADER_STATE.ERROR;\r\n\r\n            processingCallback(self);\r\n\r\n        };\r\n\r\n\r\n        URLObject.create(this.data, this.xhrRequest.response, 'image/' + this.config.ext);\r\n    }\r\n\r\n}\r\n\r\nAssetTypeHandler.register('image', function (tag, url, path, xhrSettings, force)\r\n{\r\n\r\n    this.addAsset(new ImageFile(tag, url, this.path, xhrSettings), force);\r\n\r\n    return this;\r\n\r\n});\r\n\r\nmodule.exports = ImageFile;","\r\nmodule.exports = {\r\n    ImageFile : require('./imagefile'),\r\n    TextFile : require('./textfile'),\r\n    JSONFile : require('./jsonfile'),\r\n    TilemapJSON : require('./tilemapJSON')\r\n}","import File from \"../file\";\r\nimport ObjectUtils from \"../../utils/objectutils\";\r\nimport { LOADER_STATE, AssetTypeHandler } from \"../loaderstate\";\r\nimport AssetsType from \"../assetsType\";\r\n\r\nexport default class JSONFile extends File {\r\n\r\n    constructor(tag, url, path, xhrSettings, config) {\r\n\r\n        var config = {\r\n            type: AssetsType.json,\r\n            ext: ObjectUtils.getValue(tag, 'ext', 'json'),\r\n            responseType: 'text',\r\n            tag: tag,\r\n            url: ObjectUtils.getValue(tag, 'file', url),\r\n            path: path,\r\n            xhrSettings: ObjectUtils.getValue(tag, 'xhr', xhrSettings)\r\n        };\r\n\r\n        super(config);\r\n\r\n        if (typeof config.url === 'object') {\r\n            this.data = config.url;\r\n            this.state = LOADER_STATE.DONE;\r\n        }\r\n\r\n    }\r\n\r\n    onProcess(processingCallback) {\r\n        this.state = LOADER_STATE.PROCESSING;\r\n        this.data = JSON.parse(this.xhrLoader.responseText);\r\n        this.onDone();\r\n        callback(this);\r\n    }\r\n\r\n}\r\n\r\nAssetTypeHandler.register('json', function (tag, url, path, xhrSettings) {\r\n    this.addAsset(new JSONFile(tag, url, this.path, xhrSettings));\r\n    return this;\r\n});","\r\nimport { LOADER_STATE, AssetTypeHandler} from '../loaderstate'\r\nimport File from '../file'\r\nimport ObjectUtils from '../../utils/objectutils'\r\nimport PathUtils from '../../utils/pathutils'\r\nimport AssetsType from '../assetsType';\r\n\r\nexport default class TextFile extends File {\r\n\r\n    constructor(tag, url, path, xhrSettings, config)\r\n    {\r\n        let assetTag = null;\r\n        \r\n        if (typeof tag === 'string')\r\n        {\r\n            assetTag = tag;\r\n        }\r\n        else\r\n        {\r\n            assetTag = ObjectUtils.getValue(tag, 'tag', '');\r\n        }\r\n\r\n        let useExternal = false;\r\n\r\n        if (path !== undefined)\r\n        {\r\n            if (typeof(path) === \"boolean\")\r\n                useExternal = path;\r\n\r\n            \r\n        }\r\n\r\n        var fileConfig = {\r\n            type: AssetsType.text,\r\n            tag: assetTag,\r\n            ext: ObjectUtils.getValue(tag, 'ext', PathUtils.getExtension(url)),\r\n            url: ObjectUtils.getValue(tag, 'file', url),\r\n            path: path,\r\n            responseType: '',\r\n            xhrSettings: ObjectUtils.getValue(tag, 'xhr', xhrSettings),\r\n            config: ObjectUtils.getValue(tag, 'config', config),\r\n            useExternal : useExternal\r\n        };\r\n\r\n        super(fileConfig);\r\n    }\r\n    \r\n    //onLoad(event) {}\r\n\r\n    /*onReadyStateChange(event)\r\n    {\r\n\r\n        console.log(event.target);\r\n        if (this.xhrRequest.status == 200)\r\n        {\r\n            if (this.xhrRequest.readyState == 4)\r\n            {\r\n                this.state = LOADER_STATE.PROCESSING;\r\n                //this.data = window.URL.createObjectURL(this.xhrRequest.response);\r\n                this.data = this.xhrRequest.responseText;\r\n                \r\n                //console.log(this.data);\r\n                this.onDone();\r\n\r\n                //processingCallback(this);\r\n                super.onLoad(event);\r\n            }  \r\n        } else {\r\n            super.onLoad(event);\r\n        }\r\n    }*/\r\n\r\n    onProcessing(processingCallback)\r\n    {\r\n        this.state = LOADER_STATE.PROCESSING;\r\n            //this.data = window.URL.createObjectURL(this.xhrRequest.response);\r\n            this.data = this.xhrRequest.responseText;\r\n            /*var style = document.createElement('style');\r\n            style.innerHTML = this.data;\r\n            document.head.appendChild(style)*/\r\n           // console.log(\"data:\" + this.data);\r\n            this.onDone();\r\n\r\n            processingCallback(this);\r\n    }\r\n\r\n}\r\n\r\nAssetTypeHandler.register('text', function (tag, url, path, xhrSettings)\r\n{\r\n    let endPointPath = this.path;\r\n\r\n    if (path !== undefined)\r\n    {\r\n        \r\n        if (typeof(path) === \"boolean\") // external link\r\n            endPointPath = path;\r\n        \r\n    }\r\n\r\n    this.addAsset(new TextFile(tag, url, endPointPath, xhrSettings));\r\n\r\n    return this;\r\n\r\n});\r\n\r\nmodule.exports = TextFile;","import File from '../file'\r\nimport JSONFile from './jsonfile';\r\nimport { AssetTypeHandler, LOADER_STATE } from '../loaderstate';\r\nimport PathUtils from '../../utils/pathutils';\r\nimport AssetsType from '../assetsType';\r\n\r\n\r\nfunction CheckImagesSources(loader, source, fullPath) {\r\n\r\n    if (source === undefined)\r\n        return;\r\n\r\n      \r\n\r\n    let size = source.length;\r\n\r\n   \r\n\r\n    if (size <= 0)\r\n        return;\r\n\r\n    for (let i = 0; i < size; i++) {\r\n\r\n        let tileset = source[i];\r\n\r\n        if (tileset.image) {\r\n            let name = tileset.name || PathUtils.getFilenameWithoutExtension(tileset.image);\r\n            let path = PathUtils.getPathWithoutRoot(fullPath).concat(PathUtils.getFilename(tileset.image));\r\n            loader.image(name, path, undefined, undefined, false);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default class TilemapFileJSON extends JSONFile {\r\n\r\n    constructor(tag, url, path, xhrSettings) {\r\n\r\n        super(tag, url, path, xhrSettings);\r\n        this.type = AssetsType.tilemapJSON;\r\n\r\n    }\r\n\r\n    onPostLoad(loader, xhrLoader) {\r\n\r\n        this.state = LOADER_STATE.PROCESSING;\r\n        this.data = JSON.parse(xhrLoader.responseText);\r\n\r\n        // check tileset images and pipe to the loader\r\n        CheckImagesSources(loader, this.data.tilesets, this.url);\r\n    }\r\n\r\n    onProcess(processingCallback) {\r\n        this.onDone();\r\n        callback(this);\r\n    }\r\n\r\n\r\n}\r\n\r\nAssetTypeHandler.register('tilemapJSON', function (tag, url, path, xhrSettings) {\r\n    this.addAsset(new TilemapFileJSON(tag, url, this.path, xhrSettings));\r\n    return this;\r\n});","\r\nconst AssetsType = {\r\n    'none' : 0,\r\n    'image' : 1,\r\n    'audio' : 2,\r\n    'text' : 3,\r\n    'json' : 4,\r\n    'tilemapJSON' : 5,\r\n}\r\n\r\nexport default AssetsType;","\r\nimport ObjectUtils from '../utils/objectutils'\r\nimport XHR from './XHR'\r\nimport {LOADER_STATE} from './loaderstate'\r\n\r\nexport default class File {\r\n\r\n    constructor(config) {\r\n\r\n        this.type = ObjectUtils.getValue(config, 'type', null);\r\n        this.tag = ObjectUtils.getValue(config, 'tag', null);\r\n        this.useExternal =  ObjectUtils.getValue(config, 'useExternal', false);\r\n\r\n        if (this.type == null || this.tag == null)\r\n        {\r\n            throw new Error('Loader.File: Invalid tag \\\"' + tag + \"\\\".\");\r\n        }\r\n\r\n        this.url = ObjectUtils.getValue(config, 'url', undefined);\r\n\r\n        if (this.url === undefined)\r\n            this.url = ObjectUtils.getValue(config, 'path', '') + this.tag + '.' + ObjectUtils.getValue(config, 'ext', '');\r\n        else\r\n        {\r\n            if (!this.useExternal || this.useExternal !== undefined)\r\n                this.url = ObjectUtils.getValue(config, 'path', '').concat(this.url);\r\n\r\n        }\r\n\r\n        this.xhrSettings = XHR.createSettings(ObjectUtils.getValue(config, 'responseType', undefined));\r\n        \r\n        if (ObjectUtils.getValue(config, 'xhrSettings', false))\r\n            this.xhrSettings = XHR.merge(this.xhrSettings, ObjectUtils.getValue(config, 'xhrSettings', {}));\r\n\r\n        \r\n        //console.log(this.xhrSettings);\r\n       \r\n        this.loader = null;\r\n        this.state = LOADER_STATE.PENDING;\r\n        this.totalBytes = 0;\r\n        this.loadedBytes = 0;\r\n        this.progress = 0;\r\n        this.data = undefined;\r\n        this.source = null;\r\n        this.xhrRequest = null;\r\n        this.config = ObjectUtils.getValue(config,'config',{});\r\n        this.crossOrigin = undefined;\r\n\r\n        // callbacks\r\n        //loaded: false,\r\n        //error: false,\r\n        //loading:false,\r\n\r\n    }\r\n\r\n    load(gameLoader)\r\n    {\r\n        this.loader = gameLoader;\r\n\r\n\r\n        if (this.state === LOADER_STATE.FINISHED)\r\n        {\r\n            this.onDone();\r\n\r\n            this.loader.nextFile(this);\r\n        }\r\n        else\r\n        {\r\n           \r\n\r\n            this.source = ObjectUtils.getURL(this.url, gameLoader.baseURL);\r\n\r\n            \r\n            if (this.source.indexOf('data:') === 0 || this.source == null)\r\n            {\r\n                console.warn(\"Loader.File.load: unsupported URI.\");\r\n            }\r\n            else\r\n            {\r\n                this.xhrRequest = XHR.createFileRequest(this, gameLoader.xhr);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    onLoad(event)\r\n    {\r\n       \r\n        this.XHRreset();\r\n\r\n        \r\n\r\n        if (event.target && event.target.status !== 200)\r\n        {\r\n            this.loader.next(this, true);\r\n        } else {\r\n            \r\n            if (this.onPostLoad !== undefined)\r\n                this.onPostLoad(this.loader, this.xhrRequest);\r\n\r\n            this.loader.next(this, false);\r\n        }\r\n        \r\n                \r\n    }\r\n\r\n    onError(event)\r\n    {\r\n        console.error(\"Loader.File: Error on load file: \" + this.url + \".\")\r\n\r\n        this.XHRreset();\r\n\r\n        this.loader.next(this, true);\r\n    }\r\n\r\n    onProgress(event)\r\n    {\r\n        if (event.lengthComputable)\r\n        {\r\n            this.loadedBytes = event.loaded;\r\n            this.totalBytes = event.total;\r\n\r\n            this.progress = Math.min((this.loadedBytes / this.totalBytes), 1);\r\n\r\n        }\r\n    }\r\n\r\n    onDone()\r\n    {\r\n        this.state = LOADER_STATE.DONE;\r\n    }\r\n\r\n    onProcessing(processingCallback)\r\n    {\r\n        this.state = LOADER_STATE.PROCESSING;\r\n\r\n        this.onDone();\r\n\r\n        processingCallback(this);\r\n    }\r\n\r\n\r\n    XHRreset()\r\n    {\r\n        if (this.xhrRequest)\r\n        {\r\n            this.xhrRequest.onload = undefined;\r\n            this.xhrRequest.onerror = undefined;\r\n            this.xhrRequest.onprogress = undefined;\r\n            //this.xhrRequest.onreadystatechange = undefined;\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n","\r\nmodule.exports = {\r\n\r\n    File: require('./file'),\r\n    XHR: require('./XHR'),\r\n    URLObject : require('./URLobject'),\r\n    AssetsType : require('./assetsType'),\r\n    Assets: require('./assets'),\r\n    LoaderState: require('./loaderstate'),    \r\n    LoaderManager: require('./loadmanager'),\r\n\r\n};","\r\nexport default class ListInjector {\r\n\r\n    constructor()\r\n    {\r\n        this.list = {};\r\n    }\r\n\r\n    inject(toObj)\r\n    {\r\n        for (var key in this.list)\r\n        {\r\n            toObj[key] = this.list[key];\r\n        }\r\n    }\r\n\r\n    register(key, func)\r\n    {\r\n        this.list[key] = func;\r\n    }\r\n\r\n    destroyfunction()\r\n    {\r\n        this.list = {};\r\n    }\r\n\r\n};","\r\nimport ListInjector from './listinjector'\r\n\r\nexport var AssetTypeHandler = new ListInjector();\r\n\r\nexport const LOADER_STATE = {\r\n    NONE : 0,\r\n    IDLE : 1,\r\n    PENDING : 2,\r\n    LOADING : 3,\r\n    PROCESSING : 4,\r\n    ERROR : 5,\r\n    FINISHED : 6,\r\n    DONE : 7, \r\n}\r\n","\r\nimport { LOADER_STATE, AssetTypeHandler} from './loaderstate'\r\nimport DataSet from '../structures/set'\r\nimport XHR from './XHR'\r\nimport ObjectUtils from '../utils/objectutils';\r\nimport GameSystemManager from '../core/gameSystemManager';\r\nimport AssetsType from './assetsType';\r\n\r\n// Class LoaderManager\r\nexport default class LoadManager {\r\n  \r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    this.cache = null;\r\n\r\n    this._filesQueue = null;\r\n    this._filesLoading = null;\r\n    this._successFiles = null;\r\n    this._failedFiles = null;\r\n    this._processedFiles = null;\r\n\r\n    this._filesQueueCount = null;\r\n    this._loadedFilesCount = null;\r\n\r\n    this.isDownloading = false;\r\n    this._totalFiles = 0;\r\n\r\n    this.progress = null;\r\n    this.path = null;\r\n    this.baseURL = null;\r\n    this.state = null;\r\n\r\n    let gameConfig = game.config.loader;\r\n\r\n    this.xhr = XHR.createSettings(\r\n      ObjectUtils.getValue(config, 'responseType', gameConfig.responseType),\r\n      ObjectUtils.getValue(config, 'async', gameConfig.async),\r\n      //scintilla.ObjectUtils.getPropertyValue(config, 'user', gameConfig.loaderUser),\r\n      //scintilla.ObjectUtils.getPropertyValue(config, 'password', gameConfig.loaderPassword),\r\n      ObjectUtils.getValue(config, 'timeout', gameConfig.timeout)\r\n  );\r\n  \r\n\r\n    AssetTypeHandler.inject(this);\r\n\r\n  }\r\n\r\n  init()\r\n  {\r\n    this.cache = this.game.system.cache;\r\n\r\n    this._filesQueue = new DataSet();\r\n    this._filesLoading = new DataSet();\r\n    this._successFiles = new DataSet();\r\n    this._failedFiles = new DataSet();\r\n    this._processedFiles = new DataSet();\r\n\r\n    this._filesQueueCount = 0;\r\n    this._loadedFilesCount = 0;\r\n\r\n    this.progress = 0;\r\n    this.path = '';\r\n    this.baseURL = '';\r\n    this.state = LOADER_STATE.IDLE;\r\n  }\r\n\r\n\r\n  setPath(path) {\r\n    if (path !== '' && path.substr(-1) !== '/')\r\n        path = path.concat('/');\r\n\r\n    this.path = path;\r\n\r\n    return this;\r\n  }\r\n\r\n  setBaseURL(baseUrl) {\r\n    if (baseUrl !== '' && baseUrl.substr(-1) !== '/')\r\n    {\r\n      baseUrl = baseUrl.concat('/');\r\n    }\r\n\r\n    this.baseURL = baseUrl || '';\r\n\r\n    return this;\r\n  }\r\n\r\n  addAsset(asset, check) {\r\n\r\n    if (check === undefined) check = true;\r\n\r\n    if (!this.isOK() && check)\r\n        return -1;\r\n\r\n    asset.path = this.path;\r\n    this._filesQueue.set(asset);\r\n    this._filesQueueCount++;\r\n    return asset;\r\n\r\n  }\r\n\r\n  reset() {\r\n\r\n    this.isDownloading = false;\r\n    this._filesQueue.clear();\r\n    this._successFiles.clear();\r\n    this._failedFiles.clear();\r\n    this._processedFiles.clear();\r\n\r\n    this._filesQueueCount = 0;\r\n    this._loadedFilesCount = 0;\r\n\r\n    this.progress = 0\r\n    this.state = LOADER_STATE.IDLE;\r\n\r\n  }\r\n\r\n  start() {\r\n\r\n    if (!this.isOK())\r\n    {\r\n        return -1;\r\n    }\r\n\r\n    this.progress = 0;\r\n    this._loadedFilesCount = 0;\r\n    this.state = LOADER_STATE.LOADING;\r\n    this._filesQueueCount = this._filesQueue.size;\r\n\r\n    if (this._filesQueue.size === 0)\r\n    {\r\n      //console.log(0);\r\n      this.loadFinished();\r\n    }\r\n    else\r\n    {\r\n      this.isDownloading = true;\r\n      this._successFiles.clear();\r\n      this._failedFiles.clear();\r\n      this._filesLoading.clear();\r\n\r\n      this.processFileQueue();\r\n    }\r\n\r\n  }\r\n\r\n  /*end : function() {\r\n\r\n    if (this.state === LOADER_STATE.PROCESSING)\r\n        return;\r\n  \r\n    this.progress = 1;\r\n    this.isDownloading = false;\r\n    this.state = LOADER_STATE.PROCESSING;\r\n\r\n    \r\n    this._filesQueue.clear();\r\n    this._failedFiles.length = 0;\r\n    \r\n    this.processFiles();\r\n\r\n    this._successFiles.clear();\r\n\r\n    this.state = LOADER_STATE.DONE;\r\n    //this.game.scene.preloadComplete();\r\n\r\n  },*/\r\n\r\n  processFileQueue() {\r\n\r\n    var self = this;\r\n\r\n    this._filesQueue.each(function(file) {\r\n\r\n      //var file = this._filesQueue[i];\r\n\r\n      if (file.state === LOADER_STATE.FINISHED ||\r\n         file.state === LOADER_STATE.PENDING) //  && this.inflight.size < this.maxParallelDownloads))\r\n      {\r\n        \r\n\r\n        self._filesLoading.set(file);\r\n\r\n        self._filesQueue.delete(file);\r\n\r\n        self.loadAsset(file);\r\n      }\r\n\r\n    });\r\n\r\n  }\r\n\r\n  loadAsset(file) {\r\n    file.load(this);\r\n  }\r\n\r\n  next(concludedFile, hasError) {\r\n\r\n      if (hasError)\r\n          this._failedFiles.set(concludedFile);\r\n      else \r\n          this._successFiles.set(concludedFile);\r\n      \r\n\r\n      this._filesLoading.delete(concludedFile);\r\n      //this._filesQueue.delete(concludedFile);\r\n      this._loadedFilesCount++;\r\n\r\n      this.updateProgress();\r\n\r\n      if (this._filesQueue.size > 0)//(this._loadedFilesCount < this._filesQueueCount)\r\n      {\r\n          this.processFileQueue();\r\n      } else if (this._filesLoading.size === 0) {\r\n        \r\n          this.loadFinished();\r\n      }\r\n\r\n  }\r\n\r\n  loadFinished() {\r\n\r\n    if (this.state === LOADER_STATE.PROCESSING)\r\n        return;\r\n  \r\n    this.progress = 1;\r\n    this.isDownloading = false;\r\n    this.state = LOADER_STATE.PROCESSING;\r\n\r\n    this._processedFiles.clear();\r\n\r\n    if (this._successFiles.size === 0)\r\n    {\r\n        this.processingDone();\r\n    } else {\r\n     \r\n      // sort the assets by type priority \r\n      this._successFiles.sort((a, b) => {\r\n        return a.type < b.type;\r\n      });\r\n\r\n      this._successFiles.each(function(file) {\r\n        file.onProcessing(this.processingUpdate.bind(this));\r\n      },this);\r\n    }\r\n   \r\n  }\r\n\r\n\r\n  processingUpdate(file) {\r\n    \r\n    if (file.state === LOADER_STATE.ERROR)\r\n    {\r\n       this._failedFiles.set(file);\r\n\r\n        /*if (file.linkFile)\r\n        {\r\n            this.queue.delete(file.linkFile);\r\n        }*/\r\n        return this.deleteFromSuccessQueue(file);\r\n    }\r\n\r\n\r\n    this._processedFiles.set(file);\r\n\r\n    return this.deleteFromSuccessQueue(file);\r\n\r\n  }\r\n\r\n  deleteFromSuccessQueue(file) {\r\n    \r\n      this._successFiles.delete(file);\r\n\r\n      if (this._successFiles.size === 0 && this.state === LOADER_STATE.PROCESSING)\r\n          this.processingDone();\r\n  }\r\n\r\n  processingDone() {\r\n    this._successFiles.clear();\r\n    this._filesQueue.clear();\r\n\r\n    var cache = this.cache;\r\n\r\n    if (this._processedFiles.size > 0)\r\n    {\r\n      this._processedFiles.each(function(file) {\r\n\r\n        switch (file.type)\r\n        {\r\n          default:\r\n            break;\r\n\r\n          case AssetsType.image: {\r\n            cache.addImage(file.tag,file.url,file.data);\r\n            break;\r\n          }\r\n          case AssetsType.audio: {\r\n\r\n            file.data = requestXHR.response;\r\n\r\n            cache.addSound(file.tag,file.url,file.data,true);\r\n\r\n            if (file.autoDecode)\r\n            {\r\n                this.game.sound.decode(file.tag);\r\n            }\r\n\r\n            break;\r\n          }\r\n          case AssetsType.json: {\r\n            cache.addJSON(file.tag, file.data);\r\n            break;\r\n          }\r\n\r\n          case AssetsType.tilemapJSON: {\r\n            cache.addTilemap(file.tag, file.data);\r\n            break;\r\n          }\r\n        }\r\n\r\n      })\r\n\r\n      this._processedFiles.clear();\r\n    }\r\n\r\n    this.state = LOADER_STATE.DONE;\r\n\r\n    this.game.scene.preloadComplete();\r\n  }\r\n\r\n  isLoading() {\r\n    return (this.state === LOADER_STATE.LOADING || this.state === LOADER_STATE.PROCESSING);\r\n  }\r\n\r\n  isOK() {\r\n    return (this.state === LOADER_STATE.IDLE || this.state === LOADER_STATE.DONE || this.state === LOADER_STATE.ERROR);\r\n  }\r\n\r\n  downloadIsDone() {\r\n    return (this._filesQueue.length == (this._successCount + this._fileErrorCount));\r\n  }\r\n\r\n  updateProgress() {\r\n\r\n    var progress = 0;\r\n\r\n    if (this._filesQueueCount != 0)\r\n    {\r\n      this.progress = 1 - (this._loadedFilesCount / this._filesQueueCount);\r\n    }\r\n     //progress = parseFloat(this._successCount) / parseFloat(this._filesQueueCount);\r\n\r\n    this.progress = progress;\r\n\r\n  }\r\n\r\n\r\n  get totalQueuedFiles() {\r\n    return this._filesQueueCount - this._loadedFilesCount;\r\n  }\r\n\r\n\r\n};\r\n\r\nGameSystemManager.register('Loader',LoadManager,'load');","\r\nimport Vector from './vector'\r\nimport Rect from './rect'\r\n\r\nexport default class BoundingBox {\r\n  \r\n  constructor(x, y, width, height) {\r\n\r\n    x = x || Infinity;\r\n    y = y || Infinity;\r\n    width = width || -Infinity;\r\n    height = height || -Infinity;\r\n    this.min = new Vector(x,y);\r\n    this.max = new Vector(x+width,y+height);\r\n    //this.box = new Rect(xx,yy,w,h);\r\n\r\n  }\r\n\r\n  \r\n  get center() {\r\n    return new Vector(\r\n      (this.max.x - this.min.x) / 2,\r\n      (this.max.y - this.min.y) / 2\r\n    );\r\n  }\r\n\r\n  get size() {\r\n    return new Vector(\r\n      (this.max.x - this.min.x),\r\n      (this.max.y - this.min.y)\r\n    );\r\n  }\r\n\r\n  \r\n  set(minX, minY, maxX, maxY) {\r\n\r\n    this.min.set(minX,minY);\r\n    this.max.set(maxX,maxY);\r\n    this.box.set(this.min.x,this.min.y,this.max.x-this.min.x,this.max.y-this.min.y);\r\n    return this;\r\n\r\n  }\r\n\r\n  intersects(bounds) {\r\n    return (\r\n      (this.max.x > bounds.min.x && \r\n      this.max.y > bounds.min.y &&\r\n      this.min.x < bounds.max.x && \r\n      this.min.y < bounds.max.y) ||\r\n\r\n      (this.min.x > bounds.max.x &&\r\n      this.min.y > bounds.max.y &&\r\n      this.max.x < bounds.min.x &&\r\n      this.max.y < bounds.min.y));\r\n  }\r\n\r\n  contains(x, y) {\r\n    return (\r\n      x > this.min.x &&\r\n      y > this.min.y &&\r\n      x < this.max.x &&\r\n      y < this.max.y);\r\n  }\r\n\r\n  expand(xRadius, yRadius) {\r\n\r\n    yRadius = yRadius || xRadius;\r\n\r\n    if (this.max.x > this.min.x)\r\n\t\t{\r\n\t\t\tthis.min.x -= xRadius;\r\n\t\t\tthis.max.x += xRadius;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.min.x += xRadius;\r\n\t\t\tthis.max.x -= xRadius;\r\n\t\t}\r\n\r\n\t\tif (this.max.y > this.min.y)\r\n\t\t{\r\n\t\t\tthis.min.y -= yRadius;\r\n\t\t\tthis.max.y += yRadius;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.min.y += yRadius;\r\n\t\t\tthis.max.y -= yRadius;\r\n\t\t}\r\n  }\r\n\r\n  merge(value) {\r\n\r\n    // merge with another bounds\r\n    if (value instanceof BoundingBox) {\r\n      this.min.x = Math.min(this.min.x, value.min.x);\r\n      this.min.y = Math.min(this.min.y, value.min.y);\r\n      this.max.x = Math.max(this.max.x, value.max.x);\r\n      this.max.y = Math.max(this.max.y, value.max.y);\r\n      return this;\r\n    } \r\n    else if (value instanceof Vector) {\r\n      return this.mergeWithPoint(value.x, value.y);\r\n    } else {\r\n      this.min.x = Math.min(this.min.x, value);\r\n      this.min.y = Math.min(this.min.y, value);\r\n      this.max.x = Math.max(this.max.x, value);\r\n      this.max.y = Math.max(this.max.y, value);\r\n      return this;\r\n    }\r\n  }\r\n\r\n  mergeWithPoint(x, y) {\r\n    this.min.x = Math.min(this.min.x, x);\r\n    this.min.y = Math.min(this.min.y, y);\r\n    this.max.x = Math.max(this.max.x, x);\r\n    this.max.y = Math.max(this.max.y, y);\r\n    return this;\r\n  }\r\n\r\n  extend(bounds) {\r\n    // min merge\r\n    if (bounds.min.x < this.min.x)\r\n      this.min.x = bounds.min.x;\r\n\r\n    if (bounds.min.y < this.min.y)\r\n      this.min.y = bounds.min.y;\r\n      \r\n    // max merge\r\n    if (bounds.max.x > this.max.x)\r\n      this.max.x = bounds.max.x;\r\n\r\n    if (bounds.max.y > this.max.y)\r\n      this.max.y = bounds.max.y;\r\n\r\n    return this;\r\n  }\r\n\r\n  extendByPoint(x, y) {\r\n    if (x < this.min.x) this.min.x = x;\r\n\t\tif (y < this.min.y) this.min.y = y;\r\n\t\tif (x > this.max.x) this.max.x = x;\r\n\t\tif (y > this.max.y) this.max.y = y;\r\n\r\n\t\treturn this;\r\n  }\r\n\r\n  limit(xmin, ymin, xmax, ymax) {\r\n\t\tif (this.min.x < xmin)\r\n      this.min.x = xmin;\r\n\r\n\t\tif (this.min.y < ymin)\r\n      this.min.y = ymin;\r\n\r\n\t\tif (this.max.x > xmax)\r\n      this.max.x = xmax;\r\n\r\n\t\tif (this.max.y > ymax)\r\n      this.max.y = ymax;\r\n  }\r\n\r\n  offset(x, y) {\r\n    let o = {x:x, y:y};\r\n     o.x -= this.min.x;\r\n     o.y -= this.min.y;\r\n\r\n\t\tif (this.max.x > this.min.x)\r\n\t\t\to.x /= this.max.x - this.min.x;\r\n\r\n\t\tif (this.max.y > this.min.y)\r\n      o.y /= this.max.y - this.min.y;\r\n      \r\n    return o;\r\n  }\r\n\r\n  \r\n\r\n}\r\n","\r\n\r\n\r\n\r\nconst MathUtils = {\r\n\r\nclamp : function(value, min, max) {\r\n  return (value > min) ? (value < max) ? value : max : min;\r\n},\r\n\r\nrandomRange : function(min, max) {\r\n\r\n  return Math.random() * (max - min) + min;\r\n\r\n},\r\n\r\nirandomRange : function(min, max) {\r\n\r\n  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n\r\n},\r\n\r\nlerp : function(fromValue,toValue,t) {\r\n\r\n  return (1.0-t) * fromValue + t * toValue;\r\n\r\n},\r\n\r\nlerpAngle : function(fromValue,toValue,t) {\r\n\r\n  /*var shortest_angle = ((((toValue - fromValue) % 360) + 540) % 360) - 180;\r\n  return shortest_angle * t;*/\r\n\r\n  var end = toValue;\r\n  var start = fromValue;\r\n\r\n  var difference = Math.abs(end - start);\r\n  if (difference > 180)\r\n  {\r\n      // We need to add on to one of the values.\r\n      if (end > start)\r\n      {\r\n          // We'll add it on to start...\r\n          start += 360;\r\n      }\r\n      else\r\n      {\r\n          // Add it on to end.\r\n          end += 360;\r\n      }\r\n  }\r\n\r\n        // Interpolate it.\r\n      var value = (start + ((end - start) * t));\r\n\r\n        // Wrap it..\r\n        var rangeZero = 360;\r\n\r\n        if (value >= 0 && value <= 360)\r\n            return value;\r\n\r\n        return (value % rangeZero);\r\n\r\n\r\n},\r\n\r\ndistance : function(x0,y0,x1,y1) {\r\n\r\n   return Math.sqrt((x0 -= x1) * x0 + (y0 -= y1) * y0);\r\n\r\n},\r\n\r\nangleBetween : function(x0,y0,x1,y1) {\r\n\r\n  var angle = this.toDegree(Math.atan2(y1 - y0, x1 - x0));\r\n\r\n  if (angle < 0 && angle >= -180)\r\n    angle = 360 + angle;\r\n\r\n\r\n   return angle;\r\n\r\n},\r\n\r\ndegToRad : Math.PI / 180,\r\nradToDeg : 180 / Math.PI,\r\nTAU : Math.PI * 2,\r\n\r\ntoDegree : function(radians) {\r\n\r\n  return radians * tobiJS.Math.radToDeg;\r\n\r\n},\r\n\r\ntoRadian : function(degrees) {\r\n\r\n  return degrees * tobiJS.Math.degToRad;\r\n\r\n}\r\n\r\n}\r\n\r\nexport default MathUtils;\r\n\r\n\r\n","\r\n/*\r\n\r\n\r\n* | a | b | x | * | 0 | 2 | 4 |\r\n* | c | d | y | * | 1 | 3 | 5 |\r\n* | 0 | 0 | 1 |\r\n\r\n* | 0 | 3 | 6 | * | a | c | x |\r\n* | 1 | 4 | 7 | * | b | d | y |\r\n* | 2 | 5 | 8 | * | 0 | 0 | 1 |\r\n\r\na = scale_x\r\nb = cos\r\nx = x translate\r\n\r\nc = scale_y\r\nd = sin\r\ny = y translate\r\n\r\nHTML5/CSS3 uses matrices in column-major order based.\r\n\r\n*/\r\n\r\nclass Matrix {\r\n  \r\n  /*\r\n  * Constructor is identity only\r\n  */\r\n  constructor(a, b) {\r\n\r\n    /*a = a || i;\r\n    b = b || 0;\r\n    x = x || 0;\r\n\r\n    c = c || 0;   \r\n    d = d || i;   \r\n    y = y || 0;*/\r\n\r\n    a = a || 0;\r\n    b = b || 0;\r\n\r\n    this.a = [];\r\n\r\n    // first column\r\n    this.a[0] = a;\r\n    this.a[1] = b;\r\n    this.a[2] = b;\r\n    // second column\r\n    this.a[3] = b;\r\n    this.a[4] = a;\r\n    this.a[5] = b;\r\n    // third column\r\n    this.a[6] = b; \r\n    this.a[7] = b;\r\n    this.a[8] = a;\r\n    //this.at = null;\r\n\r\n  }\r\n\r\n  at(i, j) {\r\n    return this.a[i + j * 3];\r\n  }\r\n\r\n  set(i, j, value) {\r\n    this.a[i + j * 3] = value;\r\n    return this;\r\n  }\r\n\r\n  setIdentity() {\r\n    return this.setTransform(\r\n      1,0,0,\r\n      0,1,0,\r\n      0,0,1\r\n    );\r\n  }\r\n\r\n  setTransform(a, b, c, d, e, f, g, h, i) {\r\n\r\n    this.a[0] = a;\r\n    this.a[1] = b;\r\n    this.a[2] = c; // 0\r\n\r\n    this.a[3] = d;\r\n    this.a[4] = e;\r\n    this.a[5] = f; // 0\r\n\r\n    this.a[6] = g; // x\r\n    this.a[7] = h; // y\r\n    this.a[8] = i;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  translate(x, y) {\r\n\r\n\r\n  /* | a | b | x | * | 0 | 2 | 4 |\r\n  *  | c | d | y | * | 1 | 3 | 5 |\r\n\r\n  * | 0 | 3 | 6 | * | a | c | x |\r\n  * | 1 | 4 | 7 | * | b | d | y |\r\n  * | 2 | 5 | 8 |\r\n  */\r\n    // 4 = 0 * x * 2 * y + 4\r\n    // 5 = 1 * x * 3 * y + 5\r\n\r\n    // 6 = 1 * x + 3 * y + 5\r\n    // 7 = 1 * x + 4 * y + 7\r\n    this.a[6] = this.a[0] * x + this.a[3] * y + this.a[6];\r\n    this.a[7] = this.a[1] * x + this.a[4] * y + this.a[7];\r\n    return this;\r\n  }\r\n\r\n  scale(x, y) {\r\n\r\n    this.a[0] *= x; // a\r\n    this.a[1] *= x; // b\r\n\r\n    this.a[3] *= y; // c\r\n    this.a[4] *= y; // d\r\n\r\n    this.a[6] *= x; // x\r\n    this.a[7] *= y; // y\r\n    return this;\r\n\r\n  }\r\n\r\n  rotate(radianAngle) {\r\n    let cos = Math.cos(radianAngle);\r\n    let sin = Math.sin(radianAngle);\r\n\r\n    return this.radianRotate(cos, sin);\r\n }\r\n\r\n radianRotate(cos, sin) {\r\n return this.transform(cos, sin, -sin, cos, 0, 0);\r\n }\r\n\r\n transform(a, b, c, d, x, y) {\r\n  let a00 = this.a[0]; // a\r\n  let a01 = this.a[1]; // b\r\n\r\n  let a10 = this.a[3]; // c\r\n  let a11 = this.a[4]; // d\r\n\r\n  let a20 = this.a[6]; // x\r\n  let a21 = this.a[7]; // y\r\n\r\n  this.a[0] = a * a00 + b * a10; // a * a0 + b * c0;\r\n  this.a[1] = a * a01 + b * a11; // a * b0 + b * d0;\r\n\r\n  this.a[3] = c * a00 + d * a10; // c * a0 + d * c0;\r\n  this.a[4] = c * a01 + d * a11; // c * b0 + d * d0;\r\n\r\n  this.a[6] = x * a00 + y * a10 + a20; // x * a0 + y * c0 + x0;\r\n  this.a[7] = x * a01 + y * a11 + a21; // x * b0 + y * d0 + y0;\r\n\r\n  return this;\r\n }  \r\n\r\n setModelMatrix(position, scale, rotation, origin) {\r\n    this.a[0] = rotation.x * scale.x; // a\r\n    this.a[1] = rotation.y * scale.x; // b\r\n    this.a[3] = -rotation.y * scale.y; // c\r\n    this.a[4] =  rotation.x * scale.y; // d\r\n    this.a[6] = position.x; // x\r\n    this.a[7] = position.y; // y\r\n\r\n    if (origin !== undefined) {\r\n      //this.a[6] -= origin.x * this.a[0] + origin.y * this.a[3];\r\n      //this.a[7] -= origin.y * this.a[1] + origin.y * this.a[4];\r\n    }\r\n\r\n    return this;\r\n    /*\r\n    a  =  transform._cosSin.x * transform.scale.x;\r\n    b  = transform._cosSin.y * transform.scale.x;\r\n    c  = -transform._cosSin.y * transform.scale.y;\r\n    d  =  transform._cosSin.x * transform.scale.y;\r\n    x =  transform.position.x;\r\n    y =  transform.position.y;\r\n\r\n    x -= transform.origin.x * a + transform.origin.y * c;\r\n    y -= transform.origin.y * b + transform.origin.y * d;\r\n    */\r\n\r\n    \r\n }\r\n\r\n\r\n multiply(other) {\r\n\r\n    // faster way\r\n    let a00 = this.a[0]; // a - 0\r\n    let a01 = this.a[1]; // b - 1\r\n    let a10 = this.a[3]; // c - 3\r\n    let a11 = this.a[4]; // d - 4\r\n    let a20 = this.a[6]; // x - 6\r\n    let a21 = this.a[7]; // y - 7\r\n\r\n    this.a[0] = other.a[0] * a00 + other.a[1] * a10; // a1 * a0 + b1 * c0;\r\n    this.a[1] = other.a[0] * a01 + other.a[1] * a11; // a1 * b0 + b1 * d0;\r\n\r\n    this.a[3] = other.a[3] * a00 + other.a[4] * a10; // c1 * a0 + d1 * c0;\r\n    this.a[4] = other.a[3] * a01 + other.a[4] * a11; // c1 * b0 + d1 * d0;\r\n\r\n    this.a[6] = other.a[6] * a00 + other.a[7] * a10 + a20; // x1 * a0 + y1 * c0 + x0;\r\n    this.a[7] = other.a[6] * a01 + other.a[7] * a11 + a21; // x1 * b0 + y1 * d0 + y0;\r\n\r\n    return this;\r\n }\r\n\r\n concat(other) {\r\n\r\n  let a = this.a[0]; // a - 0\r\n  let b = this.a[1]; // b - 1\r\n  let c = this.a[3]; // c - 3\r\n  let d = this.a[4]; // d - 4\r\n  let x = this.a[6]; // x - 6\r\n  let y = this.a[7]; // y - 7\r\n\r\n  this.a[0] = a * other.a[0] + b * other.a[3]; // a * pt.a + b * pt.c;\r\n  this.a[1] = a * other.a[1] + b * other.a[4]; // a * pt.b + b * pt.d;\r\n\r\n  this.a[3] = c * other.a[0] + d * other.a[3]; // c * pt.a + d * pt.c;\r\n  this.a[4] = c * other.a[1] + d * other.a[4]; // c * pt.b + d * pt.d;\r\n\r\n  this.a[6] = x * other.a[0] + y * other.a[3] + other.a[6]; // x * pt.a + y * pt.c + pt.x;\r\n  this.a[7] = x * other.a[1] + y * other.a[4] + other.a[7]; // x * pt.b + y * pt.d + pt.y;\r\n\r\n  return this;\r\n }\r\n\r\n transpose() {\r\n  return this.setAll(\r\n    mat.a[0], mat.a[3], mat.a[6],\r\n    mat.a[1], mat.a[4], mat.a[7],\r\n    mat.a[2], mat.a[5], mat.a[8],\r\n  );\r\n }\r\n\r\n toString() {\r\n  let str = \"\";\r\n   for(let y = 0; y < 3; y++) {\r\n      for(let x = 0; x < 3; x++) {\r\n        let val = this.at(x, y); \r\n        //str += val.toString() + \" \";\r\n        //console.log(\"---- \" + (x + y * 3).toString());\r\n        str += val + \" \";\r\n      }\r\n      str += \"\\n\"\r\n   }\r\n\r\n   return str;\r\n    \r\n }\r\n \r\n \r\n static identity() { return new Matrix(1); }\r\n\r\n static zero() { return new Matrix(0); }\r\n\r\n static transpose(mat) {\r\n  let copy = Matrix.zero;\r\n  return copy.setAll(\r\n    mat.a[0], mat.a[3], mat.a[6],\r\n    mat.a[1], mat.a[4], mat.a[7],\r\n    mat.a[2], mat.a[5], mat.a[8],\r\n  );\r\n\r\n }\r\n\r\n static multiplySlow(a, b) {\r\n    var mat = Matrix.zero(); // zeroes\r\n    let val;\r\n\r\n    for (let i = 0; i < 3; ++i)\r\n    {\r\n      for (let j = 0; j < 3; ++j)\r\n      {\r\n        for (let k = 0; k < 3; ++k)\r\n        {\r\n          val = mat.at(i, k);\r\n          val += a.at(i, j) * b.at(j, k);\r\n          mat.set(i, k, val);\r\n        }\r\n      }\r\n    }\r\n\r\n    return mat;\r\n }\r\n\r\n}\r\n\r\nmodule.exports = Matrix;","\r\n/**\r\n* Simple class for rectangle. Usage for collision.\r\n* @class Rect\r\n* @constructor\r\n*/\r\n\r\nexport default class Rect {\r\n  \r\n  constructor(x, y, width, height) {\r\n    this.x = x || 0;\r\n    this.y = y || 0;\r\n    this.width = width || 0;\r\n    this.height = height || 0;\r\n  }\r\n\r\n  get center() {\r\n    var vec = {};\r\n    vec.x = this.x + this.width / 2;\r\n    vec.y = this.y + this.height / 2;\r\n    return vec;\r\n  }\r\n\r\n  intersects(rect) {\r\n      return Rect.intersects(this, rect);\r\n  }\r\n\r\n  contains(x,y) {\r\n    return Rect.contains(this,x,y);\r\n  }\r\n\r\n  set(x,y,width,height) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = width;\r\n    this.height = height;\r\n  }\r\n\r\n  static intersects(rect1, rect2) {\r\n\r\n    if (rect1.width <= 0 || rect1.height <= 0 || rect2.width <= 0 || rect2.height <= 0)\r\n      return false;\r\n  \r\n    return    !(rect1.x > rect2.x + rect2.width ||\r\n               rect1.x + rect1.width < rect2.x ||\r\n               rect1.y > rect2.y + rect2.height ||\r\n               rect1.y + rect1.height < rect2.y);\r\n  }\r\n\r\n  static contains(rect, x, y) {\r\n  \r\n    if (rect.width <= 0 && rect.height <= 0 )\r\n      return false;\r\n  \r\n    return (x > rect.x &&\r\n            x < rect.x + rect.width &&\r\n            y >= rect.y &&\r\n            y < rect.y + rect.height);\r\n  \r\n  }\r\n  \r\n  static intersectionArea(rect1,rect2) {\r\n  \r\n      var out = new scintilla.Rect();\r\n  \r\n      if (scintilla.Rect.intersects(rect1,rect2)) {\r\n  \r\n         out.y = Math.max(a.y, b.y);\r\n         out.x = Math.max(a.x, b.x);\r\n         out.width = Math.min(a.x + a.width, b.x + b.width) - out.x;\r\n         out.height = Math.min(a.y + a.height, b.y + b.height) - out.y;\r\n  \r\n      }\r\n  \r\n      return out;\r\n  \r\n  }\r\n  \r\n\r\n}\r\n\r\n\r\n\r\n","\r\n\r\nimport MathUtils from './mathutils'\r\n\r\n/**\r\n* Class for points and vectors.\r\n* @class Vector\r\n* @constructor\r\n*/\r\nexport default class Vector {\r\n  \r\n  constructor(x,y) {\r\n\r\n    this.x = x || 0;\r\n    this.y = y || 0;\r\n  }\r\n\r\n  /*\r\n  set x(value) {\r\n    this.x = value;\r\n    return this.x;\r\n  }\r\n  get x() {return this.x;}\r\n  set y(value) {\r\n    this.y = value;\r\n    return this.y;\r\n  }\r\n  get y() {return this.y;}*/\r\n\r\n  set(x,y) {\r\n\r\n    this.x = x;\r\n    this.y = y || x\r\n\r\n  }\r\n\r\n  move(x,y) {\r\n\r\n    this.x += x;\r\n    this.y += y;\r\n\r\n  }\r\n\r\n  scale(x, y) {\r\n\r\n    this.x *= x;\r\n    this.y *= y || x;\r\n    return this;\r\n\r\n  }\r\n\r\n  rotate(radians) {\r\n\r\n    let x = this.x;\r\n    let y = this.y;\r\n    this.x = x * Math.cos(radians) - y * Math.sin(radians);\r\n    this.y = x * Math.sin(radians) + y * Math.cos(radians);\r\n    return this;\r\n\r\n  }\r\n\r\n  rotateAround(radians, other) {\r\n\r\n    /*var x = this.x;\r\n    var y = this.y;*/\r\n    let dx = this.x-other.x;\r\n    let dy = this.y-other.y;\r\n\r\n    let c = Math.cos(radians);\r\n    let s = Math.sin(radians);\r\n\r\n    /*this.x = c * (x-other.x) - s * (y-other.y) + other.x;\r\n    this.y = s * (x-other.x) + c * (y-other.y) + other.y;*/\r\n\r\n\r\n    this.x =  other.x + (c * dx - s * dy);\r\n    this.y =  other.y + (s * dx + c * dy);\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  copy(otherVector) {\r\n\r\n    this.x = otherVector.x;\r\n    this.y = otherVector.y;\r\n    return this;\r\n\r\n  }\r\n\r\n  normalize() {\r\n\r\n    let mag = this.length();\r\n    if (mag > 0) {\r\n      this.x = this.x / mag;\r\n      this.y = this.y / mag;\r\n    }\r\n    return this;\r\n\r\n  }\r\n\r\n  reverse() {\r\n    this.x = -this.x;\r\n    this.y = -this.y;\r\n    return this;\r\n  }\r\n\r\n  add(other) {\r\n    this.x += other.x;\r\n    this.y += other.y;\r\n    return this;\r\n  }\r\n\r\n  sub(other) {\r\n    this.x -= other.x;\r\n    this.y -= other.y;\r\n    return this;\r\n  }\r\n\r\n  perp() {\r\n\r\n    let x = this.x;\r\n    this.x = this.y;\r\n    this.y = -x;\r\n    return this;\r\n  }\r\n\r\n  dot(other) {\r\n    return Vector.dot(this,other);\r\n  }\r\n\r\n  project(other) {\r\n    return Vector.project(this,other);\r\n  }\r\n\r\n  clone() {\r\n    return new Vector(this.x,this.y);\r\n  }\r\n\r\n  length() {\r\n    return Math.sqrt(this.squaredLenght());\r\n  }\r\n\r\n  squaredLenght() {\r\n    return Vector.dot(this,this);\r\n  }\r\n\r\n  static abs(vector) {\r\n    return new Vector(Math.abs(vector.x), Math.abs(vector.y));\r\n  }\r\n\r\n  static scalar(a, b) {\r\n    return a.x * b.y - a.y * b.x;\r\n  }\r\n\r\n  static distance(a, b) {\r\n    return MathUtils.distance(a.x,a.y,b.x,b.y);\r\n  }\r\n\r\n  static angleBetween(a, b) {\r\n    return MathUtils.angleBetween(a.x,a.y,b.x,b.y);\r\n  }\r\n\r\n  static dot(a, b) {\r\n    return (a.x * b.x) + (a.y * b.y);\r\n  }\r\n\r\n  static project(a,b) {\r\n    let dp = Vector.dot(a,b);\r\n    var proj = new Vector(\r\n      ( dp / (b.x*b.x + b.y*b.y) ) * b.x,\r\n      ( dp / (b.x*b.x + b.y*b.y) ) * b.y\r\n    );\r\n    return proj;\r\n  };\r\n\r\n  // project for unit vector\r\n  static projectNormal(a,b) {\r\n    let dp = Vector.dot(a,b);\r\n    let proj = new Vector(   dp / b.x,   dp / b.y );\r\n    return proj;\r\n  };\r\n\r\n  static reflect(vec,axis) {\r\n\r\n    let r = Vector.project(vec,axis);\r\n    r.scale(2);\r\n    r.sub(vec);\r\n    return r;\r\n\r\n  };\r\n\r\n  static reflectNormal(vec,axis) {\r\n\r\n    let r = Vector.projectNormal(vec,axis);\r\n    r.scale(2);\r\n    r.sub(vec);\r\n    return r;\r\n\r\n  };\r\n\r\n\r\n  static lerp(a, b, t) {\r\n    let vec = new Vector(\r\n      MathUtils.lerp(a.x,b.x,t),\r\n      MathUtils.lerp(a.y,b.y,t)\r\n    );\r\n    return vec;\r\n  }\r\n\r\n  get magnitude() {return Math.sqrt((this.x * this.x) + (this.y * this.y));}\r\n  get normal() {\r\n    let mag = this.magnitude;\r\n    let vec = new tobiJS.Vector(this.x / mag,this.y / mag);\r\n    return vec;\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = Vector;","\r\n\r\nexport default function ComputeDelimiterPoint(x, y, rotation, anchor) {\r\n\r\n    let coord = {x:0, y:0};\r\n\r\n    if (anchor === undefined) {\r\n        coord.x = (x * rotation.x) - (y * rotation.x);\r\n        coord.y = (x * rotation.y) - (y * rotation.y);\r\n    } else {\r\n        coord.x = anchor.x + ((x-anchor.x) * rotation.x) - ((y-anchor.y) * rotation.x);\r\n        coord.y = anchor.y - ((x-anchor.x) * rotation.y) - ((y-anchor.y) * rotation.y);\r\n    }\r\n\r\n    return coord;\r\n}","\r\nimport Vector from '../../math/vector'\r\nimport Matrix from '../../math/matrix'\r\nimport BoundingBox from '../../math/boundingbox'\r\n\r\nexport default class Transform {\r\n\r\n\r\n  constructor() {\r\n\r\n    this.matrix = new Matrix(1);\r\n    this.position = new Vector(0,0);\r\n    this.scale = new Vector(1,1);\r\n    this.origin = new Vector(0,0);\r\n    this.angle = 0;\r\n    this.rotation = 0;\r\n    this._cosSin = {x:1,y:0};\r\n    this._oldRotation = -1;\r\n    this._isDirty = true;\r\n    //this.worldPosition = new Vector(0,0);\r\n    //this.worldScale =  new Vector(1,1);\r\n    //this.worldRotation = 0;\r\n    //this.bounds = new BoundingBox(0,0,1,1); // the full bounds of the node - defined by render\r\n    //this.globalBounds = new BoundingBox(0,0,1,1); // defined by render\r\n  }\r\n\r\n    destroy() {\r\n\r\n      delete this.position;\r\n      delete this.scale;\r\n      delete this.matrix;\r\n      delete this.worldPosition;\r\n      delete this.worldScale;\r\n      delete this.origin;\r\n      delete this.bounds;\r\n      delete this.globalBounds;\r\n      delete this._cosSin;\r\n\r\n    }\r\n\r\n    reset() {\r\n      this.matrix.setIdentity();\r\n      this._isDirty = true;\r\n      this._cosSin.x = 1;\r\n      this._cosSin.y = 0;\r\n      this.position.set(0,0);\r\n      this.angle = 0;\r\n      this.rotation = 0;\r\n      this._oldRotation = 0;\r\n      this.origin.set(0,0);\r\n      this.scale.set(0,0);\r\n\r\n    }\r\n  }\r\n\r\n","import ComputeDelimiterPoint from \"./computeDelimiterPoint\";\r\n\r\n\r\nexport default function UpdateBounds(bounds, x, y, width, height, cosSin) {\r\n\r\n    let coords = [];\r\n\r\n    coords[0] = ComputeDelimiterPoint( x, y, cosSin);\r\n    coords[1] = ComputeDelimiterPoint( x + width,  y, cosSin);\r\n    coords[2] = ComputeDelimiterPoint( x , y + height, cosSin);\r\n    coords[3] = ComputeDelimiterPoint( x + width , y + height, cosSin);\r\n  \r\n    bounds.min.x = Math.min(coords[0].x,coords[1].x,coords[2].x,coords[3].x);\r\n    bounds.min.y = Math.min(coords[0].y,coords[1].y,coords[2].y,coords[3].y);\r\n    bounds.max.x = Math.max(coords[0].x,coords[1].x,coords[2].x,coords[3].x);\r\n    bounds.max.y = Math.max(coords[0].y,coords[1].y,coords[2].y,coords[3].y);\r\n\r\n}","import Renderable from \"../renderables/renderable\";\r\n\r\nexport default function UpdateModules(modulesManager, game)\r\n{\r\n    let size = modulesManager._pendingModules.size;\r\n\r\n    if (size > 0)\r\n    {\r\n        // add pending modules\r\n        modulesManager._pendingModules.each(mod => {\r\n\r\n            mod.init(modulesManager.entity, game);\r\n\r\n            modulesManager.attached.set(mod.type, mod);\r\n\r\n            // RENDERABLES\r\n            if (mod instanceof Renderable)\r\n            {\r\n                game.system.render.layer.renderLayers.at(0).add(mod);\r\n            }\r\n        });\r\n\r\n        modulesManager._pendingModules.clear();\r\n    }\r\n\r\n    let entity = modulesManager.entity;\r\n\r\n\r\n    var render = modulesManager.attached.render;\r\n    if (render !== undefined || render != null)\r\n        render.moduleUpdate();\r\n    \r\n}\r\n\r\n","\r\nimport MathUtils from '../../math/mathutils'\r\nimport Matrix from '../../math/matrix'\r\n\r\n/*\r\n\r\n* | a | b | x |\r\n* | c | d | y |\r\n* | 0 | 0 | 1 |\r\n\r\n* | 0 | 3 | 6 | * | a | d | x |\r\n* | 1 | 4 | 7 | * | b | e | y |\r\n* | 2 | 5 | 8 | * | c | f | 1 |\r\n\r\n*/\r\n\r\nexport default function UpdateTransform(transform, parentTransform) {\r\n\r\n    //if (parentMatrix === undefined) parentMatrix = null;\r\n\r\n    if (!transform._isDirty && !parentTransform._isDirty)\r\n        return;\r\n\r\n\r\n    let a, b, c, d, x, y;\r\n    let wt = transform.matrix;\r\n\r\n    transform.rotation = transform.angle * MathUtils.degToRad;\r\n\r\n     // if (transform.rotation % MathUtils.TAU) {\r\n      \r\n\r\n        if (transform.rotation !== transform._oldRotation)\r\n        {\r\n            transform._oldRotation = transform.rotation;\r\n            transform._cosSin.y = Math.sin(transform.rotation);\r\n            transform._cosSin.x = Math.cos(transform.rotation);\r\n        }\r\n\r\n\r\n       \r\n\r\n        transform.matrix.setModelMatrix(\r\n          transform.position, \r\n          transform.scale, \r\n          transform._cosSin, \r\n          transform.origin)\r\n        .concat(parentTransform.matrix);\r\n\r\n\r\n\r\n     // } else {\r\n\r\n        /*a  = transform.scale.x;\r\n        d  = transform.scale.y;\r\n        x =  transform.position.x;\r\n        y =  transform.position.y;\r\n        x -= transform.origin.x * a;\r\n        y -= transform.origin.y * d;\r\n\r\n        wt.a  = a  * pt.a;\r\n        wt.b  = a  * pt.b;\r\n        wt.c  = d  * pt.c;\r\n        wt.d  = d  * pt.d;\r\n        wt.x = x * pt.a + y * pt.c + pt.x;\r\n        wt.y = x * pt.b + y * pt.d + pt.y;*/\r\n\r\n\r\n    //  }\r\n\r\n      //transform.worldPosition.set(wt.x ,wt.y);\r\n      //transform.worldScale.set(Math.sqrt(wt.a * wt.a + wt.b * wt.b), Math.sqrt(wt.c * wt.c + wt.d * wt.d));\r\n      //transform.worldRotation = Math.atan2(-wt.c, wt.d);\r\n    \r\n}\r\n","\r\nimport MathUtils from '../../math/mathutils'\r\nimport Vector from '../../math/vector'\r\nimport ComputeDelimiterPoint from './computeDelimiterPoint';\r\n\r\n\r\n\r\nexport default function UpdateTransformBounds(bounds, frame, transform) {\r\n    \r\n  let coords = [];\r\n  let scale = Vector.abs(transform.scale);\r\n  let pos = transform.position;\r\n  let anchor = transform.origin;\r\n  let size = {\r\n    x : frame.width * scale.x,\r\n    y : frame.height * scale.y\r\n  };\r\n\r\n  anchor.x *= scale.x;\r\n  anchor.y *= scale.y;\r\n  pos.x -= anchor.x;\r\n  pos.y -= anchor.y;\r\n  anchor.x += pos.x;\r\n  anchor.y += pos.y;\r\n  \r\n  coords[0] = ComputeDelimiterPoint( pos.x, pos.y, rotation, anchor);\r\n  coords[1] = ComputeDelimiterPoint( pos.x + size.x,  pos.y, rotation, anchor);\r\n  coords[2] = ComputeDelimiterPoint( pos.x , pos.y + size.y, rotation, anchor);\r\n  coords[3] = ComputeDelimiterPoint( pos.x + size.x , pos.y + size.y, rotation, anchor);\r\n\r\n  bounds.min.x = Math.min(coords[0].x,coords[1].x,coords[2].x,coords[3].x);\r\n  bounds.min.y = Math.min(coords[0].y,coords[1].y,coords[2].y,coords[3].y);\r\n  bounds.max.x = Math.max(coords[0].x,coords[1].x,coords[2].x,coords[3].x);\r\n  bounds.max.y = Math.max(coords[0].y,coords[1].y,coords[2].y,coords[3].y);\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n  // position (vector)\r\n  // scale (vector)\r\n  // rotation (vector x = cos, y = sin)\r\n  /*\r\n  setup(pos, scale, rotation, anchor, width, height) {\r\n\r\n    var coords = [];\r\n    var negx = 1;\r\n    var negy = 1;\r\n\r\n    if (scale.x < 0)\r\n          negx = -1;\r\n    if (scale.y < 0)\r\n          negy = -1;\r\n\r\n\r\n\r\n    this.size.x = width*scale.x*negx;\r\n    this.size.y = height*scale.y*negy;\r\n    anchor.x *= scale.x*negx;\r\n    anchor.y *= scale.y*negy;\r\n    pos.x -= anchor.x;\r\n    pos.y -= anchor.y;\r\n    anchor.x += pos.x;\r\n    anchor.y += pos.y;\r\n\r\n    var callback = null;\r\n\r\n    if (rotation instanceof  scintilla.Vector)\r\n        callback = this['calcCoordsCosSin'];\r\n      else\r\n        callback = this['calcCoords'];\r\n\r\n    coords[0] = callback( pos.x, pos.y, anchor, rotation);\r\n    coords[1] = callback( pos.x + this.size.x,  pos.y, anchor,rotation);\r\n\r\n    coords[2] = callback( pos.x , pos.y + this.size.y, anchor,rotation);\r\n    coords[3] = callback( pos.x + this.size.x , pos.y + this.size.y,anchor, rotation);\r\n\r\n\r\n\r\n    this.min.x = Math.min(coords[0].x,coords[1].x,coords[2].x,coords[3].x);\r\n    this.min.y = Math.min(coords[0].y,coords[1].y,coords[2].y,coords[3].y);\r\n\r\n    this.max.x = Math.max(coords[0].x,coords[1].x,coords[2].x,coords[3].x);\r\n    this.max.y = Math.max(coords[0].y,coords[1].y,coords[2].y,coords[3].y);\r\n    this.center.x = pos.x+(this.max.x-this.min.x)/2;\r\n    this.center.y = pos.y+(this.max.y-this.min.y)/2;\r\n    this.box.set(this.min.x,this.min.y,this.max.x-this.min.x,this.max.y-this.min.y);\r\n\r\n  }\r\n\r\n\r\n  setByGameObject(gameObject, local) {\r\n\r\n    //if (gameObject.render != null) {\r\n\r\n      if (local) {\r\n        this.setup(gameObject.position,\r\n                gameObject.scale,\r\n                gameObject._cosSin,\r\n                gameObject.render.origin,\r\n                gameObject.render.width,\r\n                gameObject.render.height\r\n              );\r\n      } else {\r\n\r\n        var frame = gameObject.component['render'].frame;\r\n\r\n        var pos = {x:gameObject.worldPosition.x, y:gameObject.worldPosition.y};\r\n        var org = {\r\n          x:gameObject.origin.x * frame.width,\r\n          y:gameObject.origin.y * frame.height};\r\n\r\n        pos.x += gameObject.game.camera.view.x;\r\n        pos.y += gameObject.game.camera.view.y;\r\n\r\n        this.setup(pos,\r\n                gameObject.worldScale,\r\n                gameObject.worldRotation,\r\n                org,\r\n                frame.width,\r\n                frame.height\r\n              );\r\n      }\r\n\r\n\r\n    return this;\r\n\r\n\r\n  }\r\n\r\n\r\n  setByShape(shape,position) {\r\n\r\n\r\n    var minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;\r\n    var type = shape.getType();\r\n\r\n    if (type == \"Polygon\") {\r\n\r\n      var points = shape.getPoints();\r\n\r\n      points.forEach(function (point) {\r\n          minX = Math.min(minX, point.x);\r\n          minY = Math.min(minY, point.y);\r\n          maxX = Math.max(maxX, point.x);\r\n          maxY = Math.max(maxY, point.y);\r\n\r\n      });\r\n    }\r\n\r\n    if (position !== undefined) {\r\n      minX += position.x;\r\n      minY += position.y;\r\n      maxX += position.x;\r\n      maxY += position.y;\r\n    }\r\n\r\n\r\n    this.min.set(minX,minY);\r\n    this.max.set(maxX,maxY)\r\n    this.box.set(minX,minY,maxX-minX,maxY-minY);\r\n\r\n  }\r\n\r\n  calcCoordsCosSin(x, y, anchor, cos_and_sin) {\r\n\r\n    var coord = {x:0,y:0};\r\n\r\n    coord.x = anchor.x + ((x-anchor.x) * cos_and_sin.x) - ((y-anchor.y) * cos_and_sin.y);\r\n    coord.y = anchor.y - ((x-anchor.x) * cos_and_sin.y) - ((y-anchor.y) * cos_and_sin.x);\r\n\r\n      return coord;\r\n\r\n  }\r\n\r\n  calcCoords(x,y,anchor,rotation) {\r\n\r\n    var coord = {x:0,y:0};\r\n\r\n    coord.x = anchor.x + ((x-anchor.x) * Math.cos(rotation)) - ((y-anchor.y) * Math.sin(rotation));\r\n    coord.y = anchor.y - ((x-anchor.x) * Math.sin(rotation)) - ((y-anchor.y) * Math.cos(rotation));\r\n\r\n      return coord;\r\n\r\n  }*/","\r\nmodule.exports = {\r\n    Module : require('./module'),\r\n    ModuleProvider : require('./moduleProvider'),\r\n    ModuleAttacher : require('./moduleAttacher'),\r\n\r\n    Transform : require('./core/transform'),\r\n    Renderables : require('./renderables')\r\n}","\r\nexport default class Module\r\n{\r\n    constructor(name, moduleManager)\r\n    {\r\n        this._type = name || \"none\";\r\n        this._enabled = true;\r\n        this.entity = null;\r\n        this.moduleManager = moduleManager || undefined;\r\n\r\n        if (moduleManager !== undefined)\r\n        {\r\n            this.entity = moduleManager.entity;\r\n        }\r\n        //this.game = moduleManager.game || null;\r\n    }\r\n\r\n    init(instace, game) {\r\n\r\n        this.entity = instace;\r\n        //this.game = game;\r\n        this.moduleManager = instace.modules;\r\n\r\n    }\r\n\r\n    get type() {return this._type;}\r\n    get enabled() {return this._enabled;}\r\n    set enabled(value) {\r\n        value = !!value;\r\n\r\n        if (value !== this._enabled)\r\n        {\r\n            this._enabled = value;\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = Module;","import ModuleProvider from \"./moduleProvider\";\r\n\r\n\r\nexport default class ModuleAttacher\r\n{\r\n    constructor(moduleManager) {\r\n        this.moduleManager = moduleManager;\r\n    }\r\n\r\n    sprite(tag) {\r\n        return ModuleProvider.attach(this.moduleManager, 'sprite', tag);\r\n    }\r\n}","\r\nimport DataMap from '../structures/map'\r\nimport DataList from '../structures/list'\r\nimport ModuleAttacher from './moduleAttacher'\r\n\r\n\r\nexport default class ModuleManager\r\n{\r\n    constructor(entity)\r\n    {\r\n        this.entity = entity || null;\r\n        this.attached = new DataMap();\r\n        this._pendingModules = new DataList();\r\n        this.attach = new ModuleAttacher(this);\r\n    }\r\n\r\n    detach(moduleName, index)\r\n    {\r\n        \r\n    }\r\n\r\n\r\n\r\n} ","\r\n\r\nimport DataMap from '../structures/map'\r\n\r\n\r\nclass ModuleProviderManager\r\n{\r\n    constructor()\r\n    {\r\n        this.proxyModules = new DataMap();\r\n    }\r\n\r\n    attach(manager, moduleName, args)\r\n    {\r\n        let modules = manager.attached;\r\n\r\n        if (modules.has(moduleName))\r\n            throw new Error('ModuleManager.attach: Could not attach module ' + moduleName + '. Already exists');\r\n\r\n        if (!this.proxyModules.has(moduleName))\r\n            throw new Error('ModuleManager.attach: Module type ' + moduleName + ' don\\'t exists.');\r\n\r\n        var mod = this.proxyModules.get(moduleName)(manager, args);\r\n        manager._pendingModules.push(mod);\r\n        return mod;\r\n    }\r\n\r\n    register(moduleName, func)\r\n    {\r\n        if (!ModuleProvider.proxyModules.has(moduleName))\r\n        ModuleProvider.proxyModules.set(moduleName, func); // { type: moduleType, func: func }\r\n        \r\n    }    \r\n}\r\n\r\nvar ModuleProvider = new ModuleProviderManager();\r\n\r\nexport default ModuleProvider;","\r\n\r\nfunction DrawImage(context, source, transform, frame)\r\n{\r\n    \r\n\r\n    if (context === undefined) return false;\r\n\r\n    if (source === undefined || source == null) return false;\r\n\r\n   \r\n\r\n    let resolution = 1;\r\n    let matrix = transform.matrix;\r\n    let origin = transform.origin;\r\n    \r\n    // destination\r\n    let dx = origin.x * -frame.width / resolution;\r\n    let dy = origin.y * -frame.height / resolution;\r\n\r\n  \r\n\r\n    context.setTransform(\r\n        matrix.a[0], matrix.a[1], // 2\r\n        matrix.a[3], matrix.a[4], // 5\r\n        matrix.a[6] * resolution,\r\n        matrix.a[7] * resolution);\r\n    \r\n    //context.globalAlpha = this.alpha;\r\n    \r\n    context.drawImage(\r\n            source, // image\r\n            frame.x, // sx - pos crop x\r\n            frame.y, // sy - pos crop y\r\n            frame.width, // sWidth - crop width\r\n            frame.height, // sHeight - crop height\r\n            dx, // destination x\r\n            dy, // destination y\r\n            frame.width / resolution,\r\n            frame.height / resolution\r\n            );\r\n      \r\n        return true;\r\n        \r\n}\r\n\r\n\r\nexport default DrawImage;","\r\nmodule.exports = {\r\n    Renderable : require('./renderable'),\r\n    Sprite : require('./sprite'),\r\n    \r\n}","\r\nimport BoundingBox from '../../math/boundingbox';\r\n//import { EntityType } from '../entitytype';\r\nimport Module from '../module';\r\n\r\nexport default class Renderable extends Module\r\n{\r\n    constructor(moduleManager)\r\n    {\r\n        super('render', moduleManager);\r\n\r\n        //this.moduleName = \"Renderable\";\r\n        this._layerID = 0;\r\n        this._depth = 0;\r\n        this._visible = true;\r\n        this._alpha = 1;\r\n        this._depthDirty = true; \r\n        this.bounds = new BoundingBox();\r\n        this.source = null;\r\n\r\n        \r\n        //this.type = EntityType.Renderable;\r\n    }\r\n\r\n    get depth() { return this._depthSorting; }\r\n    get visible() { return this._visible; }\r\n    get layerName() { }\r\n    get layer() { return this._layerID; }\r\n    get alpha() { return this._alpha; }\r\n    set depth(value) {\r\n        if (value != this._depthSorting)\r\n        {\r\n            this._depthSorting = value;\r\n            this._depthDirty = true;\r\n        }\r\n        return this;\r\n    }\r\n    set visible(value) {\r\n        this._visible = value;\r\n        return this;\r\n    }   \r\n    set layer(value) {\r\n        if (this.game != null)\r\n        {\r\n            if (value === 'number')\r\n            {\r\n                //this.game.render.get\r\n            }\r\n        }\r\n    }   \r\n\r\n    set alpha(value) {\r\n        this._alpha = alpha;\r\n        return this;\r\n    }\r\n\r\n    setSource(source)\r\n    {\r\n        if (source === undefined) return;\r\n\r\n        if (this.source != source)\r\n            this.source = source;\r\n    }\r\n\r\n    render(context, matrix)\r\n    {\r\n        if (!this._visible)\r\n            return;\r\n    }\r\n\r\n}","import Renderable from \"./renderable\";\r\nimport Rect from \"../../math/rect\";\r\nimport DrawImage from \"./drawImage\";\r\nimport ModuleProvider from \"../moduleProvider\";\r\nimport UpdateTransformBounds from '../core/updateTransformBounds'\r\n\r\n\r\nexport default class Sprite extends Renderable {\r\n\r\n    constructor(moduleManager)\r\n    {\r\n        super(moduleManager);\r\n\r\n        this._type = \"sprite\";\r\n        this.frame = new Rect();\r\n    }\r\n\r\n    setFrame(x, y, width, height)\r\n    {\r\n        this.frame.set(x,y,width,height);\r\n    }\r\n\r\n    setFrameRect(rect)\r\n    {\r\n        this.frame.set(x,y,width,height);\r\n    }\r\n\r\n    setSprite(tag) {\r\n\r\n        if (this.entity != null || this.entity !== undefined) {\r\n            var sprite = this.entity.game.system.cache.getAsset('images',tag);\r\n           \r\n            if (sprite != null) {\r\n                this.setSource(sprite.data, true);\r\n            }\r\n        } else {\r\n            throw new Error(\"Sprite.setSprite: Can not set Sprite. The entity is not in the game\");\r\n        }\r\n        \r\n    }\r\n\r\n    setSource(image, changeFrame) {\r\n\r\n        if (changeFrame === undefined) changeFrame = false;\r\n      \r\n        if (this.source != image)\r\n          this.source = image;\r\n      \r\n        if (changeFrame)\r\n            this.setFrame(0,0,this.source.width,this.source.height);\r\n      \r\n      \r\n    }\r\n\r\n    moduleUpdate() {\r\n\r\n        if (!this.entity.transform._isDirty)\r\n            return;\r\n\r\n        UpdateTransformBounds(this.bounds, this.frame, this.entity.transform);\r\n    }\r\n\r\n    render(context)\r\n    {\r\n        if (!this._visible)\r\n            return false;\r\n\r\n        return DrawImage(context, this.source, this.entity.transform, this.frame);\r\n    }\r\n}\r\n\r\nModuleProvider.register('sprite', function(moduleManager, tag) {\r\n\r\n    var spr = new Sprite(moduleManager);\r\n\r\n    if (tag !== undefined)\r\n    {   \r\n        spr.setSprite(tag)\r\n    } \r\n\r\n\r\n    return spr;\r\n\r\n});","\r\nexport default class Debug {\r\n  \r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    this.draw = game.system.draw;\r\n    this.context = game.system.render.context;\r\n    this.x = 8;\r\n    this.y = 12;\r\n    this.lineHeight = 14;\r\n    this.column = 100;\r\n    this.font =\"10px Verdana\";\r\n    this.textColor = 'white';\r\n    this.bgcolor = 'black';\r\n    this.textShadow = 'black';\r\n\r\n  }\r\n\r\n  test() {\r\n\r\n    //this.context.setTransform(1, 0, 0, 1, 0, 0);\r\n    this.context.strokeStyle = this.bgcolor;\r\n    this.context.font = this.font;\r\n    this.draw.alpha(0.5);\r\n    this.draw.rectangle(0,0,this.game.width,(14 * 4)+ 16,this.bgcolor);\r\n    this.draw.alpha(1);\r\n    this.drawLine(\"FPS: \" + Math.round(this.game.time.fps) + \" / \" + this.game.time.desiredFps);\r\n    //this.drawLine(\"Instances in view: \" + this.game.camera.instancesInView);\r\n    this.drawLine(\"Instances: \" + this.game.system.entityList.length);\r\n    this.drawLine(\"Draw Calls: \" + this.game.system.render.drawCalls);/*this.game.physics.length);*/\r\n    this.x += this.game.width / 2;\r\n    this.y = 12+8;\r\n    //this.drawLine(\"Sounds count \" + this.game.sound.length);\r\n    this.x = 8;\r\n    this.y = 12+8;\r\n\r\n  }\r\n\r\n  drawLine(textLine) {\r\n\r\n    var xx = this.x;\r\n\r\n            this.context.fillStyle = this.textShadow;\r\n            this.context.fillText(textLine, xx + 1, this.y + 1);\r\n            this.context.fillStyle = this.textColor;\r\n\r\n        this.context.fillText(textLine, xx, this.y);\r\n\r\n\r\n    this.y += this.lineHeight;\r\n\r\n  }\r\n\r\n\r\n\r\n}\r\n","\r\nimport SAT from './sat'\r\nimport SATResponse from './satresponse'\r\n\r\nexport default class Physics {\r\n\r\n  \r\n\r\n  constructor(game) {\r\n\r\n    this.game = null;\r\n    this.sat = null;\r\n    this.response = null;\r\n\r\n   \r\n    this.game = game;\r\n    this.colliadables = [];\r\n\r\n  }\r\n\r\n  init() {\r\n\r\n    this.sat = new SAT();\r\n    this.response = new SATResponse();\r\n\r\n  }\r\n\r\n  getColliadables() {\r\n    return this.colliadables;\r\n  }\r\n\r\n  addColliderObj(obj) {\r\n    this.colliadables.push(obj);\r\n  }\r\n\r\n  removeColliderObj(obj) {\r\n\r\n    var i = this.colliadables.indexOf(obj);\r\n\r\n    if(i != -1) {\r\n      this.colliadables.splice(i, 1);\r\n    }\r\n\r\n  }\r\n\r\n  clear() {\r\n\r\n    this.colliadables = [];\r\n    this.colliadables.length = 0;\r\n\r\n  }\r\n\r\n  update(time) {\r\n\r\n    let size = this.colliadables.length;\r\n\r\n    // CHECK COLLISION\r\n    if (size < 2) // at least we must have 2 objects\r\n      return;\r\n\r\n    //var collision = 0;\r\n\r\n    for (var i = 0; i < size; i++) {\r\n\r\n        var objA = this.colliadables[i];\r\n        var shapeA = objA.shape;\r\n\r\n        if (objA._gameObject._selfDestroy || !objA._gameObject.active)\r\n          continue;\r\n\r\n        var jit = i + 1;\r\n\r\n        if (jit >= size)\r\n          break;\r\n\r\n        for (var j = jit; j < size; j++) {\r\n\r\n          var objB = this.colliadables[j];\r\n          var shapeB = objB.shape;\r\n\r\n          if (objB._gameObject._selfDestroy || !objB._gameObject.active)\r\n            continue;\r\n\r\n          // AABB check of the shapes\r\n        if (objB.bounds.box.intersects(objA.bounds.box)) {\r\n\r\n          // check SAT\r\n          if (this.sat[\"test\" + shapeA.getType() + shapeB.getType()].call(this,\r\n            objA,objB,this.response.clear()) === true) {\r\n\r\n\r\n              if (objA._gameObject['onCollision'])\r\n              if (objA._gameObject.onCollision(objB._gameObject,this.response) !== false) {\r\n\r\n\r\n              }\r\n\r\n              if (objB._gameObject['onCollision'])\r\n              if (objB._gameObject.onCollision(objA._gameObject,this.response) !== false) {\r\n\r\n\r\n              }\r\n\r\n          } else\r\n            continue;\r\n          } else\r\n            continue;\r\n        }\r\n      }\r\n  }\r\n\r\n  get length() {return this.colliadables.length;}\r\n\r\n}\r\n\r\n","\r\nimport Vector from '../math/vector' \r\n\r\nexport default class SAT {\r\n\r\n  constructor()\r\n  {\r\n\r\n    this.VECTORS = [];\r\n    for (var v = 0; v < 10; v++) { \r\n      VECTORS.push(new Vector()); \r\n    }\r\n\r\n    this.ARRAYS = [];\r\n    for (var a = 0; a < 5; a++) { \r\n      ARRAYS.push([]); \r\n    }\r\n  }\r\n\r\n  flattenPointsOn(points, normal, result) {\r\n          var min = Number.MAX_VALUE;\r\n          var max = -Number.MAX_VALUE;\r\n          var len = points.length;\r\n          for (var i = 0; i < len; i++) {\r\n              // The magnitude of the projection of the point onto the normal\r\n              var dot = points[i].dot(normal);\r\n              if (dot < min) { min = dot; }\r\n              if (dot > max) { max = dot; }\r\n          }\r\n          result[0] = min;\r\n          result[1] = max;\r\n  };\r\n\r\n  isSeparatingAxis(posA, posB, pointsA, pointsB, axis, response) {\r\n\r\n    var rangeA = ARRAYS.pop();\r\n    var rangeB = ARRAYS.pop();\r\n\r\n    // magnitude between the two polygons\r\n    var offsetV = VECTORS.pop().copy(posB).sub(posA);\r\n    var projectedOffset = offsetV.dot(axis);\r\n\r\n    // Project the polygons onto the axis.\r\n    flattenPointsOn(pointsA, axis, rangeA);\r\n    flattenPointsOn(pointsB, axis, rangeB);\r\n\r\n    // Move B's range to its position relative to A.\r\n    rangeB[0] += projectedOffset;\r\n    rangeB[1] += projectedOffset;\r\n\r\n    // Check if there is a gap. If there is, this is a separating axis and we can stop\r\n    if (rangeA[0] > rangeB[1] || rangeB[0] > rangeA[1]) {\r\n        VECTORS.push(offsetV);\r\n        ARRAYS.push(rangeA);\r\n        ARRAYS.push(rangeB);\r\n        return true;\r\n    }\r\n\r\n    if (response) {\r\n        var overlap = 0;\r\n        // A starts further left than B\r\n        if (rangeA[0] < rangeB[0]) {\r\n\r\n          response.aInB = false;\r\n\r\n          // A ends before B does. We have to pull A out of B\r\n          if (rangeA[1] < rangeB[1]) {\r\n\r\n            overlap = rangeA[1] - rangeB[0];\r\n            response.bInA = false;\r\n\r\n          // B is fully inside A.  Pick the shortest way out.\r\n          } else {\r\n\r\n            var option1 = rangeA[1] - rangeB[0];\r\n            var option2 = rangeB[1] - rangeA[0];\r\n            overlap = option1 < option2 ? option1 : -option2;\r\n\r\n          }\r\n        // B starts further left than A\r\n        } else {\r\n\r\n          response.bInA = false;\r\n\r\n          // B ends before A ends. We have to push A out of B\r\n          if (rangeA[1] > rangeB[1]) {\r\n\r\n            overlap = rangeA[0] - rangeB[1];\r\n            response.aInB = false;\r\n\r\n          // A is fully inside B.  Pick the shortest way out.\r\n          } else {\r\n\r\n            var option1 = rangeA[1] - rangeB[0];\r\n            var option2 = rangeB[1] - rangeA[0];\r\n            overlap = option1 < option2 ? option1 : -option2;\r\n\r\n          }\r\n        }\r\n        // If this is the smallest amount of overlap we've seen so far, set it as the minimum overlap.\r\n        var absOverlap = Math.abs(overlap);\r\n\r\n        if (absOverlap < response.overlap) {\r\n\r\n          response.overlap = absOverlap;\r\n          response.overlapN.copy(axis);\r\n\r\n          if (overlap < 0)\r\n            response.overlapN.reverse();\r\n        }\r\n      }\r\n\r\n      VECTORS.push(offsetV);\r\n      ARRAYS.push(rangeA);\r\n      ARRAYS.push(rangeB);\r\n\r\n\r\n\r\n      return false;\r\n\r\n  };\r\n\r\n  testPolygonPolygon(a,b,response) {\r\n\r\n    // collider a\r\n\r\n    var pointsA = a.shape.getPoints();\r\n    var normalsA =  a.shape.getNormals();\r\n    var normalsALen = normalsA.length;\r\n\r\n    // collider b\r\n\r\n    var pointsB = b.shape.getPoints();\r\n    var normalsB =  b.shape.getNormals();\r\n    var normalsBLen = normalsB.length;\r\n\r\n\r\n    // If any of the edge normals of A is a separating axis, no intersection.\r\n    while (normalsALen--) {\r\n        if (isSeparatingAxis(a.position, b.position, pointsA, pointsB, normalsA[normalsALen],response)) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    // If any of the edge normals of B is a separating axis, no intersection.\r\n    while (normalsBLen--) {\r\n        if (isSeparatingAxis(a.position, b.position, pointsA, pointsB, normalsB[normalsBLen], response)) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n\r\n\r\n    // Since none of the edge normals of A or B are a separating axis, there is an intersection\r\n    // and we've already calculated the smallest overlap (in isSeparatingAxis).  Calculate the\r\n    // final overlap vector.\r\n      if (response) {\r\n          response.a = a;\r\n          response.b = b;\r\n          response.overlapV.copy(response.overlapN).scale(response.overlap);\r\n      }\r\n    return true;\r\n\r\n  };\r\n\r\n}\r\n\r\n\r\n","\r\nexport default class SATResponse {\r\n\r\n    constructor()\r\n    {\r\n        this.a = null;\r\n        this.b = null;\r\n        this.overlapN = new scintilla.Vector();\r\n        this.overlapV = new scintilla.Vector();\r\n        this.aInB = true;\r\n        this.bInA = true;\r\n        this.overlap = Number.MAX_VALUE;\r\n        this.indexShapeA = -1;\r\n        this.indexShapeB = -1;\r\n        this.clear();\r\n    }\r\n\r\n    clear()\r\n    {\r\n        this.aInB = true;\r\n        this.bInA = true;\r\n        this.overlap = Number.MAX_VALUE;\r\n        this.indexShapeA = -1;\r\n        this.indexShapeB = -1;\r\n        return this;\r\n    }\r\n}\r\n","\r\n/**\r\n * Create a Canvas object.\r\n * @class Canvas\r\n */\r\nexport default (\r\n    class Canvas {\r\n\r\n  static create (parent,width, height) {\r\n\r\n  // default definition\r\n  let defaultDef = {\r\n    width: width,\r\n    height: height,\r\n    id: Math.random().toString(36).substr(2, 9),\r\n    class: \"\",\r\n    container: \"body\",\r\n    style: \"padding: 0;margin: auto;display: block;top: 0; bottom: 0;left: 0;right: 0;border:1px solid #d3d3d3;background-color: #f1f1f1;\"\r\n  };\r\n\r\n  //var CO = Object.assign(defaultDef, options);\r\n  let CO = defaultDef;\r\n  let canvas;\r\n\r\n\r\n  canvas = document.createElement('canvas');\r\n  //canvas.parent = parent;\r\n  canvas.setAttribute(\"id\", CO.id);\r\n  canvas.setAttribute(\"width\", CO.width);\r\n  canvas.setAttribute(\"height\", CO.height);\r\n  canvas.setAttribute(\"style\", CO.style);\r\n  //canvas.style.position = 'absolute';\r\n  \r\n\r\n\r\n  Canvas.appendDOM(canvas,parent);\r\n  //document.body.appendChild(canvas);\r\n  //var context = canvas.getContext(\"2d\");\r\n\r\n\r\n  //tobiJS.Canvas.list.parent = document.body;\r\n\r\n  //console.log(\"Canvas Created!\");\r\n\r\n  return canvas;\r\n}\r\n\r\nstatic appendDOM(canvas,parent) {\r\n\r\n  let appendTo;\r\n  let overflowHidden = true;\r\n  let target = null;\r\n\r\n  //if (overflowHidden === undefined) { overflowHidden = true; }\r\n\r\n    if (parent)\r\n    {\r\n        if (typeof parent === 'string')\r\n        {\r\n            // hopefully an element ID\r\n            target = document.getElementById(parent);\r\n        }\r\n        else if (typeof parent === 'object' && parent.nodeType === 1)\r\n        {\r\n            // quick test for a HTMLelement\r\n            target = parent;\r\n        }\r\n    }\r\n\r\n    // Fallback, covers an invalid ID and a non HTMLelement object\r\n    if (!target)\r\n    {\r\n        target = document.body;\r\n    }\r\n\r\n    /*if (overflowHidden && target.style)\r\n    {\r\n        target.style.overflow = 'hidden';\r\n    }*/\r\n\r\n    target.appendChild(canvas);\r\n\r\n}\r\n\r\n})\r\n","import { RENDERING_TYPE } from \"../define\";\r\n\r\n\r\nexport default class CanvasSmoothing {\r\n\r\n    constructor(context) {\r\n        this.context = context;\r\n        this.prefix = this.getPrefix(context);\r\n    }\r\n\r\n    getPrefix(context) {\r\n\r\n        let vendors = [ 'i', 'webkitI', 'msI', 'mozI', 'oI' ];\r\n        for (let i = 0; i < vendors.length; i++)\r\n        {\r\n            let s = vendors[i] + 'mageSmoothingEnabled';\r\n\r\n            if (s in context)\r\n                return s;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    setEnable(flag) {\r\n\r\n        if (flag === 'undefined') flag = true;\r\n\r\n        if (this.prefix === '' || this.prefix === undefined)\r\n            this.prefix = this.getPrefix(this.context);\r\n\r\n        //\r\n\r\n        console.log(flag);\r\n\r\n        if (this.prefix)\r\n            this.context[this.prefix] = flag;\r\n\r\n        return this.context;\r\n    }\r\n\r\n    set(renderType) {\r\n        if (renderType == RENDERING_TYPE.NEAREST)\r\n            this.setEnable(false);\r\n        else\r\n            this.setEnable(true);\r\n    }\r\n\r\n}\r\n","\r\nexport const RENDERING_TYPE = {\r\n    NEAREST : 0,\r\n    LINEAR : 1\r\n}","import GameSystemManager from \"../core/gameSystemManager\";\r\n\r\nexport default class Draw {\r\n  \r\n  constructor(game) {\r\n    this.game = game;\r\n    this.cache = null;\r\n    this.context = null;\r\n  }\r\n\r\n  init()\r\n  {\r\n\r\n    this.cache = this.game.system.cache;\r\n    this.context = this.game.system.render.context;\r\n    return this;\r\n  }\r\n\r\n  font(fontname,size) {\r\n\r\n    this.context.font = size + \"px \" + fontname;\r\n\r\n  }\r\n\r\n  text(text,x,y,color) {\r\n\r\n    if (color === undefined) color = 'black';\r\n\r\n    this.context.fillStyle = color;\r\n    this.context.fillText(text, x, y);\r\n\r\n  }\r\n\r\n  sprite(tag, x, y, anchor) {\r\n\r\n      var img = this.cache.getAsset('images',tag);\r\n\r\n      if (img != null) {\r\n\r\n        if (anchor === undefined) {\r\n          anchor[0] = 0;\r\n          anchor[1] = 0;\r\n        }\r\n\r\n        var ctx = this.context;\r\n\r\n      ctx.save();\r\n\r\n      ctx.translate(x-img.width*anchor[0], y-img.height*anchor[1]);\r\n\r\n    ctx.drawImage(img,\r\n            0,\r\n            0,\r\n            img.width,\r\n            img.height);\r\n\r\n\r\n      ctx.restore();\r\n\r\n    }\r\n\r\n  }\r\n\r\n  spriteTransformed(tag, x, y, xscale, yscale, angle) {\r\n\r\n\r\n  }\r\n\r\n  rectangle(x, y, width, height, color) {\r\n\r\n    this.context.fillStyle=color;\r\n    this.context.fillRect(x,y,width,height);\r\n\r\n  }\r\n\r\n  outlineRectangle(x,y,width,height,color,outlineWidth) {\r\n\r\n    this.context.beginPath();\r\n    this.context.lineWidth=outlineWidth;\r\n    this.context.setLineDash([6]);\r\n    this.context.strokeStyle=color;\r\n    this.context.rect(x,y,width,height);\r\n    this.context.stroke();\r\n\r\n  }\r\n\r\n  alpha(a) {\r\n\r\n    this.context.globalAlpha = a;\r\n\r\n  }\r\n\r\n  color(color) {\r\n\r\n    this.context.fillStyle = color;\r\n\r\n  }\r\n\r\n  boundingbox(bb,color) {\r\n\r\n  if (color === undefined)\r\n    color = 'black';\r\n    this.context.setTransform(1,0,0,1,0,0);\r\n  this.outlineRectangle(bb.min.x,bb.min.y,bb.max.x-bb.min.x,bb.max.y-bb.min.y,color,2);\r\n\r\n  }\r\n\r\n}\r\n\r\nGameSystemManager.register('Draw',Draw,'draw');","\r\nmodule.exports = {\r\n    RenderLayer : require('./renderlayer'),\r\n    RenderLayerManagement : require('./renderlayersmanagement'),\r\n    Render : require('./render'),\r\n    Draw : require('./draw')\r\n}","\r\nimport DataMap from '../structures/map'\r\nimport RenderLayer from './renderlayer'\r\nimport RenderLayerManagment from './renderlayersmanagement'\r\nimport Canvas from './canvas/canvas'\r\nimport {RENDERING_TYPE} from './define'\r\nimport GameSystemManager from '../core/gameSystemManager';\r\nimport CanvasSmoothing from './canvas/smoothing';\r\n\r\n\r\nexport default class Render {\r\n    \r\n\r\n    constructor(game) {\r\n        \r\n        this.game = game;\r\n        this.layer = new RenderLayerManagment(this.game);\r\n        this.canvas = Canvas.create(this.game.parent,this.game.width,this.game.height);\r\n        this.context = this.canvas.getContext(\"2d\", { alpha: false });  \r\n        this.imageRendering = (game.config.pixelated) ? RENDERING_TYPE.NEAREST : RENDERING_TYPE.LINEAR;\r\n        this.smooth = new CanvasSmoothing(this.context);\r\n        this.smooth.set(this.imageRendering);\r\n\r\n        this._backgroundColor = '#000'       \r\n        this._alpha = 1;\r\n        this._enable = true;\r\n        this.clear = true;\r\n        this.drawCalls = 0;\r\n    }\r\n\r\n    renderBegin() {\r\n        \r\n        if (this.clear)\r\n        {\r\n            this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n        }\r\n\r\n        this.context.fillStyle = this._backgroundColor;  \r\n        this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n        this.drawCalls = 0;\r\n    }\r\n\r\n    renderEnd() {\r\n        this.context.globalAlpha = 1;\r\n        this.context.globalCompositeOperation = 'source-over';\r\n    }\r\n\r\n    render(camera, delta) {\r\n        \r\n        if (!this._enable)\r\n            return;\r\n\r\n            let clip = (camera.x !== 0 ||\r\n                 camera.y !== 0 ||\r\n                 camera.width !== this.context.canvas.width ||\r\n                 camera.height !== this.context.canvas.height);\r\n\r\n        // alpha\r\n        if (this._alpha !== 1)\r\n        {\r\n            ctx.globalAlpha = 1;\r\n            this._alpha = 1;\r\n        }\r\n\r\n        // blend\r\n        this.context.globalCompositeOperation = 'source-over';\r\n       \r\n        \r\n        /*if (clip)\r\n        {\r\n            let resolution = 1;\r\n            this.context.save();\r\n            this.context.beginPath();\r\n            this.context.rect(\r\n                0,\r\n                0,\r\n                320 * resolution,\r\n                240 * resolution);\r\n            this.context.clip();\r\n        }*/\r\n\r\n        \r\n\r\n        for (let i = 0; i < this.layer.renderLayers.length; i++)\r\n        {\r\n            let layer = this.layer.renderLayers.at(i);\r\n\r\n            if (!layer.enable)\r\n                continue;\r\n\r\n            layer.render(this.context);\r\n            \r\n            this.drawCalls += layer.drawCalls;\r\n        }\r\n\r\n        this.context.setTransform(1, 0, 0, 1, 0, 0);\r\n\r\n        this.game.scene.render();\r\n\r\n       /* if (clip)\r\n            this.context.restore();*/\r\n\r\n\r\n       \r\n\r\n        if (this.game.debug != null) {\r\n\r\n            \r\n            this.game.debug.test();\r\n      \r\n        }\r\n\r\n        \r\n    }\r\n\r\n    get backgroundColor() {return this._backgroundColor;}\r\n    set backgroundColor(value) {\r\n        this._backgroundColor = value;\r\n    }\r\n    get alpha() {return this._alpha;}\r\n    set alpha(value) {\r\n\r\n        if (this._alpha !== value)\r\n        {\r\n            this.currentContext.globalAlpha = value;\r\n            this._alpha = value;\r\n        }\r\n\r\n        return this._alpha;\r\n    }\r\n}\r\n\r\nGameSystemManager.register('Render', Render, 'render');","import DataList from \"../structures/list\";\r\n\r\n\r\nexport default class RenderLayer { \r\n    \r\n    constructor(game,layerName) {\r\n\r\n        this._name = layerName;\r\n        this.game = game;       \r\n        this.renderList = new DataList(true);\r\n        this.__drawCalls = 0;\r\n        this.__enable = true;\r\n        this.__isDirty = false;\r\n    }\r\n\r\n    get drawCalls() {return this.__drawCalls;}\r\n\r\n    // Add renderable components\r\n    add(renderer) {\r\n    \r\n        if (renderer === undefined)\r\n            return;\r\n\r\n        this.renderList.push(renderer);\r\n       // this.renderer.__renderLayer = this;\r\n        this.__isDirty = true;\r\n\r\n    }\r\n\r\n    remove(renderer)\r\n    {\r\n        return this.renderList.remove(renderer);\r\n    }\r\n\r\n    removeAt(index)\r\n    {\r\n        \r\n    }\r\n\r\n    at(index)\r\n    {\r\n        if (index < 0 || index >= this.__renderers.size)\r\n        {\r\n            throw new Error('RenderLayer.at: Renderer at '+ index +' does not exist in the render layer list: \\\"' + name + \"\\\".\");\r\n        }\r\n        return this.renderList.at(index);\r\n\r\n    }\r\n\r\n    render(context)\r\n    {\r\n        this.__drawCalls = 0;\r\n\r\n        if (!this.__enable)\r\n            return;\r\n\r\n        \r\n\r\n        if (this.__isDirty)\r\n        {\r\n            this.renderList.sort(this.sortDepth);\r\n\r\n            this.__isDirty = false;\r\n        }\r\n\r\n        var self = this;\r\n\r\n        this.renderList.each((element) => {\r\n            if (element.render(context))\r\n                self.__drawCalls++;\r\n        });\r\n\r\n    }\r\n\r\n    sortDepth(a, b) { // sort ascending\r\n\r\n        return a._depthSorting - b._depthSorting;\r\n\r\n        /*this.__renderers.sort(\r\n\r\n          function(a, b) {\r\n      \r\n            if (a.depth > b.depth) {\r\n      \r\n              return 1;\r\n      \r\n            } else if (a.depth < b.depth) {\r\n      \r\n              return -1;\r\n      \r\n            } else {\r\n      \r\n              if (a.z > b.z) {\r\n                return 1;\r\n              } else {\r\n                return -1;\r\n              }\r\n      \r\n      \r\n            }\r\n          });*/\r\n\r\n    }\r\n\r\n    get length() {return this.__renderers.length;}\r\n    get name() {return this._name;}\r\n    get enable() {return this.__enable;}\r\n    set enable(value) {\r\n        value = !!value;\r\n    \r\n        if (value !== this._enabled)\r\n        {\r\n            //if (!value)\r\n            //    this.reset();\r\n\r\n            this._enabled = value;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n","\r\nimport DataMap from '../structures/map'\r\nimport RenderLayer from './renderlayer'\r\nimport DataList from '../structures/list';\r\n\r\nexport default class RenderLayersManagement {\r\n\r\n    constructor(game) {\r\n        this.game = game;\r\n        this.renderLayers = new DataList();\r\n        //this.__renderLayersMap = new DataMap();\r\n        this.add('default');\r\n    }\r\n\r\n\r\n\r\n    add(name) {\r\n\r\n        if (this.contains(name))\r\n        {\r\n            throw new Error(\"Render.add: There is already a RenderLayer called: \\\"\" +  name + \"\\\".\");\r\n        }\r\n       \r\n        //this.__renderLayersMap.set(name, this.__renderLayers.length);\r\n        this.renderLayers.push(new RenderLayer(this.game, name));\r\n    }\r\n\r\n    remove(name)\r\n    {\r\n        if (typeof name !== 'string')\r\n            throw new Error(\"Render.remove: The value name is not a string.\");\r\n\r\n        if (name === \"default\")\r\n            throw new Error(\"Render.remove: You can not remove the \\\"default\\\" layer.\");\r\n\r\n        if (!this.__renderLayersMap.has(name))\r\n            throw new Error(\"Render.remove: Could not remove layer. There is no layer named \\\"\" + name + \"\\\".\");\r\n\r\n        var index = this.__renderLayersMap.get(name);\r\n\r\n        this.renderLayers.erase(name);\r\n    }\r\n\r\n    contains(layerName)\r\n    {\r\n        if (typeof layerName !== 'string')\r\n            throw new Error(\"Render.contains: The value name is not a string.\");\r\n\r\n        let val = this.renderLayers.each(function(layer) {\r\n           \r\n            if (layer.name == layerName)\r\n            {\r\n                return true;\r\n            }\r\n        });\r\n\r\n        return val || false;\r\n    }\r\n\r\n}","\r\nexport default class Scene {\r\n  \r\n  constructor(name) {\r\n\r\n    this.name = name || 'New Scene';\r\n    //this.childs = new EntityHierarchy(\"SceneHierarchy\", this.game);\r\n    /*this.camera = null;\r\n    this.x = 0;\r\n    this.y = 0;\r\n    this.width = 0;\r\n    this.height = 0;\r\n    this.view = 0;*/\r\n\r\n\r\n    /*if (myGame != null) {\r\n      this.width = myGame.width;\r\n      this.height = myGame.height;\r\n    }*/\r\n  }\r\n\r\n\r\n\r\n\r\n  instanceDestroy(gameObject) {\r\n\r\n    if (gameObject['destroy'])\r\n      gameObject.destroy();\r\n\r\n      //console.log(\"deleted \" + gameObject._id)\r\n\r\n    let index = this.instances.indexOf( gameObject);\r\n\r\n    this.instances.splice( index, 1 );\r\n\r\n  }\r\n\r\n  addGameObject(gameObject, clone) {\r\n\r\n    let obj;\r\n    let cl = false;\r\n\r\n    if (arguments.length == 0)\r\n      obj = new scintilla.GameObject();\r\n    else {\r\n\r\n      if (clone === undefined)\r\n        cl = false;\r\n      else\r\n        cl = clone;\r\n\r\n\r\n        if (cl)\r\n          obj = gameObject.clone();\r\n        else\r\n          obj = gameObject;\r\n\r\n    }\r\n\r\n    obj._id = this.instances.length;\r\n    obj._game = this.game;\r\n    this.instances.push(obj);\r\n\r\n    obj.start();\r\n    return obj;\r\n\r\n  }\r\n\r\n  setBounds(x,y,width,height) {\r\n\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = width;\r\n    this.height = height;\r\n    \r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n","\r\nimport DataMap from '../structures/map'\r\nimport Scene from './scene'\r\n\r\nexport default class SceneManager {\r\n  \r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    this.entityUpdateList = null;\r\n    this._scenes = new DataMap();\r\n\r\n    this.currentScene = null;\r\n    this._currentSceneName = '';\r\n    this._changeScene = null;\r\n\r\n    this._setup = false;\r\n    this._clearCache = false;\r\n\r\n    // callbacks\r\n    \r\n    this.onStartCallback = null;\r\n    this.onLoadingCallback = null;\r\n    this.onLoadingRenderCallback = null;\r\n    this.onPreloadCallback = null;\r\n    //this.onUpdateCallback = null;\r\n    this.onRenderCallback = null;\r\n    this.onDestroyCallback = null;\r\n\r\n  }\r\n\r\n  add(sceneName,scene) {\r\n\r\n  var newScene;\r\n\r\n  if (scintilla.Scene.prototype.isPrototypeOf(scene)) {\r\n    newScene = scene;\r\n    newScene.game = this.game;\r\n  } else\r\n    newScene = null;\r\n\r\n\r\n  if (newScene != null)\r\n    this._scenes.set(sceneName,newScene);\r\n\r\n  }\r\n\r\n  new(sceneName)\r\n  {\r\n\r\n  if (this._scenes.has(sceneName))\r\n  {\r\n    throw \"Could not create new Scene. The scene name \\\"\" + name + \"\\\" already exists.\"; \r\n    return null;\r\n  }\r\n\r\n  var newScene = new Scene(this.game, sceneName);\r\n  this._scenes.set(sceneName,newScene);\r\n\r\n  return newScene;\r\n\r\n  }\r\n\r\n  set(sceneName, clearCache) {\r\n\r\n    if (!this._scenes.has(sceneName))\r\n      throw new Error('SceneManager.set: Scene' + sceneName + ' does not exist.')\r\n\r\n  if (clearCache === undefined) { clearCache = false; }\r\n\r\n  \r\n\r\n  this._changeScene = sceneName;\r\n  this._clearCache = clearCache;\r\n\r\n\r\n\r\n  }\r\n\r\n  restart(clearCache) {\r\n\r\n  if (clearCache === undefined) { clearCache = false; }\r\n\r\n  this._changeScene = this._currentSceneName;\r\n  this._clearCache = clearCache;\r\n\r\n  }\r\n\r\n  remove(sceneName) {\r\n\r\n  if (this._currentSceneName === sceneName) {\r\n\r\n    this.currentScene = null;\r\n\r\n    this.onStartCallback = null;\r\n    this.onLoadingCallback = null;\r\n    this.onLoadingRenderCallback = null;\r\n    this.onPreloadCallback = null;\r\n    this.onUpdateCallback = null;\r\n    this.onRenderCallback = null;\r\n    this.onDestroyCallback = null;\r\n\r\n\r\n  }\r\n\r\n  delete this.scenes[sceneName];\r\n\r\n  }\r\n\r\n  setupScene(sceneName) {\r\n\r\n\r\n  this.currentScene = this._scenes.get(sceneName);\r\n  this.onStartCallback = this.currentScene['start'] || null;\r\n  this.onLoadingCallback = this.currentScene['loading'] || null;\r\n  this.onLoadingRenderCallback = this.currentScene['loadingRender'] || null;\r\n  this.onPreloadCallback = this.currentScene['preload'] || null;\r\n  this.onRenderCallback = this.currentScene['render'] || null;\r\n  this.onDestroyCallback = this.currentScene['destroy'] || null;\r\n\r\n  this.game.system.inject(this.currentScene);\r\n\r\n  this._currentSceneName = sceneName;\r\n\r\n  //this.game.time.refresh();\r\n\r\n\r\n  //this.currentScene.camera = this.game.world.camera;\r\n\r\n  //this.game.instance.scene = this.currentScene;\r\n\r\n  this._setup = false;\r\n\r\n  }\r\n\r\n  clearCurrentScene() {\r\n\r\n  if (this._currentSceneName)\r\n  {\r\n\r\n    this.game.system.unject(this.currentScene);\r\n\r\n    if (this.onDestroyCallback)\r\n    {\r\n        this.onDestroyCallback.call(this.currentScene, this.game);\r\n    }\r\n\r\n    if (this._clearCache)\r\n    {\r\n          this.game.cache.clear();\r\n    }\r\n\r\n    //this.game.world.destroyAllChilds();\r\n\r\n  }\r\n\r\n  }\r\n\r\n  preUpdate() {\r\n\r\n    if (!this.game.systemInited || this._changeScene == null)\r\n      return;\r\n\r\n\r\n      this.clearCurrentScene();\r\n\r\n      this.setupScene(this._changeScene);\r\n\r\n      if (this._currentSceneName !== this._changeScene)\r\n      {\r\n          return;\r\n      }\r\n      else\r\n      {\r\n          this._changeScene = null;\r\n      }\r\n\r\n      if (this.onPreloadCallback) {\r\n\r\n        this.game.system.load.reset();\r\n        this.onPreloadCallback.call(this.currentScene, this.game);\r\n\r\n        if (this.game.system.load.totalQueuedFiles === 0)\r\n        {\r\n          this.preloadComplete();\r\n\r\n        } else {\r\n\r\n          this.game.system.load.start();\r\n        }\r\n\r\n      } else {\r\n\r\n        this.preloadComplete();\r\n      }\r\n\r\n    \r\n\r\n  }\r\n\r\n  preloadComplete() {\r\n\r\n    //this.currentScene.quadtree = new tobiJS.Quadtree({x: 0, y: 0, width: 640,height: 480});\r\n\r\n      if (this._setup === false && this.onLoadingCallback)\r\n      {\r\n          this.onLoadingCallback.call(this.currentScene, this.game);\r\n      }\r\n\r\n      if (this._setup === false && this.onStartCallback)\r\n      {\r\n          this._setup  = true;\r\n          this.onStartCallback.call(this.currentScene, this.game);\r\n      }\r\n      else\r\n      {\r\n          this._setup = true;\r\n\r\n      }\r\n  }\r\n\r\n    render() {\r\n\r\n      if (this._setup) {\r\n\r\n\r\n          if (this.onRenderCallback)\r\n          {\r\n              this.onRenderCallback.call(this.currentScene, this.game);\r\n          }\r\n\r\n      } else {\r\n\r\n        if (this.onLoadingRenderCallback)\r\n        {\r\n            this.onLoadingRenderCallback.call(this.currentScene, this.game);\r\n        }\r\n\r\n\r\n      }\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n","\r\nmodule.exports = {\r\n    Utils : require('./useful'),\r\n    Set : require('./set'),\r\n    Map : require('./map'),\r\n    List : require('./list'),\r\n}\r\n    ","\r\nimport MergeSort from './useful/mergesort'\r\n\r\nexport default class DataList\r\n{\r\n    constructor(elements, unique)\r\n    {\r\n        this.unique = unique || true;\r\n        this.childs = [];\r\n\r\n        if (Array.isArray(elements))\r\n        {\r\n            for (var i = 0; i < elements.length; i++)\r\n                this.push(elements[i]);\r\n        }\r\n\r\n    }\r\n\r\n    get size() {return this.childs.length;}\r\n    get length() {return this.childs.length;}\r\n\r\n    get first() {\r\n        if (this.list.length > 0) \r\n            return this.childs[0];\r\n        else\r\n            return null;\r\n        \r\n    }\r\n\r\n    get last() {\r\n          if (this.childs.length > 0) {\r\n            let idx = this.childs.length - 1;\r\n            return this.childs[idx];\r\n          } else\r\n            return null;\r\n    }\r\n\r\n    push(child) {\r\n\r\n        if (this.unique) {\r\n            if (this.indexOf(child) === -1)\r\n                this.childs.push(child);\r\n        } else {\r\n            this.childs.push(child);\r\n        }\r\n\r\n        return child;\r\n    }\r\n\r\n    pushFront(child) {\r\n        if (this.unique) {\r\n            if (this.indexOf(child) === -1)\r\n                this.childs.unshift(child);\r\n        } else {\r\n            this.childs.unshift(child);\r\n        }\r\n        return child;\r\n    }\r\n\r\n    insert(child, index) {\r\n\r\n        if (index === undefined) \r\n            index = 0;\r\n\r\n        if (this.childs.length === 0) \r\n            return this.push(child);\r\n\r\n        if (index >= 0 && index <= this.childs.length) {\r\n        \r\n            if (this.unique) {\r\n                if (this.indexOf(child) === -1) \r\n                    this.childs.splice(index, 0, child);\r\n            } else {\r\n                this.childs.splice(index, 0, child);\r\n            }\r\n            \r\n        }\r\n\r\n        return child;\r\n    \r\n    }\r\n\r\n    indexOf(child) {\r\n        return this.childs.indexOf(child);\r\n    }\r\n\r\n    at(index) {\r\n        return this.childs[index];\r\n    }\r\n\r\n    erase(child) {\r\n\r\n        let idx = this.childs.indexOf(child);\r\n        var childToErase = null;\r\n\r\n        if (idx !== -1)\r\n            childToErase = this.childs.splice(idx, 1);\r\n        \r\n        return childToErase;\r\n    }\r\n\r\n    eraseAt(index) {\r\n        var child = this.childs[index];\r\n\r\n        if (child)\r\n            this.childs.splice(index, 1);\r\n\r\n        return child;\r\n    }\r\n\r\n    eraseList(listToRemove, size)\r\n    {\r\n        \r\n        if (size === undefined) size = listToRemove.size;\r\n\r\n        for (let i = 0; i < size; i++)\r\n        {\r\n            var child = listToRemove.childs[i];\r\n            this.erase(child);\r\n            /*let child = this.listToRemove[i];\r\n            let index = this._instances.indexOf(gameObject);\r\n\r\n            if (index > -1)\r\n               this._instances.splice(index, 1);*/\r\n            \r\n        }\r\n    }\r\n\r\n    has(child) {\r\n        return (this.childs.indexOf(child) > -1);\r\n    }\r\n\r\n    empty() {\r\n        return (this.childs.length == 0)\r\n    }\r\n\r\n    clear() {\r\n        let i = this.childs.length;\r\n\r\n        while(i--) {\r\n            this.erase(this.childs[i]);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    destroy() {\r\n        this.clear();\r\n        this.childs = [];\r\n        this.parent = null;\r\n    }\r\n\r\n    concat(otherList, clearOther)\r\n    {\r\n        if (clearOther === undefined) clearOther = false;\r\n\r\n        if (clearOther) {\r\n            this.childs = this.childs.concat(otherList.childs.splice(0));\r\n        } else {\r\n            this.childs = this.childs.concat(otherList.childs);\r\n        }\r\n\r\n        \r\n        return this;\r\n    }\r\n\r\n    each(callback) {\r\n        let params = [ null ];\r\n\r\n        var content = this.childs;\r\n\r\n        for (let i = 0; i < arguments.length; i++)\r\n            params.push(arguments[i+1]);\r\n\r\n        for (let i = 0; i < content.length; i++) {\r\n            params[0] = i;\r\n            let r = callback(content[i], params);\r\n            if (r !== undefined)\r\n                return r;\r\n           //break;\r\n        }\r\n    }\r\n\r\n    sort(predicate) {\r\n        if (predicate === undefined) return;\r\n        return MergeSort(this.childs, predicate);\r\n        \r\n        //childs.sort(predicate);\r\n    }\r\n\r\n    swap(childA, childB) {\r\n\r\n        if (childA === childB)\r\n            return;\r\n\r\n        let idx0 = this.indexOf(childA);\r\n        let idx1 = this.indexOf(childB);\r\n\r\n        if (idx0 < 0 || idx1 < 0) {\r\n            throw new Error('DataList.swap: Could not swap childrens. The objects are not in the list.');\r\n        }\r\n\r\n        this.list[idx0] = childA;\r\n        this.list[idx1] = childB;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    swapByIndex(indexA, indexB) {\r\n        if (indexA === indexB)\r\n            return;\r\n\r\n        var cA = this.at(indexA);\r\n        var cB = this.at(indexB);\r\n\r\n        if (cA === undefined || cB === undefined) {\r\n            throw new Error('DataList.swapByIndex: Could not swap childrens by index. The objects are not in the list.');\r\n        }\r\n\r\n        this.list[indexA] = cA;\r\n        this.list[indexB] = cB;\r\n\r\n        return this;\r\n    }\r\n\r\n    reverse() {\r\n        this.childs.reverse();\r\n        return this;\r\n    }\r\n\r\n\r\n    \r\n}","\r\n\r\n\r\n// DataMap simple class\r\nexport default class DataMap {\r\n  \r\n  constructor() {\r\n    this._content = {};\r\n    this._size = 0;\r\n  }\r\n\r\n  /* \r\n  Add or set value to the map\r\n  key = keyName\r\n  value = value\r\n  */\r\n  set(key, value) {\r\n\r\n    if (!this.has(key))\r\n    {\r\n        this._size++;\r\n    }\r\n\r\n    this._content[key] = value;\r\n    \r\n    return this;\r\n\r\n  }\r\n\r\n  get(key) {\r\n      if (this.has(key))\r\n      {\r\n        return this._content[key];\r\n      }\r\n      else\r\n      {\r\n        return null;\r\n      }\r\n  }\r\n\r\n  has(key) {\r\n    return this._content.hasOwnProperty(key);\r\n  }\r\n\r\n  contains(value) {\r\n    for (var key in this._content)\r\n    {\r\n      if (entries[key] === value)\r\n      {\r\n        return true;\r\n      } else\r\n        continue;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  keys() {\r\n    return Object.keys(this._content);\r\n  }\r\n\r\n  values() {\r\n    var values = [];\r\n    var content = this._content;\r\n\r\n    for (var key in content)\r\n      values.push(entries[key]);\r\n        \r\n    return values;\r\n  }\r\n\r\n  remove(key) {\r\n\r\n    if (!this.has(key))\r\n      return null;\r\n\r\n    var prop =  this._content[key];\r\n    delete this._content[key];\r\n    this._size--;\r\n    return prop;\r\n\r\n  }\r\n\r\n  delete(key) {\r\n\r\n    if (!this.has(key))\r\n      return false;\r\n\r\n      delete this._content[key];\r\n      this._size--;\r\n\r\n      return true;\r\n  }\r\n\r\n  deleteAt(key) {\r\n\r\n    //if (!this.hasTagInKey(key))\r\n    //  return false;\r\n      this._size--;\r\n     delete this._content[key];\r\n\r\n  }\r\n\r\n  deleteByIndexedArray(array) {\r\n    for (var i = 0; i < array.length; i++) {\r\n      delete this._content[array[i]];\r\n      this._size--;\r\n    }\r\n\r\n  }\r\n\r\n  clear() {\r\n\r\n    for (var property in this._content) \r\n      delete this._content[property];\r\n    \r\n\r\n    this._size = 0;\r\n\r\n  }\r\n\r\n  slowSize() {\r\n    return Object.keys(_contents).length;\r\n  }\r\n\r\n  each(callback) {\r\n    var content = this._content;\r\n\r\n    for (var property in content) {\r\n\r\n      if (callback(property, content[property]) === false)\r\n          break;\r\n      \r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  get size() {return this._size;}\r\n\r\n}\r\n\r\n","import MergeSort from \"./useful/mergesort\";\r\n\r\n\r\nexport default class DataSet {\r\n\r\n    constructor(elements) {\r\n        this._content = [];\r\n        this._size = 0;\r\n\r\n        if (Array.isArray(elements))\r\n        {\r\n            for (var i = 0; i < elements.length; i++)\r\n                this.set(elements[i]);\r\n        }\r\n\r\n    }\r\n\r\n    set(value) {\r\n        if (this._content.indexOf(value) === -1)\r\n            this._content.push(value);\r\n\r\n        return this;\r\n    }\r\n\r\n    at(value) {\r\n        var index = this._content.indexOf(value);\r\n        if (index > -1)\r\n        {\r\n            return this._content[index];\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    has(value) {\r\n        return (this._content.indexOf(value) > -1);\r\n    }\r\n\r\n    delete(value) {\r\n        var idx = this._content.indexOf(value);\r\n\r\n        if (idx > -1)\r\n            this._content.splice(idx, 1);\r\n\r\n        return this;\r\n    }\r\n\r\n    clear() {\r\n        this._content.length = 0;\r\n        return this;\r\n    }\r\n\r\n    each(callback, scope) {\r\n        var content = this._content.slice();\r\n        var size = content.length;\r\n        var i;\r\n\r\n        if (scope)\r\n        {\r\n            for (i = 0; i < size; i++)\r\n            {\r\n                if (callback.call(scope, content[i], i) === false)\r\n                    break;                \r\n            }\r\n        } else {\r\n            for (i = 0; i < size; i++)\r\n            {\r\n                if (callback(content[i], i) === false)\r\n                    break;                \r\n            }\r\n        }\r\n\r\n      return this;\r\n    }\r\n\r\n    sort(predicate) {\r\n        if (predicate === undefined) return;\r\n        return MergeSort(this._content, predicate);\r\n    }\r\n\r\n    get size () { return this._content.length; }\r\n    get length () { return this._content.length; }\r\n\r\n}\r\n","\r\nmodule.exports = {\r\n    MergeSort : require('./mergesort')\r\n}","\r\n// http://www.stoimen.com/blog/2010/07/02/friday-algorithms-javascript-merge-sort/\r\n// https://codereview.stackexchange.com/questions/87000/fast-merge-sort-in-javascript\r\nexport default function MergeSort(array, predicate)\r\n{\r\n    var size = array.length;\r\n\r\n    if (size < 2)\r\n        return array;\r\n\r\n    if (predicate === undefined)\r\n    {\r\n        predicate = function (a, b) {\r\n            return a < b ? -1 : a === b ? 0 : 1;\r\n        };\r\n    }\r\n\r\n\r\n    /*function merge(left, right)\r\n    {\r\n        var result = [];\r\n \r\n        while (left.length && right.length) {\r\n            if (left[0] <= right[0]) {\r\n                result.push(left.shift());\r\n            } else {\r\n                result.push(right.shift());\r\n            }\r\n        }\r\n     \r\n        while (left.length)\r\n            result.push(left.shift());\r\n     \r\n        while (right.length)\r\n            result.push(right.shift());\r\n     \r\n        return result;\r\n    }*/\r\n\r\n    function merge (begin, begin_right, end) {\r\n        // Create a copy of the left and right halves.\r\n        let left_size = begin_right - begin;\r\n        let right_size = end - begin_right;\r\n        let left = array.slice(begin, begin_right);\r\n        let right = array.slice(begin_right, end);\r\n        // Merge left and right halves back into original array.\r\n        let i = begin, j = 0, k = 0;\r\n        while (j < left_size && k < right_size)\r\n            if (predicate(left[j], right[k]) <= 0)\r\n                array[i++] = left[j++];\r\n            else\r\n                array[i++] = right[k++];\r\n        // At this point, at least one of the two halves is finished.\r\n        // Copy any remaining elements from left array back to original array.\r\n        while (j < left_size) \r\n            array[i++] = left[j++];\r\n        // Copy any remaining elements from right array back to original array.\r\n        while (k < right_size) \r\n            array[i++] = right[k++];\r\n\r\n        return array;\r\n    }\r\n\r\n    function msort(start, end)\r\n    {\r\n        let len = end - start;\r\n\r\n        if (len < 2)\r\n            return;\r\n\r\n        let mid = start + (len >>> 1);\r\n        //let left = list.slice(start, mid);\r\n        //let right = list.slice(mid, end);\r\n        msort(start, mid);\r\n        msort(mid, end);\r\n        return merge(start, mid, end);\r\n        \r\n    }\r\n\r\n    //let mid = 0 + (size >>> 1);\r\n\r\n    return msort(0,size);//mid,size);\r\n\r\n    \r\n}\r\n","\r\n// Wrapper class for game time\r\n\r\nexport default class GameTime {\r\n\r\n    constructor(game) {\r\n        this.game = game;\r\n\r\n    }\r\n\r\n    init(gameLoop) {\r\n        this._updateStep = gameLoop.updateStep;\r\n    }\r\n\r\n    get now() {\r\n        return this._updateStep.time;\r\n    }\r\n\r\n    get fps() {\r\n        return this._updateStep.fps;\r\n    }\r\n\r\n    get desiredFps() {\r\n        return this._updateStep.fpsDesired;\r\n    }\r\n\r\n    get delta() {\r\n        return this._updateStep.deltaTime;\r\n    }\r\n\r\n    get elapsed() {\r\n        return this._updateStep.elapsed;\r\n    }\r\n\r\n    get rawDelta() {\r\n        return this._updateStep.hiDeltaTime;\r\n    }\r\n\r\n}","import RequestAnimationFrame from \"../dom/requestAnimationFrame\";\r\nimport ObjectUtils from \"../utils/objectutils\";\r\nimport MathUtils from '../math/mathutils'\r\n\r\nexport default class UpdateStep {\r\n\r\n    constructor(game, config) {\r\n        // CORE\r\n        this.game = game;\r\n        this.requestAnimationFrame = new RequestAnimationFrame(config.time.timeoutMode);\r\n        this.isRunning = false;\r\n        this.loop = null;\r\n        this.render = null;\r\n\r\n        // TIMER\r\n        this.startTime = 0; // start time\r\n        this.time = 0; // current hi-time\r\n        this.previousTime = 0; // last hi-time\r\n        this.elapsed = 0; // elapsed time\r\n        this.hiDeltaTime = 0; // raw delta time\r\n        this.deltaTime = 0; // delta time in miliseconds\r\n        // FPS\r\n        this.requireFpsUpdate = true;\r\n        this.fpsDesired = ObjectUtils.getValue(config, 'fps', config.fps);\r\n        this.fps = this.fpsDesired;\r\n        this.currentFps = 0;\r\n        this._nextFpsUpdate = 0;\r\n        this._framesThisSecond = 0;\r\n\r\n        // ACCUMALATOR METHOD\r\n        this.interpolation = false;\r\n        this.timeStep = Math.ceil(1000 / this.fpsDesired);\r\n        this.minTimeStep = this.timeStep * 1.25;\r\n        this.accumalator = 0;\r\n        this.accumulatorMax = this.timeStep * 10;\r\n        this.updateLast = 0;\r\n        this.updateAverageDelta = 0;\r\n        this.frameCounter = 0;\r\n    }\r\n\r\n    init(gameLoop) {\r\n        \r\n        if (this.isRunning)\r\n            return;\r\n\r\n        this.reset();\r\n\r\n        this.loop = gameLoop.loop.bind(gameLoop);\r\n        this.render = gameLoop.render.bind(gameLoop);\r\n\r\n        this.startTime = window.performance.now();\r\n\r\n        this.requestAnimationFrame.start(this.update.bind(this));\r\n\r\n        this.isRunning = true;\r\n\r\n    }\r\n\r\n    update(timeStamp) {\r\n\r\n        this.hiDeltaTime = timeStamp - this.previousTime;\r\n\r\n        // current\r\n        this.time = timeStamp;\r\n\r\n        // game elapsed time\r\n        this.elapsed += this.hiDeltaTime;\r\n\r\n        // FPS Update\r\n        if (this.requireFpsUpdate)\r\n            this.fpsUpdate(timeStamp);\r\n\r\n         // set previous time\r\n         this.previousTime = timeStamp;\r\n\r\n         // game loop\r\n        this.accumalatorMethod(this.hiDeltaTime);\r\n\r\n        // game render\r\n        this.render(this.hiDeltaTime);\r\n\r\n    }\r\n\r\n    fpsUpdate(timeStamp) {\r\n\r\n        \r\n\r\n        if (timeStamp > this._nextFpsUpdate) {\r\n            this.currentFps = 0.25 * this._framesThisSecond + 0.75 * this.fps;\r\n            this.fps = MathUtils.clamp(~~this.currentFps, 0, this.fpsDesired);\r\n     \r\n            this._nextFpsUpdate = timeStamp + 1000;\r\n            this._framesThisSecond = 0;\r\n        }\r\n     \r\n        this._framesThisSecond++;\r\n    }\r\n\r\n\r\n\r\n    accumalatorMethod(deltaTime) {\r\n\r\n        if ((++this.frameCounter % this.frameRate) === 0) {\r\n\r\n            this.frameCounter = 0;\r\n\r\n            this.accumalator += deltaTime;//Math.max(Math.min(this.timeStep * 3, this.elapsed),0);\r\n            this.accumulator = Math.min(this.accumalator, this.accumalatorMax); //, this.updateAverage);\r\n\r\n            let deltaUpdate = (this.interpolation) ? deltaTime : this.timeStep;\r\n            let accumulatorUpdateDelta = (this.interpolation) ? deltaUpdate : Math.max(deltaUpdate, this.updateAverageDelta);\r\n            this.deltaTime = deltaUpdate / 1000;\r\n\r\n            while (this.accumalator >= accumulatorUpdateDelta || this.interpolation) {\r\n\r\n                let updateStart = window.performance.now();\r\n\r\n                // UPDATE GAME\r\n                this.loop(deltaUpdate / 1000);\r\n\r\n                let updateLast = window.performance.now();\r\n                this.updateAverageDelta = updateLast - updateStart;\r\n\r\n                this.accumalator -= accumulatorUpdateDelta;\r\n                if (this.interpolation) {\r\n                    this.accumalator = 0;\r\n                    break;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    accumalatorReset() {\r\n        this.frameCounter = 0;\r\n        this.frameRate = ~~(0.5 + 60 / this.fpsDesired);\r\n        this.accumalator = 0;\r\n        this.timeStep = 1000 / this.fpsDesired;\r\n        this.accumulatorMax = this.stepSize * 10;\r\n    }\r\n    \r\n    reset() {\r\n        let now = window.performance.now();\r\n\r\n        this.deltaTime = 0;\r\n        this.hiDeltaTime = 0;\r\n        this.time = now;\r\n        this.previousTimeTime = now;\r\n        this._nextFpsUpdate = now + 1000;\r\n        this._framesThisSecond = 0;\r\n\r\n        this.accumalatorReset();\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n/*\r\nif (this.game.systemInited) {\r\n\r\n    this.time.update(time);\r\n\r\n    if (this._spiraling > 1) {\r\n\r\n        this.time.deltaTime = 0;\r\n        this._spiraling = 0;\r\n        this.time.accumalator = 0;\r\n\r\n        this.render(this.time.accumulatorDelta);\r\n\r\n    } else {\r\n\r\n    var countFrames = 0;\r\n\r\n    while (this.time.accumalator >= this.time.accumulatorDelta) {\r\n\r\n      //  this.time.updateStart = window.performance.now();\r\n\r\n        this.time.deltaTime = Math.min(this.time.accumalator,this.time.accumulatorDelta) / 1000;\r\n\r\n        this.logic(this.time.deltaTime);\r\n\r\n        //this.time.updateLast =  window.performance.now();\r\n      //  this.time.updateAverage = this.time.updateLast - this.time.updateStart;\r\n\r\n        this.time.accumalator -= this.time.accumulatorDelta;\r\n\r\n        countFrames++;\r\n\r\n        this.time.refresh();\r\n\r\n        if (countFrames >= 240) { // SPIRAL\r\n            //panic();\r\n            this.time.accumalator = 0;\r\n\r\n            break;\r\n        }\r\n    }\r\n\r\n      if (countFrames > this._lastFrameCount)\r\n         this._spiraling++;\r\n     else if (countFrames < this._lastFrameCount)\r\n        this._spiraling = 0;\r\n\r\n        this._lastFrameCount = countFrames;\r\n\r\n        this.render(this.time.accumalator/this.time.accumulatorDelta);\r\n\r\n    }\r\n\r\n\r\n\r\n}*/","\r\nconst Base64Utils = {\r\n    decode(str) {\r\n        return window.atob(str);\r\n        // Base64.decode(encodedString);\r\n    },\r\n\r\n    decodeToUint32(str) {\r\n        let bin = window.atob(str);\r\n        let len = bin.length;\r\n        let bytes = new Array(len);\r\n\r\n        for (let i = 0; i < len; i += 4) {\r\n            bytes[i / 4] = (\r\n                bin.charCodeAt(i) |\r\n                bin.charCodeAt(i + 1) << 8 |\r\n                bin.charCodeAt(i + 2) << 16 |\r\n                bin.charCodeAt(i + 3) << 24\r\n            ) >>> 0;\r\n        }\r\n\r\n        return bytes;\r\n    },\r\n\r\n    encode(str) {\r\n        return window.btoa(str);\r\n        // Base64.encode(string);\r\n    }\r\n}\r\n\r\nexport default Base64Utils;","\r\nexport const Color = {\r\n\r\nrgba : function(r,g,b,a) {\r\n\r\n  return 'rgba(' + r.toString() + ',' + g.toString() + ',' + b.toString() + ',' + (a / 255).toString() + ')';\r\n\r\n},\r\n\r\n/*\r\nSource code: https://github.com/mjackson/mjijackson.github.com/blob/master/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript.txt\r\n*/\r\nHSLtoRGB : function(h,s,l,a) {\r\n\r\n  var alp = 255;\r\n\r\n  if (a !== undefined || a !== null)\r\n    alp = a;\r\n\r\n  h = h / 255.0;\r\n  s = s / 255.0;\r\n  l = l / 255.0;\r\n\r\n  var result = {r:l,b:l,g:l};\r\n\r\n  if (s !== 0)\r\n  {\r\n      var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n      var p = 2 * l - q;\r\n      result.r = this.hueToColor(p, q, h + 1 / 3);\r\n      result.g = this.hueToColor(p, q, h);\r\n      result.b = this.hueToColor(p, q, h - 1 / 3);\r\n  }\r\n\r\n  result.r = Math.floor((result.r * 255));\r\n  result.g = Math.floor((result.g * 255));\r\n  result.b = Math.floor((result.b * 255));\r\n\r\n\r\n  return this.rgba(result.r,result.g,result.b,alp);\r\n\r\n},\r\n\r\n/*\r\nSource code: https://github.com/mjackson/mjijackson.github.com/blob/master/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript.txt\r\n*/\r\nhueToColor : function(p, q, t) {\r\n\r\n  if (t < 0)\r\n    t += 1;\r\n\r\n  if (t > 1)\r\n    t -= 1;\r\n\r\n  if (t < 1 / 6)\r\n      return p + (q - p) * 6 * t;\r\n\r\n  if (t < 1 / 2)\r\n      return q;\r\n\r\n  if (t < 2 / 3)\r\n      return p + (q - p) * (2 / 3 - t) * 6;\r\n\r\n  return p;\r\n\r\n},\r\n\r\n/*\r\nSource code: http://jsfiddle.net/mushigh/myoskaos/\r\n*/\r\nrgbToHex : function(r,g,b) {\r\n\r\n  return \"#\" + this.componentToHex(r) + this.componentToHex(g) + this.componentToHex(b);\r\n\r\n},\r\n\r\n/*\r\nSource code: http://jsfiddle.net/mushigh/myoskaos/\r\n*/\r\ncomponentToHex : function(c) {\r\n    var hex = c.toString(16);\r\n    return hex.length == 1 ? \"0\" + hex : hex;\r\n}\r\n\r\n}\r\n\r\nmodule.exports = Color;\r\n","\r\nclass ObjectUtils {\r\n\r\n    isFunction(obj) {\r\n    return !!(obj && obj.constructor && obj.call && obj.apply);\r\n  }\r\n\r\n  getValue(obj, key, defaultValue)\r\n  {\r\n    var type = typeof(obj);\r\n\r\n    if (!obj || type === 'number' || type === 'string')\r\n        return defaultValue;\r\n    else if (obj.hasOwnProperty(key) && obj[key] !== undefined)\r\n        return obj[key];\r\n    else\r\n        return defaultValue;\r\n\r\n  }\r\n\r\n  // Get value in complex object\r\n  getPropertyValue(source, key, defaultValue)\r\n    {\r\n        if (!source || typeof source === 'number')\r\n            return defaultValue;\r\n        else if (source.hasOwnProperty(key))\r\n            return source[key];\r\n        else if (key.indexOf('.'))\r\n        {\r\n            var keys = key.split('.');\r\n            var parent = source;\r\n            var value = defaultValue;\r\n\r\n            for (var i = 0; i < keys.length; i++)\r\n            {\r\n                if (parent.hasOwnProperty(keys[i]))\r\n                {\r\n                    value = parent[keys[i]];\r\n                    parent = parent[keys[i]];\r\n                }\r\n                else\r\n                {\r\n                    value = defaultValue;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            return value;\r\n        }\r\n        else\r\n        {\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n  getURL(url, baseURL)\r\n  {\r\n    if (!url)\r\n        return null;\r\n    \r\n        \r\n    if (url.match(/^(?:blob:|data:|http:\\/\\/|https:\\/\\/|\\/\\/)/))\r\n        return url;\r\n    else\r\n        return baseURL + url;\r\n  }\r\n\r\n};\r\n\r\nexport default new ObjectUtils();","\r\nconst PathUtils = {\r\n\r\n  getExtension(filename) {\r\n    return filename.substring(filename.lastIndexOf('.')+1, filename.length) || \"\";\r\n  },\r\n\r\n  getFilename(path) {\r\n    return path.split('\\\\').pop().split('/').pop() || path;\r\n  },\r\n  \r\n  getFilenameWithoutExtension(path) {\r\n    return this.removeExtension(this.getFilename(path));\r\n  },\r\n\r\n  removeExtension(path) {\r\n    return path.substr(0, path.lastIndexOf('.')) || path;\r\n  },\r\n\r\n  getPath(path) {\r\n    return path.substr(0, path.lastIndexOf(\"/\") + 1) || \"\";\r\n  },\r\n\r\n  getRootPath(path) {\r\n    return path.substr(0, path.indexOf(\"/\") + 1) || path;\r\n  },\r\n\r\n  getPathWithoutRoot(path) {\r\n    let s = (path.indexOf(\"/\") + 1) || 0;\r\n    let l = (path.lastIndexOf(\"/\") - s + 1) || path.length;\r\n    return path.substr(s, l) || path;\r\n  },\r\n\r\n  getDirectoryName(path) {\r\n      let dir = path.split('/');\r\n      let len = dir.length;\r\n      if (len <= 1)\r\n        return dir[dir.length - 1];\r\n      else\r\n        return dir[dir.length - 2];\r\n  },\r\n\r\n}\r\n\r\nexport default PathUtils;"],"sourceRoot":""}