{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///../node_modules/webpack/buildin/global.js","webpack:///../node_modules/webpack/buildin/module.js","webpack:///./Define.js","webpack:///./Scintilla.js","webpack:///./cache/Cache.js","webpack:///./cache/CacheManager.js","webpack:///./camera/Camera.js","webpack:///./camera/ResizeCamera.js","webpack:///./camera/UpdateCamera.js","webpack:///./core/Config.js","webpack:///./core/Game.js","webpack:///./core/GameInitialize.js","webpack:///./core/GameLoop.js","webpack:///./core/index.js","webpack:///./core/system/SceneSystem.js","webpack:///./core/system/System.js","webpack:///./core/system/components/InitializeSystems.js","webpack:///./core/system/components/InjectSystems.js","webpack:///./core/system/components/UnjectSystems.js","webpack:///./dom/RequestAnimationFrame.js","webpack:///./entities/Entity.js","webpack:///./entities/EntityFactory.js","webpack:///./entities/EntityUpdateList.js","webpack:///./entities/SceneEntity.js","webpack:///./entities/index.js","webpack:///./event/EventManager.js","webpack:///./event/Signal.js","webpack:///./event/SignalBinding.js","webpack:///./event/components/AddBinding.js","webpack:///./event/components/IndexOfListener.js","webpack:///./event/components/RegisterListener.js","webpack:///./event/components/ValidateListener.js","webpack:///./event/index.js","webpack:///./input/Input.js","webpack:///./input/index.js","webpack:///./input/keyboard/Key.js","webpack:///./input/keyboard/KeyCode.js","webpack:///./input/keyboard/KeyEvent.js","webpack:///./input/keyboard/Keyboard.js","webpack:///./input/keyboard/components/ProcessKeyPress.js","webpack:///./input/keyboard/components/ProcessKeyRelease.js","webpack:///./input/mouse/Mouse.js","webpack:///./input/mouse/MouseButton.js","webpack:///./loader/AssetsType.js","webpack:///./loader/File.js","webpack:///./loader/ListInjector.js","webpack:///./loader/LoaderManager.js","webpack:///./loader/LoaderState.js","webpack:///./loader/URLObject.js","webpack:///./loader/XHR.js","webpack:///./loader/assets/AssetTypeHandler.js","webpack:///./loader/assets/ImageFile.js","webpack:///./loader/assets/JSONFile.js","webpack:///./loader/assets/ScriptFile.js","webpack:///./loader/assets/TextFile.js","webpack:///./loader/assets/TilemapJSON.js","webpack:///./loader/assets/WebFontFile.js","webpack:///./loader/assets/index.js","webpack:///./loader/components/AddAsset.js","webpack:///./loader/components/AssetProcessingUpdate.js","webpack:///./loader/components/DeleteSucceedQueuedAsset.js","webpack:///./loader/components/InitializeLoader.js","webpack:///./loader/components/LoaderFinished.js","webpack:///./loader/components/NextAsset.js","webpack:///./loader/components/ProcessAssetsQueue.js","webpack:///./loader/components/ProcessDoneAssets.js","webpack:///./loader/components/StartLoadAssets.js","webpack:///./loader/components/UpdateProgress.js","webpack:///./loader/index.js","webpack:///./math/BoundingBox.js","webpack:///./math/MathUtils.js","webpack:///./math/Matrix.js","webpack:///./math/Rect.js","webpack:///./math/Vector.js","webpack:///./math/easing/EaseIn.js","webpack:///./math/easing/EaseInOut.js","webpack:///./math/easing/EaseOut.js","webpack:///./math/easing/Easing.js","webpack:///./math/easing/EasingType.js","webpack:///./modules/Module.js","webpack:///./modules/ModuleAttacher.js","webpack:///./modules/ModuleManager.js","webpack:///./modules/ModuleProvider.js","webpack:///./modules/components/AttachModuleInGame.js","webpack:///./modules/components/InitializeModuleBase.js","webpack:///./modules/components/ModulesUpdater.js","webpack:///./modules/index.js","webpack:///./modules/renderables/Renderable.js","webpack:///./modules/renderables/Sprite.js","webpack:///./modules/renderables/components/AnimateTilemap.js","webpack:///./modules/renderables/components/CullTiles.js","webpack:///./modules/renderables/components/CullingMethod.js","webpack:///./modules/renderables/components/DrawImage.js","webpack:///./modules/renderables/components/DrawTilemapLayer.js","webpack:///./modules/renderables/components/RenderableBoundsUpdate.js","webpack:///./modules/renderables/components/RenderableUpdate.js","webpack:///./modules/renderables/index.js","webpack:///./modules/renderables/tilemap/Tilemap.js","webpack:///./modules/renderables/tilemap/TilemapAnimator.js","webpack:///./modules/renderables/tilemap/TilemapLayer.js","webpack:///./physics/physics.js","webpack:///./physics/xat/SAT.js","webpack:///./physics/xat/SATResponse.js","webpack:///./render/Define.js","webpack:///./render/Render.js","webpack:///./render/RenderLayer.js","webpack:///./render/RenderLayersManagement.js","webpack:///./render/canvas/Canvas.js","webpack:///./render/canvas/Smoothing.js","webpack:///./render/components/BeginDrawRender.js","webpack:///./render/components/DrawRender.js","webpack:///./render/components/DrawRenderLayer.js","webpack:///./render/components/EndDrawRender.js","webpack:///./render/index.js","webpack:///./render/ui/AspectRatio.js","webpack:///./render/ui/Debug.js","webpack:///./render/ui/DrawUI.js","webpack:///./render/ui/InitializeUI.js","webpack:///./render/ui/UI.js","webpack:///./render/ui/UIDrawer.js","webpack:///./render/ui/UIResize.js","webpack:///./render/ui/UpdateUIMatrix.js","webpack:///./resources/ImageResource.js","webpack:///./resources/Resource.js","webpack:///./resources/ResourceType.js","webpack:///./resources/index.js","webpack:///./resources/tilemap/TilemapResource.js","webpack:///./resources/tilemap/data/Tile.js","webpack:///./resources/tilemap/data/TileGID.js","webpack:///./resources/tilemap/data/TilemapLayerData.js","webpack:///./resources/tilemap/data/TilemapMetadata.js","webpack:///./resources/tilemap/data/Tileset.js","webpack:///./resources/tilemap/parser/ParseGID.js","webpack:///./resources/tilemap/parser/ParseLayers.js","webpack:///./resources/tilemap/parser/ParseTilesProperties.js","webpack:///./resources/tilemap/parser/ParseTileset.js","webpack:///./scene/Scene.js","webpack:///./scene/SceneManager.js","webpack:///./scene/builtin/ScintillaLoadingScene.js","webpack:///./scene/components/ClearScene.js","webpack:///./scene/components/PostPreloadingScene.js","webpack:///./scene/components/PreUpdateScene.js","webpack:///./scene/components/PreloadSceneComplete.js","webpack:///./scene/components/RenderScene.js","webpack:///./scene/components/SetScene.js","webpack:///./scene/components/SetupScene.js","webpack:///./scene/components/UpdateScene.js","webpack:///./structures/List.js","webpack:///./structures/Map.js","webpack:///./structures/Set.js","webpack:///./structures/index.js","webpack:///./structures/useful/MergeSort.js","webpack:///./structures/useful/index.js","webpack:///./time/GameTime.js","webpack:///./time/UpdateStep.js","webpack:///./transform/ComputeBounds.js","webpack:///./transform/ComputeDelimiterPoint.js","webpack:///./transform/Transform.js","webpack:///./transform/UpdateBounds.js","webpack:///./transform/UpdateTransform.js","webpack:///./transform/UpdateTransformBounds.js","webpack:///./utils/Base64Utils.js","webpack:///./utils/Color.js","webpack:///./utils/Path.js","webpack:///./utils/Validate.js","webpack:///./utils/object/ObjectExtend.js","webpack:///./utils/object/ObjectGet.js"],"names":["Version","MAJOR","MINOR","REVISION","VERSION","scintilla","Core","require","Structures","Render","KeyCode","MouseButton","Input","Math","Matrix","Ease","EasingType","SceneManager","Camera","Module","Entity","Event","Resources","Cache","Loader","Game","Color","module","exports","global","wrapperFunction","resources","adderWrapper","undefined","tag","asset","resource","set","has","get","delete","clear","CacheTypes","CacheManager","game","self","image","data","tilemap","json","text","cacheType","hasCache","i","length","props","destroy","register","canvas","width","config","camera","height","bounds","viewBounds","transform","_pixelUnit","x","y","_aspectRatio","_backgroundColor","rgbToHex","_roundPixels","roundPixels","_isDirty","entity","position","r","g","b","a","rgba","reset","value","scale","angle","rotation","degToRad","origin","color","flag","system","render","ResizeCamera","UpdateCamera","t","_oldRotation","_cosSin","sin","cos","pos","round","setMin","setMax","matrix","setIdentity","translate","radianRotate","Config","callback","callback_2","propertyValue","parent","debug","floorTiles","loader","baseURL","path","responseType","async","fps","time","timeoutMode","pixelated","systemInited","isRunning","debugMode","timeMode","sound","input","pool","systems","context","events","parseConfiguration","physics","cache","load","scene","draw","universe","world","component","instance","animationCache","updateGameMethod","GameInitialize","init","loop","console","log","GameLoop","updateStep","entityUpdateList","currentScene","deltaTime","update","shouldUpdate","lateUpdate","ui","entityList","System","SceneSystem","GameSystems","key","systemName","initFunc","name","InitializeSystems","property","registered","InitializeSystemFunction","call","InjectSystems","sys","keyboard","mouse","UnjectSystems","RequestAnimationFrame","_isTimeOutMode","thick","lastTime","loopCallback","timeOutIdentifier","updateRequestAnimationFrame","timeStamp","window","requestAnimationFrame","updateTimeout","dateTime","Date","now","delay","max","setTimeout","clearTimeout","cancelAnimationFrame","stop","loopingCallback","_name","_active","EntityFactory","entityName","modules","attach","sprite","current_scene","add","EntityUpdateList","_instances","_destroyInstances","_pendingInstances","_camera","indexOf","push","dt","size","element","at","active","removeSize","insertSize","eraseList","concat","childs","SceneEntity","type","markDirty","EventManager","_signalsMap","eventName","signal","func","warn","isFunction","subscribe","args","arguments","Array","apply","dispatch","Signal","_bindings","_shouldPropagate","listener","priority","_destroy","eraseAt","params","paramsSize","prototype","slice","binds","execute","unsubscribeAll","SignalBinding","listenerContext","_signal","_listener","_priority","_isOnce","argsArray","handlerReturn","detach","isBound","remove","AddBinding","binding","n","insert","IndexOfListener","each","index","_context","RegisterListener","ValidateListener","Error","replace","Key","Keyboard","Mouse","keycode","keyCode","_enabled","status","press","release","preventDefault","_event","NONE","pressTime","pressDuration","releaseTime","releaseDuration","Backspace","Tab","Enter","Shift","Ctrl","Alt","Pause","CapsLock","Escape","Space","PageUp","PageDown","End","Home","Left","Up","Right","Down","Insert","Delete","Num0","Num1","Num2","Num3","Num4","Num5","Num6","Num7","Num8","Num9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","LSystem","RSystem","SelectK","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","Multiply","Add","Subtract","DecimalPoint","Divide","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","NumLock","ScrollLock","SemiColon","Equal","Comma","Dash","Period","Slash","LBraket","BackSlash","RBracket","Quote","KeyEvent","IDLE","PRESSED","RELEASED","eventTarget","eventHandler","_eventQueue","_keyMapping","lastKey","prop","hasOwnProperty","document","handler","event","defaultPrevented","addEventListener","removeEventListener","_onKeyDown","_onKeyUp","_onKeyPress","eventSize","queue","splice","isPressed","isReleased","ProcessKeyPress","ProcessKeyRelease","MouseEvent","PRESS","RELEASE","button","wheelDelta","_mouseButtons","_mouseButtonsLocks","_mouseButtonsLocksPressed","_mouseDownDuration","_onMouseDown","_onMouseMove","onMouseDown","_onMouseUp","onMouseUp","onMouseMove","_onMouseOver","_onMouseOut","rect","getBoundingClientRect","floor","clientX","left","right","clientY","top","bottom","buttonLock","hit","object","vec2","Middle","WheelUp","WheelDown","AssetsType","File","useExternal","url","webFont","xhrSettings","createSettings","merge","state","PENDING","totalBytes","loadedBytes","progress","source","xhrRequest","crossOrigin","onComplete","gameLoader","FINISHED","onDone","getURL","createFileRequest","xhr","XHRreset","target","onPostLoad","error","lengthComputable","loaded","total","min","DONE","processingCallback","PROCESSING","onload","onerror","onprogress","ListInjector","list","toObj","LoadManager","_filesQueue","_filesLoading","_successFiles","_failedFiles","_processedFiles","_filesQueueCount","_loadedFilesCount","isDownloading","_totalFiles","webFontLoader","gameConfig","timeout","inject","substr","baseUrl","file","LOADING","ERROR","_successCount","_fileErrorCount","LoaderState","URLObject","createFromResponse","response","URL","src","createObjectURL","reader","FileReader","removeAttribute","result","split","readAsDataURL","revoke","revokeObjectURL","XHR","settings","xmlHttpRequest","XMLHttpRequest","open","onLoad","bind","onError","onProgress","onReadyStateChange","onreadystatechange","send","doAsync","out","setting","AssetTypeHandler","ImageFile","assetTag","fileConfig","ext","getExtension","Image","force","JSONFile","assetConfig","JSON","parse","responseText","ScriptFile","tagFile","script","xhrLoader","createElement","language","defer","head","appendChild","TextFile","endPointPath","CheckImagesSources","fullPath","tileset","getFilenameWithoutExtension","getPathWithoutRoot","getFilename","TilemapFileJSON","tilemapJSON","tilesets","WebFontFile","provider","fontFamily","families","fontLoad","WebFont","isArray","WebFontProvider","WebFontConfig","inactive","fontactive","classes","familyName","fvd","family","AssetsTypeHandler","TilemapJSON","AddAsset","check","isOK","create","AssetProcessingUpdate","DeleteSucceedQueuedAsset","InitializeLoader","LoaderFinished","onProcessing","NextAsset","concludedFile","hasError","ProcessAssetsQueue","loadAsset","ProcessDoneAssets","sort","audio","requestXHR","addSound","autoDecode","decode","StartLoadAssets","UpdateProgress","Assets","LoaderManager","BoundingBox","Infinity","minX","minY","maxX","maxY","xRadius","yRadius","mergeWithPoint","xmin","ymin","xmax","ymax","o","toString","MathUtils","PI","radToDeg","TAU","EPSILON","pow","HALFPI","clamp","randomRange","random","irandomRange","lerp","fromValue","toValue","lerpAngle","end","start","difference","abs","rangeZero","distance","x0","y0","x1","y1","sqrt","angleBetween","toDegree","atan2","radians","toRadian","degrees","Object","freeze","j","setTransform","c","d","e","f","h","radianAngle","a00","a01","a10","a11","a20","a21","other","point","setAll","mat","str","val","copy","zero","k","Rect","intersects","contains","vec","rect1","rect2","Vector","managed","dx","dy","s","otherVector","mag","dot","project","squaredLenght","magnitude","tobiJS","vector","dp","proj","axis","sub","projectNormal","EaseInFunctions","from","to","levels","power","duration","p","postFix","arg","CUT","cut","LINEAR","linear","SINE","sine","QUADRATIC","CUBIC","QUARTIC","QUINTIC","POWER","EXPONENTIAL","exponential","CIRC","circ","BACK","back","ELASTIC","elastic","EaseIn","EaseInOutFunctions","sign","asin","EaseInOut","EaseOutFunction","Mathf","EaseOut","in","inout","STEPPED","BOUNCE","EASE_BACK_CONST","export","moduleType","moduleName","moduleManager","_moduleType","_moduleName","ModuleAttacher","ModuleManager","attached","_pendingModulesInitialization","ModuleProviderManager","proxyModules","modulesManager","newModule","ModuleProvider","AttachModuleInGame","entityModule","layer","renderLayers","layers","InitializeModuleBase","instace","ModulesUpdater","mod","Renderables","Renderable","_layerID","_depth","_alpha","_depthDirty","_bounds","_originInPixels","_originIsDirty","_depthSorting","alpha","Sprite","frame","setSource","changeFrame","setFrame","spr","setSprite","AnimateTilemap","animator","len","animatedTiles","delta","hiDeltaTime","animatedTile","GID","tileGID","currentKeyFrame","keyFrames","nextGID","tileID","currentFrame","CullTiles","LimitCulling","culling","rot","tx","ty","method","tileWidth","tileHeight","ceil","CullingMethod","LINEAR90DEG","DrawImage","destination","drawImage","DrawTilemapLayer","draws","idx","tile","tiles","isAnimated","st","getTile","RenderableBoundsUpdate","renderable","RenderableUpdate","gameTime","pixelsWidth","pixelsHeight","Tilemap","metaData","orientation","animations","hasAnimatedTiles","res","TilemapAnimator","layerData","animatedSet","animID","getTileGID","hasGid","find","gid","TilemapLayer","Physics","sat","colliadables","obj","objA","shapeA","shape","_gameObject","_selfDestroy","jit","objB","shapeB","box","getType","onCollision","SAT","VECTORS","v","ARRAYS","points","normal","Number","MAX_VALUE","posA","posB","pointsA","pointsB","rangeA","pop","rangeB","offsetV","projectedOffset","flattenPointsOn","overlap","aInB","bInA","option1","option2","absOverlap","overlapN","reverse","getPoints","normalsA","getNormals","normalsALen","normalsB","normalsBLen","isSeparatingAxis","overlapV","SATResponse","indexShapeA","indexShapeB","RenderingType","NEAREST","getContext","imageRendering","smooth","_enable","drawCalls","currentContext","globalAlpha","RenderLayer","layerName","renderList","__drawCalls","__enable","__isDirty","renderer","__renderers","RenderLayersManagement","__renderLayersMap","erase","defaultDef","tabindex","id","class","container","style","CO","setAttribute","Canvas","appendDOM","appendTo","overflowHidden","getElementById","nodeType","body","CanvasSmoothing","prefix","getPrefix","vendors","renderType","setEnable","BeginDrawRender","clearRect","fillStyle","fillRect","DrawRender","globalCompositeOperation","_setup","enable","DrawRenderLayer","sortDepth","EndDrawRender","RenderLayerManagement","UI","AspectRatio","Square","Pillarbox","Letterbox","computeViewPort","currentAspectRatio","desiredAspect","ratioBox","w","inset","Debug","lineHeight","column","font","textColor","bgcolor","textShadow","strokeStyle","drawLine","desiredFps","textLine","xx","fillText","DrawUI","gui","sceneManager","clip","viewport","clientWidth","clientHeight","save","beginPath","backgroundAlpha","backgroundColor","restore","test","InitializeUI","ratiobox","aspectRatio","pixelUnit","borderX","borderY","canvasRatioX","canvasRatioY","areaRatio","orthoSize","UIDrawer","lastAlpha","lastColor","currentColor","currentTextAlign","fontname","isNumber","align","transformPosition","textAlign","anchor","img","getAsset","ctx","xscale","yscale","outlineWidth","lineWidth","strokeRect","bb","outlineRectangle","UIResize","UpdateUIMatrix","ImageResource","imageUrl","complete","naturalWidth","naturalHeight","Resource","None","ResourceType","TilemapResource","tilewidth","tileheight","orietation","hasGID","Tile","tileData","tileX","tileY","TileGID","u","umax","vmax","TilemapLayerData","visible","TilemapMetadata","Tileset","firstgid","margin","spacing","rows","collumns","gidCount","parseInt","imageWidth","imageHeight","columns","ParseGID","FLIPPED_HORIZONTALLY_FLAG","FLIPPED_VERTICALLY_FLAG","FLIPPED_DIAGONALLY_FLAG","ParseGIDFlags","flipped_horizontally","flipped_vertically","flipped_diagonally","flip","flipped","global_tile_id","Boolean","flags","flipHorizontal","flipVertical","flipDiagonal","ParseLayers","map","tileLayers","jsonLayer","enconding","decodeToUint32","newLayer","opacity","animatedTilesGID","gidProp","getTilesetByGID","ParseTilesProperties","tilesetTilesProperties","tileIndex","tileProperties","propertyContent","animationSize","anim","tileid","ParseTilesets","tileSets","jsonTileset","newTileSet","updateData","imagewidth","imageheight","Scene","gameObject","instances","clone","cl","GameObject","_id","_game","_scenes","_currentSceneName","_changeScene","_clearCache","_scintillaLoading","onStartCallback","onLoadingCallback","onLoadingRenderCallback","onPreloadCallback","onUpdateCallback","onRenderCallback","onDestroyCallback","_loadingPlaceHolder","sceneName","newScene","isPrototypeOf","clearCache","scenes","ScintillaLoadingScreen","scintillaLogo","logoData","fromProgress","toProgress","nextScene","preloadingDone","drawFunc","outlineRect","loadingFunc","prog","wait","preloadDone","loading","loadingGUI","next","setSize","setViewportByAspectRatio","ClearScene","PostPreloadingScene","sceneManger","PreUpdateScene","totalQueuedFiles","PreloadSceneComplete","RenderScene","drawer","SetScene","manager","SetupScene","bothIsNull","UpdateScene","DataList","elements","unique","child","unshift","childToErase","listToRemove","count","otherList","clearOther","content","predicate","childA","childB","idx0","idx1","indexA","indexB","cA","cB","DataMap","_content","_size","entries","keys","values","array","_contents","DataSet","scope","Utils","Set","Map","List","MergeSort","begin","begin_right","left_size","right_size","msort","mid","GameTime","gameLoop","_updateStep","fpsDesired","elapsed","UpdateStep","startTime","previousTime","requireFpsUpdate","currentFps","_nextFpsUpdate","_framesThisSecond","interpolation","timeStep","minTimeStep","accumalator","accumulatorMax","updateLast","updateAverageDelta","frameCounter","performance","fpsUpdate","accumalatorMethod","frameRate","accumulator","accumalatorMax","deltaUpdate","accumulatorUpdateDelta","updateStart","stepSize","previousTimeTime","accumalatorReset","ComputeBounds","transformPoint","ComputeDelimiterPoint","coord","xa","ya","Transform","worldPosition","worldScale","globalBounds","UpdateBounds","cosSin","coords","UpdateTransform","parentTransform","setModelMatrix","UpdateTransformBounds","Base64Utils","atob","bin","bytes","charCodeAt","encode","btoa","HSLtoRGB","l","alp","q","hueToColor","componentToHex","hex","Path","filename","substring","lastIndexOf","removeExtension","getPath","getRootPath","getDirectoryName","dir","match","Validate","Function","isClass","constructor","isNaN","ObjectExtend","deepCopy","argsLength","dst","ObjectGettter","defaultValue","ObjectGet"],"mappings":"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","file":"scintilla.dev.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Scintilla\"] = factory();\n\telse\n\t\troot[\"Scintilla\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./Scintilla.js\");\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","module.exports = function(module) {\r\n\tif (!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif (!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n","\r\n\r\nconst Version = {\r\n\r\n\r\n    MAJOR: 0,\r\n    MINOR: 0,\r\n    REVISION: 1,\r\n    VERSION : '0.0.1'\r\n\r\n}\r\n\r\nexport default Version;","/**\r\n* @author       Tobias Beise Ulrich\r\n* @license      MIT\r\n*\r\n* @overview\r\n*\r\n* --- Scintilla ---\r\n*\r\n* v0.0.1\r\n*\r\n* tobiasbu.github.io\r\n*\r\n* Scintilla is simple 2D game engine for HTML5 games.\r\n* The first version is only for browsers based in canvas.\r\n*\r\n*/\r\n\r\nimport Defines from './Define'\r\nimport ObjectExtend from './utils/object/ObjectExtend';\r\n\r\n/**\r\n* @namespace scintilla\r\n*/\r\nvar scintilla = scintilla || {\r\n  \r\n  Core : require('./core'),\r\n\r\n  // DATA STRUCTURES\r\n  Structures : require('./structures'),\r\n  // RENDER\r\n  Render : require('./render'),\r\n  // INPUT\r\n  KeyCode : require('./input/keyboard/KeyCode'),\r\n  MouseButton : require('./input/mouse/MouseButton'),\r\n  Input : require('./input'),\r\n  // MATH\r\n  Math : require('./math/MathUtils'),\r\n  Matrix : require('./math/Matrix'),\r\n  Ease : require('./math/easing/Easing'),\r\n  EasingType : require('./math/easing/EasingType'),\r\n  // ENTITIES\r\n  SceneManager : require('./scene/SceneManager'),\r\n  Camera : require('./camera/Camera'),\r\n  Module : require('./modules'),\r\n  Entity : require('./entities'),\r\n  // EVENTS\r\n  Event : require('./event'),\r\n  // CORE\r\n  Resources : require('./resources'),\r\n  Cache : require('./cache/CacheManager'),\r\n  Loader : require('./loader'),\r\n  Game : require('./core/Game'),\r\n  // UTILITIES\r\n  Color : require('./utils/Color')\r\n};\r\n\r\nObjectExtend(Defines, scintilla);\r\n\r\n/*\r\nscintilla.ShapeType = {\r\nRect : 1,\r\nCircle : 2,\r\nPolygon : 3\r\n}*/\r\n\r\n\r\nmodule.exports = scintilla;\r\n\r\nglobal.scintilla = scintilla;","import DataMap from \"../structures/Map\";\r\n\r\nexport default class Cache {\r\n\r\n    constructor(wrapperFunction) {\r\n        this.resources = new DataMap();\r\n        this.adderWrapper = wrapperFunction || undefined;\r\n    }\r\n\r\n    add(tag, asset) {\r\n\r\n        let resource = asset;\r\n\r\n        if (this.adderWrapper !== undefined)\r\n            resource = this.adderWrapper(tag, asset);\r\n\r\n        this.resources.set(tag, resource);\r\n    }\r\n\r\n    has(tag) {\r\n        return this.resources.has(tag);\r\n    }\r\n\r\n    get(tag) {\r\n        return this.resources.get(tag);\r\n    }\r\n\r\n    erase(tag) {\r\n        this.resources.delete(tag);\r\n        return this;\r\n    }\r\n\r\n    clear() {\r\n        this.resources.clear();\r\n    }\r\n\r\n    destroy() {\r\n        this.resources.clear();\r\n        this.resources = null;\r\n    }\r\n\r\n}","import System from \"../core/system/System\";\r\nimport ImageResource from \"../resources/ImageResource\";\r\nimport TilemapResource from \"../resources/tilemap/TilemapResource\";\r\nimport Cache from \"./Cache\";\r\n\r\n\r\nconst CacheTypes = [\r\n  'image',\r\n  'json',\r\n  'audio',\r\n  'text',\r\n  'tilemap',\r\n];\r\n\r\n/**\r\n* Cache manager - holds file data\r\n* @class Cache\r\n* @constructor\r\n*/\r\nexport default class CacheManager {\r\n\r\nconstructor(game) {\r\n  this.game = game;\r\n\r\n\r\n  let self = this;\r\n\r\n  this.image = new Cache((tag, data) => {\r\n    return new ImageResource(tag, data)\r\n  });\r\n  \r\n  this.tilemap = new Cache((tag, data) => {\r\n    return new TilemapResource(tag, data, self);\r\n  });\r\n\r\n  this.json = new Cache();\r\n  this.text = new Cache();\r\n\r\n\r\n}\r\n\r\n  /*addTilemap(tag, dataFormat) {\r\n    this._cache.tilemap[tag] = new TilemapResource(dataFormat, tag, this);\r\n  }\r\n\r\n  addJSON(tag, dataFormat) {\r\n    this._cache.json[tag] = dataFormat;\r\n  }\r\n\r\n  addImage(tag, url, data) {\r\n\r\n    if (this.tagExists('images',tag))\r\n      this.removeTagAt('images',tag);\r\n\r\n    \r\n    var img = new ImageResource(data,tag)\r\n\r\n    this._cache.images[tag] = img;\r\n\r\n  }\r\n\r\n  addSound(tag, url,data,webAudio) {\r\n\r\n    var decoded = false;\r\n\r\n    if (!webAudio)\r\n    {\r\n        decoded = true;\r\n    }\r\n\r\n    var audio = {\r\n            tag: tag,\r\n            url: url,\r\n            data: data,\r\n            usingWebAudio: webAudio,\r\n            decoded: decoded,\r\n            isDecoding: false\r\n    };\r\n\r\n    this._cache.sounds[tag] = audio;\r\n\r\n  }\r\n\r\n  soundDecoded(tag, data) {\r\n\r\n    var sound = this.getAssetInfo(\"sounds\",tag);\r\n\r\n    sound.data = data;\r\n    sound.decoded = true;\r\n    sound.isDecoding = false;\r\n\r\n  }*/\r\n\r\n  hasCache(cacheType) {\r\n    return (typeof CacheTypes[cacheType] !== undefined);\r\n  }\r\n\r\n  getAsset(cacheType, tag) { // return the cache container\r\n\r\n    if (!this.hasCache(cacheType))\r\n      return null;\r\n\r\n    return this[cacheType].get(tag);\r\n\r\n  }\r\n\r\n  clear() {\r\n\r\n    for (let i = 0; i < CacheTypes.length; i++) {\r\n      this[props[i]].clear();\r\n    }\r\n\r\n  }\r\n\r\n  destroy() {\r\n\r\n    for (let i = 0; i < CacheTypes.length; i++) {\r\n      this[props[i]].destroy();\r\n      this[props[i]] = null;\r\n    }\r\n\r\n    this.game = null;\r\n  }\r\n\r\n  // SOUND STUFF\r\n\r\n}\r\n\r\nSystem.register('Cache', CacheManager, 'cache');","import System from '../core/system/System';\r\nimport BoundingBox from '../math/BoundingBox';\r\nimport Transform  from '../transform/Transform';\r\nimport Color from '../utils/Color'\r\nimport MathUtils from '../math/MathUtils'\r\nimport Vector from '../math/Vector'\r\nimport ResizeCamera from './ResizeCamera';\r\n\r\n\r\nexport default class Camera {\r\n  \r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    this.canvas = null;\r\n\r\n   \r\n    this.width = game.config.camera.width;\r\n    this.height = game.config.camera.height;\r\n\r\n\r\n    this.bounds = new BoundingBox(); // render bounds\r\n    this.viewBounds = new BoundingBox(0,0, this.width, this.height); // global bounds\r\n    this.transform = new Transform();\r\n   \r\n    \r\n    //this.transform.origin.set(0.5,0.5)\r\n    //this.centerView();\r\n    // this._resolution = 1;\r\n    this._pixelUnit = {x:1,y:1};    \r\n    this._aspectRatio = 1;\r\n\r\n    this._backgroundColor = Color.rgbToHex(0,0,0);\r\n    this._roundPixels = game.config.roundPixels;\r\n\r\n  }\r\n\r\n  get position() { \r\n    return { \r\n      x : this.transform.position.x, \r\n      y : this.transform.position.y\r\n    }; \r\n  }\r\n  set position(value) { \r\n    this.transform.position.x = value.x;\r\n    this.transform.position.y = value.y; \r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n  get x() {return this.transform.position.x;}\r\n  set x(value) { \r\n    this.transform.position.x = value; \r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n  \r\n  get y() {return this.transform.position.y;}\r\n  set y(value) { \r\n    this.transform.position.y = value; \r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  get scale() { return this.transform.scale.x; }\r\n  set scale(value) { \r\n    this.transform.scale.x = value; \r\n    this.transform._isDirty = true; \r\n    return this;\r\n  }\r\n\r\n  get angle() { return this.transform.angle; }\r\n  set angle(value) { \r\n    this.transform.angle = value; \r\n    this.transform.rotation = value * MathUtils.degToRad;\r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  get origin() { return this.transform.origin; }\r\n  set origin(value) {\r\n    this.transform.x = value.x;\r\n    this.transform.y = value.y;\r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  get rotation() { return this.transform.rotation; }\r\n\r\n  set backgroundColor(color) {\r\n    if (color === undefined) { color = 'rgba(0,0,0,0)'; }\r\n    this._backgroundColor = color;\r\n    return this;\r\n  }\r\n  get backgroundColor() {\r\n    return this._backgroundColor = color;\r\n  }\r\n\r\n  set roundPixels(flag) {\r\n    this._roundPixels = flag;\r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n  get size() {\r\n    return {x:this.width, y:this.height};\r\n  }\r\n\r\n  centerView() {\r\n    this.x = this.width * 0.5;\r\n    this.y = this.height * 0.5;\r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  centerToEntity(entity) {\r\n    this.x = entity.position.x;\r\n    this.y = entity.position.y;\r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  setBackgroundColor(r, g, b, a) {\r\n    if (r === undefined) { g = 0; }\r\n    if (g === undefined) { g = 0; }\r\n    if (b === undefined) { b = 0; }\r\n    if (a === undefined) { a = 1; }\r\n    this._backgroundColor = Color.rgba(r,g,b,a);\r\n    return this;\r\n  }\r\n\r\n  setSize(width, height) {\r\n    ResizeCamera(this, this.canvas, width, height);\r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  setView(x, y, width, height) {\r\n    this.transform.position.x = x;\r\n    this.transform.position.y = y;\r\n    ResizeCamera(width, height);\r\n    this.transform._isDirty = true;\r\n    return this;\r\n  }\r\n\r\n  reset() {\r\n    this.transform.reset();\r\n  }\r\n\r\n}\r\n\r\nSystem.register('Camera', Camera, 'camera', function() {\r\n  this.canvas = this.game.system.render.canvas;\r\n  ResizeCamera(this, this.canvas, this.width, this.height);\r\n});","\r\nexport default function ResizeCamera(camera, canvas, width, height) {\r\n\r\n    camera.width = width;\r\n    camera.height = height;\r\n    camera._aspectRatio = width / height;\r\n    camera._pixelUnit.x = canvas.width / camera.width;\r\n    camera._pixelUnit.y = canvas.height / camera.height;\r\n}","import UpdateBounds from \"../transform/UpdateBounds\";\r\nimport ComputeDelimiterPoint from \"../transform/ComputeDelimiterPoint\";\r\nimport ComputeBounds from \"../transform/ComputeBounds\";\r\nimport MathUtils from \"../math/MathUtils\";\r\n\r\n\r\nexport default function UpdateCamera(camera, canvas) {\r\n    \r\n  if (!camera.transform._isDirty)\r\n    return;\r\n\r\n  let t = camera.transform;\r\n\r\n\r\n  if (t.rotation != t._oldRotation) {\r\n    t._oldRotation = t.rotation;\r\n    t._cosSin.y = Math.sin(t.rotation);\r\n    t._cosSin.x = Math.cos(t.rotation);\r\n  }\r\n\r\n  let origin = {\r\n    x: camera.width * t.origin.x,\r\n    y: camera.height * t.origin.y\r\n  };\r\n\r\n  let pos = {x: (t.position.x + origin.x),\r\n             y: (t.position.y + origin.y)};\r\n\r\n  if (camera._roundPixels) {\r\n    pos.x = MathUtils.round(pos.x);\r\n    pos.y = MathUtils.round(pos.y);\r\n  }\r\n\r\n  // update camera view\r\n  camera.viewBounds\r\n  .setMin(pos.x, pos.y)\r\n  .setMax(pos.x + camera.width, pos.y + camera.height)\r\n\r\n  pos.x = -pos.x;\r\n  pos.y = -pos.y;\r\n\r\n  // compute the basic rotation\r\n  t.matrix.setIdentity()\r\n  .scale(camera._pixelUnit.x, camera._pixelUnit.y) // resolution\r\n  .translate(pos.x , pos.y)\r\n  .scale(t.scale.x, t.scale.x)\r\n  \r\n  // bounds should not be rotated\r\n  ComputeBounds(\r\n    camera.bounds, camera.transform, \r\n    camera.width, camera.height, \r\n    pos);\r\n\r\n    t.matrix\r\n    .radianRotate(t._cosSin.x, t._cosSin.y)\r\n    .translate(-origin.x, -origin.y);\r\n\r\n  \r\n\r\n}","\r\nimport ObjectGet from '../utils/object/ObjectGet';\r\n\r\nexport default class Config {\r\n\r\n    constructor(config)\r\n    {\r\n        if (config === undefined) \r\n            config = {};\r\n\r\n        var callback = ObjectGet.value;\r\n        var callback_2 = ObjectGet.propertyValue;\r\n\r\n        // view and canvas\r\n        this.width = callback(config, 'width', 640);\r\n        this.height = callback(config, 'height', 480);\r\n        this.parent = callback(config, 'parent', null);\r\n        this.debug =  callback(config, 'debug', false);\r\n\r\n        this.roundPixels = callback(config, 'roundPixels', false);\r\n        this.floorTiles = callback(config, 'floorTiles', false),\r\n\r\n        // loader\r\n        this.loader = {\r\n            baseURL : callback_2(config, 'loader.baseURL', ''),\r\n            path : callback_2(config, 'loader.path', ''),\r\n            responseType : callback_2(config, 'loader.responseType', ''),\r\n            async : callback_2(config, 'loader.async', true),\r\n        }\r\n\r\n\r\n\r\n        this.fps = callback(config, 'fps', 60);\r\n\r\n        this.time = {\r\n            timeoutMode : callback_2(config, 'time.timeOutMode', false),\r\n           \r\n        }\r\n\r\n        this.camera = {\r\n            width : callback_2(config, 'camera.width', this.width),\r\n            height : callback_2(config, 'camera.height', this.height)\r\n        }\r\n\r\n        this.pixelated = callback(config, 'pixelated', false);\r\n        /* this.loaderEnableParallel = GetValue(config, 'loader.enableParallel', true);\r\n            this.loaderMaxParallelDownloads = GetValue(config, 'loader.maxParallelDownloads', 4);\r\n            this.loaderCrossOrigin = GetValue(config, 'loader.crossOrigin', undefined);\r\n            \r\n            this.loaderUser = GetValue(config, 'loader.user', '');\r\n            this.loaderPassword = GetValue(config, 'loader.password', '');\r\n    this.loaderTimeout = GetValue(config, 'loader.timeout', 0);*/\r\n\r\n\r\n    }\r\n\r\n}","\r\nimport Config from './Config';\r\nimport GameInitialize from './GameInitialize';\r\n\r\n/**\r\n* Main class of engine. Holds all main data.\r\n* @class Game\r\n* @constructor\r\n*/\r\nexport default class Game {\r\n\r\n  /**\r\n  * @property {string|HTMLElement} parent - The Games DOM parent.\r\n  * @default\r\n  */\r\n constructor() {\r\n   \r\n  this.parent = 'body';\r\n  this.width = 800;\r\n  this.height = 600;\r\n\r\n  // object\r\n  this.config = new Config(config);\r\n\r\n  // boolean\r\n  this.systemInited = false;\r\n  this.isRunning = false;\r\n  this.debugMode = false;\r\n\r\n  // float\r\n  this.timeMode = false;\r\n\r\n\r\n  //objects\r\n  this.debug = null;\r\n  //this.scene = null;\r\n  this.sound = null;\r\n  this.input = null;\r\n  this.pool = null;\r\n  this.systems =  null;\r\n  this.context = null;\r\n  this.time = null;\r\n  this.events = null;\r\n\r\n  this.parseConfiguration(this.config);\r\n\r\n  GameInitialize(this);\r\n }\r\n\r\n  parseConfiguration(config) {\r\n\r\n    //this.config = config;\r\n\r\n    if (config['debug'])\r\n    {\r\n        this.debugMode = config['debug'];\r\n\r\n    }\r\n\r\n    if (config['width'])\r\n    {\r\n        this.width = config['width'];\r\n    }\r\n\r\n    if (config['height'])\r\n    {\r\n        this.height = config['height'];\r\n    }\r\n\r\n    if (config['parent'])\r\n    {\r\n        this.parent = config['parent'];\r\n    }\r\n\r\n  }\r\n\r\n\r\n  destroy() {\r\n\r\n    this.physics.destroy();\r\n    this.sound.destroy();\r\n    this.input.destroy();\r\n\r\n    this.debug = null;\r\n    this.cache = null;\r\n    this.load = null;\r\n    this.canvas = null;\r\n    this.scene = null;\r\n    this.sound = null;\r\n    this.draw = null;\r\n    this.universe = null;\r\n    this.world = null;\r\n    this.input = null;\r\n    this.time = null;\r\n    this.render = null;\r\n    this.component = null;\r\n    this.instance = null;\r\n    this.animationCache = null;\r\n    this.updateGameMethod = null;\r\n\r\n\r\n  }\r\n\r\n}\r\n\r\n//scintilla.Game.prototype.constructor = scintilla.Game;\r\n\r\n\r\nmodule.exports = Game;","import Physics from \"../physics/physics\";\r\nimport Input from \"../input/Input\";\r\nimport GameTime from \"../time/GameTime\";\r\nimport InitializeSystems from \"./system/components/InitializeSystems\";\r\n\r\n  /**\r\n    * Initialize engine\r\n    *\r\n    * @method Game#init()\r\n    * @protected\r\n    */\r\nexport default function GameInitialize(game) {\r\n\r\n    if (game.systemInited)\r\n        return;\r\n\r\n    game.physics = new Physics(game);\r\n    game.input = new Input(game);\r\n    //this.scene = new SceneManager(this);\r\n    //new GameSystemManager(this);\r\n    game.time = new GameTime(game);\r\n\r\n    game.system = InitializeSystems(game);\r\n\r\n    game.input.init();\r\n    game.time.init(game.system.loop);\r\n    game.systemInited = true;\r\n    game.isRunning = true;\r\n\r\n\r\n    console.log(\"scintilla started!\");\r\n\r\n}","import System from \"./system/System\";\r\nimport RequestAnimationFrame from \"../dom/RequestAnimationFrame\";\r\nimport UpdateStep from \"../time/UpdateStep\";\r\nimport UpdateCamera from \"../camera/UpdateCamera\";\r\nimport BeginDrawRender from \"../render/components/BeginDrawRender\";\r\nimport DrawRender from \"../render/components/DrawRender\";\r\nimport EndDrawRender from \"../render/components/EndDrawRender\";\r\nimport PreUpdateScene from \"../scene/components/PreUpdateScene\";\r\nimport UpdateScene from \"../scene/components/UpdateScene\";\r\nimport DrawUI from \"../render/ui/DrawUI\";\r\n\r\n\r\n\r\n/*\r\n*\r\n* core game loop system\r\n*\r\n* @class GameLoop\r\n* @protected\r\n*/\r\nexport default class GameLoop {\r\n\r\n    constructor(game, system) {\r\n        this.game = game;\r\n        this.system = system;\r\n        this.updateStep = new UpdateStep(game, game.config);\r\n        this.entityUpdateList = null;\r\n        this.currentScene = null;\r\n        this.camera = null;\r\n        this.canvas = null;\r\n    }\r\n\r\n    loop(deltaTime) {\r\n\r\n         // Core Managers\r\n\r\n         this.game.input.update();\r\n         \r\n\r\n         // Entities and Scene Update\r\n\r\n         this.currentScene = this.game.scene.currentScene;\r\n\r\n        let shouldUpdate = (this.currentScene != null && this.currentScene !== undefined);\r\n        //let changeScene = (this.game.scene._changeScene != null || this.game.scene._changeScene !== undefined)\r\n\r\n        //if (changeScene)\r\n        PreUpdateScene(this.game.scene);\r\n        //this.game.scene.preUpdate();\r\n        \r\n\r\n        \r\n\r\n        if (shouldUpdate)\r\n        {\r\n         \r\n            UpdateScene(this.game.scene, deltaTime);\r\n            /*if (this.game.scene._setup)\r\n            {\r\n                // global scene update\r\n                if (this.currentScene.update !== undefined)\r\n                    this.currentScene.update(deltaTime);\r\n            } else {\r\n                if (this.currentScene.loading !== undefined)\r\n                    this.currentScene.loading(deltaTime);\r\n            }*/\r\n\r\n            UpdateCamera(this.camera, this.canvas);\r\n            \r\n            this.entityUpdateList.update(deltaTime);\r\n\r\n            this.entityUpdateList.lateUpdate(deltaTime);\r\n\r\n            if (this.camera.transform._isDirty)\r\n                this.camera.transform._isDirty = false;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    render(deltaTime) {\r\n\r\n        if (this.currentScene == null || this.currentScene === undefined)\r\n            return;\r\n\r\n        BeginDrawRender(this.system.render);\r\n\r\n        DrawRender(this.system.render, this.camera, deltaTime);\r\n\r\n        EndDrawRender(this.system.render);\r\n\r\n        DrawUI(this.system.ui, this.game.scene);\r\n\r\n    }\r\n\r\n}\r\n\r\nSystem.register('GameLoop', GameLoop, 'loop', function() {\r\n    this.updateStep.init(this);\r\n    this.entityUpdateList = this.game.system.entityList;\r\n    this.camera = this.system.camera;\r\n    this.canvas = this.system.render.canvas;\r\n});","\r\nmodule.exports = {\r\n    Config : require('./Config'),\r\n    System : require('./system/System'),\r\n    SceneSystem : require('./system/SceneSystem'),\r\n    GameLoop : require('./GameLoop')\r\n}","\r\n\r\nconst SceneSystem = [\r\n    'Cache',\r\n    //'Draw',\r\n    'Loader',\r\n    'EntityFactory',\r\n    'Camera',\r\n    'SceneManager',\r\n    'UserInterface'\r\n]\r\n\r\nexport default SceneSystem;\r\n","import SceneSystem from \"./SceneSystem\";\r\n\r\n\r\nexport var GameSystems = {};\r\n\r\nconst System = {\r\n\r\n    /** @inner \r\n     * Register a game system.\r\n     * \r\n     * @param {String} key Long description of system\r\n     * @param {Class} system The system class\r\n     * @param {String} systemName The short description name of the system\r\n     * @param {Function} [initFunc] [optional] Initialize function for the system.\r\n     */\r\n    register(key, system, systemName, initFunc)\r\n    {\r\n        GameSystems[key] = {\r\n            name: systemName, \r\n            system: system, \r\n            init : initFunc\r\n        };\r\n    }\r\n    \r\n}\r\n\r\nexport default System;\r\n","import { GameSystems } from \"../System\";\r\n\r\nexport default function InitializeSystems(game) {\r\n    \r\n    let systems = {};\r\n \r\n    // register all game systems\r\n    for (let property in GameSystems) {\r\n\r\n        let registered = GameSystems[property];\r\n        systems[registered.name] = new registered.system(game, systems);\r\n    }\r\n\r\n    // set core system to game class\r\n    game.system = systems;\r\n    game.scene = systems['scene'];\r\n   \r\n\r\n    // initialize systems\r\n    for (let property in GameSystems) {\r\n\r\n        \r\n        let registered = GameSystems[property];\r\n        let InitializeSystemFunction = registered.init;//this[GameSystems[property].name];\r\n        \r\n        if (InitializeSystemFunction === undefined) continue;\r\n\r\n        InitializeSystemFunction.call(systems[registered.name]);\r\n        //sys.init();\r\n    }\r\n\r\n    return systems;\r\n\r\n}","import { GameSystems } from \"../System\";\r\nimport SceneSystem from \"../SceneSystem\";\r\n\r\n\r\n\r\nexport default function InjectSystems(game, scene) {\r\n        \r\n    scene.game = game;\r\n\r\n    for (let property in SceneSystem)\r\n    {\r\n        \r\n        let sys = GameSystems[SceneSystem[property]];\r\n\r\n        if (sys !== undefined)\r\n            scene[sys.name] = game.system[sys.name];\r\n    }\r\n\r\n    // Special injections, input and sound:\r\n\r\n    scene['key'] = game.input.keyboard;\r\n    scene['mouse'] = game.input.mouse;\r\n\r\n    /*for (let property in gameSystems) {\r\n\r\n        let sys = gameSystems[property];\r\n        scene[sys.name] = property[sys.system];\r\n    }*/\r\n}","import { GameSystems } from \"../System\";\r\n\r\nexport default function UnjectSystems(scene) {\r\n\r\n        for (let property in GameSystems) {\r\n\r\n            if (scene[sys.name] !== undefined)\r\n            {\r\n                delete scene[sys.name]; // = undefined;\r\n            }\r\n        }\r\n}","\r\n\r\nexport default class RequestAnimationFrame {\r\n    \r\n    constructor(timeoutMode) {\r\n\r\n        if (timeoutMode === undefined) { timeoutMode = false; }\r\n\r\n        this.isRunning = false;\r\n        this._isTimeOutMode = timeoutMode;\r\n\r\n        this.thick = 0;\r\n        this.lastTime = 0;\r\n\r\n        //callbacks\r\n\r\n        // game loop\r\n        this.loopCallback = null;\r\n\r\n        // timeout/animation callback \r\n        this.timeOutIdentifier = null;\r\n\r\n        /*let vendors = [\r\n            'ms',\r\n            'moz',\r\n            'webkit',\r\n            'o'\r\n        ];\r\n\r\n        for (let x = 0; x < vendors.length && !window.requestAnimationFrame; x++)\r\n        {\r\n            window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n            window.cancelAnimationFrame  = window[vendors[x] + 'CancelAnimationFrame'];\r\n        }*/\r\n\r\n        var self = this;\r\n\r\n        this.updateRequestAnimationFrame = function(timeStamp) {\r\n\r\n            self.lastTime = self.thick;\r\n            self.thick = timeStamp;\r\n            //this.game.update(time);\r\n            self.loopCallback(timeStamp);\r\n    \r\n            self.timeOutIdentifier = window.requestAnimationFrame(self.updateRequestAnimationFrame);\r\n    \r\n        }\r\n    \r\n        this.updateTimeout = function() {\r\n    \r\n            let dateTime = Date.now();\r\n            let delay = Math.max(16 + self.lastTime - dateTime, 0);\r\n            self.lastTime = self.thick;\r\n            self.thick = delay;\r\n            self.loopCallback(delay);\r\n            //this.game.update(Date.now());\r\n            self.timeOutIdentifier = window.setTimeout(self.updateTimeout, delay);\r\n    \r\n        }\r\n    }\r\n\r\n\r\n\r\n    start(loopCallback) {\r\n\r\n        if (this.isRunning)\r\n            return;\r\n\r\n        this.isRunning = true;\r\n\r\n        this.loopCallback = loopCallback;\r\n\r\n        if (!window.requestAnimationFrame || this._isTimeOutMode) {\r\n            this._isTimeOutMode = true;\r\n            this.timeOutIdentifier = window.setTimeout(this.updateTimeout, 0);\r\n        } else {\r\n            this._isTimeOutMode = false;\r\n            this.timeOutIdentifier = window.requestAnimationFrame(this.updateRequestAnimationFrame);\r\n        }\r\n\r\n    }\r\n\r\n\r\n    stop() {\r\n\r\n        if (this._isTimeOutMode)\r\n        {\r\n            clearTimeout(this.timeOutIdentifier);\r\n        }\r\n        else\r\n        {\r\n            window.cancelAnimationFrame(this.timeOutIdentifier);\r\n        }\r\n\r\n        this.isRunning = false;\r\n\r\n    }\r\n\r\n    destroy() {\r\n        this.stop();\r\n        this.loopingCallback = null;\r\n    }\r\n\r\n}\r\n","\r\n\r\n/*\r\n*\r\n* Base class for Entities\r\n*\r\n*/\r\nexport default class Entity {\r\n\r\n    constructor(name, game)\r\n    {\r\n        this._name = name || 'New Entity';\r\n        this._active = true;\r\n        this.game = game || undefined; \r\n    }\r\n\r\n    get active() {return this._active;}\r\n    set active(value)\r\n    {\r\n        value = !!value;\r\n\r\n        if (value !== this._active)\r\n            this._active = value;\r\n\r\n        return this._active;\r\n    }\r\n\r\n    get name() {return this._name;}\r\n    set name(value)\r\n    {\r\n        value = !!value;\r\n\r\n        if (value !== this._name)\r\n            this._name = value;\r\n\r\n        return this._name;\r\n    }\r\n\r\n    destroy()\r\n    {\r\n        \r\n    }\r\n\r\n};","import System from \"../core/system/System\";\r\nimport SceneEntity from \"./SceneEntity\";\r\n\r\n\r\nexport default class EntityFactory {\r\n    \r\n    constructor(game) {\r\n        this.game = game;\r\n        this.scene = null;\r\n        this.entityList = null;\r\n    }\r\n\r\n    entity(entityName) {\r\n        entityName = entityName || 'Scene Entity ' + this.entityList.length;\r\n        return new SceneEntity(entityName, this.game);\r\n    }\r\n\r\n    sprite(tag, entityName) {\r\n\r\n        let entity = this.entity(entityName);\r\n        entity.modules.attach.sprite(tag);\r\n\r\n        if (this.scene.current_scene !== null) {\r\n            this.entityList.add(entity);\r\n        }\r\n\r\n        return entity;\r\n    }\r\n\r\n    tilemap(tag, entityName) {\r\n        let entity = this.entity(entityName);\r\n        entity.modules.attach.tilemap(tag);\r\n\r\n        if (this.scene.current_scene !== null) {\r\n            this.entityList.add(entity);\r\n        }\r\n\r\n        return entity;\r\n    }\r\n\r\n}\r\n\r\nSystem.register('EntityFactory', EntityFactory, 'create', \r\nfunction() {\r\n    this.entityList = this.game.system.entityList;\r\n    this.scene = this.game.scene;\r\n});","import System from \"../core/system/System\";\r\nimport DataList from \"../structures/List\";\r\nimport UpdateTransform from '../transform/UpdateTransform'\r\nimport Matrix from '../math/Matrix'\r\nimport ModulesUpdater from \"../modules/components/ModulesUpdater\";\r\n\r\n\r\nexport default class EntityUpdateList {\r\n\r\n    constructor(game)\r\n    {\r\n        this.game = game;\r\n        this._instances = null;\r\n        this._destroyInstances = null;\r\n        this._pendingInstances = null;\r\n        this._camera = null;\r\n    }\r\n\r\n    get length() {return this._instances.size;}\r\n\r\n    add(instance) {\r\n        if (this._instances.indexOf(instance) === -1 && this._pendingInstances.indexOf(instance) === -1)\r\n        {\r\n            this._pendingInstances.push(instance);\r\n        }\r\n\r\n        return instance;\r\n    }\r\n\r\n    remove(instance) {\r\n\r\n    }\r\n\r\n    update(dt) {\r\n\r\n        \r\n        for (let i = 0; i < this._instances.size; i++) {\r\n\r\n            let element = this._instances.at(i);\r\n\r\n            if (element.active)\r\n            {\r\n                \r\n                if (element.update !== undefined)\r\n                    element.update.call(element, dt); //update(dt);\r\n\r\n                UpdateTransform(element.transform, this._camera.transform);\r\n\r\n                ModulesUpdater(element.modules, this.game);\r\n\r\n                if (element.transform._isDirty)\r\n                    element.transform._isDirty = false;\r\n\r\n                \r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n    lateUpdate()\r\n    {\r\n        let removeSize = this._destroyInstances.size;\r\n        let insertSize = this._pendingInstances.size;\r\n        \r\n        if (insertSize === 0 && removeSize === 0)\r\n            return;\r\n\r\n\r\n        if (removeSize > 0)\r\n            this._instances.eraseList(this._destroyInstances, removeSize);\r\n\r\n        \r\n        /*this._pendingInstances.each(instance => {\r\n\r\n            this.initializeModules(instance);\r\n\r\n            this._instances.push(instance);\r\n        })\r\n\r\n        this._pendingInstances.clear();*/\r\n\r\n        this._instances.concat(this._pendingInstances, true);\r\n\r\n        this._pendingInstances.childs.length = 0;\r\n        this._destroyInstances.childs.length = 0;\r\n\r\n    }\r\n\r\n}\r\n\r\nSystem.register('EntityUpdateList', EntityUpdateList, 'entityList', \r\nfunction() {\r\n    this._instances = new DataList();\r\n    this._destroyInstances = new DataList();\r\n    this._pendingInstances = new DataList();\r\n    this._camera = this.game.system.camera;\r\n});\r\n\r\n","\r\n//import EntityHierarchy from './EntityHierarchy'\r\nimport BoundingBox from '../math/BoundingBox'\r\nimport Transform from '../transform/Transform'\r\nimport ModuleManager from '../modules/ModuleManager';\r\nimport Entity from './Entity';\r\n\r\nexport default class SceneEntity extends Entity //Hierarchy\r\n{\r\n    constructor(name, game)\r\n    {\r\n        name = name || 'New SceneEntity';\r\n        super(name, game || null)\r\n        this.transform = new Transform();\r\n        this.type = null;\r\n        this.pool = null;\r\n        this.modules = new ModuleManager(this);\r\n        //this.bounds = new BoundingBox();\r\n        //this._transformDirty = false;\r\n        //this._currentScene = null;\r\n        \r\n        \r\n    }\r\n\r\n    set x(value) {\r\n        this.transform.position.x = value;\r\n        this.transform.markDirty();\r\n    }\r\n\r\n    get x() { return this.transform.position.y; }\r\n\r\n    set y(value) {\r\n        this.transform.position.y = value;\r\n        this.transform.markDirty();\r\n    }\r\n\r\n    get y() { return this.transform.position.y; }\r\n\r\n    get position() { return this.transform.position; }\r\n    set position(value) { this.transform.position = value; this.transform._isDirty = true; }\r\n\r\n    get origin() { return this.transform.origin; }\r\n    set origin(value) { this.transform.origin = value; this.transform._isDirty = true; }\r\n    set ['origin.x'](value) { this.transform.origin.x = value; this.transform._isDirty = true;}\r\n    set ['origin.y'](value) { this.transform.origin.y = value; this.transform._isDirty = true;}\r\n\r\n    get scale() { return this.transform.scale; }\r\n    set scale(value) { this.transform.scale = value; this.transform._isDirty = true; }\r\n    set ['scale.x'](value) { this.transform.scale.x = value; this.transform._isDirty = true;}\r\n    set ['scale.y'](value) { this.transform.scale.y = value; this.transform._isDirty = true;}\r\n\r\n    get angle() { return this.transform.angle; }\r\n    set angle(value) { this.transform.angle = value; this.transform._isDirty = true; }\r\n   \r\n    \r\n}","\r\nmodule.exports = {\r\n    Entity : require('./Entity'),\r\n    SceneEntity : require('./SceneEntity'),\r\n    EntityUpdateList : require('./EntityUpdateList'),\r\n    EntityFactory : require('./EntityFactory'),\r\n}","\r\nimport DataMap from '../structures/Map'\r\nimport Signal from './Signal'\r\nimport Validate from '../utils/Validate';\r\n\r\nexport default class EventManager {\r\n\r\n    constructor() {\r\n        this._signalsMap = new DataMap();\r\n    }\r\n\r\n    create(eventName) {\r\n\r\n        let has = this._signalsMap.get(eventName);\r\n\r\n        if (has !== undefined && has != null) return has;\r\n\r\n        let signal = new Signal();\r\n\r\n        this._signalsMap.set(eventName, signal);\r\n\r\n        return signal;\r\n    }\r\n\r\n    subscribe(eventName, func) {\r\n\r\n        let has = this._signalsMap.get(eventName);\r\n\r\n        if (has === undefined || has === null) {\r\n            console.warn(\"EventManager.subscribe: There is no registered event called \\'\" + eventName + '\\'.');\r\n            return this;\r\n        }\r\n\r\n        if (!Validate.isFunction(func)) {\r\n            console.warn(\"EventManager.subscribe: The variable is not a function.\");\r\n            return this;\r\n        }\r\n\r\n        has.subscribe(func);\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    /**\r\n    * Dispatch to subscribed Signal\r\n    * @param {String} eventName The subscribed Signal name.\r\n    * @param {...*} [params] Parameters that should be passed to each handler.\r\n    */\r\n    dispatch(eventName) {\r\n\r\n        let has = this._signalsMap.get(eventName);\r\n\r\n        if (has === undefined || has === null) return this;\r\n\r\n        let args = (arguments.length > 1 ? [arguments[1]] : Array.apply(null, arguments));\r\n\r\n        has.dispatch(args);\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n} ","/** @license\r\n * JS Signals <http://millermedeiros.github.com/js-signals/>\r\n * Released under the MIT license\r\n * Author: Miller Medeiros\r\n * Version: ::VERSION_NUMBER:: - Build: ::BUILD_NUMBER:: (::BUILD_DATE::)\r\n*/\r\n\r\nimport DataList from '../structures/List'\r\nimport SignalBinding from './SignalBinding'\r\nimport IndexOfListener from './components/IndexOfListener';\r\nimport ValidateListener from './components/ValidateListener';\r\nimport RegisterListener from './components/RegisterListener';\r\nimport Validate from '../utils/Validate';\r\n\r\n\r\n\r\n// Based on https://github.com/millermedeiros/js-signals\r\n /**\r\n * Custom event broadcaster\r\n * Inspired by Robert Penner's AS3 Signals.\r\n * @name Signal\r\n * @author Miller Medeiros\r\n * @class\r\n */\r\nexport default class Signal {\r\n\r\n    /**\r\n     * @constructor\r\n     */\r\n    constructor() {\r\n        this._bindings = new DataList();\r\n        this.active = true;\r\n        this._shouldPropagate = true;\r\n    }\r\n\r\n    set propagate(value) {this._shouldPropagate = value;}\r\n    get propagate() {return this._shouldPropagate;}\r\n    get count() {return this._bindings.size;}\r\n\r\n\r\n    /**\r\n     * Check if listener was attached to Signal.\r\n     * @param {Function} listener The listener\r\n     * @param {Object} [context] Context\r\n     * @return {boolean} if Signal has the specified listener.\r\n     */\r\n    has(listener, context) {\r\n        return IndexOfListener(this, listener, context) !== -1;\r\n    }\r\n\r\n    /**\r\n     * Add a listener to the signal.\r\n     * @param {Function} listener Signal handler function.\r\n     * @param {Object} [listenerContext] Context on which listener will be executed (object that should represent the `this` variable inside listener function).\r\n     * @param {Number} [priority] The priority level of the event listener. Listeners with higher priority will be executed before listeners with lower priority. Listeners with same priority level will be executed at the same order as they were added. (default = 0)\r\n     * @return {Signal} return this signal.\r\n     */\r\n    subscribe(listener, context, priority) {\r\n        ValidateListener(listener, 'subscribe');\r\n        RegisterListener(this, listener, context, priority);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Remove a single listener from the dispatch queue.\r\n     * @param {Function} listener Handler function that should be removed.\r\n     * @param {Object} [context] Execution context (since you can add the same handler multiple times if executing in a different context).\r\n     * @return {Function} Listener handler function.\r\n     */\r\n    unsubscribe(listener, context) {\r\n        ValidateListener(listener, 'unsubscribe');\r\n\r\n        let i = IndexOfListener(this, listener, context);\r\n        if (i !== -1) {\r\n            this._bindings[i]._destroy();\r\n            this._bindings.eraseAt(i);\r\n        }\r\n\r\n        return listener;\r\n    }\r\n\r\n    unsubscribeAll() {\r\n\r\n    }\r\n\r\n     /**\r\n    * Dispatch/Broadcast Signal to all listeners added to the queue.\r\n    * @param {...*} [params] Parameters that should be passed to each handler.\r\n    */\r\n    dispatch(params) {\r\n        if (!this.active)\r\n            return;\r\n        \r\n        let size = this._bindings.length;\r\n\r\n        if (!size)\r\n            return;\r\n\r\n        let paramsSize = arguments.length;\r\n\r\n        if (paramsSize > 1)\r\n        {\r\n            params = Array.prototype.slice.call(arguments);\r\n        }\r\n\r\n        let binds = this._bindings.childs.slice();\r\n\r\n        do { size--; } \r\n        while (binds[size] && this._shouldPropagate && binds[size].execute(params) !== false);\r\n    }\r\n\r\n    destroy() {\r\n        this.unsubscribeAll();\r\n        delete this._bindings;\r\n    }\r\n\r\n}","\r\n\r\nexport default class SignalBinding {\r\n    \r\n    constructor(signal, listener, listenerContext, priority) {\r\n\r\n        this._signal = signal;\r\n        this._listener = listener;\r\n        this.context = listenerContext;\r\n        this._priority = priority || 0;\r\n        this.active = true;\r\n        this.args = undefined;\r\n        this._isOnce = false;\r\n    }\r\n\r\n    execute(argsArray) {\r\n        let handlerReturn, params;\r\n\r\n            if (this.active && !!this._listener) {\r\n\r\n                params = this.args ? this.args.concat(argsArray) : argsArray;\r\n                handlerReturn = this._listener.apply(this.context, params);\r\n                if (this._isOnce) {\r\n                    this.detach();\r\n                }\r\n\r\n            }\r\n        return handlerReturn;\r\n    }\r\n\r\n    get listener() { return this._listener; }\r\n    get signal() {return this._signal;}\r\n\r\n    detach() {\r\n        return this.isBound() ? this._signal.remove(this._listener, this.context) : null;\r\n    }\r\n\r\n     /**\r\n         * @return {Boolean} `true` if binding is still bound to the signal and have a listener.\r\n         */\r\n    isBound() {\r\n        return (!!this._signal && !!this._listener);\r\n    }\r\n\r\n     /**\r\n         * Delete instance properties\r\n         * @private\r\n         */\r\n    _destroy() {\r\n        delete this._signal;\r\n        delete this._listener;\r\n        delete this.context;\r\n    }\r\n\r\n}","\r\n   \r\n\r\nexport default function AddBinding(signal, binding) {\r\n\r\n        let n = signal._bindings.length;\r\n\r\n        do { --n; } while (signal._bindings.at(n) && binding._priority <= signal._bindings.at(n)._priority);\r\n\r\n        signal._bindings.insert(binding,n);\r\n}\r\n","\r\nexport default function IndexOfListener(signal, listener, context) {\r\n \r\n    let r = signal._bindings.each((element, index) => {\r\n        if (element._listener === listener && element._context === context) {\r\n            return index;\r\n        }\r\n    })\r\n\r\n    return r || -1;\r\n}","import SignalBinding from \"../SignalBinding\";\r\nimport IndexOfListener from \"./IndexOfListener\";\r\nimport AddBinding from \"./AddBinding\";\r\n\r\nexport default function RegisterListener(signal, listener, listenerContext, priority) {\r\n\r\n    let binding = null;\r\n    let index = IndexOfListener(signal, listener, listenerContext);\r\n\r\n    if (index !== -1) {\r\n        binding = signal._bindings[index];\r\n    } else {\r\n\r\n        binding = new SignalBinding(signal, listener, listenerContext, priority);\r\n        AddBinding(signal, binding);\r\n    }\r\n\r\n    return binding;\r\n    \r\n}","\r\nexport default function ValidateListener(listener, func) \r\n{\r\n    if (typeof listener !== 'function') \r\n        throw new Error( 'Signal.{fn}: Listener should be a function.'.replace('{fn}', func) );\r\n    \r\n}","\r\nmodule.exports = {\r\n    Signal : require('./Signal'),\r\n    EventManager : require('./EventManager')\r\n}","\r\nimport Keyboard from \"./keyboard/Keyboard\";\r\nimport Mouse from \"./mouse/Mouse\";\r\n\r\nexport default class Input {\r\n\r\n  constructor(game) {\r\n\r\n  this.game = game;\r\n  this.mouse = null;\r\n  this.keyboard = null;\r\n\r\n  }\r\n\r\n  init() {\r\n\r\n    //this.mouse = new tobiJS.Mouse(this.game);\r\n    this.keyboard = new Keyboard(this.game);\r\n    this.mouse = new Mouse(this.game);\r\n    this.keyboard.init();\r\n    this.mouse.init();\r\n\r\n  }\r\n\r\n  update() {\r\n\r\n    this.keyboard.update();\r\n    this.mouse.update();\r\n\r\n  }\r\n\r\n  reset()\r\n  {\r\n    this.keyboard.reset();\r\n    this.mouse.reset();\r\n  }\r\n\r\n}\r\n","\r\nmodule.exports = {\r\n\r\n    Key : require('./keyboard/Key'),\r\n    Keyboard : require('./keyboard/Keyboard'),\r\n    Mouse : require('./mouse/Mouse'),\r\n    Input : require('./Input')\r\n    \r\n}","\r\n\r\nimport KeyEvent from './KeyEvent'\r\n\r\nexport default class Key {\r\n    \r\n    constructor(keycode, game) {\r\n\r\n        this.game = game;\r\n        this.keyCode = keycode; \r\n\r\n        this._enabled = true;       \r\n        this.status = false;\r\n        this.press = false;\r\n        this.release = false;\r\n\r\n        this.preventDefault = true;\r\n\r\n        this._event = KeyEvent.NONE;\r\n\r\n        this.pressTime = 0;\r\n        this.pressDuration = -2500;\r\n        this.releaseTime = 0;\r\n        this.releaseDuration = -2500;\r\n\r\n    }\r\n\r\n    get event() {\r\n        return this._event;\r\n    }\r\n\r\n    get enabled() {return this._enabled;}\r\n    set enabled(value) {\r\n        value = !!value;\r\n\r\n        if (value !== this._enabled)\r\n        {\r\n            if (!value)\r\n                this.reset();\r\n\r\n            this._enabled = value;\r\n        }\r\n    }\r\n\r\n\r\n    /*update() {\r\n        if (!this._enabled)\r\n            return;\r\n\r\n        if (this.press) {\r\n            this.pressDuration = this.game.time.time - this.pressTime;\r\n            \r\n        } else {\r\n            this.releaseDuration = this.game.time.time - this.releaseTime;\r\n        }\r\n\r\n\r\n        if (this.press) {\r\n            if (this.pressDuration == 0) {\r\n                this._event = KeyEvent.PRESSED;\r\n            }\r\n\r\n        } else {\r\n\r\n            if (this.releaseDuration == 0) {\r\n                this._event = KeyEvent.RELEASED;\r\n            } else {\r\n                this._event = KeyEvent.IDLE;\r\n            }\r\n\r\n        }\r\n\r\n    }*/\r\n\r\n    isPressing() {\r\n        return this.status;\r\n    }\r\n\r\n    isPressed() {\r\n        return (this.press && this.pressDuration === 0);\r\n    }\r\n\r\n    isReleased() {\r\n        return (!this.press && this.releaseDuration === 0)\r\n    }\r\n\r\n\r\n\r\n    reset()\r\n    {   \r\n        this.status = false;\r\n        this._event = KeyEvent.NONE;\r\n        this.press = false;\r\n        this.release = false;\r\n    \r\n        this.pressTime = 0;\r\n        this.pressDuration = -2500;\r\n        this.releaseTime = 0;\r\n        this.releaseDuration = -2500;\r\n    }\r\n\r\n\r\n};\r\n\r\n\r\n\r\n  \r\n","\r\nconst KeyCode = {\r\n    Backspace: 8,\r\n    Tab: 9,\r\n    Enter: 13,\r\n    Shift: 16,\r\n    Ctrl: 17,\r\n    Alt: 18,\r\n    Pause: 19,\r\n    CapsLock: 20,\r\n    Escape: 27,\r\n    Space:32,\r\n    PageUp: 33,\r\n    PageDown: 34,\r\n    End: 35,\r\n    Home: 36,\r\n    Left: 37,\r\n    Up: 38,\r\n    Right: 39,\r\n    Down: 40,\r\n    Insert: 45,\r\n    Delete:\t46,\r\n    Num0: 48,\r\n    Num1: 49,\r\n    Num2: 50,\r\n    Num3: 51,\r\n    Num4: 52,\r\n    Num5:\t53,\r\n    Num6: 54,\r\n    Num7: 55,\r\n    Num8: 56,\r\n    Num9: 57,\r\n    A: 65,\r\n    B: 66,\r\n    C: 67,\r\n    D: 68,\r\n    E: 69,\r\n    F: 70,\r\n    G: 71,\r\n    H: 72,\r\n    I: 73,\r\n    J: 74,\r\n    K: 75,\r\n    L: 76,\r\n    M: 77,\r\n    N: 78,\r\n    O: 79,\r\n    P: 80,\r\n    Q: 81,\r\n    R: 82,\r\n    S: 83,\r\n    T: 84,\r\n    U: 85,\r\n    V: 86,\r\n    W: 87,\r\n    X: 88,\r\n    Y: 89,\r\n    Z: 90,\r\n    LSystem: 91,\r\n    RSystem: 92,\r\n    SelectK:\t93,\r\n    Numpad0: 96,\r\n    Numpad1: 97,\r\n    Numpad2: 98,\r\n    Numpad3: 99,\r\n    Numpad4: 100,\r\n    Numpad5: 101,\r\n    Numpad6: 102,\r\n    Numpad7: 103,\r\n    Numpad8: 104,\r\n    Numpad9: 105,\r\n    Multiply: 106,\r\n    Add: 107,\r\n    Subtract: 109,\r\n    DecimalPoint: 110,\r\n    Divide: 111,\r\n    F1:\t112,\r\n    F2:\t113,\r\n    F3:\t114,\r\n    F4:\t115,\r\n    F5:\t116,\r\n    F6:\t117,\r\n    F7:\t118,\r\n    F8:\t119,\r\n    F9:\t120,\r\n    F10: 121,\r\n    F11: 122,\r\n    F12: 123,\r\n    NumLock: 144,\r\n    ScrollLock: 145,\r\n    SemiColon: 186,\r\n    Equal: 187,\r\n    Comma: 188,\r\n    Dash: 189,\r\n    Period:\t190,\r\n    Slash: 191,\r\n    LBraket: 219,\r\n    BackSlash: 220,\r\n    RBracket: 221,\r\n    Quote: 222,\r\n};\r\n    \r\nmodule.exports = KeyCode;","\r\nconst KeyEvent = {\r\n    NONE : -1,\r\n    IDLE: 0,\r\n    PRESSED : 1,\r\n    RELEASED : 2,\r\n};\r\n\r\nexport default KeyEvent;","\r\nimport DataMap from '../../structures/Map'\r\nimport DataList from '../../structures/List';\r\nimport Key from './Key'\r\nimport KeyCode from './KeyCode'\r\nimport KeyEvent from './KeyEvent'\r\nimport ProcessKeyPress from './components/ProcessKeyPress';\r\nimport ProcessKeyRelease from './components/ProcessKeyRelease';\r\n\r\nexport default class Keyboard {\r\n  \r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    this._enabled = true;\r\n    this.eventTarget = null;\r\n    this.eventHandler = null;\r\n    this._eventQueue = new DataList();\r\n    this._keyMapping = new DataMap();\r\n    //this._keyWatch = new DataMap();\r\n    //this._keyGarbage = [];\r\n    this.lastKey = null;\r\n\r\n  }\r\n\r\n  get enabled() {return this._enabled;}\r\n  set enabled(value) {\r\n      value = !!value;\r\n\r\n      if (value !== this._enabled)\r\n      {\r\n          if (!value)\r\n              this.reset();\r\n\r\n          this._enabled = value;\r\n      }\r\n  }\r\n\r\n  reset() {\r\n\r\n    this._keyMapping.clear();\r\n    for (var prop in KeyCode){\r\n\r\n      if (KeyCode.hasOwnProperty(prop)) {\r\n        var value = KeyCode[prop];\r\n        this._keyMapping.set(value, new Key(value, this.game));\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  init() {\r\n\r\n    this.reset();\r\n\r\n    // window;\r\n    this.eventTarget = document; //this.game.system.render.canvas;\r\n\r\n    var self = this;\r\n\r\n    // key event handler\r\n    let handler = function(event) {\r\n\r\n      if (event.defaultPrevented) {\r\n          return;\r\n      }\r\n\r\n      self._eventQueue.push(event);\r\n\r\n      //event.preventDefault();\r\n\r\n    }\r\n\r\n    this.eventHandler = handler;\r\n\r\n    this.eventTarget.addEventListener('keydown', handler, false);\r\n    this.eventTarget.addEventListener('keyup', handler, false);\r\n  }\r\n\r\n  stop() {\r\n\r\n    this.eventTarget.removeEventListener('keydown', this.eventHandler);\r\n    this.eventTarget.removeEventListener('keyup', this.eventHandler);\r\n    this._onKeyDown = null;\r\n    this._onKeyUp = null;\r\n    this._onKeyPress = null;\r\n\r\n    this._keyMapping.clear();\r\n  }\r\n\r\n  update() {\r\n\r\n    let eventSize = this._eventQueue.size;\r\n\r\n    if (!this._enabled || eventSize === 0)\r\n      return;\r\n\r\n    // clear and copy queue\r\n    let queue = this._eventQueue.splice(0,eventSize);\r\n\r\n    // process key events\r\n    for (let i = 0; i < eventSize; i++) {\r\n      var event = queue[i];\r\n      var keycode = event.keyCode;\r\n\r\n      // check if is valid scintilla key\r\n      let key = this._keyMapping.get(keycode)\r\n\r\n      if (key !== undefined || key !== null) {\r\n\r\n        if (event.type === 'keydown') {\r\n\r\n          // /*&& (this._keyMapping.at(keycode) === undefined || this._keyMapping[keycode].press === false)*/\r\n          ProcessKeyPress(event, key);\r\n\r\n        } else { // if (event.type === 'keyup') {\r\n          ProcessKeyRelease(event, key);\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  pressed(keycode) {\r\n    return this._keyMapping.get(keycode).isPressed();\r\n  }\r\n\r\n  release(keycode) {\r\n    return this._keyMapping.get(keycode).isReleased();\r\n  }\r\n\r\n  press(keycode) {\r\n    return this._keyMapping.get(keycode).status;\r\n  }\r\n}\r\n\r\n \r\n\r\n   /* this._keyWatch.each(function (key, value) {\r\n        //var value = this._keyWatch.get(key);\r\n        value.update();\r\n\r\n        //console.log(value);\r\n\r\n        if (value.event == KeyEvent.IDLE)\r\n        {\r\n            self._keyGarbage.push(key);\r\n        }\r\n    });\r\n\r\n      if (this._keyGarbage.length > 0)\r\n      {\r\n        this._keyWatch.deleteByIndexedArray(this._keyGarbage);\r\n        this._keyGarbage.splice(0, this._keyGarbage.length)\r\n      }*/\r\n","\r\n export default function ProcessKeyPress(event, key) { \r\n\r\n  if (key.preventDefault) \r\n      event.preventDefault();\r\n  \r\n  if (!key._enabled)\r\n    return;\r\n\r\n  if (key.press === false)\r\n  {\r\n\r\n      // set key properties\r\n      key.status = true;\r\n      key.press = true;\r\n      key.release = false;\r\n      // set press time duration\r\n      key.pressTime = event.timeStamp;//this.game.time.time;\r\n      key.pressDuration = 0;\r\n      key.releaseDuration = key.pressTime - key.releaseTime;\r\n  }\r\n\r\n    //this.lastKey = key;\r\n\r\n\r\n\r\n    /*var keyObj = this._keyMapping.get(key);\r\n    keyObj.onKeyDown();\r\n\r\n    if (!this._keyWatch.has(key))\r\n    {\r\n      this._keyWatch.set(key, keyObj);\r\n    }*/\r\n\r\n    //_keyMapping[]\r\n    //this._keys[key] = true;\r\n    /* if (this._keyLockPressed[key] != scintilla.KeyEvent.PRESSED && this._keyLockPressed[key] != scintilla.KeyEvent.PRESS) {\r\n      this._keyLockPressed[key] = scintilla.KeyEvent.PRESSED;\r\n      this._keyDownDuration[key] = 1;\r\n    }\r\n\r\n    this._keyLock[key] = scintilla.KeyEvent.PRESS;\r\n    this._keys[key] = true;\r\n    */\r\n\r\n\r\n  }","\r\nexport default function ProcessKeyRelease(event, key) {\r\n\r\n\r\n  if (key.preventDefault) \r\n    event.preventDefault();\r\n\r\n  if (!key._enabled)\r\n    return;\r\n  \r\n  // set key properties\r\n  key.status = false;\r\n  key.press = false;\r\n  key.release = true;\r\n\r\n  // set press time duration\r\n  key.releaseTime = event.timeStamp;\r\n  key.pressDuration = key.releaseTime - key.pressTime;\r\n  key.releaseDuration = 0;\r\n\r\n}","\r\n\r\nimport MouseButton from './MouseButton'\r\n  \r\n  export const MouseEvent = {\r\n  NONE : 0,\r\n  PRESS : 1,\r\n  PRESSED : 2,\r\n  RELEASE : 3\r\n  };\r\n\r\n\r\n  \r\n\r\nexport default class Mouse {\r\n  \r\n  constructor(game) {\r\n\r\n    this.x = 0;\r\n    this.y = 0;\r\n    this.game = game;\r\n    this.canvas = game.system.render.canvas;\r\n    this.button = 0;\r\n    this.wheelDelta = 0;\r\n    this.active = true;\r\n\r\n    this._mouseButtons = [];\r\n    this._mouseButtonsLocks = [];\r\n    this._mouseButtonsLocksPressed = [];\r\n    this._mouseDownDuration = [];\r\n\r\n    //callbacks\r\n    this._onMouseDown = null;\r\n    this._onMouseMove = null;\r\n\r\n    this.reset();\r\n  }\r\n\r\n  reset() {\r\n\r\n    for (var i = 0; i < 3; i++){\r\n\r\n\r\n            this._mouseButtons[i] = false;\r\n            this._mouseButtonsLocks[i] = MouseEvent.NONE;\r\n            this._mouseButtonsLocksPressed[i] = MouseEvent.NONE;\r\n            this._mouseDownDuration[i] = 0;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  init() {\r\n\r\n\r\n    var self = this;\r\n\r\n    this._onMouseDown = function (event) {\r\n            return self.onMouseDown(event);\r\n    };\r\n\r\n    this._onMouseUp = function (event) {\r\n            return self.onMouseUp(event);\r\n    };\r\n\r\n    this._onMouseMove = function (event) {\r\n            return self.onMouseMove(event);\r\n    };\r\n\r\n    this.canvas.addEventListener('mousedown', this._onMouseDown, true);\r\n    this.canvas.addEventListener('mousemove', this._onMouseMove, true);\r\n    this.canvas.addEventListener('mouseup', this._onMouseUp, true);\r\n    this.canvas.addEventListener('mouseover', this._onMouseOver, true);\r\n    this.canvas.addEventListener('mouseout', this._onMouseOut, true);\r\n\r\n  }\r\n\r\n  onMouseMove(event) {\r\n\r\n    if (!this.active)\r\n      return;\r\n\r\n\r\n    var rect = this.canvas.getBoundingClientRect();\r\n\r\n\r\n    this.x = Math.floor((event.clientX-rect.left)/(rect.right-rect.left)*this.canvas.width);\r\n    this.y = Math.floor((event.clientY-rect.top)/(rect.bottom-rect.top)*this.canvas.height);\r\n    //this.x = event.clientX - rect.left;\r\n    //this.y = event.clientY - rect.top;\r\n\r\n  }\r\n\r\n  onMouseDown(event) {\r\n\r\n    if (!this.active)\r\n      return;\r\n\r\n\r\n\r\n    var value = event.button;\r\n\r\n    if (this._mouseButtonsLocksPressed[value] != MouseEvent.PRESSED && this._mouseButtonsLocksPressed[value] != MouseEvent.PRESS) {\r\n      this._mouseButtonsLocksPressed[value] = MouseEvent.PRESSED;\r\n      this._mouseDownDuration[value] = 1;\r\n    }\r\n\r\n    this._mouseButtons[value] = true;\r\n    this._mouseButtonsLocks[value] = MouseEvent.PRESS;\r\n\r\n    event.preventDefault();\r\n\r\n  }\r\n\r\n  onMouseUp(event) {\r\n\r\n    if (!this.active)\r\n      return;\r\n\r\n    var value = event.button;\r\n\r\n    this._mouseButtons[value] = false;\r\n    this._mouseButtonsLocks[value] = MouseEvent.RELEASE;\r\n    this._mouseButtonsLocksPressed[value] = MouseEvent.NONE;\r\n\r\n    event.preventDefault();\r\n\r\n\r\n  }\r\n\r\n  pressed(button) {\r\n\r\n    var buttonLock = false;\r\n\r\n    if (this._mouseButtonsLocksPressed[button] == MouseEvent.PRESSED) {\r\n      buttonLock = true;\r\n      this._mouseButtonsLocksPressed[button] = MouseEvent.PRESS;\r\n    }\r\n\r\n    var hit = this._mouseButtons[button] && buttonLock;\r\n\r\n    return hit;\r\n\r\n  }\r\n\r\n  release(button) {\r\n\r\n    var buttonLock = false;\r\n\r\n  \tif (this._mouseButtonsLocks[button] ==  MouseEvent.PRESSED ||\r\n        this._mouseButtonsLocks[button] ==  MouseEvent.PRESS ||\r\n        this._mouseButtonsLocks[button] ==  MouseEvent.NONE)\r\n  \t\tbuttonLock = false;\r\n  \telse\r\n  \t\tbuttonLock = true;\r\n\r\n  \tvar hit = !this._mouseButtons[button] && buttonLock;\r\n\r\n  \tthis._mouseButtonsLocks[button] = MouseEvent.NONE;\r\n\r\n  \treturn hit;\r\n\r\n  }\r\n\r\n  press(button) {\r\n\r\n    var buttonLock = false;\r\n\r\n    if (this._mouseButtonsLocks[button] ==  MouseEvent.RELEASE ||\r\n      this._mouseButtonsLocks[button] ==  MouseEvent.NONE)\r\n      buttonLock = false;\r\n    else\r\n      buttonLock = true;\r\n\r\n    var hit = this._mouseButtons[button] && buttonLock;\r\n\r\n    return hit;\r\n\r\n\r\n  }\r\n\r\n  update() {\r\n\r\n    for (var i = 0; i < this._mouseButtons.length; i++) {\r\n\r\n          if (this._mouseButtonsLocksPressed[i] ==  MouseEvent.PRESSED) {\r\n              if (this._mouseDownDuration[i] > 0)\r\n                this._mouseDownDuration[i]--;\r\n              else\r\n                this._mouseButtonsLocksPressed[i] = MouseEvent.PRESS;\r\n          } else\r\n            continue;\r\n\r\n\r\n    }\r\n\r\n  }\r\n\r\n  posRelativeTo(object) {\r\n\r\n    var vec2 = {x:0,y:0};\r\n\r\n    vec2.x = this.x - object.x;\r\n    vec2.y = this.y - object.y;\r\n\r\n\r\n    return vec2;\r\n\r\n  }\r\n\r\n\r\n}\r\n\r\n","\r\nexport const MouseButton = {\r\n    Left : 0,\r\n    Middle : 1,\r\n    Right : 2,\r\n    WheelUp : 3,\r\n    WheelDown : 4\r\n};","\r\nconst AssetsType = {\r\n    'none' : 0,\r\n    'image' : 1,\r\n    'audio' : 2,\r\n    'text' : 3,\r\n    'script' : 4,\r\n    'json' : 5,\r\n    'webFont' : 6,\r\n    'tilemapJSON' : 7,\r\n}\r\n\r\nexport default AssetsType;","\r\nimport ObjectGet from '../utils/object/ObjectGet'\r\nimport XHR from './XHR'\r\nimport LoaderState from './LoaderState'\r\nimport AssetsType from './AssetsType';\r\nimport NextAsset from './components/NextAsset';\r\nimport Path from '../utils/Path'\r\n\r\nexport default class File {\r\n\r\n    constructor(config) {\r\n\r\n        this.type = ObjectGet.value(config, 'type', null);\r\n        this.tag = ObjectGet.value(config, 'tag', null);\r\n        this.useExternal =  ObjectGet.value(config, 'useExternal', false);\r\n\r\n        if (this.type == null || this.tag == null)\r\n        {\r\n            throw new Error('Loader.File: Invalid tag \\\"' + tag + \"\\\".\");\r\n        }\r\n\r\n        this.url = ObjectGet.value(config, 'url', undefined);\r\n\r\n        if (this.url === undefined)\r\n            this.url = ObjectGet.value(config, 'path', '') + this.tag + '.' + ObjectGet.value(config, 'ext', '');\r\n        else if (typeof(this.url) !== 'function')\r\n        {\r\n            if (!this.useExternal || this.useExternal !== undefined)\r\n                this.url = ObjectGet.value(config, 'path', '').concat(this.url);\r\n\r\n        }\r\n\r\n        // Web fonts is managed by WebFontLoader provided by google\r\n        // There is no need to create XHR settings and request\r\n        if (this.type !== AssetsType.webFont) {\r\n\r\n            this.xhrSettings = XHR.createSettings(ObjectGet.value(config, 'responseType', undefined));\r\n            \r\n            if (ObjectGet.value(config, 'xhrSettings', false))\r\n                this.xhrSettings = XHR.merge(this.xhrSettings, ObjectGet.value(config, 'xhrSettings', {}));\r\n        }\r\n\r\n\r\n        this.loader = null;\r\n        this.state = LoaderState.PENDING;\r\n        this.totalBytes = 0;\r\n        this.loadedBytes = 0;\r\n        this.progress = 0;\r\n        this.data = undefined;\r\n        this.source = null;\r\n        this.xhrRequest = null;\r\n        this.config = ObjectGet.value(config,'config',{});\r\n        this.crossOrigin = undefined;\r\n\r\n        this.onComplete = undefined;\r\n\r\n    }\r\n\r\n    load(gameLoader) {\r\n        this.loader = gameLoader;\r\n\r\n        if (this.state === LoaderState.FINISHED) {\r\n            this.onDone();\r\n\r\n            NextAsset.call(this.loader, this);\r\n            //this.loader.next(this);\r\n            \r\n        }\r\n        else\r\n        {\r\n\r\n            this.source = Path.getURL(this.url, gameLoader.baseURL);\r\n            \r\n            if (this.source.indexOf('data:') === 0 || this.source == null)\r\n            {\r\n                console.warn(\"Loader.File.load: unsupported URI.\");\r\n            }\r\n            else\r\n            {\r\n                this.xhrRequest = XHR.createFileRequest(this, gameLoader.xhr);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    onLoad(event) {\r\n       \r\n        this.XHRreset();\r\n\r\n        if (event.target && event.target.status !== 200)\r\n        {\r\n            //this.loader.next(this, true);\r\n            NextAsset.call(this.loader, this);\r\n\r\n        } else {\r\n            \r\n            if (this.onPostLoad !== undefined)\r\n                this.onPostLoad(this.loader, this.xhrRequest);\r\n\r\n            //this.loader.next(this, false);\r\n            NextAsset.call(this.loader, this);\r\n        }\r\n      \r\n    }\r\n\r\n    onError(event)\r\n    {\r\n        console.error(\"Loader.File: Error on load file: \" + this.url + \".\")\r\n\r\n        this.XHRreset();\r\n\r\n        //this.loader.next(this, true);\r\n        NextAsset.call(this.loader, this);\r\n    }\r\n\r\n    onProgress(event)\r\n    {\r\n        if (event.lengthComputable)\r\n        {\r\n            this.loadedBytes = event.loaded;\r\n            this.totalBytes = event.total;\r\n\r\n            this.progress = Math.min((this.loadedBytes / this.totalBytes), 1);\r\n\r\n        }\r\n    }\r\n\r\n    onDone() {\r\n        this.state = LoaderState.DONE;\r\n\r\n        this.loader.event.dispatch('oncomplete_' + this.tag);\r\n\r\n    }\r\n\r\n    onProcessing(processingCallback)\r\n    {\r\n        this.state = LoaderState.PROCESSING;\r\n\r\n        this.onDone();\r\n\r\n        processingCallback(this);\r\n    }\r\n\r\n\r\n    XHRreset()\r\n    {\r\n        if (this.xhrRequest)\r\n        {\r\n            this.xhrRequest.onload = undefined;\r\n            this.xhrRequest.onerror = undefined;\r\n            this.xhrRequest.onprogress = undefined;\r\n            //this.xhrRequest.onreadystatechange = undefined;\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n","\r\nexport default class ListInjector {\r\n\r\n    constructor()\r\n    {\r\n        this.list = {};\r\n    }\r\n\r\n    inject(toObj)\r\n    {\r\n        for (var key in this.list)\r\n        {\r\n            toObj[key] = this.list[key];\r\n        }\r\n    }\r\n\r\n    register(key, func)\r\n    {\r\n        this.list[key] = func;\r\n    }\r\n\r\n    destroyfunction()\r\n    {\r\n        this.list = {};\r\n    }\r\n\r\n};","\r\n\r\nimport System from '../core/system/System';\r\nimport ObjectGet from '../utils/object/ObjectGet';\r\nimport XHR from './XHR'\r\nimport AssetTypeHandler from './assets/AssetTypeHandler';\r\nimport LoaderState from './LoaderState'\r\nimport InitializeLoader from './components/InitializeLoader';\r\n\r\n\r\n\r\n// Class LoaderManager\r\nexport default class LoadManager {\r\n  \r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    this.cache = null;\r\n\r\n    this._filesQueue = null;\r\n    this._filesLoading = null;\r\n    this._successFiles = null;\r\n    this._failedFiles = null;\r\n    this._processedFiles = null;\r\n\r\n    this._filesQueueCount = null;\r\n    this._loadedFilesCount = null;\r\n\r\n    this.isDownloading = false;\r\n    this._totalFiles = 0;\r\n\r\n    this.progress = null;\r\n    this.path = null;\r\n    this.baseURL = null;\r\n    this.state = null;\r\n    this.webFontLoader = undefined;\r\n    this.event = null;\r\n    this.crossOrigin = undefined;\r\n\r\n    let gameConfig = game.config.loader;\r\n\r\n    this.xhr = XHR.createSettings(\r\n      ObjectGet.value(config, 'responseType', gameConfig.responseType),\r\n      ObjectGet.value(config, 'async', gameConfig.async),\r\n      //scintilla.ObjectGet.propertyValue(config, 'user', gameConfig.loaderUser),\r\n      //scintilla.ObjectGet.propertyValue(config, 'password', gameConfig.loaderPassword),\r\n      ObjectGet.value(config, 'timeout', gameConfig.timeout)\r\n  );\r\n  \r\n\r\n    AssetTypeHandler.inject(this);\r\n\r\n  }\r\n\r\n  get totalQueuedFiles() {\r\n    return this._filesQueueCount - this._loadedFilesCount;\r\n  }\r\n\r\n\r\n\r\n\r\n  setPath(path) {\r\n    if (path !== '' && path.substr(-1) !== '/')\r\n        path = path.concat('/');\r\n\r\n    this.path = path;\r\n\r\n    return this;\r\n  }\r\n\r\n  setBaseURL(baseUrl) {\r\n    if (baseUrl !== '' && baseUrl.substr(-1) !== '/')\r\n    {\r\n      baseUrl = baseUrl.concat('/');\r\n    }\r\n\r\n    this.baseURL = baseUrl || '';\r\n\r\n    return this;\r\n  }\r\n\r\n  setCrossOrigin(crossOrigin) {\r\n    this.crossOrigin = crossOrigin;\r\n    return this;\r\n  }\r\n\r\n  reset() {\r\n\r\n    this.isDownloading = false;\r\n    this._filesQueue.clear();\r\n    this._successFiles.clear();\r\n    this._failedFiles.clear();\r\n    this._processedFiles.clear();\r\n\r\n    this._filesQueueCount = 0;\r\n    this._loadedFilesCount = 0;\r\n\r\n    this.progress = 0\r\n    this.state = LoaderState.IDLE;\r\n\r\n  }\r\n\r\n\r\n\r\n  /*end : function() {\r\n\r\n    if (this.state === LoaderState.PROCESSING)\r\n        return;\r\n  \r\n    this.progress = 1;\r\n    this.isDownloading = false;\r\n    this.state = LoaderState.PROCESSING;\r\n\r\n    \r\n    this._filesQueue.clear();\r\n    this._failedFiles.length = 0;\r\n    \r\n    this.processFiles();\r\n\r\n    this._successFiles.clear();\r\n\r\n    this.state = LoaderState.DONE;\r\n    //this.game.scene.preloadComplete();\r\n\r\n  },*/\r\n\r\n\r\n\r\n  loadAsset(file) {\r\n\r\n      if (!file.crossOrigin) {\r\n          file.crossOrigin = this.crossOrigin;\r\n      }\r\n\r\n\r\n    file.load(this);\r\n  }\r\n\r\n  isLoading() {\r\n    return (this.state === LoaderState.LOADING || this.state === LoaderState.PROCESSING);\r\n  }\r\n\r\n  isOK() {\r\n    return (this.state === LoaderState.IDLE || this.state === LoaderState.DONE || this.state === LoaderState.ERROR);\r\n  }\r\n\r\n  downloadIsDone() {\r\n    return (this._filesQueue.length == (this._successCount + this._fileErrorCount));\r\n  }\r\n\r\n\r\n};\r\n\r\nSystem.register('Loader',LoadManager,'load', InitializeLoader);","\r\nconst LoaderState = {\r\n    NONE : 0,\r\n    IDLE : 1,\r\n    PENDING : 2,\r\n    LOADING : 3,\r\n    PROCESSING : 4,\r\n    ERROR : 5,\r\n    FINISHED : 6,\r\n    DONE : 7, \r\n};\r\n\r\nexport default LoaderState;","\r\nconst URLObject = {\r\n\r\n    createFromResponse : function(asset, response, type)\r\n    {\r\n\r\n        if (typeof URL === 'function')\r\n        {\r\n            asset.src = URL.createObjectURL(response);\r\n        }\r\n        else\r\n        {\r\n            let reader = new FileReader();\r\n\r\n            reader.onload = function ()\r\n            {\r\n                asset.removeAttribute('crossOrigin');\r\n                asset.src = 'data:' + (response.type || type) + ';base64,' + reader.result.split(',')[1];\r\n            };\r\n\r\n            reader.onerror = asset.onerror;\r\n\r\n            reader.readAsDataURL(response);\r\n        }   \r\n    },\r\n\r\n\r\n    revoke : function(data)\r\n    {\r\n        if (typeof URL === 'function')\r\n        {\r\n            URL.revokeObjectURL(data.src);\r\n        }\r\n    }\r\n};\r\n\r\nmodule.exports = URLObject;","\r\n\r\nconst XHR = {\r\n\r\n    createFileRequest(file, settings) {\r\n        var xhrSettings = XHR.merge(settings, file.xhrSettings);\r\n\r\n        var xmlHttpRequest = new XMLHttpRequest();\r\n        xmlHttpRequest.open(\"GET\", file.source, xhrSettings.async);\r\n\r\n        if (file.xhrSettings.responseType !== undefined)\r\n            xmlHttpRequest.responseType = file.xhrSettings.responseType;\r\n\r\n        xmlHttpRequest.timeout = xhrSettings.timeout;\r\n\r\n        xmlHttpRequest.onload = file.onLoad.bind(file);\r\n        xmlHttpRequest.onerror = file.onError.bind(file);\r\n        xmlHttpRequest.onprogress = file.onProgress.bind(file);\r\n        \r\n        if (file.onReadyStateChange !== undefined)\r\n            xmlHttpRequest.onreadystatechange = file.onReadyStateChange.bind(file);\r\n\r\n        xmlHttpRequest.send();\r\n\r\n        return xmlHttpRequest;\r\n    },\r\n\r\n    createSettings(type, doAsync, timeout) {\r\n        if (type === undefined) \r\n            type = '';\r\n\r\n        if (doAsync === undefined) \r\n            doAsync = true;\r\n\r\n        if (timeout === undefined)\r\n            timeout = 0;\r\n\r\n        var settings = {\r\n            responseType: type,\r\n            timeout: timeout,\r\n            async: doAsync,\r\n        }\r\n\r\n        return settings;\r\n    },\r\n\r\n    merge(a, b) {\r\n        var out = {};\r\n\r\n        if (a === undefined)\r\n            out = XHR.createSettings(); // : Extend(global);\r\n        // else\r\n            // do something cool\r\n\r\n        if (b)\r\n        {\r\n            for (let setting in b)\r\n            {\r\n                if (b[setting] !== undefined)\r\n                    out[setting] = b[setting];\r\n            }\r\n        }\r\n    \r\n        return out;\r\n    }\r\n\r\n};\r\n\r\nexport default XHR;\r\n\r\n","\r\nimport ListInjector from '../ListInjector'\r\n\r\nvar AssetTypeHandler = new ListInjector();\r\n\r\nexport default AssetTypeHandler;","\r\nimport LoaderState from '../LoaderState'\r\nimport File from '../File'\r\nimport URLObject from '../URLObject'\r\nimport ObjectGet from '../../utils/object/ObjectGet'\r\nimport Path from '../../utils/Path'\r\nimport AssetsType from '../AssetsType';\r\nimport AddAsset from '../components/AddAsset';\r\nimport AssetTypeHandler from './AssetTypeHandler';\r\n\r\nexport default class ImageFile extends File {\r\n    \r\n\r\n    constructor(tag, url, path, xhrSettings, config)\r\n    {\r\n        let assetTag = null;\r\n        \r\n        if (typeof tag === 'string')\r\n        {\r\n            assetTag = tag;\r\n        }\r\n        else\r\n        {\r\n            assetTag = ObjectGet.value(tag, 'tag', '');\r\n        }\r\n\r\n        let fileConfig = {\r\n            type: AssetsType.image,\r\n            tag: assetTag,\r\n            ext: ObjectGet.value(tag, 'ext', Path.getExtension(url)),\r\n            url: ObjectGet.value(tag, 'file', url),\r\n            path: path,\r\n            responseType: 'blob',\r\n            xhrSettings: ObjectGet.value(tag, 'xhr', xhrSettings),\r\n            config: ObjectGet.value(tag, 'config', config)\r\n        };\r\n\r\n        super(fileConfig);\r\n    }\r\n\r\n    onProcessing(processingCallback)\r\n    {\r\n        this.state = LoaderState.PROCESSING;\r\n        this.data = new Image();\r\n        this.data.crossOrigin = this.crossOrigin;\r\n\r\n\r\n        var self = this;\r\n\r\n        this.data.onload = function () {\r\n\r\n            URLObject.revoke(self.data);\r\n\r\n            self.onDone();\r\n\r\n            processingCallback(self);\r\n        };\r\n\r\n        this.data.onerror = function () {\r\n\r\n            URLObject.revoke(self.data);\r\n\r\n            console.warn(\"Loader.ImageFile: Error on load file: \" + self.url + \".\")\r\n\r\n            self.state = LoaderState.ERROR;\r\n\r\n            processingCallback(self);\r\n\r\n        };\r\n\r\n\r\n        URLObject.createFromResponse(this.data, this.xhrRequest.response, 'image/' + this.config.ext);\r\n    }\r\n\r\n}\r\n\r\nAssetTypeHandler.register('image', function (tag, url, path, xhrSettings, force)\r\n{\r\n\r\n    AddAsset.call(this, new ImageFile(tag, url, this.path, xhrSettings), force);\r\n\r\n    return this;\r\n\r\n});\r\n\r\nmodule.exports = ImageFile;","import File from \"../File\";\r\nimport ObjectGet from \"../../utils/object/ObjectGet\";\r\nimport LoaderState from \"../LoaderState\";\r\nimport AssetsType from \"../AssetsType\";\r\nimport AddAsset from \"../components/AddAsset\";\r\nimport AssetTypeHandler from \"./AssetTypeHandler\";\r\n\r\nexport default class JSONFile extends File {\r\n\r\n    constructor(tag, url, path, xhrSettings, config) {\r\n\r\n        let assetConfig = {\r\n            type: AssetsType.json,\r\n            ext: ObjectGet.value(tag, 'ext', 'json'),\r\n            responseType: 'text',\r\n            tag: tag,\r\n            url: ObjectGet.value(tag, 'file', url),\r\n            path: path,\r\n            xhrSettings: ObjectGet.value(tag, 'xhr', xhrSettings)\r\n        };\r\n\r\n        super(assetConfig);\r\n\r\n        if (typeof assetConfig.url === 'object') {\r\n            this.data = assetConfig.url;\r\n            this.state = LoaderState.DONE;\r\n        }\r\n\r\n    }\r\n\r\n    onProcessing(processingCallback) {\r\n        this.state = LoaderState.PROCESSING;\r\n        this.data = JSON.parse(this.xhrRequest.responseText);\r\n        this.onDone();\r\n        processingCallback(this);\r\n    }\r\n\r\n}\r\n\r\nAssetTypeHandler.register('json', function (tag, url, path, xhrSettings) {\r\n    //this.addAsset(new JSONFile(tag, url, this.path, xhrSettings));\r\n    AddAsset.call(this,new JSONFile(tag, url, this.path, xhrSettings));\r\n    return this;\r\n});","import File from \"../File\";\r\nimport ObjectGet from \"../../utils/object/ObjectGet\";\r\nimport AssetsType from \"../AssetsType\";\r\nimport Path from \"../../utils/Path\";\r\nimport LoaderState from \"../LoaderState\";\r\nimport AddAsset from \"../components/AddAsset\";\r\nimport AssetTypeHandler from \"./AssetTypeHandler\";\r\n\r\nexport default class ScriptFile extends File {\r\n\r\n    constructor(tag, url, path, xhrSettings, config) {\r\n\r\n        let tagFile = (typeof tag === 'string') ? tag : ObjectGet.value(tag, 'key', '');\r\n\r\n        let assetConfig = {\r\n            type: AssetsType.script,\r\n            ext: ObjectGet.value(tag, 'ext', Path.getExtension(url) || 'js'),\r\n            responseType: 'text',\r\n            tag: tagFile,\r\n            url: ObjectGet.value(tag, 'file', url),\r\n            path: path,\r\n            xhrSettings: ObjectGet.value(tag, 'xhr', xhrSettings)\r\n        };\r\n\r\n        super(assetConfig);\r\n\r\n    }\r\n\r\n    onPostLoad(loader, xhrLoader) {\r\n        this.state = LoaderState.PROCESSING;\r\n\r\n        \r\n\r\n        // create the element\r\n        this.data = document.createElement('script');\r\n        this.data.language = 'javascript';\r\n        this.data.type = 'text/javascript';\r\n        this.data.defer = false;\r\n        this.data.text = this.xhrRequest.responseText;\r\n\r\n        // append to html document\r\n        document.head.appendChild(this.data);\r\n\r\n        this.loader.event.dispatch('onpostload_' + this.tag);\r\n\r\n        //this.onDone();\r\n\r\n        //processingCallback(this);\r\n    }\r\n\r\n}\r\n\r\nAssetTypeHandler.register('script', function (tag, url, path, xhrSettings) {\r\n    //this.addAsset(new ScriptFile(tag, url, this.path, xhrSettings));\r\n    AddAsset.call(this, new ScriptFile(tag, url, this.path, xhrSettings));\r\n    return this;\r\n});","\r\nimport LoaderState from '../LoaderState'\r\nimport File from '../File'\r\nimport ObjectGet from '../../utils/object/ObjectGet'\r\nimport Path from '../../utils/Path'\r\nimport AssetsType from '../AssetsType';\r\nimport AddAsset from '../components/AddAsset';\r\nimport AssetTypeHandler from './AssetTypeHandler';\r\n\r\nexport default class TextFile extends File {\r\n\r\n    constructor(tag, url, path, xhrSettings, config)\r\n    {\r\n        let assetTag = null;\r\n        \r\n        if (typeof tag === 'string')\r\n        {\r\n            assetTag = tag;\r\n        }\r\n        else\r\n        {\r\n            assetTag = ObjectGet.value(tag, 'tag', '');\r\n        }\r\n\r\n        let useExternal = false;\r\n\r\n        if (path !== undefined)\r\n        {\r\n            if (typeof(path) === \"boolean\")\r\n                useExternal = path;\r\n\r\n            \r\n        }\r\n\r\n        let assetConfig = {\r\n            type: AssetsType.text,\r\n            tag: assetTag,\r\n            ext: ObjectGet.value(tag, 'ext', Path.getExtension(url)),\r\n            url: ObjectGet.value(tag, 'file', url),\r\n            path: path,\r\n            responseType: '',\r\n            xhrSettings: ObjectGet.value(tag, 'xhr', xhrSettings),\r\n            config: ObjectGet.value(tag, 'config', config),\r\n            useExternal : useExternal\r\n        };\r\n\r\n        super(assetConfig);\r\n    }\r\n    \r\n    //onLoad(event) {}\r\n\r\n    /*onReadyStateChange(event)\r\n    {\r\n\r\n        console.log(event.target);\r\n        if (this.xhrRequest.status == 200)\r\n        {\r\n            if (this.xhrRequest.readyState == 4)\r\n            {\r\n                this.state = LoaderState.PROCESSING;\r\n                //this.data = window.URL.createObjectURL(this.xhrRequest.response);\r\n                this.data = this.xhrRequest.responseText;\r\n                \r\n                //console.log(this.data);\r\n                this.onDone();\r\n\r\n                //processingCallback(this);\r\n                super.onLoad(event);\r\n            }  \r\n        } else {\r\n            super.onLoad(event);\r\n        }\r\n    }*/\r\n\r\n    onProcessing(processingCallback)\r\n    {\r\n        this.state = LoaderState.PROCESSING;\r\n            //this.data = window.URL.createObjectURL(this.xhrRequest.response);\r\n            this.data = this.xhrRequest.responseText;\r\n            /*var style = document.createElement('style');\r\n            style.innerHTML = this.data;\r\n            document.head.appendChild(style)*/\r\n           // console.log(\"data:\" + this.data);\r\n            this.onDone();\r\n\r\n            processingCallback(this);\r\n    }\r\n\r\n}\r\n\r\nAssetTypeHandler.register('text', function (tag, url, path, xhrSettings)\r\n{\r\n    let endPointPath = this.path;\r\n\r\n    if (path !== undefined)\r\n    {\r\n        \r\n        if (typeof(path) === \"boolean\") // external link\r\n            endPointPath = path;\r\n        \r\n    }\r\n\r\n    AddAsset.call(this, new TextFile(tag, url, endPointPath, xhrSettings));\r\n    //this.addAsset(new TextFile(tag, url, endPointPath, xhrSettings));\r\n\r\n    return this;\r\n\r\n});\r\n\r\nmodule.exports = TextFile;","import File from '../File'\r\nimport JSONFile from './JSONFile';\r\nimport LoaderState from '../LoaderState';\r\nimport Path from '../../utils/Path';\r\nimport AssetsType from '../AssetsType';\r\nimport AddAsset from '../components/AddAsset';\r\nimport AssetTypeHandler from './AssetTypeHandler';\r\n\r\n\r\nfunction CheckImagesSources(loader, source, fullPath) {\r\n\r\n    if (source === undefined)\r\n        return;\r\n\r\n      \r\n\r\n    let size = source.length;\r\n\r\n   \r\n\r\n    if (size <= 0)\r\n        return;\r\n\r\n    for (let i = 0; i < size; i++) {\r\n\r\n        let tileset = source[i];\r\n\r\n        if (tileset.image) {\r\n            let name = Path.getFilenameWithoutExtension(tileset.image) || tileset.name;\r\n            let path = Path.getPathWithoutRoot(fullPath).concat(Path.getFilename(tileset.image));\r\n            loader.image(name, path, undefined, undefined, false);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default class TilemapFileJSON extends JSONFile {\r\n\r\n    constructor(tag, url, path, xhrSettings) {\r\n\r\n        super(tag, url, path, xhrSettings);\r\n        this.type = AssetsType.tilemapJSON;\r\n\r\n    }\r\n\r\n    onPostLoad(loader, xhrLoader) {\r\n\r\n        this.state = LoaderState.PROCESSING;\r\n        this.data = JSON.parse(xhrLoader.responseText);\r\n\r\n        // check tileset images and pipe to the loader\r\n        CheckImagesSources(loader, this.data.tilesets, this.url);\r\n    }\r\n\r\n    onProcessing(processingCallback) {\r\n        this.onDone();\r\n        processingCallback(this);\r\n    }\r\n\r\n\r\n}\r\n\r\nAssetTypeHandler.register('tilemapJSON', function (tag, url, path, xhrSettings) {\r\n    //this.addAsset(new TilemapFileJSON(tag, url, this.path, xhrSettings));\r\n    AddAsset.call(this, new TilemapFileJSON(tag, url, this.path, xhrSettings));\r\n    return this;\r\n});","import File from \"../File\";\r\nimport AssetsType from \"../AssetsType\";\r\nimport LoaderState from \"../LoaderState\";\r\nimport Validate from \"../../utils/Validate\";\r\nimport AddAsset from \"../components/AddAsset\";\r\nimport AssetTypeHandler from \"./AssetTypeHandler\";\r\nimport NextAsset from \"../components/NextAsset\";\r\n\r\n\r\nexport default class WebFontFile extends File {\r\n\r\n    constructor(tag, provider, fontFamily, timeout) {\r\n\r\n        let assetConfig = {\r\n            type: AssetsType.webFont,\r\n            tag: tag,\r\n            config : {\r\n                provider : provider || 'google',\r\n                families : fontFamily,\r\n                timeout : timeout || 3000,\r\n            }\r\n        };\r\n\r\n        super(assetConfig)\r\n\r\n    }\r\n\r\n    load(gameLoader) {\r\n        this.loader = gameLoader;\r\n\r\n        if (this.state === LoaderState.FINISHED) {\r\n            this.onDone();\r\n\r\n            NextAsset.call(this.loader, this);\r\n        } else if (this.loader.webFontLoader !== undefined && this.loader.webFontLoader.state === LoaderState.DONE) {\r\n            if (this.fontLoad !== undefined)\r\n                this.fontLoad();\r\n        }\r\n        \r\n        // Do nothing, wait for signal\r\n    }\r\n\r\n    fontLoad() {\r\n\r\n        if (WebFont !== undefined) {\r\n\r\n            this.state = LoaderState.PROCESSING;\r\n\r\n            let provider = this.config['provider'];\r\n\r\n            if (!Validate.isArray(this.config.families)) {\r\n                let families = [];\r\n                families.push(this.config.families);\r\n                this.config.families = families;\r\n            }\r\n\r\n            let WebFontProvider = {\r\n                families : this.config.families\r\n            }\r\n\r\n            let WebFontConfig = {\r\n                timeout : this.config.timeout,\r\n                inactive : this.onError.bind(this),\r\n                fontactive : this.onLoad.bind(this),\r\n                classes : true\r\n            }\r\n\r\n            \r\n\r\n            WebFontConfig[provider] = WebFontProvider;\r\n\r\n            WebFont.load(WebFontConfig)\r\n        }\r\n    }\r\n\r\n    onLoad(familyName, fvd) {\r\n\r\n        this.data = {\r\n            family : familyName,\r\n            fvd : fvd\r\n        }\r\n\r\n        //this.loader.next(this, true);\r\n        NextAsset.call(this.loader, this);\r\n\r\n        \r\n    }\r\n}\r\n\r\nAssetTypeHandler.register('webFont', function (tag, provider, fontFamily, timeout) {\r\n    //this.addAsset(new WebFontFile(tag, provider, fontFamily, timeout));\r\n    AddAsset.call(this, new WebFontFile(tag, provider, fontFamily, timeout));\r\n    return this;\r\n});","\r\nmodule.exports = {\r\n    AssetsTypeHandler : require('./AssetTypeHandler'),\r\n    ImageFile : require('./ImageFile'),\r\n    TextFile : require('./TextFile'),\r\n    ScriptFile : require('./ScriptFile'),\r\n    JSONFile : require('./JSONFile'),\r\n    TilemapJSON : require('./TilemapJSON'),\r\n    WebFontFile : require('./WebFontFile')\r\n}","import AssetsType from \"../AssetsType\";\r\nimport ScriptFile from \"../assets/ScriptFile\";\r\n\r\nexport default function AddAsset(asset, check) {\r\n\r\n    if (check === undefined) check = true;\r\n\r\n    if (!this.isOK() && check)\r\n        return -1;\r\n\r\n    // is if web font, we should load the WebFontLoader\r\n    if (asset.type === AssetsType.webFont && this.webFontLoader === undefined) {\r\n\r\n      this.webFontLoader = new ScriptFile('webFontLoader',\"https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js\");\r\n      this._filesQueue.set(this.webFontLoader);\r\n      this._filesQueueCount++;\r\n\r\n\r\n\r\n      this.event.create('onpostload_webFontLoader').subscribe(\r\n        () => {\r\n        asset.fontLoad();\r\n        });\r\n      \r\n    }\r\n\r\n\r\n    asset.path = this.path;\r\n    this._filesQueue.set(asset);\r\n    this._filesQueueCount++;\r\n    return asset;\r\n\r\n}","import LoaderState from \"../LoaderState\";\r\nimport DeleteSucceedQueuedAsset from \"./DeleteSucceedQueuedAsset\";\r\n\r\nexport default function AssetProcessingUpdate(file) {\r\n    \r\n    if (file.state === LoaderState.ERROR)\r\n    {\r\n       this._failedFiles.set(file);\r\n\r\n        /*if (file.linkFile)\r\n        {\r\n            this.queue.delete(file.linkFile);\r\n        }*/\r\n\r\n        //return this.deleteFromSuccessQueue(file);\r\n        return DeleteSucceedQueuedAsset.call(this, file);\r\n    }\r\n\r\n\r\n    this._processedFiles.set(file);\r\n\r\n    return  DeleteSucceedQueuedAsset.call(this, file);//this.deleteFromSuccessQueue(file);\r\n\r\n  }","import LoaderState from \"../LoaderState\";\r\nimport ProcessDoneAssets from \"./ProcessDoneAssets\";\r\n\r\nexport default function DeleteSucceedQueuedAsset(file) {\r\n    \r\n    this._successFiles.delete(file);\r\n\r\n    if (this._successFiles.size === 0 && this.state === LoaderState.PROCESSING)\r\n        ProcessDoneAssets.call(this);\r\n        \r\n}","\r\nimport DataSet from '../../structures/Set'\r\nimport EventManager from '../../event/EventManager';\r\nimport LoaderState from '../LoaderState';\r\n\r\nexport default function InitializeLoader() {\r\n\r\n    this.cache = this.game.system.cache;\r\n\r\n    this._filesQueue = new DataSet();\r\n    this._filesLoading = new DataSet();\r\n    this._successFiles = new DataSet();\r\n    this._failedFiles = new DataSet();\r\n    this._processedFiles = new DataSet();\r\n    this.event = new EventManager();\r\n\r\n    this._filesQueueCount = 0;\r\n    this._loadedFilesCount = 0;\r\n\r\n    this.progress = 0;\r\n    this.path = '';\r\n    this.baseURL = '';\r\n    this.state = LoaderState.IDLE;\r\n}","import LoaderState from \"../LoaderState\";\r\nimport ProcessDoneAssets from \"./ProcessDoneAssets\";\r\nimport AssetProcessingUpdate from \"./AssetProcessingUpdate\";\r\n\r\nexport default function LoaderFinished() {\r\n\r\n    if (this.state === LoaderState.PROCESSING)\r\n        return;\r\n  \r\n    this.progress = 1;\r\n    this.isDownloading = false;\r\n    this.state = LoaderState.PROCESSING;\r\n\r\n    this._processedFiles.clear();\r\n\r\n    if (this._successFiles.size === 0)\r\n    {\r\n        ProcessDoneAssets.call(this);// this.processingDone();\r\n\r\n    } else {\r\n     \r\n      this._successFiles.each(function(file) {\r\n        file.onProcessing(AssetProcessingUpdate.bind(this));\r\n      },this);\r\n    }\r\n   \r\n  }","import ProcessAssetsQueue from \"./ProcessAssetsQueue\";\r\nimport LoaderFinished from \"./LoaderFinished\";\r\nimport UpdateProgress from \"./UpdateProgress\";\r\n\r\n\r\nexport default function NextAsset(concludedFile, hasError) {\r\n\r\n    if (hasError)\r\n        this._failedFiles.set(concludedFile);\r\n    else \r\n        this._successFiles.set(concludedFile);\r\n    \r\n\r\n    this._filesLoading.delete(concludedFile);\r\n    this._loadedFilesCount++;\r\n\r\n    //this.updateProgress();\r\n    UpdateProgress.call(this);\r\n\r\n    if (this._filesQueue.size > 0)//(this._loadedFilesCount < this._filesQueueCount)\r\n    {\r\n        //this.processFileQueue();\r\n        ProcessAssetsQueue.call(this);\r\n    } else if (this._filesLoading.size === 0) {\r\n      \r\n        //this.loadFinished();\r\n        LoaderFinished.call(this);\r\n    }\r\n\r\n}","import LoaderState from \"../LoaderState\";\r\n\r\nexport default function ProcessAssetsQueue() {\r\n\r\n    let self = this;\r\n\r\n    this._filesQueue.each(function(file) {\r\n\r\n      if (file.state === LoaderState.FINISHED ||\r\n         file.state === LoaderState.PENDING) //  && this.inflight.size < this.maxParallelDownloads))\r\n      {\r\n        \r\n\r\n        self._filesLoading.set(file);\r\n\r\n        self._filesQueue.delete(file);\r\n\r\n        self.loadAsset(file);\r\n      }\r\n\r\n    });\r\n\r\n}","import PreloadSceneComplete from \"../../scene/components/PreloadSceneComplete\";\r\nimport LoaderState from \"../LoaderState\";\r\nimport AssetsType from \"../AssetsType\";\r\n\r\nexport default function ProcessDoneAssets() {\r\n\r\n    this._successFiles.clear();\r\n    this._filesQueue.clear();\r\n\r\n    let cache = this.cache;\r\n\r\n    if (this._processedFiles.size > 0)\r\n    {\r\n\r\n      // sort the assets by type priority \r\n      this._processedFiles.sort((a, b) => {\r\n        return (a.type > b.type);\r\n      });\r\n\r\n      // add assets to cache\r\n      this._processedFiles.each(function(file) {\r\n\r\n        switch (file.type)\r\n        {\r\n          default:\r\n            break;\r\n\r\n          case AssetsType.image: {\r\n            cache.image.add(file.tag,file.data);\r\n            break;\r\n          }\r\n          case AssetsType.audio: {\r\n\r\n            file.data = requestXHR.response;\r\n\r\n            cache.addSound(file.tag,file.url,file.data,true);\r\n\r\n            if (file.autoDecode)\r\n            {\r\n                this.game.sound.decode(file.tag);\r\n            }\r\n\r\n            break;\r\n          }\r\n          case AssetsType.json: {\r\n            cache.json.add(file.tag, file.data);\r\n            break;\r\n          }\r\n\r\n          case AssetsType.tilemapJSON: {\r\n            cache.tilemap.add(file.tag, file.data);\r\n            break;\r\n          }\r\n        }\r\n\r\n      })\r\n\r\n      this._processedFiles.clear();\r\n    }\r\n\r\n    this.state = LoaderState.DONE;\r\n\r\n    //this.game.scene.preloadComplete();\r\n    PreloadSceneComplete.call(this.game.scene);\r\n  }","import LoaderFinished from \"./LoaderFinished\";\r\nimport ProcessAssetsQueue from \"./ProcessAssetsQueue\";\r\nimport LoaderState from \"../LoaderState\";\r\n\r\nexport default function StartLoadAssets() {\r\n\r\n    if (!this.isOK())\r\n    {\r\n        return -1;\r\n    }\r\n\r\n    this.progress = 0;\r\n    this._loadedFilesCount = 0;\r\n    this.state = LoaderState.LOADING;\r\n    this._filesQueueCount = this._filesQueue.size;\r\n\r\n    if (this._filesQueue.size === 0)\r\n    {\r\n      //console.log(0);\r\n      //this.loadFinished();\r\n      LoaderFinished.call(this);\r\n    }\r\n    else\r\n    {\r\n      this.isDownloading = true;\r\n      this._successFiles.clear();\r\n      this._failedFiles.clear();\r\n      this._filesLoading.clear();\r\n\r\n      //this.processFileQueue();\r\n      ProcessAssetsQueue.call(this);\r\n    }\r\n\r\n  }","\r\nexport default function UpdateProgress() {\r\n\r\n    //var progress = 0;\r\n\r\n    if (this._filesQueueCount != 0) {\r\n      this.progress = 1 - (this._loadedFilesCount / this._filesQueueCount);\r\n    } \r\n     //progress = parseFloat(this._successCount) / parseFloat(this._filesQueueCount);\r\n\r\n    //this.progress = progress;\r\n\r\n}","\r\nmodule.exports = {\r\n\r\n    LoaderState: require('./LoaderState'),\r\n    File: require('./File'),\r\n    XHR: require('./XHR'),\r\n    URLObject : require('./URLObject'),\r\n    AssetsType : require('./AssetsType'),\r\n    Assets: require('./assets'), \r\n    LoaderManager: require('./LoaderManager'),\r\n\r\n};","\r\nimport Vector from './Vector'\r\nimport Rect from './Rect'\r\n\r\nexport default class BoundingBox {\r\n  \r\n  constructor(x, y, width, height) {\r\n\r\n    x = x || Infinity;\r\n    y = y || Infinity;\r\n    width = width || -Infinity;\r\n    height = height || -Infinity;\r\n    this.min = new Vector(x,y);\r\n    this.max = new Vector(x+width,y+height);\r\n    //this.box = new Rect(xx,yy,w,h);\r\n\r\n  }\r\n\r\n  \r\n  get center() {\r\n    return new Vector(\r\n      (this.max.x - this.min.x) / 2,\r\n      (this.max.y - this.min.y) / 2\r\n    );\r\n  }\r\n\r\n  get size() {\r\n    return new Vector(\r\n      (this.max.x - this.min.x),\r\n      (this.max.y - this.min.y)\r\n    );\r\n  }\r\n\r\n  \r\n  set(minX, minY, maxX, maxY) {\r\n\r\n    this.min.set(minX,minY);\r\n    this.max.set(maxX,maxY);\r\n    //this.box.set(this.min.x,this.min.y,this.max.x-this.min.x,this.max.y-this.min.y);\r\n    return this;\r\n\r\n  }\r\n\r\n  setMin(minX, minY) {\r\n    this.min.x = minX;\r\n    this.min.y = minY;\r\n    return this;\r\n  }\r\n\r\n  setMax(maxX, maxY) {\r\n    this.max.x = maxX;\r\n    this.max.y = maxY;\r\n    return this;\r\n  }\r\n\r\n  move(x, y) {\r\n    this.min.x += x;\r\n    this.min.y += y;\r\n    this.max.x += x;\r\n    this.max.y += y;\r\n  }\r\n\r\n  intersects(bounds) {\r\n    return (\r\n      (this.max.x >= bounds.min.x && \r\n      this.max.y >= bounds.min.y &&\r\n      this.min.x <= bounds.max.x && \r\n      this.min.y <= bounds.max.y) ||\r\n\r\n      (this.min.x >= bounds.max.x &&\r\n      this.min.y >= bounds.max.y &&\r\n      this.max.x <= bounds.min.x &&\r\n      this.max.y <= bounds.min.y));\r\n  }\r\n\r\n  contains(x, y) {\r\n    return (\r\n      x > this.min.x &&\r\n      y > this.min.y &&\r\n      x < this.max.x &&\r\n      y < this.max.y);\r\n  }\r\n\r\n  expand(xRadius, yRadius) {\r\n\r\n    yRadius = yRadius || xRadius;\r\n\r\n    if (this.max.x > this.min.x)\r\n\t\t{\r\n\t\t\tthis.min.x -= xRadius;\r\n\t\t\tthis.max.x += xRadius;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.min.x += xRadius;\r\n\t\t\tthis.max.x -= xRadius;\r\n\t\t}\r\n\r\n\t\tif (this.max.y > this.min.y)\r\n\t\t{\r\n\t\t\tthis.min.y -= yRadius;\r\n\t\t\tthis.max.y += yRadius;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.min.y += yRadius;\r\n\t\t\tthis.max.y -= yRadius;\r\n\t\t}\r\n  }\r\n\r\n  merge(value) {\r\n\r\n    // merge with another bounds\r\n    if (value instanceof BoundingBox) {\r\n      this.min.x = Math.min(this.min.x, value.min.x);\r\n      this.min.y = Math.min(this.min.y, value.min.y);\r\n      this.max.x = Math.max(this.max.x, value.max.x);\r\n      this.max.y = Math.max(this.max.y, value.max.y);\r\n      return this;\r\n    } \r\n    else if (value instanceof Vector) {\r\n      return this.mergeWithPoint(value.x, value.y);\r\n    } else {\r\n      this.min.x = Math.min(this.min.x, value);\r\n      this.min.y = Math.min(this.min.y, value);\r\n      this.max.x = Math.max(this.max.x, value);\r\n      this.max.y = Math.max(this.max.y, value);\r\n      return this;\r\n    }\r\n  }\r\n\r\n  mergeWithPoint(x, y) {\r\n    this.min.x = Math.min(this.min.x, x);\r\n    this.min.y = Math.min(this.min.y, y);\r\n    this.max.x = Math.max(this.max.x, x);\r\n    this.max.y = Math.max(this.max.y, y);\r\n    return this;\r\n  }\r\n\r\n  extend(bounds) {\r\n    // min merge\r\n    if (bounds.min.x < this.min.x)\r\n      this.min.x = bounds.min.x;\r\n\r\n    if (bounds.min.y < this.min.y)\r\n      this.min.y = bounds.min.y;\r\n      \r\n    // max merge\r\n    if (bounds.max.x > this.max.x)\r\n      this.max.x = bounds.max.x;\r\n\r\n    if (bounds.max.y > this.max.y)\r\n      this.max.y = bounds.max.y;\r\n\r\n    return this;\r\n  }\r\n\r\n  extendByPoint(x, y) {\r\n    if (x < this.min.x) this.min.x = x;\r\n\t\tif (y < this.min.y) this.min.y = y;\r\n\t\tif (x > this.max.x) this.max.x = x;\r\n\t\tif (y > this.max.y) this.max.y = y;\r\n\r\n\t\treturn this;\r\n  }\r\n\r\n  limit(xmin, ymin, xmax, ymax) {\r\n\t\tif (this.min.x < xmin)\r\n      this.min.x = xmin;\r\n\r\n\t\tif (this.min.y < ymin)\r\n      this.min.y = ymin;\r\n\r\n\t\tif (this.max.x > xmax)\r\n      this.max.x = xmax;\r\n\r\n\t\tif (this.max.y > ymax)\r\n      this.max.y = ymax;\r\n  }\r\n\r\n  offset(x, y) {\r\n    let o = {x:x, y:y};\r\n     o.x -= this.min.x;\r\n     o.y -= this.min.y;\r\n\r\n\t\tif (this.max.x > this.min.x)\r\n\t\t\to.x /= this.max.x - this.min.x;\r\n\r\n\t\tif (this.max.y > this.min.y)\r\n      o.y /= this.max.y - this.min.y;\r\n      \r\n    return o;\r\n  }\r\n\r\n  toString() {\r\n    return \"{ min: \" + this.min.toString() + \", max: \" + this.max.toString() + \" }\";\r\n  }\r\n\r\n  \r\n\r\n}\r\n","\r\n\r\n\r\n\r\nconst MathUtils = {\r\n\r\n\r\n  degToRad : Math.PI / 180,\r\n  radToDeg : 180 / Math.PI,\r\n  TAU : Math.PI * 2,\r\n  //HALFPI : Math.PI / 2,\r\n  EPSILON : Math.pow(2, -52),\r\n  HALFPI : 1.5707963267948966,\r\n\r\n  floor : function(value) {\r\n    return (value >> 0);\r\n  },\r\n\r\n  round : function(value) {\r\n\r\n      // With a bitwise or.\r\n      //let rounded = (0.5 + value) | 0;\r\n      \r\n      // FASTEST - A double bitwise not.\r\n      return ~~ (0.5 + value);\r\n\r\n      // Finally, a left bitwise shift.\r\n      //rounded = (0.5 + value) << 0;\r\n\r\n  },\r\n\r\n  clamp : function(value, min, max) {\r\n    return (value > min) ? (value < max) ? value : max : min;\r\n  },\r\n\r\n  randomRange : function(min, max) {\r\n\r\n    return Math.random() * (max - min) + min;\r\n\r\n  },\r\n\r\n  irandomRange : function(min, max) {\r\n\r\n    return MathUtils.floor(Math.random() * (max - min + 1)) + min;\r\n\r\n  },\r\n\r\n  lerp : function(fromValue, toValue, t) {\r\n\r\n    return (1.0 - t) * fromValue + t * toValue;\r\n\r\n  },\r\n\r\n  lerpAngle : function(fromValue,toValue,t) {\r\n\r\n    /*var shortest_angle = ((((toValue - fromValue) % 360) + 540) % 360) - 180;\r\n    return shortest_angle * t;*/\r\n\r\n    var end = toValue;\r\n    var start = fromValue;\r\n\r\n    var difference = Math.abs(end - start);\r\n    if (difference > 180)\r\n    {\r\n        // We need to add on to one of the values.\r\n        if (end > start)\r\n        {\r\n            // We'll add it on to start...\r\n            start += 360;\r\n        }\r\n        else\r\n        {\r\n            // Add it on to end.\r\n            end += 360;\r\n        }\r\n    }\r\n\r\n          // Interpolate it.\r\n        var value = (start + ((end - start) * t));\r\n\r\n          // Wrap it..\r\n          var rangeZero = 360;\r\n\r\n          if (value >= 0 && value <= 360)\r\n              return value;\r\n\r\n          return (value % rangeZero);\r\n\r\n\r\n  },\r\n\r\n  distance : function(x0,y0,x1,y1) {\r\n\r\n    return Math.sqrt((x0 -= x1) * x0 + (y0 -= y1) * y0);\r\n\r\n  },\r\n\r\n  angleBetween : function(x0,y0,x1,y1) {\r\n\r\n    var angle = this.toDegree(Math.atan2(y1 - y0, x1 - x0));\r\n\r\n    if (angle < 0 && angle >= -180)\r\n      angle = 360 + angle;\r\n\r\n\r\n    return angle;\r\n\r\n  },\r\n\r\n  toDegree : function(radians) {\r\n\r\n    return radians * MathUtils.radToDeg;\r\n\r\n  },\r\n\r\n  toRadian : function(degrees) {\r\n\r\n    return degrees * MathUtils.degToRad;\r\n\r\n  }\r\n\r\n}\r\n\r\nObject.freeze(MathUtils);\r\n\r\nmodule.exports = MathUtils;\r\n\r\nexport default MathUtils;\r\n\r\n\r\n\r\n\r\n","\r\n/*\r\n\r\n\r\n* | a | b | x | * | 0 | 2 | 4 |\r\n* | c | d | y | * | 1 | 3 | 5 |\r\n* | 0 | 0 | 1 |\r\n\r\n* | 0 | 3 | 6 | * | a | c | x |\r\n* | 1 | 4 | 7 | * | b | d | y |\r\n* | 2 | 5 | 8 | * | 0 | 0 | 1 |\r\n\r\na = scale_x\r\nb = cos\r\nx = x translate\r\n\r\nc = scale_y\r\nd = sin\r\ny = y translate\r\n\r\nHTML5/CSS3 uses matrices in column-major order based.\r\n\r\n*/\r\n\r\nclass Matrix {\r\n  \r\n  /*\r\n  * Constructor is identity only\r\n  */\r\n  constructor(a, b) {\r\n\r\n    /*a = a || i;\r\n    b = b || 0;\r\n    x = x || 0;\r\n\r\n    c = c || 0;   \r\n    d = d || i;   \r\n    y = y || 0;*/\r\n\r\n    a = a || 0;\r\n    b = b || 0;\r\n\r\n    this.a = [];\r\n\r\n    // first column\r\n    this.a[0] = a;\r\n    this.a[1] = b;\r\n    this.a[2] = b;\r\n    // second column\r\n    this.a[3] = b;\r\n    this.a[4] = a;\r\n    this.a[5] = b;\r\n    // third column\r\n    this.a[6] = b; \r\n    this.a[7] = b;\r\n    this.a[8] = a;\r\n    //this.at = null;\r\n\r\n  }\r\n\r\n  at(i, j) {\r\n    return this.a[i + j * 3];\r\n  }\r\n\r\n  set(i, j, value) {\r\n    this.a[i + j * 3] = value;\r\n    return this;\r\n  }\r\n\r\n  setIdentity() {\r\n    return this.setTransform(\r\n      1,0,0,\r\n      0,1,0,\r\n      0,0,1\r\n    );\r\n  }\r\n\r\n  setTransform(a, b, c, d, e, f, g, h, i) {\r\n\r\n    this.a[0] = a;\r\n    this.a[1] = b;\r\n    this.a[2] = c; // 0\r\n\r\n    this.a[3] = d;\r\n    this.a[4] = e;\r\n    this.a[5] = f; // 0\r\n\r\n    this.a[6] = g; // x\r\n    this.a[7] = h; // y\r\n    this.a[8] = i;\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  translate(x, y) {\r\n\r\n\r\n  /* | a | b | x | * | 0 | 2 | 4 |\r\n  *  | c | d | y | * | 1 | 3 | 5 |\r\n\r\n  * | 0 | 3 | 6 | * | a | c | x |\r\n  * | 1 | 4 | 7 | * | b | d | y |\r\n  * | 2 | 5 | 8 |\r\n  */\r\n    // 4 = 0 * x * 2 * y + 4\r\n    // 5 = 1 * x * 3 * y + 5\r\n\r\n    // 6 = 1 * x + 3 * y + 5\r\n    // 7 = 1 * x + 4 * y + 7\r\n    this.a[6] = this.a[0] * x + this.a[3] * y + this.a[6];\r\n    this.a[7] = this.a[1] * x + this.a[4] * y + this.a[7];\r\n    return this;\r\n  }\r\n\r\n  scale(x, y) {\r\n\r\n    this.a[0] *= x; // a\r\n    this.a[1] *= x; // b\r\n\r\n    this.a[3] *= y; // c\r\n    this.a[4] *= y; // d\r\n\r\n    this.a[6] *= x; // x\r\n    this.a[7] *= y; // y\r\n    return this;\r\n\r\n  }\r\n\r\n  rotate(radianAngle) {\r\n    let cos = Math.cos(radianAngle);\r\n    let sin = Math.sin(radianAngle);\r\n\r\n    return this.radianRotate(cos, sin);\r\n }\r\n\r\n radianRotate(cos, sin) {\r\n return this.transform(cos, sin, -sin, cos, 0, 0);\r\n }\r\n\r\n transform(a, b, c, d, x, y) {\r\n  let a00 = this.a[0]; // a\r\n  let a01 = this.a[1]; // b\r\n\r\n  let a10 = this.a[3]; // c\r\n  let a11 = this.a[4]; // d\r\n\r\n  let a20 = this.a[6]; // x\r\n  let a21 = this.a[7]; // y\r\n\r\n  this.a[0] = a * a00 + b * a10; // a * a0 + b * c0;\r\n  this.a[1] = a * a01 + b * a11; // a * b0 + b * d0;\r\n\r\n  this.a[3] = c * a00 + d * a10; // c * a0 + d * c0;\r\n  this.a[4] = c * a01 + d * a11; // c * b0 + d * d0;\r\n\r\n  this.a[6] = x * a00 + y * a10 + a20; // x * a0 + y * c0 + x0;\r\n  this.a[7] = x * a01 + y * a11 + a21; // x * b0 + y * d0 + y0;\r\n\r\n  return this;\r\n }  \r\n\r\n setModelMatrix(position, scale, rotation, origin) {\r\n    this.a[0] = rotation.x * scale.x; // a\r\n    this.a[1] = rotation.y * scale.x; // b\r\n    this.a[3] = -rotation.y * scale.y; // c\r\n    this.a[4] =  rotation.x * scale.y; // d\r\n    this.a[6] = position.x; // x\r\n    this.a[7] = position.y; // y\r\n\r\n    /*if (origin !== undefined) {\r\n      this.a[6] -= origin.x * this.a[0] + origin.y * this.a[3];\r\n      this.a[7] -= origin.y * this.a[1] + origin.y * this.a[4];\r\n    }*/\r\n\r\n    return this;\r\n    /*\r\n    a  =  transform._cosSin.x * transform.scale.x;\r\n    b  = transform._cosSin.y * transform.scale.x;\r\n    c  = -transform._cosSin.y * transform.scale.y;\r\n    d  =  transform._cosSin.x * transform.scale.y;\r\n    x =  transform.position.x;\r\n    y =  transform.position.y;\r\n\r\n    x -= transform.origin.x * a + transform.origin.y * c;\r\n    y -= transform.origin.y * b + transform.origin.y * d;\r\n    */\r\n\r\n    \r\n }\r\n\r\n\r\n multiply(other) {\r\n\r\n    // faster way\r\n    let a00 = this.a[0]; // a - 0\r\n    let a01 = this.a[1]; // b - 1\r\n    let a10 = this.a[3]; // c - 3\r\n    let a11 = this.a[4]; // d - 4\r\n    let a20 = this.a[6]; // x - 6\r\n    let a21 = this.a[7]; // y - 7\r\n\r\n    this.a[0] = other.a[0] * a00 + other.a[1] * a10; // a1 * a0 + b1 * c0;\r\n    this.a[1] = other.a[0] * a01 + other.a[1] * a11; // a1 * b0 + b1 * d0;\r\n\r\n    this.a[3] = other.a[3] * a00 + other.a[4] * a10; // c1 * a0 + d1 * c0;\r\n    this.a[4] = other.a[3] * a01 + other.a[4] * a11; // c1 * b0 + d1 * d0;\r\n\r\n    this.a[6] = other.a[6] * a00 + other.a[7] * a10 + a20; // x1 * a0 + y1 * c0 + x0;\r\n    this.a[7] = other.a[6] * a01 + other.a[7] * a11 + a21; // x1 * b0 + y1 * d0 + y0;\r\n\r\n    return this;\r\n }\r\n\r\n concat(other) {\r\n\r\n  let a = this.a[0]; // a - 0\r\n  let b = this.a[1]; // b - 1\r\n  let c = this.a[3]; // c - 3\r\n  let d = this.a[4]; // d - 4\r\n  let x = this.a[6]; // x - 6\r\n  let y = this.a[7]; // y - 7\r\n\r\n  this.a[0] = a * other.a[0] + b * other.a[3]; // a * pt.a + b * pt.c;\r\n  this.a[1] = a * other.a[1] + b * other.a[4]; // a * pt.b + b * pt.d;\r\n\r\n  this.a[3] = c * other.a[0] + d * other.a[3]; // c * pt.a + d * pt.c;\r\n  this.a[4] = c * other.a[1] + d * other.a[4]; // c * pt.b + d * pt.d;\r\n\r\n  this.a[6] = x * other.a[0] + y * other.a[3] + other.a[6]; // x * pt.a + y * pt.c + pt.x;\r\n  this.a[7] = x * other.a[1] + y * other.a[4] + other.a[7]; // x * pt.b + y * pt.d + pt.y;\r\n\r\n  return this;\r\n }\r\n\r\n transformPoint(x, y) {\r\n\r\n  let point = {x:0,y:0}\r\n\r\n  point.x = x * this.a[0] + y * this.a[3] + this.a[6];\r\n  point.y = x * this.a[1] + y * this.a[4] + this.a[7];\r\n\r\n  return point;\r\n}\r\n\r\n transpose() {\r\n  return this.setAll(\r\n    mat.a[0], mat.a[3], mat.a[6],\r\n    mat.a[1], mat.a[4], mat.a[7],\r\n    mat.a[2], mat.a[5], mat.a[8],\r\n  );\r\n }\r\n\r\n toString() {\r\n  let str = \"\";\r\n   for(let y = 0; y < 3; y++) {\r\n      for(let x = 0; x < 3; x++) {\r\n        let val = this.at(x, y); \r\n        //str += val.toString() + \" \";\r\n        //console.log(\"---- \" + (x + y * 3).toString());\r\n        str += val + \" \";\r\n      }\r\n      str += \"\\n\"\r\n   }\r\n\r\n   return str;\r\n    \r\n }\r\n \r\n \r\n static identity() { return new Matrix(1); }\r\n\r\n static zero() { return new Matrix(0); }\r\n\r\n static transpose(mat) {\r\n  let copy = Matrix.zero;\r\n  return copy.setAll(\r\n    mat.a[0], mat.a[3], mat.a[6],\r\n    mat.a[1], mat.a[4], mat.a[7],\r\n    mat.a[2], mat.a[5], mat.a[8],\r\n  );\r\n\r\n }\r\n\r\n static multiplySlow(a, b) {\r\n    var mat = Matrix.zero(); // zeroes\r\n    let val;\r\n\r\n    for (let i = 0; i < 3; ++i)\r\n    {\r\n      for (let j = 0; j < 3; ++j)\r\n      {\r\n        for (let k = 0; k < 3; ++k)\r\n        {\r\n          val = mat.at(i, k);\r\n          val += a.at(i, j) * b.at(j, k);\r\n          mat.set(i, k, val);\r\n        }\r\n      }\r\n    }\r\n\r\n    return mat;\r\n }\r\n\r\n}\r\n\r\nmodule.exports = Matrix;","\r\n/**\r\n* Simple class for rectangle. Usage for collision.\r\n* @class Rect\r\n* @constructor\r\n*/\r\n\r\nexport default class Rect {\r\n  \r\n  constructor(x, y, width, height) {\r\n    this.x = x || 0;\r\n    this.y = y || 0;\r\n    this.width = width || 0;\r\n    this.height = height || 0;\r\n  }\r\n\r\n  get center() {\r\n    var vec = {};\r\n    vec.x = this.x + this.width / 2;\r\n    vec.y = this.y + this.height / 2;\r\n    return vec;\r\n  }\r\n\r\n  set(x,y,width,height) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = width;\r\n    this.height = height;\r\n    return this;\r\n  }\r\n\r\n  setPostion(x,y) {\r\n    this.x = x;\r\n    this.y = y;\r\n    return this;\r\n  }\r\n\r\n  setSize(width, height) {\r\n    this.width = width;\r\n    this.height = height;\r\n    return this;\r\n  }\r\n\r\n  copy(rect) {\r\n    this.x = rect.x;\r\n    this.y = rect.y;\r\n    this.width = rect.width;\r\n    this.height = rect.height;\r\n    return this;\r\n  }\r\n\r\n  \r\n  intersects(rect) {\r\n    return Rect.intersects(this, rect);\r\n  }\r\n\r\n  contains(x,y) {\r\n  return Rect.contains(this,x,y);\r\n  }\r\n\r\n\r\n  static intersects(rect1, rect2) {\r\n\r\n    if (rect1.width <= 0 || rect1.height <= 0 || rect2.width <= 0 || rect2.height <= 0)\r\n      return false;\r\n  \r\n    return    !(rect1.x > rect2.x + rect2.width ||\r\n               rect1.x + rect1.width < rect2.x ||\r\n               rect1.y > rect2.y + rect2.height ||\r\n               rect1.y + rect1.height < rect2.y);\r\n  }\r\n\r\n  static contains(rect, x, y) {\r\n  \r\n    if (rect.width <= 0 && rect.height <= 0 )\r\n      return false;\r\n  \r\n    return (x > rect.x &&\r\n            x < rect.x + rect.width &&\r\n            y >= rect.y &&\r\n            y < rect.y + rect.height);\r\n  \r\n  }\r\n  \r\n  static intersectionArea(rect1,rect2) {\r\n  \r\n      var out = new scintilla.Rect();\r\n  \r\n      if (scintilla.Rect.intersects(rect1,rect2)) {\r\n  \r\n         out.y = Math.max(a.y, b.y);\r\n         out.x = Math.max(a.x, b.x);\r\n         out.width = Math.min(a.x + a.width, b.x + b.width) - out.x;\r\n         out.height = Math.min(a.y + a.height, b.y + b.height) - out.y;\r\n  \r\n      }\r\n  \r\n      return out;\r\n  \r\n  }\r\n  \r\n\r\n}\r\n\r\n\r\n\r\n","\r\n\r\nimport MathUtils from './MathUtils'\r\n\r\n/**\r\n* Class for points and vectors.\r\n* @class Vector\r\n* @constructor\r\n*/\r\nexport default class Vector {\r\n  \r\n  constructor(x,y, managed) {\r\n\r\n    this.x = x || 0;\r\n    this.y = y || 0;\r\n    this.managed = managed || undefined;\r\n  }\r\n\r\n  /*\r\n  set x(value) {\r\n    this.x = value;\r\n    return this.x;\r\n  }\r\n  get x() {return this.x;}\r\n  set y(value) {\r\n    this.y = value;\r\n    return this.y;\r\n  }\r\n  get y() {return this.y;}*/\r\n\r\n  set(x,y) {\r\n\r\n    this.x = x;\r\n    this.y = y || x\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n  }\r\n\r\n  move(x,y) {\r\n\r\n    this.x += x;\r\n    this.y += y;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  scale(x, y) {\r\n\r\n    this.x *= x;\r\n    this.y *= y || x;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  rotate(radians) {\r\n\r\n    let x = this.x;\r\n    let y = this.y;\r\n    this.x = x * Math.cos(radians) - y * Math.sin(radians);\r\n    this.y = x * Math.sin(radians) + y * Math.cos(radians);\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  rotateAround(radians, other) {\r\n\r\n    /*var x = this.x;\r\n    var y = this.y;*/\r\n    let dx = this.x-other.x;\r\n    let dy = this.y-other.y;\r\n\r\n    let c = Math.cos(radians);\r\n    let s = Math.sin(radians);\r\n\r\n    /*this.x = c * (x-other.x) - s * (y-other.y) + other.x;\r\n    this.y = s * (x-other.x) + c * (y-other.y) + other.y;*/\r\n\r\n\r\n    this.x =  other.x + (c * dx - s * dy);\r\n    this.y =  other.y + (s * dx + c * dy);\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  copy(otherVector) {\r\n\r\n    this.x = otherVector.x;\r\n    this.y = otherVector.y;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  normalize() {\r\n\r\n    let mag = this.length();\r\n    if (mag > 0) {\r\n      this.x = this.x / mag;\r\n      this.y = this.y / mag;\r\n    }\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  round() {\r\n    this.x = MathUtils.round(this.x);\r\n    this.y = MathUtils.round(this.y);\r\n    return this;\r\n  }\r\n\r\n  reverse() {\r\n    this.x = -this.x;\r\n    this.y = -this.y;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n  }\r\n\r\n  add(other) {\r\n    this.x += other.x;\r\n    this.y += other.y;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n  }\r\n\r\n  sub(other) {\r\n    this.x -= other.x;\r\n    this.y -= other.y;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n  }\r\n\r\n  perp() {\r\n\r\n    let x = this.x;\r\n    this.x = this.y;\r\n    this.y = -x;\r\n\r\n    if (this.managed !== undefined)\r\n      this.managed.markDirty();\r\n\r\n    return this;\r\n  }\r\n\r\n  \r\n\r\n  dot(other) {\r\n    return Vector.dot(this,other);\r\n  }\r\n\r\n  project(other) {\r\n    return Vector.project(this,other);\r\n  }\r\n\r\n  clone() {\r\n    return new Vector(this.x,this.y);\r\n  }\r\n\r\n  length() {\r\n    return Math.sqrt(this.squaredLenght());\r\n  }\r\n\r\n  toString() {\r\n    return \"{ x: \" + this.x + \", y: \" + this.y + \" }\"\r\n  }\r\n\r\n  squaredLenght() {\r\n    return Vector.dot(this,this);\r\n  }\r\n\r\n  static abs(vector) {\r\n    return new Vector(Math.abs(vector.x), Math.abs(vector.y));\r\n  }\r\n\r\n  static scalar(a, b) {\r\n    return a.x * b.y - a.y * b.x;\r\n  }\r\n\r\n  static distance(a, b) {\r\n    return MathUtils.distance(a.x,a.y,b.x,b.y);\r\n  }\r\n\r\n  static angleBetween(a, b) {\r\n    return MathUtils.angleBetween(a.x,a.y,b.x,b.y);\r\n  }\r\n\r\n  static dot(a, b) {\r\n    return (a.x * b.x) + (a.y * b.y);\r\n  }\r\n\r\n  static project(a,b) {\r\n    let dp = Vector.dot(a,b);\r\n    var proj = new Vector(\r\n      ( dp / (b.x*b.x + b.y*b.y) ) * b.x,\r\n      ( dp / (b.x*b.x + b.y*b.y) ) * b.y\r\n    );\r\n    return proj;\r\n  };\r\n\r\n  // project for unit vector\r\n  static projectNormal(a,b) {\r\n    let dp = Vector.dot(a,b);\r\n    let proj = new Vector(   dp / b.x,   dp / b.y );\r\n    return proj;\r\n  };\r\n\r\n  static reflect(vec,axis) {\r\n\r\n    let r = Vector.project(vec,axis);\r\n    r.scale(2);\r\n    r.sub(vec);\r\n    return r;\r\n\r\n  };\r\n\r\n  static reflectNormal(vec,axis) {\r\n\r\n    let r = Vector.projectNormal(vec,axis);\r\n    r.scale(2);\r\n    r.sub(vec);\r\n    return r;\r\n\r\n  };\r\n\r\n\r\n  static lerp(a, b, t) {\r\n    let vec = new Vector(\r\n      MathUtils.lerp(a.x,b.x,t),\r\n      MathUtils.lerp(a.y,b.y,t)\r\n    );\r\n    return vec;\r\n  }\r\n\r\n  get magnitude() {return Math.sqrt((this.x * this.x) + (this.y * this.y));}\r\n  get normal() {\r\n    let mag = this.magnitude;\r\n    let vec = new tobiJS.Vector(this.x / mag,this.y / mag);\r\n    return vec;\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = Vector;","import MathUtils from \"../MathUtils\";\r\nimport EasingType, { EASE_BACK_CONST } from \"./EasingType\";\r\n\r\n\r\nclass EaseInFunctions {\r\n    \r\n\r\n    /**\r\n     * \r\n     * @param {Number} from \r\n     * @param {Number} to \r\n     * @param {Number} t \r\n     * @param {Number} [duration]\r\n     */\r\n    linear(from, to, t) {\r\n        return MathUtils.lerp(from, to, t);\r\n    }\r\n\r\n    stepped(from, to, t) {\r\n        return to * ((t < 0.5) ? 0 : 1) + from;\r\n    }\r\n\r\n    cut(from, to, t, levels) {\r\n        if (levels === undefined) levels = 2;\r\n        return MathUtils.lerp(from, to, MathUtils.floor(t * levels) / levels);\r\n    }\r\n\r\n    sine(from, to, t) {\r\n        return to * (Math.sin(t  * MathUtils.HALFPI - MathUtils.HALFPI) + 1) + from;\r\n    }\r\n\r\n    power(from, to, t, power) {\r\n        return to * Math.pow(t, power) + from;\r\n    }\r\n\r\n    quadratic(from, to, t) {\r\n        return this.power(from, to, t, 2);\r\n    }\r\n\r\n    cubic(from, to, t) {\r\n        return this.power(from, to, t, 3);\r\n    }\r\n\r\n    quartic(from, to, t) {\r\n        return this.power(from, to, t, 4);\r\n    }\r\n\r\n    quintic(from, to, t) {\r\n        return this.power(from, to, t, 5);\r\n    }\r\n\r\n    exponential(from, to, t) {\r\n        return (t == 0) ? from : to * Math.pow(2, 10 * (t - 1)) + from;\r\n    }\r\n\r\n    circ(from, to, t) {\r\n        return -to * (Math.sqrt(1 - t * t) - 1) + from\r\n    }\r\n\r\n    elastic(from, to, t, duration) {\r\n        if (duration === undefined) duration = 1;\r\n\r\n        if (t == 0) \r\n            return from;\r\n        if ((t /= duration) == 1) \r\n            return from + to;\r\n\r\n        let p = duration * 0.3;\r\n        let s = p / 4;\r\n        // this is a fix, again, with post-increment operators\r\n        let postFix = to * Math.pow(2, 10 * (t -= 1)); \r\n        return -(postFix * Math.sin((t * duration - s) * (2 * Math.PI) / p)) + from;\r\n    }\r\n\r\n    back(from, to, t) {\r\n        return to * t * t * ((EASE_BACK_CONST + 1) * t - EASE_BACK_CONST) + from;\r\n    }\r\n\r\n     /**\r\n     * Ease-in by specific EasingType.\r\n     * \r\n     * @param {EasingType} type The type of easing\r\n     * @param {Number} from Start point\r\n     * @param {Number} to End point\r\n     * @param {Number} t Normalized time\r\n     * @param {Number} [arg] Additional argument for specific types:\r\n     * \r\n     * @constant EasingType.CUT: The cell levels of the interpolation\r\n     * @constant EasintType.ELASTIC: The duration of the easing.\r\n     * @constant EasintType.POWER: The pow product.\r\n     */\r\n    by(type, from, to, t, arg) {\r\n\r\n        if (arg === undefined) arg = 1;\r\n\r\n        switch(type) {\r\n\r\n            case EasingType.NONE: return t;\r\n            case EasingType.CUT: return this.cut(from, to, t, arg);\r\n            case EasingType.LINEAR: return this.linear(from, to, t);\r\n            case EasingType.SINE: return this.sine(from, to, t);\r\n            case EasingType.QUADRATIC: return this.power(from, to, t, 2); \r\n            case EasingType.CUBIC: return this.power(from, to, t, 3);\r\n            case EasingType.QUARTIC: return this.power(from, to, t, 4);\r\n            case EasingType.QUINTIC: return this.power(from, to, t, 5); \r\n            case EasingType.POWER :  return this.power(from, to, t, arg); \r\n            case EasingType.EXPONENTIAL: return this.exponential(from, to, t); \r\n            case EasingType.CIRC: return this.circ(from, to, t); \r\n            case EasingType.BACK: return this.back(from, to, t); \r\n            case EasingType.ELASTIC: return this.elastic(from, to, t, arg);\r\n        }\r\n\r\n        return t;\r\n    }\r\n\r\n\r\n};\r\n\r\nvar EaseIn = new EaseInFunctions();\r\n\r\nObject.freeze(EaseIn);\r\n\r\nexport default EaseIn;\r\n","import MathUtils from \"../MathUtils\";\r\nimport EaseIn from \"./EaseIn\";\r\nimport { EASE_BACK_CONST } from \"./EasingType\";\r\n\r\n\r\nclass EaseInOutFunctions {\r\n\r\n    linear(from, to, t) {\r\n        return MathUtils.lerp(from, to, t);\r\n    }\r\n\r\n    stepped(from, to, t) {\r\n        return to * ((t < 0.5) ? 0 : 1) + from;\r\n    }\r\n\r\n    cut(from, to, t, levels) {\r\n        if (levels === undefined) levels = 2;\r\n        return MathUtils.lerp(from, to, MathUtils.floor(t * levels) / levels);\r\n    }\r\n\r\n    sine(from, to, t) {\r\n        return to * ((Math.sin(t * Math.PI - MathUtils.HALFPI) + 1) / 2) + from;\r\n    }\r\n\r\n    power(from, to, t, power) {\r\n\r\n        t *= 2;\r\n        if (t < 1) \r\n            return EaseIn.power(from, to, t, power) / 2;\r\n\r\n        let sign = (power % 2 == 0) ? -1 : 1;\r\n        return to * (sign / 2.0 * (Math.pow(s - 2, power) + sign * 2)) + from;\r\n    }\r\n\r\n    quadratic(from, to, t) {\r\n        return this.power(from, to, t, 2);\r\n    }\r\n\r\n    cubic(from, to, t) {\r\n        return this.power(from, to, t, 3);\r\n    }\r\n\r\n    quartic(from, to, t) {\r\n        return this.power(from, to, t, 4);\r\n    }\r\n\r\n    quintic(from, to, t) {\r\n        return this.power(from, to, t, 5);\r\n    }\r\n\r\n    exponential(from, to, t) {\r\n\r\n        if (t == 0.0 || t == 1.0) \r\n            return (to * t) + from;\r\n\r\n        if (t < 0.5)\r\n        {\r\n            return (to * 0.5 * Math.pow(2, (20 * t) - 10)) + from;\r\n        }\r\n        else\r\n        {\r\n            return (to * -0.5 * Math.pow(2, (-20 * t) + 10) + 1) + from;\r\n        }\r\n    }\r\n\r\n    circ(from, to, t) {\r\n\r\n        if (t / 2 < 1) \r\n            return -to / 2 * (Math.sqrt(1 - t * t) - 1) + from;\r\n\r\n        return to / 2 * (Math.sqrt(1 - t * (t -= 2)) + 1) + from;\r\n\r\n    }\r\n\r\n    elastic(from, to, t, duration) {\r\n        if (duration === undefined) duration = 1;\r\n\r\n        if (t == 0) \r\n            return from;\r\n\r\n        if ((t /= duration / 2) == 2) \r\n            return from + to;\r\n\r\n        let p = duration * (0.3 * 1.5);\r\n\r\n\r\n        let s = p / 4;\r\n        let postFix = 0;\r\n\r\n\r\n        if (to >= Math.abs(to))\r\n        {\r\n            s = p/ (2 * Math.PI) * Math.asin (to/to);\r\n        }\r\n\r\n        if (t < 1)\r\n        {\r\n            postFix = to * Math.pow(2, 10 * (t -= 1));\r\n            return -0.5 * (postFix * Math.sin((t * duration - s) * (2 * Math.PI) / p)) + from;\r\n        }\r\n\r\n        // postIncrement is evil\r\n        postFix = to * Math.pow(2, -10 * (t -= 1)); \r\n        return postFix * Math.sin((t * duration - s) * (2 * Math.PI) / p) * 0.5 + to + from;\r\n    }\r\n\r\n    back(from, to, t) {\r\n\r\n        if (t == 0) \r\n            return from;\r\n\r\n        if ((t/=0.5) == 2) \r\n            return from + to;  \r\n        \r\n        let p = (.3*1.5);\r\n        let s = EASE_BACK_CONST;\r\n\r\n        if (t < 1) \r\n            return to / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + from;\r\n        \r\n        return to / 2 * (( t -= 2 ) * t * (((s*=(1.525)) + 1) * t + s) + 2) + from;\r\n    }\r\n\r\n    /**\r\n     * Ease-in and ease out by specific EasingType.\r\n     * \r\n     * @param {EasingType} type The type of easing\r\n     * @param {Number} from Start point\r\n     * @param {Number} to End point\r\n     * @param {Number} t Normalized time\r\n     * @param {Number} [arg] Additional argument for specific types:\r\n     * \r\n     * @constant EasingType.CUT: The cell levels of the interpolation\r\n     * @constant EasintType.ELASTIC: The duration of the easing.\r\n     * @constant EasintType.POWER: The pow product.\r\n     */\r\n    by(type, from, to, t, arg) {\r\n\r\n        if (arg === undefined) arg = 1;\r\n\r\n        switch(type) {\r\n\r\n            case EasingType.NONE: return t;\r\n            case EasingType.CUT: return this.cut(from, to, t, arg);\r\n            case EasingType.LINEAR: return this.linear(from, to, t);\r\n            case EasingType.SINE: return this.sine(from, to, t);\r\n            case EasingType.QUADRATIC: return this.power(from, to, t, 2); \r\n            case EasingType.CUBIC: return this.power(from, to, t, 3);\r\n            case EasingType.QUARTIC: return this.power(from, to, t, 4);\r\n            case EasingType.QUINTIC: return this.power(from, to, t, 5); \r\n            case EasingType.POWER :  return this.power(from, to, t, arg); \r\n            case EasingType.EXPONENTIAL: return this.exponential(from, to, t); \r\n            case EasingType.CIRC: return this.circ(from, to, t); \r\n            case EasingType.BACK: return this.back(from, to, t); \r\n            case EasingType.ELASTIC: return this.elastic(from, to, t, arg);\r\n        }\r\n\r\n        return t;\r\n    }\r\n\r\n}\r\n\r\nvar EaseInOut = new EaseInOutFunctions();\r\n\r\nObject.freeze(EaseInOut);\r\n\r\nexport default EaseInOut;","\r\nimport MathUtils from '../../math/MathUtils'\r\nimport { EASE_BACK_CONST } from './EasingType';\r\n\r\nclass EaseOutFunction {\r\n    \r\n    linear(from, to, t) {\r\n        return MathUtils.lerp(from, to, t);\r\n    }\r\n\r\n    stepped(from, to, t) {\r\n        return to * ((t < 0.5) ? 0 : 1) + from;\r\n    }\r\n\r\n    cut(from, to, t, levels) {\r\n        if (levels === undefined) levels = 2;\r\n        return MathUtils.lerp(from, to, MathUtils.floor(t * levels) / levels);\r\n    }\r\n\r\n    sine(from, to, t) {\r\n        return -from * (Math.sin(t  * MathUtils.HALFPI) + 1) + from + to;\r\n    }\r\n\r\n    power(from, to, t, power) {\r\n        let sign = power % 2 == 0 ? -1 : 1;\r\n        return to * (sign * Math.pow(t - 1, power) + sign) + from;\r\n    }\r\n\r\n    quadratic(from, to, t) {\r\n        return this.power(from, to, t, 2);\r\n    }\r\n\r\n    cubic(from, to, t) {\r\n        return this.power(from, to, t, 3);\r\n    }\r\n\r\n    quartic(from, to, t) {\r\n        return this.power(from, to, t, 4);\r\n    }\r\n\r\n    quintic(from, to, t) {\r\n        return this.power(from, to, t, 5);\r\n    }\r\n\r\n    exponential(from, to, t) {\r\n        return (t == 1) ? from : to * (1 - Math.pow(2, 10 * t)) + from;\r\n    }\r\n\r\n    circ(from, to, t) {\r\n        return to * Math.sqrt(1 - (t - 1) * t) + from\r\n    }\r\n\r\n    elastic(from, to, t, duration) {\r\n        if (duration === undefined) duration = 1;\r\n\r\n        if (t == 0) \r\n            return from;\r\n        if ((t /= duration) == 1) \r\n            return from + to;\r\n\r\n        let p = duration * 0.3;\r\n        let s = p / 4;\r\n        return (to * Mathf.pow(2, -10 * t) * Math.sin((t  - s) * (2 * Math.PI) / p) + 1) + from;\r\n    }\r\n\r\n    back(from, to, t) {\r\n        //let f = (1 - t);\r\n        //return to * (1 - (f * f * f - f * Mathf.Sin(f * Math.PI))) + from;\r\n        return to * ((t-1) * t * ((EASE_BACK_CONST+1)*t + EASE_BACK_CONST) + 1) + from;\r\n    }\r\n\r\n    /**\r\n     * Ease-out by specific EasingType.\r\n     * \r\n     * @param {EasingType} type The type of easing\r\n     * @param {Number} from Start point\r\n     * @param {Number} to End point\r\n     * @param {Number} t Normalized time\r\n     * @param {Number} [arg] Additional argument for specific types:\r\n     * \r\n     * @constant EasingType.CUT: The cell levels of the interpolation\r\n     * @constant EasintType.ELASTIC: The duration of the easing.\r\n     * @constant EasintType.POWER: The pow product.\r\n     */\r\n    by(type, from, to, t, arg) {\r\n\r\n        if (arg === undefined) arg = 1;\r\n\r\n        switch(type) {\r\n\r\n            case EasingType.NONE: return t;\r\n            case EasingType.CUT: return this.cut(from, to, t, arg);\r\n            case EasingType.LINEAR: return this.linear(from, to, t);\r\n            case EasingType.SINE: return this.sine(from, to, t);\r\n            case EasingType.QUADRATIC: return this.power(from, to, t, 2); \r\n            case EasingType.CUBIC: return this.power(from, to, t, 3);\r\n            case EasingType.QUARTIC: return this.power(from, to, t, 4);\r\n            case EasingType.QUINTIC: return this.power(from, to, t, 5); \r\n            case EasingType.POWER :  return this.power(from, to, t, arg); \r\n            case EasingType.EXPONENTIAL: return this.exponential(from, to, t); \r\n            case EasingType.CIRC: return this.circ(from, to, t); \r\n            case EasingType.BACK: return this.back(from, to, t); \r\n            case EasingType.ELASTIC: return this.elastic(from, to, t, arg);\r\n        }\r\n\r\n        return t;\r\n    }\r\n\r\n}\r\n\r\nvar EaseOut = new EaseOutFunction();\r\n\r\nObject.freeze(EaseOut);\r\n\r\nexport default EaseOut;\r\n\r\nmodule.exports = EaseOut;","import EaseIn from \"./EaseIn\";\r\nimport EaseOut from './EaseOut'\r\nimport EaseInOut from \"./EaseInOut\";\r\n\r\n/**\r\n * Easing functions\r\n */\r\nconst Ease = {\r\n\r\n\r\n    /**\r\n     * Ease-in functions\r\n     */\r\n    in : EaseIn,\r\n\r\n    /**\r\n     * Ease-out functions\r\n     */\r\n    out : EaseOut,\r\n\r\n    /**\r\n     * Ease-in-out functions\r\n     */\r\n    inout : EaseInOut\r\n\r\n \r\n\r\n}\r\n\r\nObject.freeze(Ease);\r\n\r\nmodule.exports = Ease;\r\n\r\nexport default Ease;","\r\nconst EasingType = {\r\n    NONE : -1, \r\n    STEPPED : 0,\r\n    LINEAR : 1,\r\n    SINE : 2,\r\n    QUADRATIC : 3,\r\n    CUBIC : 4,\r\n    QUARTIC : 5,\r\n    QUINTIC : 6,\r\n    EXPONENTIAL : 7,\r\n    CIRC : 8,\r\n    BACK : 9,\r\n    ELASTIC : 10,\r\n    BOUNCE : 11,\r\n    CUT : 12,\r\n    POWER : 13\r\n}\r\n\r\nexport const EASE_BACK_CONST = 1.70158;\r\n\r\nexport default EasingType;\r\n\r\nmodule.export = EasingType;","\r\nexport default class Module\r\n{\r\n    constructor(moduleType, moduleName, moduleManager)\r\n    {\r\n        this._moduleType = moduleType || \"none\";\r\n        this._moduleName = moduleName || \"noName\";\r\n        this._enabled = true;\r\n        this.entity = null;\r\n        this.moduleManager = moduleManager || undefined;\r\n\r\n        if (moduleManager !== undefined)\r\n        {\r\n            this.entity = moduleManager.entity;\r\n        }\r\n        //this.game = moduleManager.game || null;\r\n    }\r\n\r\n\r\n    get type() {return this._moduleType;}\r\n    get name() {return this._moduleName;}\r\n    get enabled() {return this._enabled;}\r\n    set enabled(value) {\r\n        value = !!value;\r\n\r\n        if (value !== this._enabled)\r\n        {\r\n            this._enabled = value;\r\n        }\r\n    }\r\n}\r\n\r\n//module.exports = Module;","import ModuleProvider from \"./ModuleProvider\";\r\n\r\n\r\nexport default class ModuleAttacher\r\n{\r\n    constructor(moduleManager) {\r\n        this.moduleManager = moduleManager;\r\n    }\r\n\r\n    sprite(tag) {\r\n        return ModuleProvider.attach(this.moduleManager, 'sprite', tag);\r\n    }\r\n\r\n    tilemap(tag) {\r\n\r\n        if (tag === undefined || tag == null)\r\n            throw new Error(\"ModuleAttacher.tilemap: Can not create Tilemap module without a proper tag name.\");\r\n\r\n        return ModuleProvider.attach(this.moduleManager, 'tilemap', tag);\r\n    }\r\n}","\r\nimport DataMap from '../structures/Map'\r\nimport DataList from '../structures/List'\r\nimport ModuleAttacher from './ModuleAttacher'\r\n\r\n\r\nexport default class ModuleManager\r\n{\r\n    constructor(entity)\r\n    {\r\n        this.entity = entity || null;\r\n        this.attached = new DataMap();\r\n        this._pendingModulesInitialization = new DataList();\r\n        this.attach = new ModuleAttacher(this);\r\n    }\r\n\r\n    detach(moduleName, index)\r\n    {\r\n        \r\n    }\r\n\r\n    has(moduleName) {\r\n        return this.attached.has(moduleName);\r\n    }\r\n\r\n    get(moduleName) {\r\n        return this.attached.get(moduleName);\r\n    }\r\n\r\n} ","\r\n\r\nimport DataMap from '../structures/Map'\r\nimport InitializeModuleBase from './components/InitializeModuleBase';\r\n\r\n\r\nclass ModuleProviderManager\r\n{\r\n    constructor()\r\n    {\r\n        this.proxyModules = new DataMap();\r\n    }\r\n\r\n    attach(modulesManager, moduleName, args)\r\n    {\r\n        let attached = modulesManager.attached;\r\n\r\n        if (attached.has(moduleName))\r\n            throw new Error('ModuleManager.attach: Could not attach module ' + moduleName + '. Already exists');\r\n\r\n        if (!this.proxyModules.has(moduleName))\r\n            throw new Error('ModuleManager.attach: Module type ' + moduleName + ' don\\'t exists.');\r\n\r\n        // create a new module\r\n        let newModule = this.proxyModules.get(moduleName)(modulesManager, args);\r\n\r\n        // initialize entity module\r\n        InitializeModuleBase(newModule, modulesManager.entity);\r\n\r\n        // attach the new module to manager\r\n        attached.set(newModule.type, newModule);\r\n\r\n        // add to pending initialization list\r\n        modulesManager._pendingModulesInitialization.push(newModule);\r\n\r\n        return newModule;\r\n    }\r\n\r\n    register(moduleName, func)\r\n    {\r\n        if (!ModuleProvider.proxyModules.has(moduleName))\r\n        ModuleProvider.proxyModules.set(moduleName, func); // { type: moduleType, func: func }\r\n        \r\n    }    \r\n}\r\n\r\nvar ModuleProvider = new ModuleProviderManager();\r\n\r\nexport default ModuleProvider;","import Renderable from \"../renderables/Renderable\";\r\nimport Tilemap from \"../renderables/tilemap/Tilemap\";\r\nimport Sprite from \"../renderables/Sprite\";\r\n\r\nexport default function AttachModuleInGame(entityModule, modulesManager, game) {\r\n \r\n    // RENDERABLES\r\n    if (entityModule instanceof Sprite) \r\n    {\r\n        game.system.render.layer.renderLayers.at(0).add(entityModule);\r\n    } \r\n    else if (entityModule instanceof Tilemap) {\r\n        for (let i = 0; i < entityModule.layers.length; i++) {\r\n            game.system.render.layer.renderLayers.at(0).add(entityModule.layers[i]);\r\n        \r\n    }\r\n\r\n       \r\n    }\r\n\r\n}","\r\nexport default function InitializeModuleBase(entityModule, instace) {\r\n\r\n    entityModule.entity = instace;\r\n    entityModule.moduleManager = instace.modules;\r\n\r\n}","import InitializeModuleBase from \"./InitializeModuleBase\";\r\nimport RenderableUpdate from \"../renderables/components/RenderableUpdate\";\r\nimport AttachModuleInGame from \"./AttachModuleInGame\";\r\n\r\nexport default function ModulesUpdater(modulesManager, game)\r\n{\r\n    let size = modulesManager._pendingModulesInitialization.size;\r\n    let entity = modulesManager.entity;\r\n\r\n    if (size > 0)\r\n    {\r\n        // add pending modules\r\n        modulesManager._pendingModulesInitialization.each(mod => {\r\n            AttachModuleInGame(mod, modulesManager, game);\r\n        });\r\n\r\n        modulesManager._pendingModulesInitialization.clear();\r\n    }\r\n\r\n    \r\n    let render = modulesManager.attached.get('render');\r\n    if (render !== undefined || render != null) {\r\n        RenderableUpdate(entity, render, game.system.camera, game.system.loop.updateStep);\r\n    }\r\n    \r\n}\r\n\r\n","\r\nmodule.exports = {\r\n    Module : require('./Module'),\r\n    ModuleProvider : require('./ModuleProvider'),\r\n    ModuleAttacher : require('./ModuleAttacher'),\r\n    Renderables : require('./renderables')\r\n}","\r\nimport BoundingBox from '../../math/BoundingBox';\r\nimport Vector from '../../math/Vector'\r\nimport Module from '../Module';\r\n\r\nexport default class Renderable extends Module\r\n{\r\n    constructor(moduleName, moduleManager)\r\n    {\r\n        super('render', moduleName || 'renderable', moduleManager);\r\n\r\n        this._layerID = 0;\r\n        this._depth = 0;\r\n        this._alpha = 1;\r\n        this._depthDirty = true; \r\n        this._bounds = new BoundingBox();\r\n        this._originInPixels = {x:0, y:0};\r\n        this._originIsDirty = true;\r\n    }\r\n\r\n    get bounds() {return this._bounds;}\r\n\r\n    get depth() { return this._depthSorting; }\r\n    get layerName() { }\r\n    get layer() { return this._layerID; }\r\n    get alpha() { return this._alpha; }\r\n    set depth(value) {\r\n        if (value != this._depthSorting)\r\n        {\r\n            this._depthSorting = value;\r\n            this._depthDirty = true;\r\n        }\r\n        return this;\r\n    }\r\n    set layer(value) {\r\n        if (this.game != null)\r\n        {\r\n            if (value === 'number')\r\n            {\r\n                //this.game.render.get\r\n            }\r\n        }\r\n    }   \r\n\r\n    set alpha(value) {\r\n        this._alpha = alpha;\r\n        return this;\r\n    }\r\n\r\n\r\n\r\n}","import Renderable from \"./Renderable\";\r\nimport Rect from \"../../math/Rect\";\r\nimport DrawImage from \"./components/DrawImage\";\r\nimport ModuleProvider from \"../ModuleProvider\";\r\nimport UpdateTransformBounds from '../../transform/UpdateTransformBounds'\r\n\r\n\r\nexport default class Sprite extends Renderable {\r\n\r\n    constructor(moduleManager)\r\n    {\r\n        super('sprite', moduleManager);\r\n\r\n        //this._type = \"sprite\";\r\n        this.source = null;\r\n        this.frame = new Rect();\r\n   \r\n    \r\n    }\r\n\r\n    get width() {return this.frame.width; }\r\n    get height() {return this.frame.height; }\r\n\r\n    setFrame(x, y, width, height)\r\n    {\r\n        this.frame.set(x,y,width,height);\r\n    }\r\n\r\n    setFrameRect(rect)\r\n    {\r\n        this.frame.set(x,y,width,height);\r\n    }\r\n\r\n    setSprite(tag) {\r\n\r\n        if (this.entity != null || this.entity !== undefined) {\r\n            var sprite = this.entity.game.system.cache.image.get(tag);\r\n\r\n            if (sprite != null) {\r\n                this.setSource(sprite.data, true);\r\n            }\r\n        } else {\r\n            throw new Error(\"Sprite.setSprite: Can not set Sprite. The entity is not in the game\");\r\n        }\r\n        \r\n    }\r\n\r\n    setSource(image, changeFrame) {\r\n\r\n        if (changeFrame === undefined) changeFrame = false;\r\n      \r\n        if (this.source != image)\r\n          this.source = image;\r\n      \r\n        if (changeFrame)\r\n            this.setFrame(0,0,this.source.width,this.source.height);\r\n      \r\n      \r\n    }\r\n\r\n    render(context)\r\n    {\r\n        if (!this._enabled)\r\n            return false;\r\n\r\n        DrawImage(context, \r\n            this.source, this.frame,\r\n            this.entity.transform, this._originInPixels);\r\n   \r\n       return true;\r\n    }\r\n}\r\n\r\nModuleProvider.register('sprite', function(moduleManager, tag) {\r\n\r\n    var spr = new Sprite(moduleManager);\r\n\r\n    if (tag !== undefined)\r\n    {   \r\n        spr.setSprite(tag)\r\n    } \r\n\r\n\r\n    return spr;\r\n\r\n});","\r\nexport default function AnimateTilemap(tilemap, time) {\r\n\r\n    let animator = tilemap.animator;\r\n\r\n    if (animator === undefined)\r\n        return;\r\n\r\n    //console.log(time.hiDeltaTime);\r\n\r\n    let len = animator.animatedTiles.size;\r\n\r\n    if (len === 0)\r\n        return;\r\n\r\n    let delta = time.hiDeltaTime;\r\n\r\n\r\n    for (let i = 0; i < len; i++) {\r\n\r\n        let animatedTile = animator.animatedTiles.at(i); \r\n\r\n        animatedTile.t += delta;\r\n        \r\n        let GID = animatedTile.tileGID;\r\n        let currentKeyFrame = GID.keyFrames[animatedTile.frame];\r\n\r\n        if (animatedTile.t >= currentKeyFrame.duration) {\r\n\r\n            animatedTile.t = 0;\r\n           \r\n\r\n            if (animatedTile.frame + 1 < GID.keyFrames.length)\r\n                animatedTile.frame++;\r\n            else \r\n                animatedTile.frame = 0;\r\n            \r\n\r\n            let nextGID = GID.keyFrames[animatedTile.frame].tileID;//GID.tileset.getTile(GID.keyFrames[animatedTile.frame].tileID).id;\r\n            \r\n            GID.currentFrame = nextGID;\r\n\r\n            \r\n        }\r\n\r\n    }\r\n\r\n}","import MathUtils from \"../../../math/MathUtils\";\r\nimport CullingMethod from \"./CullingMethod\";\r\n\r\nfunction LimitCulling(culling, tilemap) {\r\n\r\n    // limit culling\r\n\r\n    if (culling.start.x < 0)\r\n    culling.start.x = 0;\r\n\r\n    if (culling.start.y < 0)\r\n    culling.start.y = 0;\r\n\r\n    if (culling.end.x > tilemap.width)\r\n    culling.end.x = tilemap.width;\r\n    \r\n    if (culling.end.y > tilemap.height)\r\n    culling.end.y = tilemap.height;\r\n\r\n}\r\n\r\nexport default function CullTiles(tilemap, camera) {\r\n    \r\n    let t = tilemap.entity.transform;\r\n    let rot = camera.transform.rotation + t.rotation;\r\n\r\n    // 90 DEGREE ROTATION\r\n    // We will use the linear culling that is faster\r\n\r\n\r\n\r\n    if (rot % MathUtils.HALFPI === 0) {\r\n\r\n        let tx = t.position.x - tilemap._originInPixels.x;\r\n        let ty = t.position.y - tilemap._originInPixels.y;\r\n\r\n\r\n        tilemap.culling.method = CullingMethod.LINEAR;\r\n\r\n            tilemap.culling.start.x =  Math.floor((camera.viewBounds.min.x - tx) / tilemap.tileWidth);\r\n            tilemap.culling.start.y =  Math.floor((camera.viewBounds.min.y - ty) / tilemap.tileHeight);\r\n            tilemap.culling.end.x =  Math.ceil((camera.viewBounds.max.x - tx) / tilemap.tileWidth);\r\n            tilemap.culling.end.y =  Math.ceil((camera.viewBounds.max.y - ty) / tilemap.tileHeight);\r\n\r\n        LimitCulling(tilemap.culling, tilemap);\r\n\r\n        // TODO FOR 90 Deg TILES\r\n\r\n\r\n    } else {\r\n\r\n        tilemap.culling.method = 1;\r\n\r\n        // TODO ROTATED TILES\r\n\r\n    }\r\n    \r\n\r\n}","\r\nconst CullingMethod = {\r\n    LINEAR : 0,\r\n    LINEAR90DEG : 1 \r\n}\r\n\r\nexport default CullingMethod;","\r\n\r\nfunction DrawImage(context, source, frame, transform, destination)\r\n{\r\n    \r\n\r\n    if (context === undefined) return false;\r\n\r\n    if (source === undefined || source == null) return false;\r\n\r\n    let matrix = transform.matrix;\r\n\r\n    context.setTransform(\r\n        matrix.a[0], matrix.a[1], // 2\r\n        matrix.a[3], matrix.a[4], // 5\r\n        matrix.a[6],\r\n        matrix.a[7]);\r\n    \r\n    //context.globalAlpha = this.alpha;\r\n    \r\n    context.drawImage(\r\n            source, // image\r\n            frame.x, // sx - pos crop x\r\n            frame.y, // sy - pos crop y\r\n            frame.width, // sWidth - crop width\r\n            frame.height, // sHeight - crop height\r\n            -destination.x, // destination x\r\n            -destination.y, // destination y\r\n            frame.width,\r\n            frame.height\r\n            );\r\n      \r\n        return true;\r\n        \r\n}\r\n\r\n\r\nexport default DrawImage;","import MathUtils from \"../../../math/MathUtils\";\r\nimport CullingMethod from \"./CullingMethod\";\r\n\r\nexport default function DrawTilemapLayer(context, tilemap, layer, transform) {\r\n\r\n    let draws = 0;\r\n    let matrix = transform.matrix;\r\n    let x = matrix.a[6];\r\n    let y = matrix.a[7];\r\n\r\n    if (tilemap.floorTiles)\r\n    {\r\n       x = MathUtils.round(x);\r\n       y = MathUtils.round(y);\r\n    }\r\n    context.setTransform(\r\n        matrix.a[0], matrix.a[1], // 2\r\n        matrix.a[3], matrix.a[4], // 5\r\n        x, y);\r\n\r\n    if (tilemap.culling.method <= 1) {\r\n\r\n        let idx = 0;\r\n\r\n        for (let j = tilemap.culling.start.y; j < tilemap.culling.end.y; j++) {\r\n            for (let i = tilemap.culling.start.x; i < tilemap.culling.end.x; i++) {\r\n    \r\n                //if (tilemap.culling.method == CullingMethod.LINEAR)\r\n                    idx = i + j * tilemap.width;\r\n                //else if (tilemap.culling.method == CullingMethod.LINEAR90DEG)\r\n                //    idx = j + i * tilemap.width;\r\n\r\n                let tile = layer.tiles[idx];\r\n\r\n                if (tile == null || tile === undefined) continue;\r\n\r\n                let frame;\r\n\r\n                if (tile.data.isAnimated === false || tile.data.isAnimated === undefined)\r\n                    frame = tile.data.st;\r\n                else\r\n                    frame = tile.data.tileset.getTile(tile.data.currentFrame).st;\r\n\r\n                \r\n\r\n                context.drawImage(\r\n                tile.data.tileset.image.data, // image\r\n                frame.x, // sx - pos crop x\r\n                frame.y, // sy - pos crop y\r\n                frame.width, // sWidth - crop width\r\n                frame.height, // sHeight - crop height\r\n                tile.x - tilemap._originInPixels.x, // destination x\r\n                tile.y - tilemap._originInPixels.y,  // destination y\r\n                frame.width,\r\n                frame.height\r\n                    );\r\n\r\n                draws++;\r\n            }\r\n        }\r\n    }\r\n    \r\n   //for (let i = 0; i < layer.culledTiles.lenght; i++) {\r\n    /*for (let i = 0; i < layer.tiles.length; i++) {\r\n\r\n        let tile = layer.tiles[i];\r\n\r\n        if (tile == null || tile === undefined) continue;\r\n\r\n        context.drawImage(\r\n            tile.data.tileset.image.data, // image\r\n            tile.frame.x, // sx - pos crop x\r\n            tile.frame.y, // sy - pos crop y\r\n            tile.frame.width, // sWidth - crop width\r\n            tile.frame.height, // sHeight - crop height\r\n            tile.x, // destination x\r\n            tile.y,  // destination y\r\n            tile.frame.width,\r\n            tile.frame.height\r\n                );\r\n\r\n        draws++;\r\n\r\n    }*/\r\n\r\n    return draws;\r\n\r\n}","import ComputeBounds from \"../../../transform/ComputeBounds\";\r\n\r\nexport default function RenderableBoundsUpdate(renderable, entity, camera) {\r\n\r\n    if (!entity.transform._isDirty && !camera.transform._isDirty)\r\n        return;\r\n\r\n    if (renderable._originIsDirty) {\r\n        // destination\r\n        renderable._originInPixels.x = entity.transform.origin.x * renderable.width;\r\n        renderable._originInPixels.y = entity.transform.origin.y * renderable.height;\r\n        // renderable._originIsDirty = false;\r\n    }\r\n\r\n    ComputeBounds(\r\n        renderable._bounds, entity.transform, \r\n        renderable.width, renderable.height,\r\n        renderable._originInPixels);\r\n\r\n}","\r\nimport CullTiles from \"./CullTiles\";\r\nimport AnimateTilemap from './AnimateTilemap'\r\nimport RenderableBoundsUpdate from \"./RenderableBoundsUpdate\";\r\n\r\n\r\nexport default function RenderableUpdate(entity, renderable, camera, gameTime) {\r\n\r\n    if (renderable.name == 'tilemap') {\r\n\r\n        if (renderable._originIsDirty) {\r\n            // destination\r\n            renderable._originInPixels.x = entity.transform.origin.x * renderable.pixelsWidth;\r\n            renderable._originInPixels.y = entity.transform.origin.y * renderable.pixelsHeight;\r\n        }\r\n\r\n        AnimateTilemap(renderable, gameTime);\r\n\r\n        if (!entity.transform._isDirty && !camera.transform._isDirty)\r\n            return;\r\n\r\n        CullTiles(renderable, camera)\r\n\r\n        for (let i = 0; i < renderable.layers.length; i++) {\r\n            RenderableBoundsUpdate(renderable, entity, camera);\r\n        }\r\n\r\n    } else {\r\n        \r\n        RenderableBoundsUpdate(renderable, entity, camera);\r\n    }\r\n\r\n\r\n}","\r\nmodule.exports = {\r\n    Renderable : require('./Renderable'),\r\n    Sprite : require('./Sprite'),\r\n    Tilemap : require('./tilemap/Tilemap')\r\n}","import Renderable from \"../Renderable\";\r\nimport ModuleProvider from \"../../ModuleProvider\";\r\nimport TilemapLayer from \"./TilemapLayer\";\r\nimport TilemapAnimator from \"./TilemapAnimator\";\r\n\r\nexport default class Tilemap extends Renderable {\r\n    \r\n    constructor(moduleManager, resource)\r\n    {\r\n        super('tilemap', moduleManager);\r\n\r\n        //this._type = \"tilemap\";\r\n        this.resource = resource;\r\n        this.tileWidth = resource.metaData.tileWidth;\r\n        this.tileHeight = resource.metaData.tileHeight;\r\n        this.width = resource.metaData.width;\r\n        this.height = resource.metaData.height;\r\n        this.orientation = resource.metaData.orientation;\r\n        this.pixelsWidth = resource.metaData.pixelsWidth;\r\n        this.pixelsHeight = resource.metaData.pixelsHeight;\r\n        this.animator = undefined;\r\n\r\n        this.culling = {\r\n            method : 0,\r\n            start : {x: 0, y: 0},\r\n            end : {x : 0, y : 0}\r\n        }\r\n\r\n        this.floorTiles = false;\r\n        this.tilesets = resource.tilesets;\r\n        this.layers = [];\r\n\r\n        let animations = false;\r\n\r\n        for (let i = 0; i < resource.layers.length; i++)\r\n        {\r\n            let layer = resource.layers.at(i);\r\n\r\n            if (layer.hasAnimatedTiles)\r\n                animations = true;\r\n\r\n            this.layers.push(new TilemapLayer(this, layer));\r\n        }\r\n\r\n        if (animations === true) {\r\n            this.animator = new TilemapAnimator(this, this.layers);\r\n        }\r\n\r\n    }   \r\n\r\n}\r\n\r\nModuleProvider.register('tilemap', function(moduleManager, tag) {\r\n\r\n    let res = null;\r\n    let cache = moduleManager.entity.game.system.cache;\r\n\r\n    if (cache !== undefined)\r\n        res = cache.tilemap.get(tag);\r\n\r\n    var tilemap = new Tilemap(moduleManager, res);\r\n    tilemap.floorTiles = moduleManager.entity.game.config.floorTiles || false;\r\n\r\n    return tilemap;\r\n\r\n});","import DataList from \"../../../structures/List\";\r\n\r\nexport default class TilemapAnimator {\r\n \r\n    constructor(tilemap, layers) {\r\n\r\n        this.tilemap = tilemap;\r\n        this.animatedTiles = new DataList();\r\n\r\n       \r\n\r\n        for(let i = 0; i < layers.length; i++) {\r\n\r\n            if (!layers[i].layerData.hasAnimatedTiles) continue;\r\n\r\n            let animatedSet = layers[i].layerData.animatedTiles;\r\n\r\n            \r\n\r\n            for (let j = 0; j < animatedSet.size; j++) {\r\n\r\n                let animID = animatedSet.at(j);\r\n               \r\n                let tileGID = tilemap.resource.getTileGID(animID)\r\n\r\n                let hasGid = this.animatedTiles.find(\r\n                    (a) => {\r\n                    return a.tileGID.gid === tileGID.gid;\r\n                });\r\n                \r\n                if (hasGid !== null)\r\n                    continue;\r\n\r\n                   \r\n                \r\n\r\n                this.animatedTiles.push(\r\n                {\r\n                  t : 0, // frameTime\r\n                  frame : 0,\r\n                  tileGID : tileGID\r\n                });\r\n            }\r\n            \r\n        }\r\n\r\n    }\r\n\r\n    update() {\r\n        \r\n    }\r\n\r\n}","import Renderable from \"../Renderable\";\r\nimport DrawTilemapLayer from \"../components/DrawTilemapLayer\";\r\n\r\nexport default class TilemapLayer extends Renderable {\r\n\r\n    constructor(tilemap, layerData) {\r\n\r\n        super('tilemapLayer', tilemap.moduleManager);     \r\n        this.tilemap = tilemap;\r\n        this.layerData = layerData;\r\n    }\r\n\r\n\r\n    get width() {return this.layerData.width * this.tilemap.tileWidth;}\r\n    get height() {return this.layerData.height * this.tilemap.tileHeight;}\r\n\r\n\r\n    render(context) {\r\n\r\n        if (!this._enabled && !this.tilemap._enabled)\r\n            return false;\r\n\r\n        return DrawTilemapLayer(context, this.tilemap, this.layerData, this.tilemap.moduleManager.entity.transform);\r\n\r\n    }\r\n\r\n}","\r\nimport SAT from './xat/SAT'\r\nimport SATResponse from './xat/SATResponse'\r\n\r\nexport default class Physics {\r\n\r\n\r\n  constructor(game) {\r\n\r\n    this.game = null;\r\n    this.sat = null;\r\n    this.response = null;\r\n\r\n   \r\n    this.game = game;\r\n    this.colliadables = [];\r\n\r\n  }\r\n\r\n  init() {\r\n\r\n    this.sat = new SAT();\r\n    this.response = new SATResponse();\r\n\r\n  }\r\n\r\n  getColliadables() {\r\n    return this.colliadables;\r\n  }\r\n\r\n  addColliderObj(obj) {\r\n    this.colliadables.push(obj);\r\n  }\r\n\r\n  removeColliderObj(obj) {\r\n\r\n    var i = this.colliadables.indexOf(obj);\r\n\r\n    if(i != -1) {\r\n      this.colliadables.splice(i, 1);\r\n    }\r\n\r\n  }\r\n\r\n  clear() {\r\n\r\n    this.colliadables = [];\r\n    this.colliadables.length = 0;\r\n\r\n  }\r\n\r\n  update(time) {\r\n\r\n    let size = this.colliadables.length;\r\n\r\n    // CHECK COLLISION\r\n    if (size < 2) // at least we must have 2 objects\r\n      return;\r\n\r\n    //var collision = 0;\r\n\r\n    for (var i = 0; i < size; i++) {\r\n\r\n        var objA = this.colliadables[i];\r\n        var shapeA = objA.shape;\r\n\r\n        if (objA._gameObject._selfDestroy || !objA._gameObject.active)\r\n          continue;\r\n\r\n        var jit = i + 1;\r\n\r\n        if (jit >= size)\r\n          break;\r\n\r\n        for (var j = jit; j < size; j++) {\r\n\r\n          var objB = this.colliadables[j];\r\n          var shapeB = objB.shape;\r\n\r\n          if (objB._gameObject._selfDestroy || !objB._gameObject.active)\r\n            continue;\r\n\r\n          // AABB check of the shapes\r\n        if (objB.bounds.box.intersects(objA.bounds.box)) {\r\n\r\n          // check SAT\r\n          if (this.sat[\"test\" + shapeA.getType() + shapeB.getType()].call(this,\r\n            objA,objB,this.response.clear()) === true) {\r\n\r\n\r\n              if (objA._gameObject['onCollision'])\r\n              if (objA._gameObject.onCollision(objB._gameObject,this.response) !== false) {\r\n\r\n\r\n              }\r\n\r\n              if (objB._gameObject['onCollision'])\r\n              if (objB._gameObject.onCollision(objA._gameObject,this.response) !== false) {\r\n\r\n\r\n              }\r\n\r\n          } else\r\n            continue;\r\n          } else\r\n            continue;\r\n        }\r\n      }\r\n  }\r\n\r\n  get length() {return this.colliadables.length;}\r\n\r\n}\r\n\r\n","\r\nimport Vector from '../../math/Vector' \r\n\r\nexport default class SAT {\r\n\r\n  constructor()\r\n  {\r\n\r\n    this.VECTORS = [];\r\n    for (var v = 0; v < 10; v++) { \r\n      VECTORS.push(new Vector()); \r\n    }\r\n\r\n    this.ARRAYS = [];\r\n    for (var a = 0; a < 5; a++) { \r\n      ARRAYS.push([]); \r\n    }\r\n  }\r\n\r\n  flattenPointsOn(points, normal, result) {\r\n          var min = Number.MAX_VALUE;\r\n          var max = -Number.MAX_VALUE;\r\n          var len = points.length;\r\n          for (var i = 0; i < len; i++) {\r\n              // The magnitude of the projection of the point onto the normal\r\n              var dot = points[i].dot(normal);\r\n              if (dot < min) { min = dot; }\r\n              if (dot > max) { max = dot; }\r\n          }\r\n          result[0] = min;\r\n          result[1] = max;\r\n  };\r\n\r\n  isSeparatingAxis(posA, posB, pointsA, pointsB, axis, response) {\r\n\r\n    var rangeA = ARRAYS.pop();\r\n    var rangeB = ARRAYS.pop();\r\n\r\n    // magnitude between the two polygons\r\n    var offsetV = VECTORS.pop().copy(posB).sub(posA);\r\n    var projectedOffset = offsetV.dot(axis);\r\n\r\n    // Project the polygons onto the axis.\r\n    flattenPointsOn(pointsA, axis, rangeA);\r\n    flattenPointsOn(pointsB, axis, rangeB);\r\n\r\n    // Move B's range to its position relative to A.\r\n    rangeB[0] += projectedOffset;\r\n    rangeB[1] += projectedOffset;\r\n\r\n    // Check if there is a gap. If there is, this is a separating axis and we can stop\r\n    if (rangeA[0] > rangeB[1] || rangeB[0] > rangeA[1]) {\r\n        VECTORS.push(offsetV);\r\n        ARRAYS.push(rangeA);\r\n        ARRAYS.push(rangeB);\r\n        return true;\r\n    }\r\n\r\n    if (response) {\r\n        var overlap = 0;\r\n        // A starts further left than B\r\n        if (rangeA[0] < rangeB[0]) {\r\n\r\n          response.aInB = false;\r\n\r\n          // A ends before B does. We have to pull A out of B\r\n          if (rangeA[1] < rangeB[1]) {\r\n\r\n            overlap = rangeA[1] - rangeB[0];\r\n            response.bInA = false;\r\n\r\n          // B is fully inside A.  Pick the shortest way out.\r\n          } else {\r\n\r\n            var option1 = rangeA[1] - rangeB[0];\r\n            var option2 = rangeB[1] - rangeA[0];\r\n            overlap = option1 < option2 ? option1 : -option2;\r\n\r\n          }\r\n        // B starts further left than A\r\n        } else {\r\n\r\n          response.bInA = false;\r\n\r\n          // B ends before A ends. We have to push A out of B\r\n          if (rangeA[1] > rangeB[1]) {\r\n\r\n            overlap = rangeA[0] - rangeB[1];\r\n            response.aInB = false;\r\n\r\n          // A is fully inside B.  Pick the shortest way out.\r\n          } else {\r\n\r\n            var option1 = rangeA[1] - rangeB[0];\r\n            var option2 = rangeB[1] - rangeA[0];\r\n            overlap = option1 < option2 ? option1 : -option2;\r\n\r\n          }\r\n        }\r\n        // If this is the smallest amount of overlap we've seen so far, set it as the minimum overlap.\r\n        var absOverlap = Math.abs(overlap);\r\n\r\n        if (absOverlap < response.overlap) {\r\n\r\n          response.overlap = absOverlap;\r\n          response.overlapN.copy(axis);\r\n\r\n          if (overlap < 0)\r\n            response.overlapN.reverse();\r\n        }\r\n      }\r\n\r\n      VECTORS.push(offsetV);\r\n      ARRAYS.push(rangeA);\r\n      ARRAYS.push(rangeB);\r\n\r\n\r\n\r\n      return false;\r\n\r\n  };\r\n\r\n  testPolygonPolygon(a,b,response) {\r\n\r\n    // collider a\r\n\r\n    var pointsA = a.shape.getPoints();\r\n    var normalsA =  a.shape.getNormals();\r\n    var normalsALen = normalsA.length;\r\n\r\n    // collider b\r\n\r\n    var pointsB = b.shape.getPoints();\r\n    var normalsB =  b.shape.getNormals();\r\n    var normalsBLen = normalsB.length;\r\n\r\n\r\n    // If any of the edge normals of A is a separating axis, no intersection.\r\n    while (normalsALen--) {\r\n        if (isSeparatingAxis(a.position, b.position, pointsA, pointsB, normalsA[normalsALen],response)) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    // If any of the edge normals of B is a separating axis, no intersection.\r\n    while (normalsBLen--) {\r\n        if (isSeparatingAxis(a.position, b.position, pointsA, pointsB, normalsB[normalsBLen], response)) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n\r\n\r\n    // Since none of the edge normals of A or B are a separating axis, there is an intersection\r\n    // and we've already calculated the smallest overlap (in isSeparatingAxis).  Calculate the\r\n    // final overlap vector.\r\n      if (response) {\r\n          response.a = a;\r\n          response.b = b;\r\n          response.overlapV.copy(response.overlapN).scale(response.overlap);\r\n      }\r\n    return true;\r\n\r\n  };\r\n\r\n}\r\n\r\n\r\n","\r\nexport default class SATResponse {\r\n\r\n    constructor()\r\n    {\r\n        this.a = null;\r\n        this.b = null;\r\n        this.overlapN = new Vector();\r\n        this.overlapV = new Vector();\r\n        this.aInB = true;\r\n        this.bInA = true;\r\n        this.overlap = Number.MAX_VALUE;\r\n        this.indexShapeA = -1;\r\n        this.indexShapeB = -1;\r\n        this.clear();\r\n    }\r\n\r\n    clear()\r\n    {\r\n        this.aInB = true;\r\n        this.bInA = true;\r\n        this.overlap = Number.MAX_VALUE;\r\n        this.indexShapeA = -1;\r\n        this.indexShapeB = -1;\r\n        return this;\r\n    }\r\n}\r\n","\r\nexport const RenderingType = {\r\n    NEAREST : 0,\r\n    LINEAR : 1\r\n}","import System from '../core/system/System';\r\nimport DataMap from '../structures/Map'\r\nimport RenderLayer from './RenderLayer'\r\nimport RenderLayerManagment from './RenderLayersManagement'\r\nimport Canvas from './canvas/Canvas'\r\nimport {RenderingType} from './Define'\r\nimport CanvasSmoothing from './canvas/Smoothing';\r\nimport DrawRenderLayer from './components/DrawRenderLayer';\r\n\r\n\r\n\r\nexport default class Render {\r\n    \r\n\r\n    constructor(game) {\r\n        \r\n        this.game = game;\r\n        this.layer = new RenderLayerManagment(this.game);\r\n        this.canvas = Canvas.create(this.game.parent,this.game.width,this.game.height);\r\n        this.context = this.canvas.getContext(\"2d\", { alpha: false });  \r\n        this.imageRendering = (game.config.pixelated) ? RenderingType.NEAREST : RenderingType.LINEAR;\r\n        this.smooth = new CanvasSmoothing(this.context);\r\n        this.smooth.set(this.imageRendering);\r\n\r\n        this._backgroundColor = '#000'       \r\n        this._alpha = 1;\r\n        this._enable = true;\r\n        this.clear = true;\r\n        this.drawCalls = 0;\r\n    }\r\n\r\n    get backgroundColor() {return this._backgroundColor;}\r\n    set backgroundColor(value) {\r\n        this._backgroundColor = value;\r\n    }\r\n    get alpha() {return this._alpha;}\r\n    set alpha(value) {\r\n\r\n        if (this._alpha !== value)\r\n        {\r\n            this.currentContext.globalAlpha = value;\r\n            this._alpha = value;\r\n        }\r\n\r\n        return this._alpha;\r\n    }\r\n}\r\n\r\nSystem.register('Render', Render, 'render');","import DataList from \"../structures/List\";\r\n\r\n\r\nexport default class RenderLayer { \r\n    \r\n    constructor(game,layerName) {\r\n\r\n        this._name = layerName;\r\n        this.game = game;       \r\n        this.renderList = new DataList(true);\r\n        this.__drawCalls = 0;\r\n        this.__enable = true;\r\n        this.__isDirty = false;\r\n    }\r\n\r\n    get drawCalls() {return this.__drawCalls;}\r\n\r\n    // Add renderable components\r\n    add(renderer) {\r\n    \r\n        if (renderer === undefined)\r\n            return;\r\n\r\n        this.renderList.push(renderer);\r\n       // this.renderer.__renderLayer = this;\r\n        this.__isDirty = true;\r\n\r\n    }\r\n\r\n    remove(renderer)\r\n    {\r\n        return this.renderList.remove(renderer);\r\n    }\r\n\r\n    removeAt(index)\r\n    {\r\n        \r\n    }\r\n\r\n    at(index)\r\n    {\r\n        if (index < 0 || index >= this.__renderers.size)\r\n        {\r\n            throw new Error('RenderLayer.at: Renderer at '+ index +' does not exist in the render layer list: \\\"' + name + \"\\\".\");\r\n        }\r\n        return this.renderList.at(index);\r\n\r\n    }\r\n\r\n    sortDepth(a, b) { // sort ascending\r\n\r\n        return a._depthSorting - b._depthSorting;\r\n\r\n        /*this.__renderers.sort(\r\n\r\n          function(a, b) {\r\n      \r\n            if (a.depth > b.depth) {\r\n      \r\n              return 1;\r\n      \r\n            } else if (a.depth < b.depth) {\r\n      \r\n              return -1;\r\n      \r\n            } else {\r\n      \r\n              if (a.z > b.z) {\r\n                return 1;\r\n              } else {\r\n                return -1;\r\n              }\r\n      \r\n      \r\n            }\r\n          });*/\r\n\r\n    }\r\n\r\n    get length() {return this.__renderers.length;}\r\n    get name() {return this._name;}\r\n    get enable() {return this.__enable;}\r\n    set enable(value) {\r\n        value = !!value;\r\n    \r\n        if (value !== this._enabled)\r\n        {\r\n            //if (!value)\r\n            //    this.reset();\r\n\r\n            this._enabled = value;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n","\r\nimport DataMap from '../structures/Map'\r\nimport RenderLayer from './RenderLayer'\r\nimport DataList from '../structures/List';\r\n\r\nexport default class RenderLayersManagement {\r\n\r\n    constructor(game) {\r\n        this.game = game;\r\n        this.renderLayers = new DataList();\r\n        //this.__renderLayersMap = new DataMap();\r\n        this.add('default');\r\n    }\r\n\r\n\r\n\r\n    add(name) {\r\n\r\n        if (this.contains(name))\r\n        {\r\n            throw new Error(\"Render.add: There is already a RenderLayer called: \\\"\" +  name + \"\\\".\");\r\n        }\r\n       \r\n        //this.__renderLayersMap.set(name, this.__renderLayers.length);\r\n        this.renderLayers.push(new RenderLayer(this.game, name));\r\n    }\r\n\r\n    remove(name)\r\n    {\r\n        if (typeof name !== 'string')\r\n            throw new Error(\"Render.remove: The value name is not a string.\");\r\n\r\n        if (name === \"default\")\r\n            throw new Error(\"Render.remove: You can not remove the \\\"default\\\" layer.\");\r\n\r\n        if (!this.__renderLayersMap.has(name))\r\n            throw new Error(\"Render.remove: Could not remove layer. There is no layer named \\\"\" + name + \"\\\".\");\r\n\r\n        var index = this.__renderLayersMap.get(name);\r\n\r\n        this.renderLayers.erase(name);\r\n    }\r\n\r\n    contains(layerName)\r\n    {\r\n        if (typeof layerName !== 'string')\r\n            throw new Error(\"Render.contains: The value name is not a string.\");\r\n\r\n        let val = this.renderLayers.each(function(layer) {\r\n           \r\n            if (layer.name == layerName)\r\n            {\r\n                return true;\r\n            }\r\n        });\r\n\r\n        return val || false;\r\n    }\r\n\r\n}","\r\n/**\r\n * Create a Canvas object.\r\n * @class Canvas\r\n */\r\nexport default (\r\n    class Canvas {\r\n\r\n  static create (parent,width, height) {\r\n\r\n  // default definition\r\n  let defaultDef = {\r\n    tabindex: '1',\r\n    width: width,\r\n    height: height,\r\n    id: Math.random().toString(36).substr(2, 9),\r\n    class: \"\",\r\n    container: \"body\",\r\n    style: \"padding: 0;margin: auto;display: block;top: 0; bottom: 0;left: 0;right: 0;border:1px solid #d3d3d3;background-color: #f1f1f1;\"\r\n  };\r\n\r\n  //var CO = Object.assign(defaultDef, options);\r\n  let CO = defaultDef;\r\n  let canvas;\r\n\r\n\r\n  canvas = document.createElement('canvas');\r\n  //canvas.parent = parent;\r\n  canvas.setAttribute(\"id\", CO.id);\r\n  canvas.setAttribute(\"width\", CO.width);\r\n  canvas.setAttribute(\"height\", CO.height);\r\n  canvas.setAttribute(\"style\", CO.style);\r\n  //canvas.style.position = 'absolute';\r\n  \r\n\r\n\r\n  Canvas.appendDOM(canvas,parent);\r\n  //document.body.appendChild(canvas);\r\n\r\n  return canvas;\r\n}\r\n\r\nstatic appendDOM(canvas,parent) {\r\n\r\n  let appendTo;\r\n  let overflowHidden = true;\r\n  let target = null;\r\n\r\n  //if (overflowHidden === undefined) { overflowHidden = true; }\r\n\r\n    if (parent)\r\n    {\r\n        if (typeof parent === 'string')\r\n        {\r\n            // hopefully an element ID\r\n            target = document.getElementById(parent);\r\n        }\r\n        else if (typeof parent === 'object' && parent.nodeType === 1)\r\n        {\r\n            // quick test for a HTMLelement\r\n            target = parent;\r\n        }\r\n    }\r\n\r\n    // Fallback, covers an invalid ID and a non HTMLelement object\r\n    if (!target)\r\n    {\r\n        target = document.body;\r\n    }\r\n\r\n    /*if (overflowHidden && target.style)\r\n    {\r\n        target.style.overflow = 'hidden';\r\n    }*/\r\n\r\n    target.appendChild(canvas);\r\n\r\n    return canvas;\r\n}\r\n\r\n})\r\n","import { RenderingType } from \"../Define\";\r\n\r\n\r\nexport default class CanvasSmoothing {\r\n\r\n    constructor(context) {\r\n        this.context = context;\r\n        this.prefix = this.getPrefix(context);\r\n    }\r\n\r\n    getPrefix(context) {\r\n\r\n        let vendors = [ 'i', 'webkitI', 'msI', 'mozI', 'oI' ];\r\n        for (let i = 0; i < vendors.length; i++)\r\n        {\r\n            let s = vendors[i] + 'mageSmoothingEnabled';\r\n\r\n            if (s in context)\r\n                return s;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    setEnable(flag) {\r\n\r\n        if (flag === 'undefined') flag = true;\r\n\r\n        if (this.prefix === '' || this.prefix === undefined)\r\n            this.prefix = this.getPrefix(this.context);\r\n\r\n        if (this.prefix)\r\n            this.context[this.prefix] = flag;\r\n\r\n        return this.context;\r\n    }\r\n\r\n    set(renderType) {\r\n        if (renderType == RenderingType.NEAREST)\r\n            this.setEnable(false);\r\n        else\r\n            this.setEnable(true);\r\n    }\r\n\r\n}\r\n","\r\nexport default function BeginDrawRender(render) {\r\n\r\n    if (render.clear)\r\n    {\r\n        render.context.clearRect(0, 0, render.canvas.width, render.canvas.height);\r\n    }\r\n\r\n    render.context.fillStyle = render._backgroundColor;  \r\n    render.context.fillRect(0, 0, render.canvas.width, render.canvas.height);\r\n\r\n    render.drawCalls = 0;\r\n\r\n}","\r\nimport DrawRenderLayer from './DrawRenderLayer'\r\nimport RenderScene from '../../scene/components/RenderScene';\r\n\r\nexport default function DrawRender(render, camera, delta) {\r\n        \r\n    if (!render._enable)\r\n        return;\r\n\r\n       /* let clip = (camera.x !== 0 ||\r\n             camera.y !== 0 ||\r\n             camera.width !== render.context.canvas.width ||\r\n             camera.height !== render.context.canvas.height);*/\r\n\r\n    // alpha\r\n    if (render._alpha !== 1)\r\n    {\r\n        render.context.globalAlpha = 1;\r\n        render._alpha = 1;\r\n    }\r\n\r\n    // blend\r\n    render.context.globalCompositeOperation = 'source-over';\r\n   \r\n   \r\n    if (render.game.scene._setup === true) {\r\n    \r\n        for (let i = 0; i < render.layer.renderLayers.length; i++)\r\n        {\r\n            let layer = render.layer.renderLayers.at(i);\r\n\r\n            if (!layer.enable)\r\n                continue;\r\n\r\n            let drawCalls = 0;   \r\n            drawCalls += DrawRenderLayer(layer,camera, render.context);\r\n\r\n            render.drawCalls += drawCalls;\r\n        }\r\n\r\n        //camera.game.system.draw.bounds(camera.bounds);\r\n    }\r\n\r\n\r\n  \r\n\r\n    \r\n}","\r\n\r\n    export default function DrawRenderLayer(layer, camera, context)\r\n    {\r\n     \r\n        if (!layer.__enable)\r\n            return 0;\r\n\r\n        let drawCalls = 0;\r\n\r\n        if (layer.__isDirty)\r\n        {\r\n            layer.renderList.sort(layer.sortDepth);\r\n\r\n            layer.__isDirty = false;\r\n        }\r\n\r\n        var self = this;\r\n        let size = layer.renderList.size;\r\n\r\n        for (let i = 0; i < size; i++)\r\n        {\r\n            let element = layer.renderList.at(i);\r\n\r\n            if (camera.bounds.intersects(element.bounds))\r\n            {\r\n                drawCalls += element.render(context);\r\n\r\n            //camera.game.system.draw.bounds(element.bounds);\r\n            }\r\n        }\r\n\r\n        return drawCalls;\r\n\r\n    }","\r\nexport default function EndDrawRender(render) {\r\n\r\n    \r\n    render.context.globalAlpha = 1;\r\n    render.context.globalCompositeOperation = 'source-over';\r\n}\r\n","\r\nmodule.exports = {\r\n    RenderLayer : require('./RenderLayer'),\r\n    RenderLayerManagement : require('./RenderLayersManagement'),\r\n    Render : require('./Render'),\r\n    UI : require('./ui/UI'),\r\n   // Draw : require('./Draw')\r\n}","\r\nconst AspectRatio = {\r\n    Square : 0,\r\n    Pillarbox : 1,\r\n    Letterbox : 2,\r\n\r\n    computeViewPort(currentAspectRatio, desiredAspect) {\r\n\r\n        let ratioBox = {\r\n            x : 0,\r\n            y : 0,\r\n            w : 1,\r\n            h : 1,\r\n            style : 0,\r\n        };\r\n\r\n        // If the current aspect ratio is already approximately equal to the desired aspect ratio,\r\n        // use a full-screen Rect (in case it was set to something else previously)\r\n        if (Math.round(currentAspectRatio * 100) / 100 == Math.round(desiredAspect * 100) / 100)\r\n        {\r\n            return ratioBox;\r\n        }\r\n\r\n        // Pillarbox\r\n        if (currentAspectRatio > desiredAspect)\r\n        {\r\n            let inset = 1.0 - desiredAspect / currentAspectRatio;\r\n            ratioBox.x = inset / 2;\r\n            ratioBox.y = 0;\r\n            ratioBox.w = 1.0 - inset;\r\n            ratioBox.h =  1.0;\r\n            ratioBox.style = AspectRatio.Pillarbox;\r\n        }\r\n        else  // Letterbox\r\n        {\r\n            let inset = 1.0 - currentAspectRatio / desiredAspect;\r\n\r\n            ratioBox.x = 0;\r\n            ratioBox.y = inset / 2;\r\n            ratioBox.w = 1.0;\r\n            ratioBox.h = 1.0 - inset;\r\n            ratioBox.style = AspectRatio.Letterbox;\r\n        }\r\n\r\n        return ratioBox;\r\n    }\r\n}\r\n\r\nexport default AspectRatio;","\r\nexport default class Debug {\r\n  \r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    this.draw = game.system.draw;\r\n    this.context = game.system.render.context;\r\n    this.x = 8;\r\n    this.y = 12;\r\n    this.lineHeight = 14;\r\n    this.column = 100;\r\n    this.font =\"10px Verdana\";\r\n    this.textColor = 'white';\r\n    this.bgcolor = 'black';\r\n    this.textShadow = 'black';\r\n\r\n  }\r\n\r\n  test() {\r\n\r\n    //this.context.setTransform(1, 0, 0, 1, 0, 0);\r\n    this.context.strokeStyle = this.bgcolor;\r\n    this.context.font = this.font;\r\n    this.draw.alpha(0.5);\r\n    this.draw.rect(0,0,this.game.width,(14 * 4)+ 16,this.bgcolor);\r\n    this.draw.alpha(1);\r\n    this.drawLine(\"FPS: \" + Math.round(this.game.time.fps) + \" / \" + this.game.time.desiredFps);\r\n    //this.drawLine(\"Instances in view: \" + this.game.camera.instancesInView);\r\n    this.drawLine(\"Instances: \" + this.game.system.entityList.length);\r\n    this.drawLine(\"Draw Calls: \" + this.game.system.render.drawCalls);/*this.game.physics.length);*/\r\n    this.x += this.game.width / 2;\r\n    this.y = 12+8;\r\n    //this.drawLine(\"Sounds count \" + this.game.sound.length);\r\n    this.x = 8;\r\n    this.y = 12+8;\r\n\r\n  }\r\n\r\n  drawLine(textLine) {\r\n\r\n    var xx = this.x;\r\n\r\n            this.context.fillStyle = this.textShadow;\r\n            this.context.fillText(textLine, xx + 1, this.y + 1);\r\n            this.context.fillStyle = this.textColor;\r\n\r\n        this.context.fillText(textLine, xx, this.y);\r\n\r\n\r\n    this.y += this.lineHeight;\r\n\r\n  }\r\n\r\n\r\n\r\n}\r\n","import UpdateUIMatrix from \"./UpdateUIMatrix\";\r\nimport RenderScene from \"../../scene/components/RenderScene\";\r\n\r\nexport default function DrawUI(gui, sceneManager) {\r\n\r\n    UpdateUIMatrix(gui);\r\n\r\n \r\n    // blend\r\n    //gui.context.globalCompositeOperation = 'source-over';\r\n\r\n    let clip = (gui.viewport.x !== 0 || gui.viewport.x !== 0 || gui.viewport.width !== gui.canvas.clientWidth || gui.viewport.height !== gui.canvas.clientHeight);\r\n\r\n    if (clip)\r\n    {\r\n        \r\n    \r\n\r\n        gui.context.save();\r\n        gui.context.beginPath();\r\n        gui.context.rect(\r\n            0,\r\n            0,\r\n            gui.viewport.width,\r\n            gui.viewport.height);\r\n        gui.context.clip();\r\n    }\r\n\r\n    gui.context.setTransform(\r\n        gui.matrix.a[0], gui.matrix.a[1], \r\n        gui.matrix.a[3], gui.matrix.a[4], \r\n        gui.matrix.a[6], gui.matrix.a[7]);\r\n\r\n   \r\n    if (gui.backgroundAlpha > 0)\r\n    {\r\n        gui.context.globalAlpha = gui.backgroundAlpha;\r\n        gui.context.fillStyle = gui.backgroundColor;  \r\n        gui.context.fillRect(0, 0, gui.width, gui.height);\r\n    }\r\n\r\n    // alpha\r\n    if (gui._alpha !== 1)\r\n    {\r\n        gui.context.globalAlpha = 1;\r\n        gui._alpha = 1;\r\n    }\r\n\r\n\r\n        RenderScene(sceneManager, gui.draw);\r\n\r\n\r\n    if (clip)\r\n        gui.context.restore();\r\n\r\n    if (gui.debug != null) {\r\n\r\n        gui.context.setTransform(1, 0, 0, 1, 0, 0);\r\n        gui.debug.test();\r\n    \r\n    }\r\n       \r\n\r\n}\r\n\r\n","\r\nexport default function InitializeUI() {\r\n    this.canvas = this.game.system.render.canvas;\r\n    this.context = this.game.system.render.context;\r\n    this.draw.init();\r\n\r\n    if (this.game.config.debug)\r\n        this.debug = new Debug(this.game);\r\n}","\r\nimport System from '../../core/system/System';\r\nimport Rect from '../../math/Rect'\r\nimport AspectRatio from './AspectRatio';\r\nimport Matrix from '../../math/Matrix'\r\nimport GUIResize from './UIResize';\r\nimport Debug from './Debug';\r\nimport MathUtils from '../../math/MathUtils';\r\nimport UIDrawer from './UIDrawer';\r\nimport InitializeUI from './InitializeUI';\r\n\r\n\r\n\r\n\r\nexport default class UI {\r\n\r\n    constructor(game) {\r\n        this.game = game;\r\n        this.canvas = null;\r\n        this.width = this.game.width;\r\n        this.height = this.game.height;\r\n        this.viewport = new Rect(0, 0, this.width, this.height);\r\n        this.ratiobox = null;\r\n        this.aspectRatio = this.width / this.height;\r\n        this.pixelUnit = {x:1,y:1};\r\n        this._isDirty = true;\r\n        this.matrix = new Matrix(1);\r\n        this.context = null;\r\n        this._alpha = 1;\r\n        this.backgroundColor = '#000'\r\n        this.backgroundAlpha = 0;\r\n        this.debug = null;\r\n        this.draw = new UIDrawer(game, this);\r\n    }\r\n\r\n    get alpha() {return this._alpha; }\r\n    set alpha(value) {this._alpha = value;}\r\n\r\n\r\n    setSize(width, height) {\r\n        GUIResize(this, width, height);\r\n        return this;\r\n    }\r\n\r\n    setViewport(x0, y0, x1, y1) {\r\n        this.viewport.x = x0; \r\n        this.viewport.y = y0;\r\n        this.viewport.width = x1;\r\n        this.viewport.height = y1;\r\n        this._isDirty = true;\r\n        return this;\r\n    }\r\n\r\n    setViewportByAspectRatio(aspectRatio) {\r\n\r\n        // TODO: IMPROVE THAT\r\n\r\n        this.ratiobox = AspectRatio.computeViewPort(this.game.system.render.canvas.clientWidth / this.game.system.render.canvas.clientHeight, aspectRatio);\r\n        let borderX = 0;\r\n        let borderY = 0;//rect.y * this.canvas.clientHeight;\r\n\r\n        if (this.ratiobox.style === AspectRatio.Square) {\r\n            this.viewport.set(\r\n                0,\r\n                0,\r\n                this.canvas.clientWidth,\r\n                this.canvas.clientHeight);\r\n\r\n            return this;\r\n\r\n        } else {\r\n\r\n            if (this.ratiobox.style === AspectRatio.Pillarbox)\r\n                borderX = this.ratiobox.x * this.width;//this.canvas.clientWidth;\r\n            else if (this.ratiobox.style === AspectRatio.Letterbox)\r\n                borderY = this.ratiobox.y * this.height;//this.canvas.clientHeight;\r\n            \r\n            this.viewport.set(\r\n                borderX,\r\n                borderY,\r\n                (this.width * (this.canvas.clientWidth / this.width)) - (borderX*2),\r\n                (this.height * (this.canvas.clientHeight / this.height)) - (borderY*2));\r\n\r\n        }\r\n        \r\n        let canvasRatioX = this.canvas.clientWidth * (this.ratiobox.x * 2);\r\n        let canvasRatioY = this.canvas.clientHeight * (this.ratiobox.y * 2);\r\n        let areaRatio = (this.canvas.clientWidth - canvasRatioX) / this.canvas.clientHeight;\r\n        let orthoSize = this.height / 2;\r\n        let pixelUnit = (this.canvas.clientHeight / (orthoSize * 2)) * areaRatio;\r\n        \r\n        this.pixelUnit.x = pixelUnit;//(this.canvas.clientWidth - canvasRatioX) / this.width;\r\n        this.pixelUnit.y = pixelUnit;//(this.canvas.clientHeight - canvasRatioY) / this.height;\r\n\r\n        this._isDirty = true;\r\n        return this;\r\n    }\r\n\r\n    setSizeByCanvas() {\r\n        GUIResize(this, this.game.system.render.canvas.width, this.game.system.render.canvas.height);\r\n        return this;\r\n    }\r\n\r\n    setSizeByCamera() {\r\n        GUIResize(this, this.game.system.camera.width, this.game.system.camera.height);\r\n        return this;\r\n    }\r\n\r\n    setSizeByAspectRatio(aspectRatio) {\r\n        GUIResize(this, this.game.system.render.canvas.width * aspectRatio, this.game.system.render.canvas.height * aspectRatio);\r\n        return this;\r\n    }\r\n\r\n}\r\n\r\nSystem.register('UserInterface', UI, 'ui', InitializeUI)","//import GameSystemManager from \"../core/GameSystemManager\";\r\nimport Validate from \"../../utils/Validate\";\r\n\r\n\r\n\r\n\r\nexport default class UIDrawer {\r\n  \r\n  constructor(game, ui) {\r\n    this.game = game;\r\n    this.cache = null;\r\n    this.context = null;\r\n    this.ui = ui;\r\n    this.lastAlpha = 1;\r\n    this.lastColor = '#000';\r\n    this.currentColor = '#FFF'\r\n    this.currentTextAlign = 'center';\r\n  }\r\n\r\n  init()\r\n  {\r\n\r\n    this.cache = this.game.system.cache;\r\n    this.context = this.game.system.render.context;\r\n    \r\n    return this;\r\n  }\r\n\r\n  set color(value) {\r\n    this.lastColor = this.context.fillStyle;\r\n    this.context.fillStyle = value;\r\n    this.currentColor = this.context.fillStyle;\r\n  }\r\n\r\n  set alpha(value) {\r\n    this.lastAlpha = this.context.globalAlpha;\r\n    this.context.globalAlpha = value;\r\n  }\r\n\r\n  set align(value) {\r\n    this.context.textAlign = value;\r\n    this.currentTextAlign = this.context.textAlign;\r\n  }\r\n\r\n  transformPosition(x, y, w, h) {\r\n    return {\r\n      x : x - this.ui.viewport.x,\r\n      y : y - this.ui.viewport.y,\r\n      w : (w - this.ui.viewport.x) || 0,\r\n      h : (h - this.ui.viewport.y) || 0,\r\n    };\r\n  }\r\n\r\n  font(fontname,size, style) {\r\n\r\n    if (Validate.isNumber(size))\r\n      size = size.toString() + 'px';\r\n\r\n    if (style === undefined) style = \"normal\";\r\n\r\n    this.context.font = style + \" \" + size + \" \\'\" + fontname + \"\\'\";\r\n\r\n  }\r\n\r\n  text(text, x, y, color, align) {\r\n\r\n    if (color === undefined) color = this.currentColor;\r\n    if (align === undefined) align = this.currentTextAlign;\r\n\r\n    let pos = this.transformPosition(x,y);\r\n    this.context.fillStyle = color;\r\n    this.context.textAlign = align;\r\n    this.context.fillText(text, pos.x, pos.y);\r\n\r\n  }\r\n\r\n  image(source, x, y) {\r\n\r\n    if (source === undefined || source === null) return;\r\n\r\n    //this.context.save();\r\n\r\n    //this.context.translate(x, y);\r\n\r\n    let pos = this.transformPosition(x,y);\r\n\r\n    this.context.drawImage(source,\r\n        0, 0,\r\n        source.width, source.height,\r\n        pos.x, pos.y,\r\n        source.width, source.height,\r\n      );\r\n    //this.context.restore();\r\n  }\r\n\r\n  sprite(tag, x, y, anchor) {\r\n\r\n      var img = this.cache.getAsset('images',tag);\r\n\r\n      if (img != null) {\r\n\r\n        if (anchor === undefined) {\r\n          anchor[0] = 0;\r\n          anchor[1] = 0;\r\n        }\r\n\r\n        var ctx = this.context;\r\n\r\n      ctx.save();\r\n\r\n      ctx.translate(x-img.width*anchor[0], y-img.height*anchor[1]);\r\n\r\n    ctx.drawImage(img,\r\n            0,\r\n            0,\r\n            img.width,\r\n            img.height);\r\n\r\n\r\n      ctx.restore();\r\n\r\n    }\r\n\r\n  }\r\n\r\n  spriteTransformed(tag, x, y, xscale, yscale, angle) {\r\n\r\n\r\n  }\r\n\r\n  rect(x, y, width, height, color) {\r\n\r\n    this.context.fillStyle= color || this.currentColor;\r\n    let pos = this.transformPosition(x,y, width, height);\r\n    this.context.fillRect(pos.x, pos.y, pos.w, pos.h)\r\n\r\n  }\r\n\r\n  outlineRect(x,y,width,height,outlineWidth, color) {\r\n\r\n    color = color || this.currentColor;\r\n    this.context.lineWidth = outlineWidth || 1;\r\n    let pos = this.transformPosition(x,y, width, height);\r\n    //this.context.setLineDash([6]);\r\n    this.context.strokeStyle=color;\r\n    this.context.strokeRect(pos.x, pos.y, pos.w, pos.h);\r\n    //this.context.rect(x,y,width,height);\r\n    //this.context.stroke();\r\n\r\n  }\r\n\r\n\r\n  color(color) {\r\n\r\n    this.context.fillStyle = color;\r\n\r\n  }\r\n\r\n  bounds(bb,color) {\r\n\r\n  if (color === undefined)\r\n    color = 'red';\r\n  this.context.setTransform(1,0,0,1,0,0);\r\n  this.outlineRectangle(bb.min.x,bb.min.y,bb.max.x-bb.min.x,bb.max.y-bb.min.y,color,1);\r\n\r\n  }\r\n\r\n}\r\n\r\n//GameSystemManager.register('UIDrawer',UIDraw,'draw');","\r\nexport default function UIResize(gui, w, h) {\r\n    gui.width = w;\r\n    gui.height = h;\r\n    gui.aspectRatio = w / h;\r\n    gui.pixelUnit.x = gui.canvas.width / w;\r\n    gui.pixelUnit.y = gui.canvas.height / h;\r\n    gui._isDirty = true;\r\n}\r\n","\r\nexport default function UpdateUIMatrix(gui) {\r\n\r\n    if (!gui._isDirty)\r\n        return;\r\n\r\n    gui.matrix.setIdentity()\r\n    .scale(gui.pixelUnit.x, gui.pixelUnit.y)\r\n    .translate(gui.viewport.x, gui.viewport.y);\r\n\r\n    gui._isDirty = false;\r\n\r\n    console.log(gui.matrix);\r\n\r\n}\r\n","import Resource from \"./Resource\";\r\nimport ResourceType from \"./ResourceType\";\r\n\r\n/**\r\n* Image that holds image data.\r\n* @class Image\r\n* @constructor\r\n*/\r\nexport default class ImageResource extends Resource {\r\n\r\n    constructor(name, data) {\r\n\r\n      super(name);\r\n      \r\n      this.data = data;\r\n      this.width = 0;\r\n      this.height = 0;\r\n      this.imageUrl = null;\r\n      this.type = ResourceType.Image;\r\n\r\n      if ((this.data.complete || this.data.getContext) && this.data.width && this.data.height) {\r\n\r\n          this.width = this.data.naturalWidth || this.data.width;\r\n          this.height = this.data.naturalHeight || this.data.height;\r\n\r\n      }\r\n  }\r\n\r\n}","import ResourceType from \"./ResourceType\";\r\n\r\n\r\nexport default class Resource {\r\n\r\n    constructor(name, data)\r\n    {\r\n        //this.data = data || undefined;\r\n        this.name = name || 'Resource';\r\n        this.type = ResourceType.None;\r\n    }\r\n\r\n}","\r\nconst ResourceType = {\r\n    None : -1,\r\n    Image : 0,\r\n    Tilemap : 1,\r\n}\r\n\r\nexport default ResourceType;","\r\nmodule.exports = {\r\n    ResourceType : require('./ResourceType'),\r\n    ImageResource : require('./ImageResource'),\r\n    TilemapResource : require('./tilemap/TilemapResource')\r\n}","\r\nimport Resource from \"../Resource\";\r\nimport TilemapMetadata from \"./data/TilemapMetadata\";\r\nimport ParseTilesets from \"./parser/ParseTileset\";\r\nimport ParseLayers from \"./parser/ParseLayers\";\r\nimport ResourceType from '../ResourceType'\r\n\r\nexport default class TilemapResource extends Resource {\r\n\r\n    constructor(name, source, cache) {\r\n\r\n        super(name);\r\n\r\n        this.metaData = new TilemapMetadata ({\r\n            name: source.name,\r\n            width: source.width,\r\n            height: source.height,\r\n            tileWidth: source.tilewidth,\r\n            tileHeight: source.tileheight,\r\n            orietation: source.orietation\r\n        });\r\n\r\n        this.name = name;\r\n        this.tilesets = ParseTilesets(source, cache);\r\n        this.layers = ParseLayers(source, this);\r\n        this.type = ResourceType.Tilemap;\r\n        \r\n\r\n    }\r\n\r\n    getTilesetByGID(gid) {\r\n\r\n        return this.tilesets.each((set)=>{\r\n            if (set.hasGID(gid)) {\r\n                return set;\r\n            }\r\n        }) || null;\r\n\r\n    }\r\n\r\n    getTileGID(gid) {\r\n        return this.tilesets.each((set)=>{\r\n\r\n            let tileGID = set.getTileGID(gid);\r\n\r\n            if (tileGID !== undefined) {\r\n                return tileGID;\r\n            }\r\n        }) || null;\r\n    }\r\n\r\n}\r\n","\r\nexport default class Tile {\r\n\r\n    constructor(layer, tileData, tileX, tileY, id) {\r\n        this.layer = layer;\r\n        this.data = tileData;\r\n        this.tileX = tileX;\r\n        this.tileY = tileY;\r\n        this.id = id;\r\n        this.frame = tileData.st;\r\n        // pixels positions\r\n        this.x = Math.round(tileX * tileData.st.width);\r\n        this.y = Math.round(tileY * tileData.st.height);\r\n    }\r\n\r\n}","import Rect from \"../../../math/Rect\";\r\n\r\nexport default class TileGID {\r\n\r\n    constructor(tileset, gid, tileID, u, v, umax, vmax) {\r\n        this.id = tileID;\r\n        this.gid = gid;\r\n        this.tileset = tileset || null;\r\n        this.st = new Rect(u,v,umax,vmax); // tex coords\r\n        this.keyFrames = undefined;\r\n        this.isAnimated = false;\r\n        this.currentFrame = 0;\r\n    }\r\n    \r\n}","\r\nimport ObjectGet from '../../../utils/object/ObjectGet'\r\n\r\nexport default class TilemapLayerData {\r\n\r\n    constructor(config) {\r\n        this.width = ObjectGet.value(config,'width', 0);\r\n        this.height = ObjectGet.value(config,'height',0);\r\n        this.x = ObjectGet.value(config,'x', 0);\r\n        this.y = ObjectGet.value(config,'y', 0);\r\n        this.name = ObjectGet.value(config,'name', 'tilemaplayer');\r\n        this.alpha = ObjectGet.value(config,'alpha', 1);\r\n        //this.type =\"tilelayer\";\r\n        this.visible = ObjectGet.value(config,'visible', true);\r\n        this.tiles =  ObjectGet.value(config,'tiles', []);\r\n        this.hasAnimatedTiles = false;\r\n    }\r\n\r\n}","import ObjectGet from \"../../../utils/object/ObjectGet\";\r\n\r\nexport default class TilemapMetadata {\r\n\r\n    constructor(config) {\r\n\r\n        this.name = ObjectGet.value(config,'name','tilemap');\r\n        this.width =  ObjectGet.value(config,'width',0);\r\n        this.height =  ObjectGet.value(config,'height',0);\r\n        this.tileWidth =  ObjectGet.value(config,'tileWidth',16);\r\n        this.tileHeight =  ObjectGet.value(config,'tileHeight',16);\r\n        this.pixelsWidth = ObjectGet.value(config,'pixelsWidth',this.width * this.tileWidth);\r\n        this.pixelsHeight = ObjectGet.value(config,'pixelsHeight',this.height * this.tileHeight);\r\n        this.orientation = ObjectGet.value(config, 'orientation', 'orthogonal');\r\n    }\r\n\r\n\r\n}","import DataList from \"../../../structures/List\";\r\nimport TileGID from './TileGID'\r\n\r\n\r\n\r\nexport default class Tileset {\r\n\r\n    constructor(name, firstgid, tileWidth, tileHeight, margin, spacing) {\r\n\r\n        this.name = name;\r\n        this.firstgid = firstgid || 1;\r\n        this.tileWidth = tileWidth || 16;\r\n        this.tileHeight = tileHeight || 16;\r\n        this.margin = margin || 0;\r\n        this.spacing = spacing || 0;\r\n        this.image = null;\r\n        this.data = new DataList();\r\n        this.rows = 0;\r\n        this.collumns = 0;\r\n        this.gidCount = 0;\r\n    }\r\n\r\n    getTileGID(gid) {\r\n\r\n        if (gid === 'string') gid = parseInt(gid);\r\n\r\n        if (gid < this.firstgid && gid >= this.firstgid + this.gidCount)\r\n            return null;\r\n\r\n        return this.data.at(gid - this.firstgid);\r\n    }\r\n\r\n    getTile(index) {\r\n\r\n        if (index === 'string') index = parseInt(index);\r\n\r\n        return this.data.at(index);\r\n    }\r\n\r\n    hasGID(gid) {\r\n        return (\r\n            gid >= this.firstgid &&\r\n            gid < this.firstgid + this.gidCount\r\n        );\r\n    }\r\n\r\n    updateData(imageWidth, imageHeight) {\r\n\r\n        if (this.image !== undefined || this.image != null)\r\n        {\r\n            imageWidth = this.image.width;\r\n            imageHeight = this.image.height;\r\n        }\r\n\r\n        //slice into tiles\r\n        let columns = (imageHeight - this.margin * 2 + this.spacing) / (this.tileHeight + this.spacing);\r\n        let rows = (imageWidth - this.margin * 2 + this.spacing) / (this.tileWidth + this.spacing);\r\n\r\n        this.rows = Math.floor(rows);\r\n        this.collumns =  Math.floor(columns);\r\n        this.gidCount = rows * columns;\r\n\r\n        let u = this.margin;\r\n        let v = this.margin;\r\n        let x = 0;\r\n\r\n        this.data.clear();\r\n\r\n        for (let i = 0; i < this.gidCount; i++) {\r\n\r\n                this.data.push(new TileGID(\r\n                    this, \r\n                    this.firstgid + i,\r\n                    i,\r\n                    u, v,\r\n                    this.tileWidth, this.tileHeight));\r\n\r\n            u += this.tileWidth + this.spacing;             \r\n            x++;\r\n\r\n            if (x >= rows)\r\n            {\r\n                x = 0;\r\n                u = this.margin;\r\n                v += this.tileHeight + this.spacing;\r\n            }\r\n\r\n            \r\n        }\r\n\r\n       \r\n    }\r\n\r\n    \r\n\r\n}","\r\n// Bits on the far end of the 32-bit global tile ID are used for tile flags\r\nconst FLIPPED_HORIZONTALLY_FLAG = 0x80000000;\r\nconst FLIPPED_VERTICALLY_FLAG   = 0x40000000;\r\nconst FLIPPED_DIAGONALLY_FLAG   = 0x20000000;\r\n\r\nfunction ParseGIDFlags(flipped_horizontally, flipped_vertically, flipped_diagonally) {\r\n\r\n    let flip = false;\r\n    let rot = 0;\r\n\r\n    return {flipped: flip, rotation : rot};\r\n\r\n}\r\n\r\n// http://docs.mapeditor.org/en/latest/reference/tmx-map-format/\r\nexport default function ParseGID(global_tile_id) {\r\n\r\n    // The global_tile_id is alredy parsed on Base64.decodeToUint32() phase.\r\n\r\n    /* unsigned global_tile_id = data[tile_index] |\r\n                              data[tile_index + 1] << 8 |\r\n                              data[tile_index + 2] << 16 |\r\n                              data[tile_index + 3] << 24;*/\r\n\r\n    // Read out the flags\r\n    let flipped_horizontally = Boolean(global_tile_id & FLIPPED_HORIZONTALLY_FLAG);\r\n    let flipped_vertically = Boolean(global_tile_id & FLIPPED_VERTICALLY_FLAG);\r\n    let flipped_diagonally = Boolean(global_tile_id & FLIPPED_DIAGONALLY_FLAG);\r\n\r\n    // Clear the flags\r\n     global_tile_id = global_tile_id & ~(FLIPPED_HORIZONTALLY_FLAG |\r\n        FLIPPED_VERTICALLY_FLAG |\r\n        FLIPPED_DIAGONALLY_FLAG);\r\n\r\n\r\n    let flags = ParseGIDFlags(flipped_horizontally, flipped_vertically, flipped_diagonally);\r\n\r\n    return {\r\n        gid : global_tile_id,\r\n        flipHorizontal : flipped_horizontally,\r\n        flipVertical : flipped_vertically,\r\n        flipDiagonal : flipped_diagonally,\r\n        flipped: flags.flipped,\r\n        rotation : flags.rotation        \r\n    };\r\n\r\n}","\r\nimport ObjectGet from '../../../utils/object/ObjectGet'\r\nimport Base64Utils from '../../../utils/Base64Utils';\r\nimport DataSet from '../../../structures/Set';\r\nimport DataList from '../../../structures/List';\r\nimport ParseGID from './ParseGID'\r\nimport TilemapLayerData from '../data/TilemapLayerData';\r\nimport Tile from '../data/Tile';\r\n\r\n\r\nexport default function ParseLayers(json, map) {\r\n\r\n    let size = json.layers.length;\r\n    let tileLayers = new DataList();\r\n\r\n    if (size <= 0)\r\n        return tileLayers;\r\n\r\n    for (let i = size - 1; i >= 0; i--) {\r\n\r\n        let jsonLayer = json.layers[i];\r\n\r\n        if (jsonLayer.type !== \"tilelayer\") continue;\r\n\r\n        if (jsonLayer.enconding) {\r\n            if (jsonLayer.enconding === 'base64') {\r\n                //  should be interpreted as an array of unsigned 32-bit integers using little-endian byte ordering.\r\n                jsonLayer.data = Base64Utils.decodeToUint32(jsonLayer.data);\r\n                delete jsonLayer.enconding;\r\n            }\r\n        }\r\n\r\n        let newLayer = new TilemapLayerData({\r\n            name: jsonLayer.name,\r\n            x: ObjectGet.value(jsonLayer, 'offsetx', 0) + jsonLayer.x,\r\n            y: ObjectGet.value(jsonLayer, 'offsety', 0) + jsonLayer.y,\r\n            width: jsonLayer.width,\r\n            height: jsonLayer.height,\r\n            tileWidth: jsonLayer.tilewidth,\r\n            tileHeight: jsonLayer.tileheight,\r\n            alpha: jsonLayer.opacity,\r\n            visible: jsonLayer.visible,\r\n            //properties: GetFastValue(layer, 'properties', {})\r\n        });\r\n\r\n        let tiles = [];\r\n        let x = 0;\r\n        let y = 0;\r\n        let hasAnimatedTiles = false;\r\n        let animatedTilesGID = new DataSet();\r\n\r\n        for (let j = 0; j < jsonLayer.data.length; j++) {\r\n\r\n            let gidProp = ParseGID(jsonLayer.data[j]);\r\n            let id = x + y * newLayer.width;\r\n            let tile = null;\r\n\r\n            // The first tileset always has a firstgid value of 1. \r\n            if (gidProp.gid > 0) {\r\n                let gid = gidProp.gid;\r\n                let tileset = map.getTilesetByGID(gid);\r\n                let tileData = tileset.getTileGID(gid);\r\n                \r\n                if (tileData.isAnimated) {\r\n                    animatedTilesGID.set(gid);\r\n                    hasAnimatedTiles = true;\r\n\r\n                }\r\n\r\n                tile = new Tile(newLayer, tileData, x, y, id);\r\n            } \r\n\r\n            tiles.push(tile);\r\n\r\n            x++;\r\n\r\n            if (x >= newLayer.width) {\r\n                x = 0;\r\n                y++;\r\n            }\r\n        }\r\n\r\n        newLayer.tiles = tiles;\r\n        newLayer.hasAnimatedTiles = hasAnimatedTiles;\r\n        newLayer.animatedTiles = (animatedTilesGID.size > 0) ? animatedTilesGID : undefined;\r\n\r\n        tileLayers.push(newLayer);\r\n\r\n    }\r\n\r\n   \r\n    return tileLayers;\r\n\r\n}","\r\nexport default function ParseTilesProperties(tileset, tilesetTilesProperties) {\r\n\r\n    for (let tileIndex in tilesetTilesProperties) {\r\n\r\n        let tileData = tileset.getTile(tileIndex);\r\n\r\n        if (tileData === null || tileData === undefined) continue;\r\n\r\n\r\n        let tileProperties = tilesetTilesProperties[tileIndex];\r\n\r\n        // check properties\r\n        for (let property in tileProperties) {\r\n        \r\n            let propertyContent = tileProperties[property];\r\n\r\n            if (property == 'animation') {\r\n\r\n                let animationSize = propertyContent.length;\r\n\r\n                if (animationSize > 1) {\r\n                    tileData.isAnimated = true;\r\n\r\n                    let keyFrames = [];\r\n\r\n                    for (let i = 0; i < animationSize; i++) {\r\n                        let anim = propertyContent[i];\r\n                        keyFrames.push({\r\n                            duration: anim.duration,\r\n                            tileID : anim.tileid \r\n                        });\r\n                    }\r\n                    \r\n                    tileData.keyFrames = keyFrames;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n  \r\n}","import Tileset from \"../data/Tileset\";\r\nimport DataList from \"../../../structures/List\";\r\nimport Path from '../../../utils/Path'\r\nimport ParseTilesProperties from \"./ParseTilesProperties\";\r\n\r\n\r\nexport default function ParseTilesets(json, cache) {\r\n\r\n    let size = json.tilesets.length || 0;\r\n\r\n    let tileSets = new DataList();    \r\n\r\n    for (let i = 0; i < size; i++) {\r\n\r\n        let jsonTileset = json.tilesets[i];\r\n\r\n        if (jsonTileset.image) {\r\n\r\n            var newTileSet = new Tileset(\r\n                jsonTileset.name, \r\n                jsonTileset.firstgid, \r\n                jsonTileset.tilewidth, \r\n                jsonTileset.tileheight, \r\n                jsonTileset.margin, \r\n                jsonTileset.spacing);\r\n\r\n            newTileSet.image = cache.image.get(Path.getFilenameWithoutExtension(jsonTileset.image) || jsonTileset.name);\r\n\r\n            newTileSet.updateData(jsonTileset.imagewidth, jsonTileset.imageheight);\r\n\r\n            // check tile properties\r\n            if (jsonTileset.tiles !== undefined)\r\n                ParseTilesProperties(newTileSet, jsonTileset.tiles);\r\n                \r\n            tileSets.push(newTileSet);\r\n        }\r\n    }\r\n\r\n    return tileSets;\r\n\r\n}","import PostPreloadingScene from \"./components/PostPreloadingScene\";\r\n\r\nexport default class Scene {\r\n  \r\n  constructor(name) {\r\n\r\n    this.name = name || 'New Scene';\r\n    //this.childs = new EntityHierarchy(\"SceneHierarchy\", this.game);\r\n    /*this.camera = null;\r\n    this.x = 0;\r\n    this.y = 0;\r\n    this.width = 0;\r\n    this.height = 0;\r\n    this.view = 0;*/\r\n\r\n\r\n    /*if (myGame != null) {\r\n      this.width = myGame.width;\r\n      this.height = myGame.height;\r\n    }*/\r\n  }\r\n\r\n\r\n  preloadDone() {\r\n\r\n    if (this.scene === undefined) return;\r\n\r\n    PostPreloadingScene(this.scene);\r\n  }\r\n\r\n  instanceDestroy(gameObject) {\r\n\r\n    if (gameObject['destroy'])\r\n      gameObject.destroy();\r\n\r\n      //console.log(\"deleted \" + gameObject._id)\r\n\r\n    let index = this.instances.indexOf( gameObject);\r\n\r\n    this.instances.splice( index, 1 );\r\n\r\n  }\r\n\r\n  addGameObject(gameObject, clone) {\r\n\r\n    let obj;\r\n    let cl = false;\r\n\r\n    if (arguments.length == 0)\r\n      obj = new scintilla.GameObject();\r\n    else {\r\n\r\n      if (clone === undefined)\r\n        cl = false;\r\n      else\r\n        cl = clone;\r\n\r\n\r\n        if (cl)\r\n          obj = gameObject.clone();\r\n        else\r\n          obj = gameObject;\r\n\r\n    }\r\n\r\n    obj._id = this.instances.length;\r\n    obj._game = this.game;\r\n    this.instances.push(obj);\r\n\r\n    obj.start();\r\n    return obj;\r\n\r\n  }\r\n\r\n  setBounds(x,y,width,height) {\r\n\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = width;\r\n    this.height = height;\r\n    \r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n","\r\nimport System from '../core/system/System';\r\nimport DataMap from '../structures/Map'\r\nimport Scene from './Scene'\r\nimport ScintillaLoadingScreen from './builtin/ScintillaLoadingScene';\r\nimport SetScene from './components/SetScene';\r\nimport InjectSystems from '../core/system/components/InjectSystems';\r\n\r\n\r\nexport default class SceneManager {\r\n  \r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    this._scenes = new DataMap();\r\n\r\n    this.currentScene = null;\r\n    this._currentSceneName = '';\r\n    this._changeScene = null;\r\n\r\n    this._setup = false;\r\n    this._clearCache = false;\r\n\r\n    this._scintillaLoading = false;\r\n\r\n    // callbacks\r\n    \r\n    this.onStartCallback = null;\r\n    this.onLoadingCallback = null;\r\n    this.onLoadingRenderCallback = null;\r\n    this.onPreloadCallback = null;\r\n    this.onUpdateCallback = null;\r\n    this.onRenderCallback = null;\r\n    this.onDestroyCallback = null;\r\n    this._loadingPlaceHolder = new ScintillaLoadingScreen(this.game);\r\n\r\n  }\r\n\r\n  add(sceneName,scene) {\r\n\r\n    var newScene;\r\n\r\n    if (scintilla.Scene.prototype.isPrototypeOf(scene)) {\r\n      newScene = scene;\r\n      newScene.game = this.game;\r\n    } else\r\n      newScene = null;\r\n\r\n\r\n    if (newScene != null)\r\n      this._scenes.set(sceneName,newScene);\r\n\r\n  }\r\n\r\n  new(sceneName) {\r\n\r\n    if (this._scenes.has(sceneName))\r\n    {\r\n      throw \"Could not create new Scene. The scene name \\\"\" + name + \"\\\" already exists.\"; \r\n      return null;\r\n    }\r\n\r\n    var newScene = new Scene(this.game, sceneName);\r\n    this._scenes.set(sceneName,newScene);\r\n\r\n    return newScene;\r\n\r\n  }\r\n\r\n  set(sceneName, clearCache) {\r\n    return SetScene(this, sceneName, clearCache, false);\r\n  }\r\n\r\n  restart(clearCache) {\r\n\r\n    if (clearCache === undefined) { clearCache = false; }\r\n\r\n    this._changeScene = this._currentSceneName;\r\n    this._clearCache = clearCache;\r\n\r\n  }\r\n\r\n  remove(sceneName) {\r\n\r\n    if (this._currentSceneName === sceneName) {\r\n\r\n      this.currentScene = null;\r\n\r\n      this.onStartCallback = null;\r\n      this.onLoadingCallback = null;\r\n      this.onLoadingRenderCallback = null;\r\n      this.onPreloadCallback = null;\r\n      this.onUpdateCallback = null;\r\n      this.onRenderCallback = null;\r\n      this.onDestroyCallback = null;\r\n\r\n\r\n    }\r\n\r\n    delete this.scenes[sceneName];\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\nSystem.register('SceneManager', SceneManager, 'scene', function()\r\n{\r\n  InjectSystems(this.game, this._loadingPlaceHolder);\r\n});\r\n","import Scene from \"../Scene\";\r\nimport Version from \"../../Define\";\r\nimport MathUtils from \"../../math/MathUtils\";\r\n\r\nexport default class ScintillaLoadingScreen extends Scene {\r\n\r\n    constructor(game) {\r\n        super('Scintilla Loading Scene');\r\n\r\n        this.scintillaLogo = new Image();\r\n        let logoData =\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAA0CAQAAABxuOPTAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfiBAEENCBdKapvAAABjklEQVRYw+2YSxKDIAyGA6seyiXH8mgsORS7dAFpUMNDJ9CNmakFAnz8MVIswCPbkT8L7IqS4REVgSO2HKiGvQOMa+7yGbhY5XKdhFPV2ZpMLaz3gqeIPd5PeeJaWBX3qiNYqqnn7VVrPayqu/JZl3ISSWstEb2wPtDaHjLhbo4nUwunrHQUOyWN2kBFpRJ26iMjp49qgHuPTDvQKkpbW5+i1n1wa5fAijp7P21/OP+wT0Hnws3uefDUdP7pNLtY5ULgPexE4Ohr4tR31H11er322muPdqXrealWYrPrkQNQgI8ZXVDqGbt/GRh20eSp/jERz7jUQn7qe10Ut5Z+HmdTM08WsaxJx02GUMvIgabsYwMA+AIcsuqQO3vk75CRoQhnyCN5LPu5nKQUYz1G5KmPq5V9tbaWn+aKCGABnAmFonAIijPXVUtKSHXd79H9lNqIAM4AbBm7/fDJNqF8biM1W3WMx9JnA3hkRaXqdD1GQW6j1AqdMVS3zgB49FkvXT16dIaDPFaq+5kC4MwX1X+rgjIvVdUAAAAASUVORK5CYII=\";\r\n        this.scintillaLogo.src = logoData;\r\n\r\n        this.progress = 0;\r\n        this.fromProgress = 0;\r\n        this.toProgress = 0;\r\n        this.t = 0;\r\n        this.game = game;\r\n        this.nextScene = null;\r\n        this.preloadingDone = false;\r\n\r\n        let drawFunc = function(draw) {\r\n            draw.image(this.scintillaLogo, 131,73);\r\n            draw.color = '#bcbcbc'\r\n            draw.outlineRect(131, 132, 58, 7)\r\n            draw.rect(133, 134, 54 * this.progress, 3);\r\n            draw.font('Verdana', 6);\r\n            draw.text('WIP - ' + Version.VERSION, 320 - 4, 240 - 4,'#787878','right');\r\n        }\r\n\r\n        let loadingFunc = function(dt) {\r\n\r\n            this.t += dt / 0.15;\r\n\r\n            if (this.t >= 1)\r\n                this.t = 1.0;\r\n\r\n            if (!this.preloadingDone)\r\n            {\r\n                let prog = this.load.progress;\r\n\r\n                if (prog >= 1.0)\r\n                    this.preloadingDone = true;\r\n\r\n                if (prog > this.progress)\r\n                {\r\n                    this.fromProgress = this.progress;\r\n                    this.toProgress = prog;\r\n                    this.t = 0;   \r\n                }\r\n\r\n            } else {\r\n                this.wait += dt;\r\n\r\n                if (this.wait >= 2.0) {\r\n                    this.preloadDone();\r\n                }\r\n            }\r\n\r\n            \r\n            this.progress = MathUtils.lerp(this.fromProgress, this.toProgress, this.t);\r\n        }\r\n\r\n        this.loading = loadingFunc;\r\n        this.update = loadingFunc;\r\n        this.loadingGUI = drawFunc;\r\n        this.gui = drawFunc;\r\n    }\r\n\r\n    init(next) {\r\n        this.nextScene = next;\r\n        this.wait = 0;\r\n        this.t = 0;\r\n        this.progress = 0;\r\n        this.preloadingDone = false;\r\n        this.ui.setSize(320, 240);\r\n        this.ui.setViewportByAspectRatio(1.33333333333);\r\n        \r\n    }\r\n\r\n    start() {\r\n        //this.progress = 1;\r\n    }\r\n\r\n}","import UnjectSystems from \"../../core/system/components/UnjectSystems\";\r\n\r\nexport default function ClearScene(game, sceneManager) {\r\n\r\n    if (sceneManager._currentSceneName)\r\n    {\r\n  \r\n      //game.system.unject(sceneManager.currentScene);\r\n      UnjectSystems(sceneManager.currentScene);\r\n\r\n      if (sceneManager.onDestroyCallback)\r\n      {\r\n        sceneManager.onDestroyCallback.call(sceneManager.currentScene, game);\r\n      }\r\n  \r\n      if (sceneManager._clearCache)\r\n      {\r\n        game.cache.clear();\r\n      }\r\n\r\n    }\r\n\r\n}","\r\nexport default function PostPreloadingScene(sceneManger) {\r\n\r\n    sceneManger._scintillaLoading = false;\r\n\r\n    if (sceneManger.currentScene === undefined || sceneManger.currentScene === null) return;\r\n\r\n    if (sceneManger.onStartCallback) {\r\n        sceneManger.onStartCallback.call(sceneManger.currentScene, sceneManger.game);\r\n    }\r\n}","import SetupScene from \"./SetupScene\";\r\nimport PreloadSceneComplete from \"./PreloadSceneComplete\";\r\nimport ClearScene from \"./ClearScene\";\r\nimport StartLoadAssets from \"../../loader/components/StartLoadAssets\";\r\n\r\nexport default function PreUpdateScene(sceneManager) {\r\n\r\n    if (!sceneManager.game.systemInited || sceneManager._changeScene == null)\r\n      return;\r\n\r\n\r\n      ClearScene(sceneManager, sceneManager.game);\r\n\r\n      SetupScene.call(sceneManager, sceneManager._changeScene);\r\n\r\n      if (sceneManager._currentSceneName !== sceneManager._changeScene)\r\n      {\r\n          return;\r\n      }\r\n      else\r\n      {\r\n        sceneManager._changeScene = null;\r\n      }\r\n\r\n      if (sceneManager.onPreloadCallback) {\r\n\r\n        sceneManager.game.system.load.reset();\r\n        sceneManager.onPreloadCallback.call(sceneManager.currentScene, sceneManager.game);\r\n\r\n        if (sceneManager.game.system.load.totalQueuedFiles === 0)\r\n        {\r\n          PreloadSceneComplete.call(sceneManager);\r\n\r\n        } else {\r\n\r\n            //sceneManager.game.system.load.start();\r\n            StartLoadAssets.call(sceneManager.game.system.load);\r\n        }\r\n\r\n      } else {\r\n\r\n        PreloadSceneComplete.call(sceneManager);\r\n      }\r\n}","\r\n\r\nexport default function PreloadSceneComplete() {\r\n\r\n      if (this._setup === false && this.onLoadingCallback) {\r\n          this.onLoadingCallback.call(this.currentScene, this.game);\r\n      }\r\n\r\n      if (this._scintillaLoading) {\r\n        //this._scintillaLoading = false;\r\n        this._loadingPlaceHolder.start();\r\n      }\r\n\r\n      this._setup = true;\r\n\r\n      /*if (!this._scintillaLoading && this.onStartCallback) {\r\n          this.onStartCallback.call(this.currentScene, this.game);\r\n      }*/\r\n\r\n}","\r\nexport default function RenderScene(sceneManager, drawer) {\r\n\r\n    if (sceneManager._setup) {\r\n\r\n        if (sceneManager._scintillaLoading) {\r\n            sceneManager._loadingPlaceHolder.gui(drawer);\r\n        } else {\r\n        if (sceneManager.onRenderCallback)\r\n            sceneManager.onRenderCallback.call(sceneManager.currentScene, drawer);\r\n        \r\n        }\r\n    } else {\r\n        if (sceneManager._scintillaLoading) {\r\n            sceneManager._loadingPlaceHolder.loadingGUI(drawer);\r\n        } else {\r\n            if (sceneManager.onLoadingRenderCallback)\r\n                sceneManager.onLoadingRenderCallback.call(sceneManager.currentScene, drawer);\r\n            \r\n        }\r\n    }\r\n\r\n}","\r\n\r\nexport default function SetScene(manager, sceneName, clearCache) {\r\n\r\nif (!manager._scenes.has(sceneName))\r\n    throw new Error('SceneManager.set: Scene' + sceneName + ' does not exist.')\r\n\r\n  if (clearCache === undefined) { clearCache = false; }\r\n\r\n\r\n    manager._changeScene = sceneName;\r\n    manager._clearCache = clearCache;\r\n  \r\n}","import InjectSystems from \"../../core/system/components/InjectSystems\";\r\n\r\n  export default function SetupScene(sceneName) {\r\n\r\n\r\n    this.currentScene = this._scenes.get(sceneName);\r\n  \r\n    this.onLoadingCallback = this.currentScene['loading'] || null;\r\n    this.onLoadingRenderCallback = this.currentScene['loadingGUI'] || null;\r\n  \r\n    let bothIsNull = (this.onLoadingCallback == null && this.onLoadingRenderCallback == null);\r\n  \r\n    if (this.onLoadingCallback == null || this.onLoadingRenderCallback == null)\r\n    {\r\n      \r\n      if (bothIsNull)\r\n      {\r\n        this._loadingPlaceHolder.init(this.currentScene);\r\n        \r\n        this._scintillaLoading = true;\r\n      } else {\r\n        this._scintillaLoading = false;\r\n      }\r\n    }\r\n  \r\n    this.onRenderCallback = this.currentScene['gui'] || null;\r\n    this.onUpdateCallback = this.currentScene['update'] || null;\r\n    this.onStartCallback = this.currentScene['start'] || null;\r\n    this.onPreloadCallback = this.currentScene['preload'] || null;    \r\n    this.onDestroyCallback = this.currentScene['destroy'] || null;\r\n  \r\n    InjectSystems(this.game, this.currentScene);\r\n    //this.game.system.inject(this.currentScene);\r\n  \r\n    this._currentSceneName = sceneName;\r\n  \r\n    this._setup = false;\r\n  \r\n}","\r\nexport default function UpdateScene(sceneManager, deltaTime) {\r\n\r\n    if (sceneManager._setup) {\r\n\r\n        if (sceneManager._scintillaLoading) {\r\n\r\n            sceneManager._loadingPlaceHolder.update(deltaTime);\r\n\r\n        } else {\r\n            if (sceneManager.onUpdateCallback)\r\n                sceneManager.onUpdateCallback.call(sceneManager.currentScene, deltaTime);\r\n        }\r\n    } else {\r\n        if (sceneManager._scintillaLoading) {\r\n\r\n            sceneManager._loadingPlaceHolder.loading(deltaTime);\r\n\r\n        } else {\r\n\r\n            if (sceneManager.onLoadingCallback)\r\n                sceneManager.onLoadingCallback.call(sceneManager.currentScene, deltaTime);\r\n        }\r\n    }\r\n\r\n}","\r\nimport MergeSort from './useful/MergeSort'\r\n\r\nexport default class DataList\r\n{\r\n    constructor(elements, unique)\r\n    {\r\n        this.unique = unique || true;\r\n        this.childs = [];\r\n\r\n        if (Array.isArray(elements))\r\n        {\r\n            for (var i = 0; i < elements.length; i++)\r\n                this.push(elements[i]);\r\n        }\r\n\r\n    }\r\n\r\n    get size() {return this.childs.length;}\r\n    get length() {return this.childs.length;}\r\n\r\n    get first() {\r\n        if (this.list.length > 0) \r\n            return this.childs[0];\r\n        else\r\n            return null;\r\n        \r\n    }\r\n\r\n    get last() {\r\n          if (this.childs.length > 0) {\r\n            let idx = this.childs.length - 1;\r\n            return this.childs[idx];\r\n          } else\r\n            return null;\r\n    }\r\n\r\n    push(child) {\r\n\r\n        if (this.unique) {\r\n            if (this.indexOf(child) === -1)\r\n                this.childs.push(child);\r\n        } else {\r\n            this.childs.push(child);\r\n        }\r\n\r\n        return child;\r\n    }\r\n\r\n    pushFront(child) {\r\n        if (this.unique) {\r\n            if (this.indexOf(child) === -1)\r\n                this.childs.unshift(child);\r\n        } else {\r\n            this.childs.unshift(child);\r\n        }\r\n        return child;\r\n    }\r\n\r\n    insert(child, index) {\r\n\r\n        if (index === undefined) \r\n            index = 0;\r\n\r\n        if (this.childs.length === 0) \r\n            return this.push(child);\r\n\r\n        if (index >= 0 && index <= this.childs.length) {\r\n        \r\n            if (this.unique) {\r\n                if (this.indexOf(child) === -1) \r\n                    this.childs.splice(index, 0, child);\r\n            } else {\r\n                this.childs.splice(index, 0, child);\r\n            }\r\n            \r\n        }\r\n\r\n        return child;\r\n    \r\n    }\r\n\r\n    indexOf(child) {\r\n        return this.childs.indexOf(child);\r\n    }\r\n\r\n    at(index) {\r\n        return this.childs[index];\r\n    }\r\n\r\n    erase(child) {\r\n\r\n        let idx = this.childs.indexOf(child);\r\n        var childToErase = null;\r\n\r\n        if (idx !== -1)\r\n            childToErase = this.childs.splice(idx, 1);\r\n        \r\n        return childToErase;\r\n    }\r\n\r\n    eraseAt(index) {\r\n        var child = this.childs[index];\r\n\r\n        if (child)\r\n            this.childs.splice(index, 1);\r\n\r\n        return child;\r\n    }\r\n\r\n    eraseList(listToRemove, size){\r\n        \r\n        if (size === undefined) size = listToRemove.size;\r\n\r\n        for (let i = 0; i < size; i++)\r\n        {\r\n            var child = listToRemove.childs[i];\r\n            this.erase(child);\r\n            /*let child = this.listToRemove[i];\r\n            let index = this._instances.indexOf(gameObject);\r\n\r\n            if (index > -1)\r\n               this._instances.splice(index, 1);*/\r\n            \r\n        }\r\n    }\r\n\r\n    has(child) {\r\n        return (this.childs.indexOf(child) > -1);\r\n    }\r\n\r\n\r\n\r\n    empty() {\r\n        return (this.childs.length == 0)\r\n    }\r\n\r\n    clear() {\r\n        let i = this.childs.length;\r\n\r\n        while(i--) {\r\n            this.erase(this.childs[i]);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    splice(start, count) {\r\n        return this.childs.splice(start, count);\r\n    }\r\n\r\n    destroy() {\r\n        this.clear();\r\n        this.childs = [];\r\n        this.parent = null;\r\n    }\r\n\r\n    concat(otherList, clearOther) {\r\n        if (clearOther === undefined) clearOther = false;\r\n\r\n        if (clearOther) {\r\n            this.childs = this.childs.concat(otherList.childs.splice(0));\r\n        } else {\r\n            this.childs = this.childs.concat(otherList.childs);\r\n        }\r\n\r\n        \r\n        return this;\r\n    }\r\n\r\n    each(callback) {\r\n        let params = [ null ];\r\n\r\n        var content = this.childs;\r\n\r\n        for (let i = 0; i < arguments.length; i++)\r\n            params.push(arguments[i+1]);\r\n\r\n        for (let i = 0; i < content.length; i++) {\r\n            params[0] = i;\r\n            let r = callback(content[i], params);\r\n            if (r !== undefined)\r\n                return r;\r\n           //break;\r\n        }\r\n    }\r\n\r\n    sort(predicate) {\r\n        if (predicate === undefined) return;\r\n        return MergeSort(this.childs, predicate);\r\n        \r\n        //childs.sort(predicate);\r\n    }\r\n\r\n    find(predicate) {\r\n        if (predicate === undefined) return;\r\n\r\n        let size = this.childs.length;\r\n\r\n        for (let i = 0; i < size; i++) {\r\n            if (predicate(this.childs[i])) {\r\n                return this.childs[i];\r\n            }\r\n        }\r\n    \r\n        return null;\r\n      }\r\n\r\n    swap(childA, childB) {\r\n\r\n        if (childA === childB)\r\n            return;\r\n\r\n        let idx0 = this.indexOf(childA);\r\n        let idx1 = this.indexOf(childB);\r\n\r\n        if (idx0 < 0 || idx1 < 0) {\r\n            throw new Error('DataList.swap: Could not swap childrens. The objects are not in the list.');\r\n        }\r\n\r\n        this.list[idx0] = childA;\r\n        this.list[idx1] = childB;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    swapByIndex(indexA, indexB) {\r\n        if (indexA === indexB)\r\n            return;\r\n\r\n        var cA = this.at(indexA);\r\n        var cB = this.at(indexB);\r\n\r\n        if (cA === undefined || cB === undefined) {\r\n            throw new Error('DataList.swapByIndex: Could not swap childrens by index. The objects are not in the list.');\r\n        }\r\n\r\n        this.list[indexA] = cA;\r\n        this.list[indexB] = cB;\r\n\r\n        return this;\r\n    }\r\n\r\n    reverse() {\r\n        this.childs.reverse();\r\n        return this;\r\n    }\r\n\r\n\r\n    \r\n}","\r\n\r\n\r\n// DataMap simple class\r\nexport default class DataMap {\r\n  \r\n  constructor() {\r\n    this._content = {};\r\n    this._size = 0;\r\n  }\r\n\r\n  get size() {return this._size;}\r\n\r\n  /* \r\n  Add or set value to the map\r\n  key = keyName\r\n  value = value\r\n  */\r\n  set(key, value) {\r\n\r\n    if (!this.has(key))\r\n    {\r\n        this._size++;\r\n    }\r\n\r\n    this._content[key] = value;\r\n    \r\n    return this;\r\n\r\n  }\r\n\r\n  get(key) {\r\n      if (this.has(key))\r\n      {\r\n        return this._content[key];\r\n      }\r\n      else\r\n      {\r\n        return null;\r\n      }\r\n  }\r\n\r\n  has(key) {\r\n    return this._content.hasOwnProperty(key);\r\n  }\r\n\r\n  contains(value) {\r\n    for (var key in this._content)\r\n    {\r\n      if (entries[key] === value)\r\n      {\r\n        return true;\r\n      } else\r\n        continue;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  keys() {\r\n    return Object.keys(this._content);\r\n  }\r\n\r\n  values() {\r\n    var values = [];\r\n    var content = this._content;\r\n\r\n    for (var key in content)\r\n      values.push(entries[key]);\r\n        \r\n    return values;\r\n  }\r\n\r\n  remove(key) {\r\n\r\n    if (!this.has(key))\r\n      return null;\r\n\r\n    var prop =  this._content[key];\r\n    delete this._content[key];\r\n    this._size--;\r\n    return prop;\r\n\r\n  }\r\n\r\n  delete(key) {\r\n\r\n    if (!this.has(key))\r\n      return false;\r\n\r\n      delete this._content[key];\r\n      this._size--;\r\n\r\n      return true;\r\n  }\r\n\r\n  deleteAt(key) {\r\n\r\n    //if (!this.hasTagInKey(key))\r\n    //  return false;\r\n      this._size--;\r\n     delete this._content[key];\r\n\r\n  }\r\n\r\n  deleteByIndexedArray(array) {\r\n    for (var i = 0; i < array.length; i++) {\r\n      delete this._content[array[i]];\r\n      this._size--;\r\n    }\r\n\r\n  }\r\n\r\n  clear() {\r\n\r\n    for (var property in this._content) \r\n      delete this._content[property];\r\n    \r\n\r\n    this._size = 0;\r\n\r\n  }\r\n\r\n  slowSize() {\r\n    return Object.keys(_contents).length;\r\n  }\r\n\r\n  each(callback) {\r\n    var content = this._content;\r\n\r\n    for (var property in content) {\r\n\r\n      if (callback(property, content[property]) === false)\r\n          break;\r\n      \r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\n","import MergeSort from \"./useful/MergeSort\";\r\n\r\n\r\nexport default class DataSet {\r\n\r\n    constructor(elements) {\r\n        this._content = [];\r\n        this._size = 0;\r\n\r\n        if (Array.isArray(elements))\r\n        {\r\n            for (var i = 0; i < elements.length; i++)\r\n                this.set(elements[i]);\r\n        }\r\n\r\n    }\r\n\r\n    get size () { return this._content.length; }\r\n    get length () { return this._content.length; }\r\n\r\n    set(value) {\r\n        if (this._content.indexOf(value) === -1)\r\n            this._content.push(value);\r\n\r\n        return this;\r\n    }\r\n\r\n    get(value) {\r\n        let index = this._content.indexOf(value);\r\n        if (index > -1)\r\n        {\r\n            return this._content[index];\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    at(index) {\r\n        return this._content[index];\r\n    }\r\n\r\n    has(value) {\r\n        return (this._content.indexOf(value) > -1);\r\n    }\r\n\r\n    delete(value) {\r\n        var idx = this._content.indexOf(value);\r\n\r\n        if (idx > -1)\r\n            this._content.splice(idx, 1);\r\n\r\n        return this;\r\n    }\r\n\r\n    clear() {\r\n        this._content.length = 0;\r\n        return this;\r\n    }\r\n\r\n    each(callback, scope) {\r\n        var content = this._content.slice();\r\n        var size = content.length;\r\n        var i;\r\n\r\n        if (scope)\r\n        {\r\n            for (i = 0; i < size; i++)\r\n            {\r\n                if (callback.call(scope, content[i], i) === false)\r\n                    break;                \r\n            }\r\n        } else {\r\n            for (i = 0; i < size; i++)\r\n            {\r\n                if (callback(content[i], i) === false)\r\n                    break;                \r\n            }\r\n        }\r\n\r\n      return this;\r\n    }\r\n\r\n    sort(predicate) {\r\n        if (predicate === undefined) return;\r\n        return MergeSort(this._content, predicate);\r\n    }\r\n\r\n   values() {\r\n       return this._content;\r\n   }\r\n\r\n}\r\n","\r\nmodule.exports = {\r\n    Utils : require('./useful'),\r\n    Set : require('./Set'),\r\n    Map : require('./Map'),\r\n    List : require('./List'),\r\n}\r\n    ","\r\n// http://www.stoimen.com/blog/2010/07/02/friday-algorithms-javascript-merge-sort/\r\n// https://codereview.stackexchange.com/questions/87000/fast-merge-sort-in-javascript\r\nexport default function MergeSort(array, predicate)\r\n{\r\n    var size = array.length;\r\n\r\n    if (size < 2)\r\n        return array;\r\n\r\n    if (predicate === undefined)\r\n    {\r\n        predicate = function (a, b) {\r\n            return a < b ? -1 : a === b ? 0 : 1;\r\n        };\r\n    }\r\n\r\n\r\n    /*function merge(left, right)\r\n    {\r\n        var result = [];\r\n \r\n        while (left.length && right.length) {\r\n            if (left[0] <= right[0]) {\r\n                result.push(left.shift());\r\n            } else {\r\n                result.push(right.shift());\r\n            }\r\n        }\r\n     \r\n        while (left.length)\r\n            result.push(left.shift());\r\n     \r\n        while (right.length)\r\n            result.push(right.shift());\r\n     \r\n        return result;\r\n    }*/\r\n\r\n    function merge (begin, begin_right, end) {\r\n        // Create a copy of the left and right halves.\r\n        let left_size = begin_right - begin;\r\n        let right_size = end - begin_right;\r\n        let left = array.slice(begin, begin_right);\r\n        let right = array.slice(begin_right, end);\r\n        // Merge left and right halves back into original array.\r\n        let i = begin, j = 0, k = 0;\r\n        while (j < left_size && k < right_size)\r\n            if (predicate(left[j], right[k]) <= 0)\r\n                array[i++] = left[j++];\r\n            else\r\n                array[i++] = right[k++];\r\n        // At this point, at least one of the two halves is finished.\r\n        // Copy any remaining elements from left array back to original array.\r\n        while (j < left_size) \r\n            array[i++] = left[j++];\r\n        // Copy any remaining elements from right array back to original array.\r\n        while (k < right_size) \r\n            array[i++] = right[k++];\r\n\r\n        return array;\r\n    }\r\n\r\n    function msort(start, end)\r\n    {\r\n        let len = end - start;\r\n\r\n        if (len < 2)\r\n            return;\r\n\r\n        let mid = start + (len >>> 1);\r\n        //let left = list.slice(start, mid);\r\n        //let right = list.slice(mid, end);\r\n        msort(start, mid);\r\n        msort(mid, end);\r\n        return merge(start, mid, end);\r\n        \r\n    }\r\n\r\n    //let mid = 0 + (size >>> 1);\r\n\r\n    return msort(0,size);//mid,size);\r\n\r\n    \r\n}\r\n","\r\nmodule.exports = {\r\n    MergeSort : require('./MergeSort')\r\n}","\r\n// Wrapper class for game time\r\n\r\nexport default class GameTime {\r\n\r\n    constructor(game) {\r\n        this.game = game;\r\n\r\n    }\r\n\r\n    init(gameLoop) {\r\n        this._updateStep = gameLoop.updateStep;\r\n    }\r\n\r\n    get now() {\r\n        return this._updateStep.time;\r\n    }\r\n\r\n    get fps() {\r\n        return this._updateStep.fps;\r\n    }\r\n\r\n    get desiredFps() {\r\n        return this._updateStep.fpsDesired;\r\n    }\r\n\r\n    get delta() {\r\n        return this._updateStep.deltaTime;\r\n    }\r\n\r\n    get elapsed() {\r\n        return this._updateStep.elapsed;\r\n    }\r\n\r\n    get rawDelta() {\r\n        return this._updateStep.hiDeltaTime;\r\n    }\r\n\r\n}","import RequestAnimationFrame from \"../dom/RequestAnimationFrame\";\r\nimport ObjectGet from \"../utils/object/ObjectGet\";\r\nimport MathUtils from '../math/MathUtils'\r\n\r\nexport default class UpdateStep {\r\n\r\n    constructor(game, config) {\r\n        // CORE\r\n        this.game = game;\r\n        this.requestAnimationFrame = new RequestAnimationFrame(config.time.timeoutMode);\r\n        this.isRunning = false;\r\n        this.loop = null;\r\n        this.render = null;\r\n\r\n        // TIMER\r\n        this.startTime = 0; // start time\r\n        this.time = 0; // current hi-time\r\n        this.previousTime = 0; // last hi-time\r\n        this.elapsed = 0; // elapsed time\r\n        this.hiDeltaTime = 0; // raw delta time\r\n        this.deltaTime = 0; // delta time in miliseconds\r\n        // FPS\r\n        this.requireFpsUpdate = true;\r\n        this.fpsDesired = ObjectGet.value(config, 'fps', 60);\r\n        this.fps = this.fpsDesired;\r\n        this.currentFps = 0;\r\n        this._nextFpsUpdate = 0;\r\n        this._framesThisSecond = 0;\r\n\r\n        // ACCUMALATOR METHOD\r\n        this.interpolation = false;\r\n        this.timeStep = Math.ceil(1000 / this.fpsDesired);\r\n        this.minTimeStep = this.timeStep * 1.25;\r\n        this.accumalator = 0;\r\n        this.accumulatorMax = this.timeStep * 10;\r\n        this.updateLast = 0;\r\n        this.updateAverageDelta = 0;\r\n        this.frameCounter = 0;\r\n    }\r\n\r\n    init(gameLoop) {\r\n        \r\n        if (this.isRunning)\r\n            return;\r\n\r\n        this.reset();\r\n\r\n        this.loop = gameLoop.loop.bind(gameLoop);\r\n        this.render = gameLoop.render.bind(gameLoop);\r\n\r\n        this.startTime = window.performance.now();\r\n\r\n        this.requestAnimationFrame.start(this.update.bind(this));\r\n\r\n        this.isRunning = true;\r\n\r\n    }\r\n\r\n    update(timeStamp) {\r\n\r\n        this.hiDeltaTime = timeStamp - this.previousTime;\r\n\r\n        // current\r\n        this.time = timeStamp;\r\n\r\n        // game elapsed time\r\n        this.elapsed += this.hiDeltaTime;\r\n\r\n        // FPS Update\r\n        if (this.requireFpsUpdate)\r\n            this.fpsUpdate(timeStamp);\r\n\r\n         // set previous time\r\n         this.previousTime = timeStamp;\r\n\r\n         // game loop\r\n        this.accumalatorMethod(this.hiDeltaTime);\r\n\r\n        // game render\r\n        this.render(this.hiDeltaTime);\r\n\r\n    }\r\n\r\n    fpsUpdate(timeStamp) {\r\n\r\n        \r\n\r\n        if (timeStamp > this._nextFpsUpdate) {\r\n            this.currentFps = 0.25 * this._framesThisSecond + 0.75 * this.fps;\r\n            this.fps = MathUtils.clamp(~~this.currentFps, 0, this.fpsDesired);\r\n     \r\n            this._nextFpsUpdate = timeStamp + 1000;\r\n            this._framesThisSecond = 0;\r\n        }\r\n     \r\n        this._framesThisSecond++;\r\n    }\r\n\r\n\r\n\r\n    accumalatorMethod(deltaTime) {\r\n\r\n        if ((++this.frameCounter % this.frameRate) === 0) {\r\n\r\n            this.frameCounter = 0;\r\n\r\n            this.accumalator += deltaTime;//Math.max(Math.min(this.timeStep * 3, this.elapsed),0);\r\n            this.accumulator = Math.min(this.accumalator, this.accumalatorMax); //, this.updateAverage);\r\n\r\n            let deltaUpdate = (this.interpolation) ? deltaTime : this.timeStep;\r\n            let accumulatorUpdateDelta = (this.interpolation) ? deltaUpdate : Math.max(deltaUpdate, this.updateAverageDelta);\r\n            this.deltaTime = deltaUpdate / 1000;\r\n\r\n            while (this.accumalator >= accumulatorUpdateDelta || this.interpolation) {\r\n\r\n                let updateStart = window.performance.now();\r\n\r\n                // UPDATE GAME\r\n                this.loop(deltaUpdate / 1000.0);\r\n\r\n                let updateLast = window.performance.now();\r\n                this.updateAverageDelta = updateLast - updateStart;\r\n\r\n                this.accumalator -= accumulatorUpdateDelta;\r\n                if (this.interpolation) {\r\n                    this.accumalator = 0;\r\n                    break;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    accumalatorReset() {\r\n        this.frameCounter = 0;\r\n        this.frameRate = ~~(0.5 + 60 / this.fpsDesired);\r\n        this.accumalator = 0;\r\n        this.timeStep = 1000 / this.fpsDesired;\r\n        this.accumulatorMax = this.stepSize * 10;\r\n    }\r\n    \r\n    reset() {\r\n        let now = window.performance.now();\r\n\r\n        this.deltaTime = 0;\r\n        this.hiDeltaTime = 0;\r\n        this.time = now;\r\n        this.previousTimeTime = now;\r\n        this._nextFpsUpdate = now + 1000;\r\n        this._framesThisSecond = 0;\r\n\r\n        this.accumalatorReset();\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n/*\r\nif (this.game.systemInited) {\r\n\r\n    this.time.update(time);\r\n\r\n    if (this._spiraling > 1) {\r\n\r\n        this.time.deltaTime = 0;\r\n        this._spiraling = 0;\r\n        this.time.accumalator = 0;\r\n\r\n        this.render(this.time.accumulatorDelta);\r\n\r\n    } else {\r\n\r\n    var countFrames = 0;\r\n\r\n    while (this.time.accumalator >= this.time.accumulatorDelta) {\r\n\r\n      //  this.time.updateStart = window.performance.now();\r\n\r\n        this.time.deltaTime = Math.min(this.time.accumalator,this.time.accumulatorDelta) / 1000;\r\n\r\n        this.logic(this.time.deltaTime);\r\n\r\n        //this.time.updateLast =  window.performance.now();\r\n      //  this.time.updateAverage = this.time.updateLast - this.time.updateStart;\r\n\r\n        this.time.accumalator -= this.time.accumulatorDelta;\r\n\r\n        countFrames++;\r\n\r\n        this.time.refresh();\r\n\r\n        if (countFrames >= 240) { // SPIRAL\r\n            //panic();\r\n            this.time.accumalator = 0;\r\n\r\n            break;\r\n        }\r\n    }\r\n\r\n      if (countFrames > this._lastFrameCount)\r\n         this._spiraling++;\r\n     else if (countFrames < this._lastFrameCount)\r\n        this._spiraling = 0;\r\n\r\n        this._lastFrameCount = countFrames;\r\n\r\n        this.render(this.time.accumalator/this.time.accumulatorDelta);\r\n\r\n    }\r\n\r\n\r\n\r\n}*/","\r\nexport default function ComputeBounds(bounds, transform, width, height, origin) {\r\n    \r\n  if (origin === undefined) origin = {x:0,y:0}\r\n\r\n    let top = transform.matrix.transformPoint(-origin.x, -origin.y);\r\n    let left = transform.matrix.transformPoint(width - origin.x, -origin.y);\r\n    let bottom = transform.matrix.transformPoint(-origin.x, height - origin.y);\r\n    let right = transform.matrix.transformPoint(width - origin.x, height - origin.y);\r\n  \r\n    bounds.min.x = Math.min(top.x,left.x,bottom.x,right.x);\r\n    bounds.min.y = Math.min(top.y,left.y,bottom.y,right.y);\r\n    bounds.max.x = Math.max(top.x,left.x,bottom.x,right.x);\r\n    bounds.max.y = Math.max(top.y,left.y,bottom.y,right.y);\r\n  \r\n  }","\r\n\r\nexport default function ComputeDelimiterPoint(x, y, rotation, anchor) {\r\n\r\n    let coord = {x:0, y:0};\r\n\r\n\r\n    if (anchor === undefined) {\r\n        coord.x = (x * rotation.x) - (y * rotation.y);\r\n        coord.y = (x * rotation.y) - (y * rotation.x);\r\n    } else {\r\n      \r\n        \r\n        let xa = x - anchor.x;\r\n        let ya = y - anchor.y;\r\n    // cx = anchor.x + ((x-anchor.x) * Math.cos(rotation)) - ((y-anchor.y) * Math.sin(rotation));\r\n        coord.x = anchor.x + (xa * rotation.x) - (ya * rotation.y);\r\n    // cy = anchor.y - ((x-anchor.x) * Math.sin(rotation)) - ((y-anchor.y) * Math.cos(rotation));\r\n        coord.y = anchor.y - (xa * rotation.y) - (ya * rotation.x);\r\n    }\r\n\r\n    return coord;\r\n}","\r\nimport Vector from '../math/Vector'\r\nimport Matrix from '../math/Matrix'\r\nimport BoundingBox from '../math/BoundingBox'\r\n\r\nexport default class Transform {\r\n\r\n\r\n  constructor() {\r\n\r\n    this.matrix = new Matrix(1);\r\n    this.position = new Vector(0,0, this);\r\n    this.scale = new Vector(1,1, this);\r\n    this.origin = new Vector(0,0, this);\r\n    this.angle = 0;\r\n    this.rotation = 0;\r\n    this._cosSin = {x:1,y:0};\r\n    this._oldRotation = -1;\r\n    this._isDirty = true;\r\n    //this.worldPosition = new Vector(0,0);\r\n    //this.worldScale =  new Vector(1,1);\r\n    //this.worldRotation = 0;\r\n    //this.bounds = new BoundingBox(0,0,1,1); // the full bounds of the node - defined by render\r\n    //this.globalBounds = new BoundingBox(0,0,1,1); // defined by render\r\n  }\r\n\r\n  markDirty() {\r\n    this._isDirty = true;\r\n  }\r\n\r\n    destroy() {\r\n\r\n      delete this.position;\r\n      delete this.scale;\r\n      delete this.matrix;\r\n      delete this.worldPosition;\r\n      delete this.worldScale;\r\n      delete this.origin;\r\n      delete this.bounds;\r\n      delete this.globalBounds;\r\n      delete this._cosSin;\r\n\r\n    }\r\n\r\n    reset() {\r\n      this.matrix.setIdentity();\r\n      this._isDirty = true;\r\n      this._cosSin.x = 1;\r\n      this._cosSin.y = 0;\r\n      this.position.set(0,0);\r\n      this.angle = 0;\r\n      this.rotation = 0;\r\n      this._oldRotation = 0;\r\n      this.origin.set(0,0);\r\n      this.scale.set(0,0);\r\n\r\n    }\r\n  }\r\n\r\n","import ComputeDelimiterPoint from \"./ComputeDelimiterPoint\";\r\n\r\n\r\nexport default function UpdateBounds(bounds, x, y, width, height, cosSin, origin) {\r\n\r\n    let coords = [];\r\n\r\n    coords[0] = ComputeDelimiterPoint( x, y, cosSin, origin);\r\n    coords[1] = ComputeDelimiterPoint( x + width,  y, cosSin, origin);\r\n    coords[2] = ComputeDelimiterPoint( x, y + height, cosSin, origin);\r\n    coords[3] = ComputeDelimiterPoint( x + width , y + height, cosSin, origin);\r\n  \r\n    bounds.min.x = Math.min(coords[0].x,coords[1].x,coords[2].x,coords[3].x);\r\n    bounds.min.y = Math.min(coords[0].y,coords[1].y,coords[2].y,coords[3].y);\r\n\r\n    bounds.max.x = Math.max(coords[0].x,coords[1].x,coords[2].x,coords[3].x);\r\n    bounds.max.y = Math.max(coords[0].y,coords[1].y,coords[2].y,coords[3].y);\r\n\r\n    \r\n\r\n}","\r\nimport MathUtils from '../math/MathUtils'\r\nimport Matrix from '../math/Matrix'\r\n\r\n/*\r\n\r\n* | a | b | x |\r\n* | c | d | y |\r\n* | 0 | 0 | 1 |\r\n\r\n* | 0 | 3 | 6 | * | a | d | x |\r\n* | 1 | 4 | 7 | * | b | e | y |\r\n* | 2 | 5 | 8 | * | c | f | 1 |\r\n\r\n*/\r\n\r\nexport default function UpdateTransform(transform, parentTransform) {\r\n\r\n    //if (parentMatrix === undefined) parentMatrix = null;\r\n    if (!transform._isDirty && !parentTransform._isDirty)\r\n        return;\r\n\r\n\r\n    transform.rotation = transform.angle * MathUtils.degToRad;\r\n\r\n     // if (transform.rotation % MathUtils.TAU) {\r\n      \r\n\r\n        if (transform.rotation !== transform._oldRotation)\r\n        {\r\n            transform._oldRotation = transform.rotation;\r\n            transform._cosSin.y = Math.sin(transform.rotation);\r\n            transform._cosSin.x = Math.cos(transform.rotation);\r\n        }\r\n\r\n\r\n        transform.matrix.setModelMatrix(\r\n          transform.position, \r\n          transform.scale, \r\n          transform._cosSin, \r\n          transform.origin)\r\n        .concat(parentTransform.matrix);\r\n\r\n\r\n\r\n     // } else {\r\n\r\n        /*a  = transform.scale.x;\r\n        d  = transform.scale.y;\r\n        x =  transform.position.x;\r\n        y =  transform.position.y;\r\n        x -= transform.origin.x * a;\r\n        y -= transform.origin.y * d;\r\n\r\n        wt.a  = a  * pt.a;\r\n        wt.b  = a  * pt.b;\r\n        wt.c  = d  * pt.c;\r\n        wt.d  = d  * pt.d;\r\n        wt.x = x * pt.a + y * pt.c + pt.x;\r\n        wt.y = x * pt.b + y * pt.d + pt.y;*/\r\n\r\n\r\n    //  }\r\n\r\n      //transform.worldPosition.set(wt.x ,wt.y);\r\n      //transform.worldScale.set(Math.sqrt(wt.a * wt.a + wt.b * wt.b), Math.sqrt(wt.c * wt.c + wt.d * wt.d));\r\n      //transform.worldRotation = Math.atan2(-wt.c, wt.d);\r\n    \r\n}\r\n","\r\nimport MathUtils from '../math/MathUtils'\r\nimport Vector from '../math/Vector'\r\nimport ComputeDelimiterPoint from './ComputeDelimiterPoint';\r\n\r\n\r\n\r\nexport default function UpdateTransformBounds(bounds, frame, transform) {\r\n    \r\n  let coords = [];\r\n /* let scale = Vector.abs(transform.scale);\r\n  let pos = transform.position;\r\n  let anchor = transform.origin;\r\n  let size = {\r\n    x : frame.width * scale.x,\r\n    y : frame.height * scale.y\r\n  };\r\n\r\n  anchor.x *= scale.x;\r\n  anchor.y *= scale.y;\r\n  pos.x -= anchor.x;\r\n  pos.y -= anchor.y;\r\n  anchor.x += pos.x;\r\n  anchor.y += pos.y;*/\r\n  \r\n  //coords[0] = ComputeDelimiterPoint( pos.x, pos.y, transform._cosSin, anchor);\r\n  //coords[1] = ComputeDelimiterPoint( pos.x + size.x,  pos.y, transform._cosSin, anchor);\r\n  //coords[2] = ComputeDelimiterPoint( pos.x , pos.y + size.y, transform._cosSin, anchor);\r\n  //coords[3] = ComputeDelimiterPoint( pos.x + size.x , pos.y + size.y, transform._cosSin, anchor);\r\n\r\n  let top = transform.matrix.transformPoint(0, 0);\r\n  let left = transform.matrix.transformPoint(frame.width, 0);\r\n  let bottom = transform.matrix.transformPoint(0, frame.height);\r\n  let right = transform.matrix.transformPoint(frame.width, frame.height);\r\n\r\n  bounds.min.x = Math.min(top.x,left.x,bottom.x,right.x);\r\n  bounds.min.y = Math.min(top.y,left.y,bottom.y,right.y);\r\n  bounds.max.x = Math.max(top.x,left.x,bottom.x,right.x);\r\n  bounds.max.y = Math.max(top.y,left.y,bottom.y,right.y);\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n  // position (vector)\r\n  // scale (vector)\r\n  // rotation (vector x = cos, y = sin)\r\n  /*\r\n  setup(pos, scale, rotation, anchor, width, height) {\r\n\r\n    var coords = [];\r\n    var negx = 1;\r\n    var negy = 1;\r\n\r\n    if (scale.x < 0)\r\n          negx = -1;\r\n    if (scale.y < 0)\r\n          negy = -1;\r\n\r\n\r\n\r\n    this.size.x = width*scale.x*negx;\r\n    this.size.y = height*scale.y*negy;\r\n    anchor.x *= scale.x*negx;\r\n    anchor.y *= scale.y*negy;\r\n    pos.x -= anchor.x;\r\n    pos.y -= anchor.y;\r\n    anchor.x += pos.x;\r\n    anchor.y += pos.y;\r\n\r\n    var callback = null;\r\n\r\n    if (rotation instanceof  scintilla.Vector)\r\n        callback = this['calcCoordsCosSin'];\r\n      else\r\n        callback = this['calcCoords'];\r\n\r\n    coords[0] = callback( pos.x, pos.y, anchor, rotation);\r\n    coords[1] = callback( pos.x + this.size.x,  pos.y, anchor,rotation);\r\n\r\n    coords[2] = callback( pos.x , pos.y + this.size.y, anchor,rotation);\r\n    coords[3] = callback( pos.x + this.size.x , pos.y + this.size.y,anchor, rotation);\r\n\r\n\r\n\r\n    this.min.x = Math.min(coords[0].x,coords[1].x,coords[2].x,coords[3].x);\r\n    this.min.y = Math.min(coords[0].y,coords[1].y,coords[2].y,coords[3].y);\r\n\r\n    this.max.x = Math.max(coords[0].x,coords[1].x,coords[2].x,coords[3].x);\r\n    this.max.y = Math.max(coords[0].y,coords[1].y,coords[2].y,coords[3].y);\r\n    this.center.x = pos.x+(this.max.x-this.min.x)/2;\r\n    this.center.y = pos.y+(this.max.y-this.min.y)/2;\r\n    this.box.set(this.min.x,this.min.y,this.max.x-this.min.x,this.max.y-this.min.y);\r\n\r\n  }\r\n\r\n\r\n  setByGameObject(gameObject, local) {\r\n\r\n    //if (gameObject.render != null) {\r\n\r\n      if (local) {\r\n        this.setup(gameObject.position,\r\n                gameObject.scale,\r\n                gameObject._cosSin,\r\n                gameObject.render.origin,\r\n                gameObject.render.width,\r\n                gameObject.render.height\r\n              );\r\n      } else {\r\n\r\n        var frame = gameObject.component['render'].frame;\r\n\r\n        var pos = {x:gameObject.worldPosition.x, y:gameObject.worldPosition.y};\r\n        var org = {\r\n          x:gameObject.origin.x * frame.width,\r\n          y:gameObject.origin.y * frame.height};\r\n\r\n        pos.x += gameObject.game.camera.view.x;\r\n        pos.y += gameObject.game.camera.view.y;\r\n\r\n        this.setup(pos,\r\n                gameObject.worldScale,\r\n                gameObject.worldRotation,\r\n                org,\r\n                frame.width,\r\n                frame.height\r\n              );\r\n      }\r\n\r\n\r\n    return this;\r\n\r\n\r\n  }\r\n\r\n\r\n  setByShape(shape,position) {\r\n\r\n\r\n    var minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;\r\n    var type = shape.getType();\r\n\r\n    if (type == \"Polygon\") {\r\n\r\n      var points = shape.getPoints();\r\n\r\n      points.forEach(function (point) {\r\n          minX = Math.min(minX, point.x);\r\n          minY = Math.min(minY, point.y);\r\n          maxX = Math.max(maxX, point.x);\r\n          maxY = Math.max(maxY, point.y);\r\n\r\n      });\r\n    }\r\n\r\n    if (position !== undefined) {\r\n      minX += position.x;\r\n      minY += position.y;\r\n      maxX += position.x;\r\n      maxY += position.y;\r\n    }\r\n\r\n\r\n    this.min.set(minX,minY);\r\n    this.max.set(maxX,maxY)\r\n    this.box.set(minX,minY,maxX-minX,maxY-minY);\r\n\r\n  }\r\n\r\n  calcCoordsCosSin(x, y, anchor, cos_and_sin) {\r\n\r\n    var coord = {x:0,y:0};\r\n\r\n    coord.x = anchor.x + ((x-anchor.x) * cos_and_sin.x) - ((y-anchor.y) * cos_and_sin.y);\r\n    coord.y = anchor.y - ((x-anchor.x) * cos_and_sin.y) - ((y-anchor.y) * cos_and_sin.x);\r\n\r\n      return coord;\r\n\r\n  }\r\n\r\n  calcCoords(x,y,anchor,rotation) {\r\n\r\n    var coord = {x:0,y:0};\r\n\r\n    coord.x = anchor.x + ((x-anchor.x) * Math.cos(rotation)) - ((y-anchor.y) * Math.sin(rotation));\r\n    coord.y = anchor.y - ((x-anchor.x) * Math.sin(rotation)) - ((y-anchor.y) * Math.cos(rotation));\r\n\r\n      return coord;\r\n\r\n  }*/","\r\nconst Base64Utils = {\r\n    decode(str) {\r\n        return window.atob(str);\r\n        // Base64.decode(encodedString);\r\n    },\r\n\r\n    decodeToUint32(str) {\r\n        let bin = window.atob(str);\r\n        let len = bin.length;\r\n        let bytes = new Array(len);\r\n\r\n        for (let i = 0; i < len; i += 4) {\r\n            bytes[i / 4] = (\r\n                bin.charCodeAt(i) |\r\n                bin.charCodeAt(i + 1) << 8 |\r\n                bin.charCodeAt(i + 2) << 16 |\r\n                bin.charCodeAt(i + 3) << 24\r\n            ) >>> 0;\r\n        }\r\n\r\n        return bytes;\r\n    },\r\n\r\n    encode(str) {\r\n        return window.btoa(str);\r\n        // Base64.encode(string);\r\n    }\r\n}\r\n\r\n\r\nObject.freeze(Base64Utils);\r\n\r\nmodule.exports = Base64Utils;","\r\nexport const Color = {\r\n\r\nrgba : function(r,g,b,a) {\r\n\r\n  return 'rgba(' + r.toString() + ',' + g.toString() + ',' + b.toString() + ',' + (a / 255).toString() + ')';\r\n\r\n},\r\n\r\n/*\r\nSource code: https://github.com/mjackson/mjijackson.github.com/blob/master/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript.txt\r\n*/\r\nHSLtoRGB : function(h,s,l,a) {\r\n\r\n  var alp = 255;\r\n\r\n  if (a !== undefined || a !== null)\r\n    alp = a;\r\n\r\n  h = h / 255.0;\r\n  s = s / 255.0;\r\n  l = l / 255.0;\r\n\r\n  var result = {r:l,b:l,g:l};\r\n\r\n  if (s !== 0)\r\n  {\r\n      var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n      var p = 2 * l - q;\r\n      result.r = this.hueToColor(p, q, h + 1 / 3);\r\n      result.g = this.hueToColor(p, q, h);\r\n      result.b = this.hueToColor(p, q, h - 1 / 3);\r\n  }\r\n\r\n  result.r = Math.floor((result.r * 255));\r\n  result.g = Math.floor((result.g * 255));\r\n  result.b = Math.floor((result.b * 255));\r\n\r\n\r\n  return this.rgba(result.r,result.g,result.b,alp);\r\n\r\n},\r\n\r\n/*\r\nSource code: https://github.com/mjackson/mjijackson.github.com/blob/master/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript.txt\r\n*/\r\nhueToColor : function(p, q, t) {\r\n\r\n  if (t < 0)\r\n    t += 1;\r\n\r\n  if (t > 1)\r\n    t -= 1;\r\n\r\n  if (t < 1 / 6)\r\n      return p + (q - p) * 6 * t;\r\n\r\n  if (t < 1 / 2)\r\n      return q;\r\n\r\n  if (t < 2 / 3)\r\n      return p + (q - p) * (2 / 3 - t) * 6;\r\n\r\n  return p;\r\n\r\n},\r\n\r\n/*\r\nSource code: http://jsfiddle.net/mushigh/myoskaos/\r\n*/\r\nrgbToHex : function(r,g,b) {\r\n\r\n  return \"#\" + this.componentToHex(r) + this.componentToHex(g) + this.componentToHex(b);\r\n\r\n},\r\n\r\n/*\r\nSource code: http://jsfiddle.net/mushigh/myoskaos/\r\n*/\r\ncomponentToHex : function(c) {\r\n    var hex = c.toString(16);\r\n    return hex.length == 1 ? \"0\" + hex : hex;\r\n}\r\n\r\n}\r\n\r\n\r\nObject.freeze(Color);\r\n\r\nexport default Color;\r\n\r\nmodule.exports = Color;\r\n","\r\nconst Path = {\r\n\r\n  getExtension(filename) {\r\n    return filename.substring(filename.lastIndexOf('.')+1, filename.length) || \"\";\r\n  },\r\n\r\n  getFilename(path) {\r\n    return path.split('\\\\').pop().split('/').pop() || path;\r\n  },\r\n  \r\n  getFilenameWithoutExtension(path) {\r\n    return this.removeExtension(this.getFilename(path));\r\n  },\r\n\r\n  removeExtension(path) {\r\n    return path.substr(0, path.lastIndexOf('.')) || path;\r\n  },\r\n\r\n  getPath(path) {\r\n    return path.substr(0, path.lastIndexOf(\"/\") + 1) || \"\";\r\n  },\r\n\r\n  getRootPath(path) {\r\n    return path.substr(0, path.indexOf(\"/\") + 1) || path;\r\n  },\r\n\r\n  getPathWithoutRoot(path) {\r\n    let s = (path.indexOf(\"/\") + 1) || 0;\r\n    let l = (path.lastIndexOf(\"/\") - s + 1) || path.length;\r\n    return path.substr(s, l) || path;\r\n  },\r\n\r\n  getDirectoryName(path) {\r\n      let dir = path.split('/');\r\n      let len = dir.length;\r\n      if (len <= 1)\r\n        return dir[dir.length - 1];\r\n      else\r\n        return dir[dir.length - 2];\r\n  },\r\n\r\n  getURL(url, baseURL) {\r\n    if (!url)\r\n        return null;\r\n    \r\n        \r\n    if (url.match(/^(?:blob:|data:|http:\\/\\/|https:\\/\\/|\\/\\/)/))\r\n        return url;\r\n    else\r\n        return baseURL + url;\r\n  }\r\n\r\n}\r\n\r\nObject.freeze(Path);\r\n\r\nexport default Path;\r\n\r\nmodule.exports = Path;","\r\nconst Validate = {\r\n    isFunction(value) {\r\n        return (value instanceof Function)\r\n    },\r\n\r\n    isClass(value) {\r\n        return !!(value && value.constructor && value.call && value.apply);\r\n    },\r\n\r\n    isArray(value) {\r\n        return Array.isArray(value);\r\n    },\r\n\r\n    isNumber(value) {\r\n        return !isNaN(value);\r\n    }\r\n}\r\n\r\nObject.freeze(Validate);\r\n\r\nexport default Validate;\r\n\r\nmodule.exports = Validate;","\r\n\r\nexport default function ObjectExtend(source, target, deepCopy) {\r\n\r\n    let argsLength = arguments.length;\r\n    target = arguments[1] || {},\r\n    deepCopy = deepCopy || false;\r\n\r\n    for(let property in source){\r\n\r\n        \r\n        let src = source[property];\r\n        let dst = target[property];\r\n\r\n        if (deepCopy) {\r\n\r\n            // TODO\r\n            /*\r\n            if(\t\r\n            x !== \"super\" && //Never clone the super referance\r\n            from[x] instanceof Function && //Only overwrite functions\r\n            !(from[x].prototype instanceof Class) //Never overwrite referances to classes\r\n        ){\r\n            //Never create circular super referances.\r\n            to[x] = from[x].super || superCopy(from, from[x]);\r\n        }\r\n            */\r\n\r\n        } else if (dst === undefined) {\r\n            target[property] = src;\r\n        }\r\n\r\n\r\n\r\n        \r\n    }\r\n\r\n}","\r\nclass ObjectGettter {\r\n\r\n  value(obj, key, defaultValue)\r\n  {\r\n    var type = typeof(obj);\r\n\r\n    if (!obj || type === 'number' || type === 'string')\r\n        return defaultValue;\r\n    else if (obj.hasOwnProperty(key) && obj[key] !== undefined)\r\n        return obj[key];\r\n    else\r\n        return defaultValue;\r\n\r\n  }\r\n\r\n  // Get value in complex object\r\n  propertyValue(source, key, defaultValue)\r\n    {\r\n        if (!source || typeof source === 'number')\r\n            return defaultValue;\r\n        else if (source.hasOwnProperty(key))\r\n            return source[key];\r\n        else if (key.indexOf('.'))\r\n        {\r\n            var keys = key.split('.');\r\n            var parent = source;\r\n            var value = defaultValue;\r\n\r\n            for (var i = 0; i < keys.length; i++)\r\n            {\r\n                if (parent.hasOwnProperty(keys[i]))\r\n                {\r\n                    value = parent[keys[i]];\r\n                    parent = parent[keys[i]];\r\n                }\r\n                else\r\n                {\r\n                    value = defaultValue;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            return value;\r\n        }\r\n        else\r\n        {\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n  \r\n\r\n};\r\n\r\nvar ObjectGet = new ObjectGettter();\r\n\r\nObject.freeze(ObjectGet);\r\n\r\nexport default ObjectGet;"],"sourceRoot":""}