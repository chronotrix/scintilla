!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Scintilla",[],e):"object"==typeof exports?exports.Scintilla=e():t.Scintilla=e()}(window,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=365)}([function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(336),a=(n=r)&&n.__esModule?n:{default:n};e.default=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,a.default)(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}()},function(t,e,i){t.exports={default:i(307),__esModule:!0}},function(t,e,i){"use strict";e.__esModule=!0;var n=u(i(305)),r=u(i(301)),a=u(i(12));function u(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,a.default)(e)));t.prototype=(0,r.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(n.default?(0,n.default)(t,e):t.__proto__=e)}},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(12),a=(n=r)&&n.__esModule?n:{default:n};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,a.default)(e))&&"function"!=typeof e?t:e}},function(t,e,i){t.exports={default:i(338),__esModule:!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={NONE:0,IDLE:1,PENDING:2,LOADING:3,PROCESSING:4,ERROR:5,FINISHED:6,DONE:7}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),r=u(i(1)),a=u(i(69));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i){if((0,n.default)(this,t),this.unique=i||!0,this.childs=[],null!==e&&Array.isArray(e))for(var r=0;r<e.length;r++)this.push(e[r])}return(0,r.default)(t,[{key:"first",value:function(){return this.childs.length>0?this.childs[0]:null}},{key:"last",value:function(){if(this.childs.length>0){var t=this.childs.length-1;return this.childs[t]}return null}},{key:"push",value:function(t){return this.unique?-1===this.indexOf(t)&&this.childs.push(t):this.childs.push(t),t}},{key:"pushFront",value:function(t){return this.unique?-1===this.indexOf(t)&&this.childs.unshift(t):this.childs.unshift(t),t}},{key:"insert",value:function(t,e){return void 0===e&&(e=0),0===this.childs.length?this.push(t):(e>=0&&e<=this.childs.length&&(this.unique?-1===this.indexOf(t)&&this.childs.splice(e,0,t):this.childs.splice(e,0,t)),t)}},{key:"indexOf",value:function(t){return this.childs.indexOf(t)}},{key:"get",value:function(t){return this.childs[t]}},{key:"at",value:function(t){return this.childs[t]}},{key:"erase",value:function(t){var e=this.childs.indexOf(t),i=null;return-1!==e&&(i=this.childs.splice(e,1)),i}},{key:"eraseAt",value:function(t){var e=this.childs[t];return e&&this.childs.splice(t,1),e}},{key:"eraseList",value:function(t,e,i){if(void 0===i&&(i=!1),Array.isArray(t)){void 0===e&&(e=t.length);for(var n=0;n<e;n++){var r=t[n];this.erase(r)}}else{void 0===e&&(e=t.size);for(var a=0;a<e;a++){var u=t.childs[a];this.erase(u)}}}},{key:"eraseIndexedList",value:function(t){var e=t.length;if(Array.isArray(t))for(var i=0;i<e;i++){var n=t[i];this.eraseAt(n)}else for(var r=0;r<e;r++){var a=t.childs[r];this.eraseAt(a)}return this}},{key:"pop",value:function(){return this.childs.pop()}},{key:"popFront",value:function(){return this.childs.shift()}},{key:"has",value:function(t){return this.childs.indexOf(t)>-1}},{key:"hasAt",value:function(t){return void 0!==this.childs[t]}},{key:"empty",value:function(){return 0===this.childs.length}},{key:"clear",value:function(){return this.childs.length=0,this}},{key:"splice",value:function(t,e,i){return void 0===i?this.childs.splice(t,e):this.childs.splice(t,e,i)}},{key:"destroy",value:function(){this.clear(),this.childs=[],this.parent=null}},{key:"concat",value:function(t,e){return void 0===e&&(e=!1),this.childs=e?this.childs.concat(t.childs.splice(0)):this.childs.concat(t.childs),this}},{key:"each",value:function(t){for(var e=[],i=this.childs,n=void 0,r=1;r<arguments.length;r++)e.push(arguments[r]);for(var a=0;a<i.length;a++)if(void 0!==(n=t(i[a],a,e)))return n;return n}},{key:"sort",value:function(t){if(void 0!==t)return(0,a.default)(this.childs,t)}},{key:"find",value:function(t){if(void 0!==t){for(var e=this.childs.length,i=0;i<e;i++)if(t(this.childs[i]))return this.childs[i];return null}}},{key:"swap",value:function(t,e){if(t!==e){var i=this.indexOf(t),n=this.indexOf(e);if(i<0||n<0)throw new Error("DataList.swap: Could not swap childrens. The objects are not in the list.");return this.list[i]=t,this.list[n]=e,this}}},{key:"swapByIndex",value:function(t,e){if(t!==e){var i=this.at(t),n=this.at(e);if(void 0===i||void 0===n)throw new Error("DataList.swapByIndex: Could not swap childrens by index. The objects are not in the list.");return this.list[t]=i,this.list[e]=n,this}}},{key:"reverse",value:function(){return this.childs.reverse(),this}},{key:"content",value:function(){return this.childs}},{key:"size",get:function(){return this.childs.length}},{key:"length",get:function(){return this.childs.length}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(5),a=(n=r)&&n.__esModule?n:{default:n};var u={toRadian:Math.PI/180,toDegree:180/Math.PI,TAU:2*Math.PI,EPSILON:Math.pow(2,-52),HALFPI:1.5707963267948966,floor:function(t){return t>>0},round:function(t){return~~(.5+t)},abs:function(t){return t<0?-t:t},max:function(t,e){return t<e?e:t},min:function(t,e){return e<t?e:t},sign:function(t){return t<0?-1:t>0?1:0},clamp:function(t,e,i){return t>e?t<i?t:i:e},lerp:function(t,e,i){return(1-i)*t+i*e},clampedLerp:function(t,e,i){return i=u.clamp(i,0,1),u.lerp(t,e,i)},impreciseLerp:function(t,e,i){return t+i*(e-t)},distance:function(t,e,i,n){return Math.sqrt((t-=i)*t+(e-=n)*e)},angleBetween:function(t,e,i,n){var r=this.toDegree(Math.atan2(n-e,i-t));return r<0&&r>=-180&&(r=360+r),r},radianToDegree:function(t){return t*u.toDegree},degreeToRadian:function(t){return t*u.toRadian},manhattan:function(t,e,i,n){return{x:u.abs(i-t),y:u.abs(n-e)}},inManhattanRadius:function(t,e,i,n,r,a){void 0===a&&(a=r);var u=this.manhattan(t,e,i,n);return u.x<=r&&u.y<=a},average:function(){var t=arguments.length;return 0===t?0:this.sum.apply(this,arguments)/t},sum:function(){var t=arguments.length;if(0===t)return 0;for(var e=arguments[0],i=1;i<t;i++)e+=arguments[i];return e},sub:function(){var t=arguments.length;if(0===t)return 0;for(var e=arguments[0],i=1;i<t;i++)e-=arguments[i];return e},lerpAngle:function(t,e,i){var n=e,r=t;Math.abs(n-r)>180&&(n>r?r+=360:n+=360);var a=r+(n-r)*i;return a>=0&&a<=360?a:a%360}};(0,a.default)(u),e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(5)),r=s(i(12)),a=s(i(0)),u=s(i(1));function s(t){return t&&t.__esModule?t:{default:t}}var o=new(function(){function t(){(0,a.default)(this,t)}return(0,u.default)(t,[{key:"value",value:function(t,e,i){var n=void 0===t?"undefined":(0,r.default)(t);return t&&"number"!==n&&"string"!==n&&t.hasOwnProperty(e)&&void 0!==t[e]?t[e]:i}},{key:"propertyValue",value:function(t,e,i){if(t&&"number"!=typeof t){if(t.hasOwnProperty(e))return t[e];if(e.indexOf(".")){for(var n=e.split("."),r=t,a=i,u=0;u<n.length;u++){if(!r.hasOwnProperty(n[u])){a=i;break}a=r[n[u]],r=r[n[u]]}return a}return i}return i}}]),t}());(0,n.default)(o),e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameSystems=void 0;var n,r=i(50);(n=r)&&n.__esModule;var a=e.GameSystems={},u={register:function(t,e,i,n){a[t]={name:i,system:e,init:n}}};e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(5);var a={none:0,image:1,audio:2,text:3,svg:4,script:5,json:6,webFont:7,tilemapJSON:8,spritesheet:9,animMachine:10};(0,((n=r)&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var n=u(i(363)),r=u(i(347)),a="function"==typeof r.default&&"symbol"==typeof n.default?function(t){return typeof t}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":typeof t};function u(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof r.default&&"symbol"===a(n.default)?function(t){return void 0===t?"undefined":a(t)}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":void 0===t?"undefined":a(t)}},function(t,e){var i=t.exports={version:"2.5.4"};"number"==typeof __e&&(__e=i)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(182);var a=new((n=r)&&n.__esModule?n:{default:n}).default;e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(i(0)),r=d(i(1)),a=d(i(8)),u=d(i(267)),s=d(i(65)),o=d(i(27)),l=(d(i(262)),d(i(261)));function d(t){return t&&t.__esModule?t:{default:t}}function f(t){t._css="rgba("+t._r+","+t._g+","+t._b+","+t._a+")"}var c=function(){function t(e,i,r,a){(0,n.default)(this,t),this._r=e||0,this._g=i||0,this._b=r||0,this._a=a||1,this._css=null,f(this)}return(0,r.default)(t,[{key:"set",value:function(t){return(0,l.default)(this,t),f(this),this}},{key:"setNorm",value:function(t,e,i,n){if(void 0!==t)return this._r=Math.round(255*t),this._g=Math.round(255*e),this._b=Math.round(255*i),void 0!==n&&(this._a=Math.round(255*n)),f(this),this}},{key:"setRGB",value:function(t,e,i){return this.setRGBA(t,e,i,255)}},{key:"setRGBA",value:function(t,e,i,n){return void 0===t?this:(this._r=t||0,this._g=e||0,this._b=i||0,void 0!==n&&(this._a=n),f(this),this)}},{key:"setColor",value:function(t,e){return this._r=t.r,this._g=t.g,this._b=t.b,this._a=void 0!==e?e:t.a,f(this),this}},{key:"parse",value:function(t){var e=(0,u.default)(t);return this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a,f(this),this}},{key:"lerp",value:function(t,e){return this._r=a.default.lerp(this._r,t.r),this._g=a.default.lerp(this._g,t.g),this._b=a.default.lerp(this._b,t.b),this._a=a.default.lerp(this._a,t.a),f(this),this}},{key:"to32",value:function(){}},{key:"toCSS",value:function(){}},{key:"toInt",value:function(){}},{key:"toHex",value:function(){}},{key:"rgba",get:function(){return this._css}},{key:"r",get:function(){return this._r}},{key:"g",get:function(){return this._g}},{key:"b",get:function(){return this._b}},{key:"a",get:function(){return this._a},set:function(t){this._a=t,f(this)}}],[{key:"ease",value:function(e,i,n,r,a,u,l){void 0===r&&(r=o.default.LINEAR),void 0===a&&(a=0),void 0===u&&(u=3);var d=s.default.in;switch(a){case 1:d=s.default.out;break;case 2:d=s.default.inout}return void 0===l&&(l=new t),l.set(d.by(r,e.r,i.r,n,u),d.by(r,e.g,i.g,n,u),d.by(r,e.b,i.b,n,u),d.by(r,e.a,i.a,n,u)),l}},{key:"red",get:function(){return new t(255,0,0)}},{key:"green",get:function(){return new t(0,255,0)}},{key:"blue",get:function(){return new t(0,0,255)}},{key:"cyan",get:function(){return new t(0,255,255)}},{key:"magenta",get:function(){return new t(255,0,255)}},{key:"yellow",get:function(){return new t(255,255,0)}},{key:"black",get:function(){return new t(0)}},{key:"white",get:function(){return new t(255)}},{key:"gray",get:function(){return new t(127.5)}},{key:"transparent",get:function(){return new t(0,0,0,0)}}]),t}();e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(5);var a={None:-1,Image:0,Tilemap:1,Animation:2,Spritesheet:3,AnimationMachine:4};(0,((n=r)&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(297)),r=u(i(0)),a=u(i(1));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){(0,r.default)(this,t),this._content={},this._size=0}return(0,a.default)(t,[{key:"set",value:function(t,e){return this.has(t)||this._size++,this._content[t]=e,this}},{key:"get",value:function(t){return void 0===t?null:this.has(t)?this._content[t]:null}},{key:"at",value:function(t){var e=0;for(var i in this._content){if(t===e)return this._content[i];e++}return null}},{key:"has",value:function(t){return this._content.hasOwnProperty(t)}},{key:"contains",value:function(t){for(var e in this._content)if(entries[e]===t)return!0;return!1}},{key:"keys",value:function(){return(0,n.default)(this._content)}},{key:"values",value:function(){var t=[],e=this._content;for(var i in e)t.push(entries[i]);return t}},{key:"remove",value:function(t){if(!this.has(t))return null;var e=this._content[t];return delete this._content[t],this._size--,e}},{key:"erase",value:function(t){return!!this.has(t)&&(delete this._content[t],this._size--,!0)}},{key:"eraseList",value:function(t){if(void 0===t)return this;var e=t.length;if(Array.isArray(t))for(var i=0;i<e;i++){var n=t[i];this.erase(n)}return this}},{key:"clear",value:function(){for(var t in this._content)delete this._content[t];return this._size=0,this}},{key:"slowSize",value:function(){return(0,n.default)(_contents).length}},{key:"each",value:function(t){var e=this._content;for(var i in e)if(!1===t(i,e[i]))break;return this}},{key:"find",value:function(t){if(void 0!==t){var e=this._content;for(var i in e)if(t(i,e[i]))return e[i];return null}}},{key:"size",get:function(){return this._size}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(0)),r=f(i(1)),a=f(i(9)),u=f(i(56)),s=f(i(6)),o=f(i(11)),l=f(i(55)),d=f(i(22));function f(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){if((0,n.default)(this,t),this.type=a.default.value(e,"type",null),this.tag=a.default.value(e,"tag",null),this.useExternal=a.default.value(e,"useExternal",!1),null===this.type||null===this.tag)throw new Error("Loader.File: Invalid tag.");this.url=a.default.value(e,"url",void 0),void 0===this.url?this.url=a.default.value(e,"path","")+this.tag+"."+a.default.value(e,"ext",""):"function"!=typeof this.url&&(this.useExternal&&void 0===this.useExternal||(this.url=a.default.value(e,"path","").concat(this.url))),this.type===o.default.webFont&&this.type===o.default.spritesheet||(this.xhrSettings=u.default.createSettings(a.default.value(e,"responseType",void 0)),a.default.value(e,"xhrSettings",!1)&&(this.xhrSettings=u.default.merge(this.xhrSettings,a.default.value(e,"xhrSettings",{})))),this.loader=null,this.state=s.default.PENDING,this.totalBytes=0,this.loadedBytes=0,this.progress=0,this.data=void 0,this.source=null,this.xhrRequest=null,this.config=a.default.value(e,"config",{}),this.crossOrigin=void 0,this.onComplete=void 0}return(0,r.default)(t,[{key:"load",value:function(t){this.loader=t,this.state===s.default.FINISHED?(this.onDone(),l.default.call(this.loader,this)):(this.source=d.default.getURL(this.url,t.baseURL),0===this.source.indexOf("data:")||null==this.source?console.warn("Loader.File.load: unsupported URI."):this.xhrRequest=u.default.createFileRequest(this,t.xhr))}},{key:"onLoad",value:function(t){this.clearXHR(),t.target&&200!==t.target.status?l.default.call(this.loader,this):(void 0!==this.onPostLoad&&this.onPostLoad(this.loader,this.xhrRequest),l.default.call(this.loader,this))}},{key:"onError",value:function(t){console.error('Loader.File: Error on load file: "'+this.url+'".'),this.clearXHR(),l.default.call(this.loader,this)}},{key:"onProgress",value:function(t){t.lengthComputable&&(this.loadedBytes=t.loaded,this.totalBytes=t.total,this.progress=Math.min(this.loadedBytes/this.totalBytes,1))}},{key:"onDone",value:function(){this.state=s.default.DONE,this.loader.game.events.dispatch("file_complete_"+this.tag)}},{key:"onProcessing",value:function(t){this.state=s.default.PROCESSING,this.onDone(),t(this)}},{key:"clearXHR",value:function(){this.xhrRequest&&(this.xhrRequest.onload=void 0,this.xhrRequest.onerror=void 0,this.xhrRequest.onprogress=void 0)}}]),t}();e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){void 0===e&&(e=!0);if(!this.isOK()&&e)return-1;t.type===n.default.webFont&&void 0===this.webFontLoader&&(this.webFontLoader=new r.default("webFontLoader","https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"),this._filesQueue.insert(this.webFontLoader),this._filesQueueCount++,this.game.events.create("file_postload_webFontLoader").subscribeOnce(function(){t.fontLoad()}));return t.path=this.path,this._filesQueue.insert(t),this._filesQueueCount++,t};var n=a(i(11)),r=a(i(91));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(2)),r=l(i(0)),a=l(i(1)),u=l(i(4)),s=l(i(3)),o=l(i(49));l(i(33));function l(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,i){(0,r.default)(this,e);var a=(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,"render",t||"renderable",i));return a._layerID=0,a._depth=0,a._alpha=1,a._depthSorting=0,a._bounds=new o.default,a._originInPixels={x:0,y:0},a._originIsDirty=!0,a}return(0,s.default)(e,t),(0,a.default)(e,[{key:"bounds",get:function(){return this._bounds}},{key:"depth",get:function(){return this._depthSorting},set:function(t){return void 0!==this.entity.game&&t!==this._depthSorting&&(this._depthSorting=t,this.entity.game.system.events.dispatch("__render_layersorting",this._layerID)),this}},{key:"layerName",get:function(){}},{key:"layer",get:function(){return this._layerID},set:function(t){this.game}},{key:"alpha",get:function(){return this._alpha},set:function(t){this._alpha=t}}]),e}(l(i(48)).default);e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(5);var a={isFunction:function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},isClass:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},isArray:function(t){return Array.isArray(t)},isNumber:function(t){return!isNaN(t)},isString:function(t){return"string"==typeof t||t instanceof String}};(0,((n=r)&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(5);var a={getExtension:function(t){return t.substring(t.lastIndexOf(".")+1,t.length)||""},getFilename:function(t){return t.split("\\").pop().split("/").pop()||t},getFilenameWithoutExtension:function(t){return this.removeExtension(this.getFilename(t))},removeExtension:function(t){return t.substr(0,t.lastIndexOf("."))||t},getPath:function(t){return t.substr(0,t.lastIndexOf("/")+1)||""},getRootPath:function(t){return t.substr(0,t.indexOf("/")+1)||t},getPathWithoutRoot:function(t){var e=t.indexOf("/")+1||0,i=t.lastIndexOf("/")-e+1||t.length;return t.substr(e,i)||t},getDirectoryName:function(t){var e=t.split("/");return e.length<=1?e[e.length-1]:e[e.length-2]},getURL:function(t,e){return t?t.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t:e+t:null}};(0,((n=r)&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),r=s(i(1)),a=s(i(17)),u=s(i(130));function s(t){return t&&t.__esModule?t:{default:t}}var o=new(function(){function t(){(0,n.default)(this,t),this.proxyModules=new a.default}return(0,r.default)(t,[{key:"attach",value:function(t,e,i){var n=t.attached;if(n.has(e))throw new Error("ModuleManager.attach: Could not attach module "+e+". Already exists");if(!this.proxyModules.has(e))throw new Error("ModuleManager.attach: Module type "+e+" don't exists.");var r=this.proxyModules.get(e)(t,i);return(0,u.default)(r,t.entity),n.set(r.type,r),"render"===r.type&&t._pendingModulesInitialization.push(r),r}},{key:"register",value:function(t,e){o.proxyModules.has(t)||o.proxyModules.set(t,e)}}]),t}());e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(5);var a={NONE:0,FADEIN:1,FADEOUT:2,FADEINOUT:3,IDLE:4};(0,((n=r)&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EASE_BACK_CONST=void 0;var n,r=i(5),a=(n=r)&&n.__esModule?n:{default:n};var u={NONE:0,STEPPED:1,LINEAR:2,CUT:3,SINE:4,QUADRATIC:5,CUBIC:6,QUARTIC:7,QUINTIC:8,POWER:9,EXPONENTIAL:10,CIRC:11,BACK:12,ELASTIC:13,BOUNCE:14};e.EASE_BACK_CONST=1.70158;(0,a.default)(u),e.default=u},function(t,e,i){var n=i(356),r=i(86);t.exports=function(t){return n(r(t))}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){t.exports=!i(40)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(41),r=i(150),a=i(84),u=Object.defineProperty;e.f=i(30)?Object.defineProperty:function(t,e,i){if(n(t),e=a(e,!0),n(i),r)try{return u(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),r=u(i(1));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i,r,a){(0,n.default)(this,t),this.x=e||0,this.y=i||0,this.width=r||0,this.height=a||0}return(0,r.default)(t,[{key:"set",value:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this}},{key:"setPostion",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setSize",value:function(t,e){return this.width=t,this.height=e,this}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}},{key:"intersects",value:function(e){return t.intersects(this,e)}},{key:"contains",value:function(e,i){return t.contains(this,e,i)}},{key:"center",get:function(){var t={};return t.x=this.x+this.width/2,t.y=this.y+this.height/2,t}}],[{key:"intersects",value:function(t,e){return!(t.width<=0||t.height<=0||e.width<=0||e.height<=0)&&!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)}},{key:"contains",value:function(t,e,i){return!(t.width<=0&&t.height<=0)&&(e>t.x&&e<t.x+t.width&&i>=t.y&&i<t.y+t.height)}},{key:"intersectionArea",value:function(t,e){var i=new scintilla.Rect;return scintilla.Rect.intersects(t,e)&&(i.y=Math.max(a.y,b.y),i.x=Math.max(a.x,b.x),i.width=Math.min(a.x+a.width,b.x+b.width)-i.x,i.height=Math.min(a.y+a.height,b.y+b.height)-i.y),i}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),r=u(i(1)),a=u(i(8));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i,r){(0,n.default)(this,t),this.x=e||0,this.y=i||0,this.managed=r||void 0}return(0,r.default)(t,[{key:"set",value:function(t,e){return this.x=t,this.y=e||t,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"move",value:function(t,e){return this.x+=t,this.y+=e,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"scale",value:function(t,e){return this.x*=t,this.y*=e||t,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"rotate",value:function(t){var e=this.x,i=this.y;return this.x=e*Math.cos(t)-i*Math.sin(t),this.y=e*Math.sin(t)+i*Math.cos(t),void 0!==this.managed&&this.managed.markDirty(),this}},{key:"rotateAround",value:function(t,e){var i=this.x-e.x,n=this.y-e.y,r=Math.cos(t),a=Math.sin(t);return this.x=e.x+(r*i-a*n),this.y=e.y+(a*i+r*n),void 0!==this.managed&&this.managed.markDirty(),this}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"normalize",value:function(){var t=this.length();return t>0&&(this.x=this.x/t,this.y=this.y/t),void 0!==this.managed&&this.managed.markDirty(),this}},{key:"round",value:function(){return this.x=a.default.round(this.x),this.y=a.default.round(this.y),this}},{key:"reverse",value:function(){return this.x=-this.x,this.y=-this.y,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"perp",value:function(){var t=this.x;return this.x=this.y,this.y=-t,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"dot",value:function(e){return t.dot(this,e)}},{key:"project",value:function(e){return t.project(this,e)}},{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"length",value:function(){return Math.sqrt(this.squaredLenght())}},{key:"toString",value:function(){return"{ x: "+this.x+", y: "+this.y+" }"}},{key:"squaredLenght",value:function(){return t.dot(this,this)}},{key:"magnitude",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normal",get:function(){var e=this.magnitude;return new t(this.x/e,this.y/e)}}],[{key:"abs",value:function(e){return new t(Math.abs(e.x),Math.abs(e.y))}},{key:"scalar",value:function(t,e){return t.x*e.y-t.y*e.x}},{key:"distance",value:function(t,e){return a.default.distance(t.x,t.y,e.x,e.y)}},{key:"angleBetween",value:function(t,e){return a.default.angleBetween(t.x,t.y,e.x,e.y)}},{key:"dot",value:function(t,e){return t.x*e.x+t.y*e.y}},{key:"project",value:function(e,i){var n=t.dot(e,i);return new t(n/(i.x*i.x+i.y*i.y)*i.x,n/(i.x*i.x+i.y*i.y)*i.y)}},{key:"projectNormal",value:function(e,i){var n=t.dot(e,i);return new t(n/i.x,n/i.y)}},{key:"reflect",value:function(e,i){var n=t.project(e,i);return n.scale(2),n.sub(e),n}},{key:"reflectNormal",value:function(e,i){var n=t.projectNormal(e,i);return n.scale(2),n.sub(e),n}},{key:"lerp",value:function(e,i,n){return new t(a.default.lerp(e.x,i.x,n),a.default.lerp(e.y,i.y,n))}}]),t}();e.default=s,t.exports=s},function(t,e,i){var n=i(37),r=i(13),a=i(40);t.exports=function(t,e){var i=(r.Object||{})[t]||Object[t],u={};u[t]=e(i),n(n.S+n.F*a(function(){i(1)}),"Object",u)}},function(t,e,i){var n=i(80)("wks"),r=i(51),a=i(26).Symbol,u="function"==typeof a;(t.exports=function(t){return n[t]||(n[t]=u&&a[t]||(u?a:r)("Symbol."+t))}).store=n},function(t,e,i){var n=i(31),r=i(53);t.exports=i(30)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(26),r=i(13),a=i(151),u=i(36),s=i(29),o=function(t,e,i){var l,d,f,c=t&o.F,h=t&o.G,v=t&o.S,y=t&o.P,_=t&o.B,p=t&o.W,m=h?r:r[e]||(r[e]={}),g=m.prototype,M=h?n:v?n[e]:(n[e]||{}).prototype;for(l in h&&(i=e),i)(d=!c&&M&&void 0!==M[l])&&s(m,l)||(f=d?M[l]:i[l],m[l]=h&&"function"!=typeof M[l]?i[l]:_&&d?a(f,n):p&&M[l]==f?function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):y&&"function"==typeof f?a(Function.call,f):f,y&&((m.virtual||(m.virtual={}))[l]=f,t&o.R&&g&&!g[l]&&u(g,l,f)))};o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,o.U=64,o.R=128,t.exports=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(0)),r=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,i){(0,n.default)(this,t),e=e||0,i=i||0,this.a=[],this.a[0]=e,this.a[1]=i,this.a[2]=i,this.a[3]=i,this.a[4]=e,this.a[5]=i,this.a[6]=i,this.a[7]=i,this.a[8]=e}return(0,r.default)(t,[{key:"at",value:function(t,e){return this.a[t+3*e]}},{key:"set",value:function(t,e,i){return this.a[t+3*e]=i,this}},{key:"setIdentity",value:function(){return this.setTransform(1,0,0,0,1,0,0,0,1)}},{key:"setTransform",value:function(t,e,i,n,r,a,u,s,o){return this.a[0]=t,this.a[1]=e,this.a[2]=i,this.a[3]=n,this.a[4]=r,this.a[5]=a,this.a[6]=u,this.a[7]=s,this.a[8]=o,this}},{key:"translate",value:function(t,e){return this.a[6]=this.a[0]*t+this.a[3]*e+this.a[6],this.a[7]=this.a[1]*t+this.a[4]*e+this.a[7],this}},{key:"scale",value:function(t,e){return this.a[0]*=t,this.a[1]*=t,this.a[3]*=e,this.a[4]*=e,this.a[6]*=t,this.a[7]*=e,this}},{key:"rotate",value:function(t){var e=Math.cos(t),i=Math.sin(t);return this.radianRotate(e,i)}},{key:"radianRotate",value:function(t,e){return this.transform(t,e,-e,t,0,0)}},{key:"transform",value:function(t,e,i,n,r,a){var u=this.a[0],s=this.a[1],o=this.a[3],l=this.a[4],d=this.a[6],f=this.a[7];return this.a[0]=t*u+e*o,this.a[1]=t*s+e*l,this.a[3]=i*u+n*o,this.a[4]=i*s+n*l,this.a[6]=r*u+a*o+d,this.a[7]=r*s+a*l+f,this}},{key:"setModelMatrix",value:function(t,e,i,n){return this.a[0]=i.x*e.x,this.a[1]=i.y*e.x,this.a[3]=-i.y*e.y,this.a[4]=i.x*e.y,this.a[6]=t.x,this.a[7]=t.y,this}},{key:"multiply",value:function(t){var e=this.a[0],i=this.a[1],n=this.a[3],r=this.a[4],a=this.a[6],u=this.a[7];return this.a[0]=t.a[0]*e+t.a[1]*n,this.a[1]=t.a[0]*i+t.a[1]*r,this.a[3]=t.a[3]*e+t.a[4]*n,this.a[4]=t.a[3]*i+t.a[4]*r,this.a[6]=t.a[6]*e+t.a[7]*n+a,this.a[7]=t.a[6]*i+t.a[7]*r+u,this}},{key:"concat",value:function(t){var e=this.a[0],i=this.a[1],n=this.a[3],r=this.a[4],a=this.a[6],u=this.a[7];return this.a[0]=e*t.a[0]+i*t.a[3],this.a[1]=e*t.a[1]+i*t.a[4],this.a[3]=n*t.a[0]+r*t.a[3],this.a[4]=n*t.a[1]+r*t.a[4],this.a[6]=a*t.a[0]+u*t.a[3]+t.a[6],this.a[7]=a*t.a[1]+u*t.a[4]+t.a[7],this}},{key:"transformPoint",value:function(t,e){var i={x:0,y:0};return i.x=t*this.a[0]+e*this.a[3]+this.a[6],i.y=t*this.a[1]+e*this.a[4]+this.a[7],i}},{key:"transpose",value:function(){return this.setAll(mat.a[0],mat.a[3],mat.a[6],mat.a[1],mat.a[4],mat.a[7],mat.a[2],mat.a[5],mat.a[8])}},{key:"toString",value:function(){for(var t="",e=0;e<3;e++){for(var i=0;i<3;i++){t+=this.at(i,e)+" "}t+="\n"}return t}}],[{key:"identity",value:function(){return new t(1)}},{key:"zero",value:function(){return new t(0)}},{key:"transpose",value:function(e){return t.zero.setAll(e.a[0],e.a[3],e.a[6],e.a[1],e.a[4],e.a[7],e.a[2],e.a[5],e.a[8])}},{key:"multiplySlow",value:function(e,i){for(var n=t.zero(),r=void 0,a=0;a<3;++a)for(var u=0;u<3;++u)for(var s=0;s<3;++s)r=n.at(a,s),r+=e.at(a,u)*i.at(u,s),n.set(a,s,r);return n}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(0)),r=f(i(1)),a=f(i(333)),u=f(i(331)),s=f(i(330)),o=f(i(329)),l=f(i(141)),d=f(i(325));function f(t){return t&&t.__esModule?t:{default:t}}var c=new(function(){function t(){(0,n.default)(this,t),this._userAgent=navigator.userAgent,this._osInfo=(0,a.default)(this._userAgent),this._browser=(0,u.default)(this._userAgent),this._features=(0,s.default)(this._osInfo),this._audio=(0,o.default)(this._browser),this._fullscreen=(0,d.default)()}return(0,r.default)(t,[{key:"info",get:function(){return this._userAgent}},{key:"platformName",get:function(){return this._osInfo.name}},{key:"mobile",get:function(){return this._osInfo.mobile}},{key:"desktop",get:function(){return this._osInfo.desktop}},{key:"os",get:function(){return this._osInfo.os}},{key:"environment",get:function(){return this._osInfo.environment}},{key:"browserName",get:function(){return this._browser.name}},{key:"browserVersion",get:function(){return this._browser.version}},{key:"features",get:function(){return this._features}},{key:"fullscreenInfo",get:function(){return this._fullscreen}},{key:"supportFullscreen",get:function(){return this._fullscreen.available}},{key:"supportAudio",get:function(){return this._audio.audioData}},{key:"supportWebAudio",get:function(){return this._audio.webAudio}},{key:"audioFormats",get:function(){return this._audio.format}}]),t}());(0,l.default)(c),e.default=c},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){var n=i(25);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(null===t)return;if(void 0===e.image||null===e.image)return;null!==t.resource&&t.resource===e.image||t.setImage(e.image,!1);t.setFrameRect(e.frame)}},function(t,e,i){"use strict";e.__esModule=!0;var n=a(i(2)),r=a(i(220));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,i,a){null===e&&(e=Function.prototype);var u=(0,r.default)(e,i);if(void 0===u){var s=(0,n.default)(e);return null===s?void 0:t(s,i,a)}if("value"in u)return u.value;var o=u.get;return void 0!==o?o.call(a):void 0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),r=u(i(1)),a=u(i(237));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){(0,n.default)(this,t),this.name=e||"New Scene"}return(0,r.default)(t,[{key:"preloadDone",value:function(t){void 0!==this.scene&&(0,a.default)(this.scene,t)}},{key:"instanceDestroy",value:function(t){t.destroy&&t.destroy();var e=this.instances.indexOf(t);this.instances.splice(e,1)}},{key:"addGameObject",value:function(t,e){var i=void 0;return(i=0==arguments.length?new scintilla.GameObject:void 0!==e&&e?t.clone():t)._id=this.instances.length,i._game=this.game,this.instances.push(i),i.start(),i}},{key:"setBounds",value:function(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={NONE:0,IDLE:1,PRESSED:2,IDLEPRESSED:3,RELEASED:4}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(5);var a={NONE:0,IN:1,OUT:2,WAIT:3,IDLE:4};(0,((n=r)&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(0)),r=a(i(16));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,i){(0,n.default)(this,t),this.name=e||"Resource",this.type=i||r.default.None}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(5)),r=u(i(0)),a=u(i(1));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i,a){(0,r.default)(this,t),this._moduleType=e||"none",this._moduleName=i||"noName",this._enabled=!0,this.entity=null,this.moduleManager=a||null,(0,n.default)(this._moduleType),(0,n.default)(this._moduleName),null!==a&&(this.entity=a.entity)}return(0,a.default)(t,[{key:"type",get:function(){return this._moduleType}},{key:"name",get:function(){return this._moduleName}},{key:"enabled",get:function(){return this._enabled},set:function(t){(t=!!t)!==this._enabled&&(this._enabled=t)}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),r=u(i(1)),a=u(i(33));u(i(32));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i,r,u){(0,n.default)(this,t),e=e||1/0,i=i||1/0,r=r||-1/0,u=u||-1/0,this.min=new a.default(e,i),this.max=new a.default(e+r,i+u)}return(0,r.default)(t,[{key:"set",value:function(t,e,i,n){return this.min.set(t,e),this.max.set(i,n),this}},{key:"setMin",value:function(t,e){return this.min.x=t,this.min.y=e,this}},{key:"setMax",value:function(t,e){return this.max.x=t,this.max.y=e,this}},{key:"move",value:function(t,e){this.min.x+=t,this.min.y+=e,this.max.x+=t,this.max.y+=e}},{key:"intersects",value:function(t){return this.max.x>=t.min.x&&this.max.y>=t.min.y&&this.min.x<=t.max.x&&this.min.y<=t.max.y||this.min.x>=t.max.x&&this.min.y>=t.max.y&&this.max.x<=t.min.x&&this.max.y<=t.min.y}},{key:"contains",value:function(t,e){return t>this.min.x&&e>this.min.y&&t<this.max.x&&e<this.max.y}},{key:"expand",value:function(t,e){e=e||t,this.max.x>this.min.x?(this.min.x-=t,this.max.x+=t):(this.min.x+=t,this.max.x-=t),this.max.y>this.min.y?(this.min.y-=e,this.max.y+=e):(this.min.y+=e,this.max.y-=e)}},{key:"merge",value:function(e){return e instanceof t?(this.min.x=Math.min(this.min.x,e.min.x),this.min.y=Math.min(this.min.y,e.min.y),this.max.x=Math.max(this.max.x,e.max.x),this.max.y=Math.max(this.max.y,e.max.y),this):e instanceof a.default?this.mergeWithPoint(e.x,e.y):(this.min.x=Math.min(this.min.x,e),this.min.y=Math.min(this.min.y,e),this.max.x=Math.max(this.max.x,e),this.max.y=Math.max(this.max.y,e),this)}},{key:"mergeWithPoint",value:function(t,e){return this.min.x=Math.min(this.min.x,t),this.min.y=Math.min(this.min.y,e),this.max.x=Math.max(this.max.x,t),this.max.y=Math.max(this.max.y,e),this}},{key:"extend",value:function(t){return t.min.x<this.min.x&&(this.min.x=t.min.x),t.min.y<this.min.y&&(this.min.y=t.min.y),t.max.x>this.max.x&&(this.max.x=t.max.x),t.max.y>this.max.y&&(this.max.y=t.max.y),this}},{key:"extendByPoint",value:function(t,e){return t<this.min.x&&(this.min.x=t),e<this.min.y&&(this.min.y=e),t>this.max.x&&(this.max.x=t),e>this.max.y&&(this.max.y=e),this}},{key:"limit",value:function(t,e,i,n){this.min.x<t&&(this.min.x=t),this.min.y<e&&(this.min.y=e),this.max.x>i&&(this.max.x=i),this.max.y>n&&(this.max.y=n)}},{key:"offset",value:function(t,e){var i={x:t,y:e};return i.x-=this.min.x,i.y-=this.min.y,this.max.x>this.min.x&&(i.x/=this.max.x-this.min.x),this.max.y>this.min.y&&(i.y/=this.max.y-this.min.y),i}},{key:"toString",value:function(){return"{ min: "+this.min.toString()+", max: "+this.max.toString()+" }"}},{key:"center",get:function(){return new a.default((this.max.x-this.min.x)/2,(this.max.y-this.min.y)/2)}},{key:"size",get:function(){return new a.default(this.max.x-this.min.x,this.max.y-this.min.y)}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(5);var a=["Cache","Loader","EntityFactory","EntityHierarchy","Camera","SceneManager","UserInterface","Transition","EventManager","PoolManager"];(0,((n=r)&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e,i){var n=i(147),r=i(79);t.exports=Object.keys||function(t){return n(t,r)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){"use strict";var n={createFromResponse:function(t,e,i){if("function"==typeof URL)t.src=URL.createObjectURL(e);else{var n=new FileReader;n.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(e.type||i)+";base64,"+n.result.split(",")[1]},n.onerror=t.onerror,n.readAsDataURL(e)}},revoke:function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)}};t.exports=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){e?this._failedFiles.insert(t):this._successFiles.insert(t);this._filesLoading.erase(t),this._loadedFilesCount++,a.default.call(this),this._filesQueue.size>0?n.default.call(this):0===this._filesLoading.size&&r.default.call(this)};var n=u(i(126)),r=u(i(128)),a=u(i(184));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={createFileRequest:function(t,e){var i=n.merge(e,t.xhrSettings),r=new XMLHttpRequest;return r.open("GET",t.source,i.async),void 0!==t.xhrSettings.responseType&&(r.responseType=t.xhrSettings.responseType),r.timeout=i.timeout,r.onload=t.onLoad.bind(t),r.onerror=t.onError.bind(t),r.onprogress=t.onProgress.bind(t),void 0!==t.onReadyStateChange&&(r.onreadystatechange=t.onReadyStateChange.bind(t)),r.send(),r},createSettings:function(t,e,i){return void 0===t&&(t=""),void 0===e&&(e=!0),void 0===i&&(i=0),{responseType:t,timeout:i,async:e}},merge:function(t,e){var i={};if(void 0===t&&(i=n.createSettings()),e)for(var r in e)void 0!==e[r]&&(i[r]=e[r]);return i}};e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(0)),r=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,i,r){(0,n.default)(this,t),this.name=r||"",this.manager=e,this._system=e._system,this.resource=i,this._volume=1,this.duration=0,this.startTime=0,this.currentTime=0,this.position=0,this.speed=0,this.isPlaying=!1,this.isPaused=!1,this.mute=!1,this.loop=!1,this.persistent=!1,this._ended=!1,this.once=!1,this._requireRemoval=!1}return(0,r.default)(t,[{key:"play",value:function(){if(!this.isPlaying)return this.isPaused&&(this.isPaused=!1),this.isPlaying=!0,this}},{key:"pause",value:function(){return this.isPaused||!this.isPlaying?this:(this.isPlaying=!1,this.isPaused=!0,this)}},{key:"stop",value:function(){return this.isPaused||this.isPlaying?(this.isPlaying=!1,this.isPaused=!1,this):this}},{key:"destroy",value:function(){this._requireRemoval=!0,this.isPlaying=!1,this.isPaused=!1,this.tag=void 0}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(i(2)),r=d(i(0)),a=d(i(1)),u=d(i(4)),s=d(i(3)),o=(d(i(49)),d(i(106))),l=d(i(214));function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i){(0,r.default)(this,e),t=t||"New SceneEntity";var a=(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i||null));return a._transform=new o.default,a._pool=null,a.modules=new l.default(a),a.scene=null,a._pendingRemoval=!1,a}return(0,s.default)(e,t),(0,a.default)(e,[{key:"back",value:function(){return!!this.isPooled&&(null!==this.scene&&(this._pendingRemoval=!0,this.game.system.pool.push(this)))}},{key:"isPooled",get:function(){return null!==this._pool}},{key:"x",set:function(t){this._transform.position.x=t,this._transform.markDirty()},get:function(){return this._transform.position.x}},{key:"y",set:function(t){this._transform.position.y=t,this._transform.markDirty()},get:function(){return this._transform.position.y}},{key:"position",get:function(){return this._transform.position},set:function(t){this._transform.position=t,this._transform._isDirty=!0}},{key:"origin",get:function(){return this._transform.origin},set:function(t){this._transform.origin=t,this._transform._isDirty=!0}},{key:"origin.x",set:function(t){this._transform.origin.x=t,this._transform._isDirty=!0}},{key:"origin.y",set:function(t){this._transform.origin.y=t,this._transform._isDirty=!0}},{key:"scale",get:function(){return this._transform.scale},set:function(t){this._transform.scale=t,this._transform._isDirty=!0}},{key:"scale.x",set:function(t){this._transform.scale.x=t,this._transform._isDirty=!0}},{key:"scale.y",set:function(t){this._transform.scale.y=t,this._transform._isDirty=!0}},{key:"angle",get:function(){return this._transform.angle},set:function(t){this._transform.angle=t,this._transform._isDirty=!0}}]),e}(d(i(59)).default);e.default=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(0)),r=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,i){(0,n.default)(this,t),this._name=e||"New Entity",this._active=!0,this._pool=null,this.game=i||void 0,this.persistent=!1}return(0,r.default)(t,[{key:"destroy",value:function(){}},{key:"active",get:function(){return this._active},set:function(t){return(t=!!t)!==this._active&&(this._active=t),this._active}},{key:"name",get:function(){return this._name},set:function(t){return(t=!!t)!==this._name&&(this._name=t),this._name}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(2)),r=f(i(0)),a=f(i(1)),u=f(i(4)),s=f(i(3)),o=f(i(47)),l=f(i(16)),d=f(i(17));function f(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){(0,r.default)(this,e);var i=(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,l.default.AnimationMachine));return i.states=new d.default,i}return(0,s.default)(e,t),(0,a.default)(e,[{key:"add",value:function(t,e){return this.states.has(t)?(Console.warn("AnimationMachineResource.add: Could not add state. There is already a state called '"+t+'".'),this):(void 0!==e?this.states.set(t,e):Console.warn("AnimationMachineResource.add: Could not add state with undefined animation."),this)}},{key:"get",value:function(t){return this.states.get(t)}},{key:"at",value:function(t){return this.states.at(t)}},{key:"duration",set:function(t){this.states.each(function(e,i){i.duration=t})}}]),e}(o.default);e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(5);var a={Once:0,Loop:1,PingPong:2};(0,((n=r)&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=y(i(2)),r=y(i(0)),a=y(i(1)),u=y(i(4)),s=y(i(3)),o=y(i(7)),l=y(i(47)),d=y(i(16)),f=y(i(21)),c=y(i(103)),h=y(i(217)),v=y(i(61));function y(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function e(t){(0,r.default)(this,e);var i=(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,d.default.Animation));return i.keyFrames=new o.default(null,!1),i._totalDuration=1,i._frameRate=30,i._secondsPerFrame=1,i._wrapMode=v.default.Loop,i.uniformDuration=!0,c.default.call(i,30,null,1),i}return(0,s.default)(e,t),(0,a.default)(e,[{key:"get",value:function(t){return this.keyFrames.at(t)}},{key:"duplicate",value:function(t,e){var i=this.keyFrames.at(t);return null!==i&&(void 0===e?this.keyFrames.push(i):this.keyFrames.splice(e,0,i)),c.default.call(this,this._frameRate,null),this}},{key:"remove",value:function(t){var e=this.keyFrames.eraseAt(t);return c.default.call(this,this._frameRate,null),e}},{key:"wrapMode",get:function(){return this._wrapMode}},{key:"loop",set:function(t){!0===t&&(this._wrapMode=v.default.Loop)}},{key:"duration",set:function(t){f.default.isNumber(t)&&c.default.call(this,null,t)},get:function(){return this._totalDuration}},{key:"frameRate",set:function(t){f.default.isNumber(t)&&c.default.call(this,t,null)},get:function(){return this._frameRate}},{key:"length",get:function(){return this.keyFrames.size}},{key:"size",get:function(){return this.keyFrames.size}},{key:"secondsPerFrame",get:function(){return this._secondsPerFrame}},{key:"totalDuration",get:function(){return this.uniformDuration?this._totalDuration:(0,h.default)(this.keyFrames)}}]),e}(l.default);e.default=_},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(i(2)),r=d(i(0)),a=d(i(1)),u=d(i(4)),s=d(i(3)),o=d(i(48)),l=d(i(9));function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i,a){(0,r.default)(this,e);var s=(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,"animation",t,i));return s._resource=l.default.value(a,"resource",null),s._spriteModule=l.default.value(a,"spriteModule",null),s.isPlaying=!1,s.isPaused=!1,s._timer=0,s._position=0,s.currentFrame=0,s.speed=0,s}return(0,s.default)(e,t),(0,a.default)(e,[{key:"setDuration",value:function(t){null!==this._resource&&(this._resource.duration=t)}},{key:"play",value:function(){return this.isPlaying||null===this._resource?this:(this.isPlaying=!0,this.isPaused=!1,this)}},{key:"pause",value:function(){return this.isPaused||null===this._resource?this:(this.isPaused=!0,this.isPlaying=!1,this)}},{key:"stop",value:function(){return this.isPaused=!1,this.isPlaying=!1,this.currentFrame=0,this._timer=0,this}},{key:"restart",value:function(){return this.stop(),this.isPlaying=!0,this}}]),e}(o.default);e.default=f},function(t,e,i){t.exports={default:i(254),__esModule:!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(5)),r=o(i(125)),a=o(i(269)),u=o(i(268)),s=o(i(27));function o(t){return t&&t.__esModule?t:{default:t}}var l={in:r.default,out:a.default,inout:u.default,Type:s.default};(0,n.default)(l),e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(5);var a={NONE:0,FILL:1};(0,((n=r)&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),r=u(i(1)),a=u(i(69));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){if((0,n.default)(this,t),this._content=[],this._size=0,Array.isArray(e))for(var i=0;i<e.length;i++)this.insert(e[i])}return(0,r.default)(t,[{key:"insert",value:function(t){return-1===this._content.indexOf(t)&&this._content.push(t),this}},{key:"get",value:function(t){var e=this._content.indexOf(t);return e>-1?this._content[e]:null}},{key:"at",value:function(t){return this._content[t]}},{key:"has",value:function(t){return this._content.indexOf(t)>-1}},{key:"erase",value:function(t){var e=this._content.indexOf(t);return e>-1&&this._content.splice(e,1),this}},{key:"clear",value:function(){return this._content.length=0,this}},{key:"each",value:function(t,e){var i,n=this._content.slice(),r=n.length;if(e)for(i=0;i<r&&!1!==t.call(e,n[i],i);i++);else for(i=0;i<r&&!1!==t(n[i],i);i++);return this}},{key:"sort",value:function(t){if(void 0!==t)return(0,a.default)(this._content,t)}},{key:"content",value:function(){return this._content}},{key:"size",get:function(){return this._content.length}},{key:"length",get:function(){return this._content.length}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(2)),r=f(i(0)),a=f(i(1)),u=f(i(4)),s=f(i(3)),o=f(i(47)),l=f(i(16)),d=f(i(9));function f(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t,i,a){(0,r.default)(this,e);var s=(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,l.default.Tilemap));return s.metadata=i||null,s.tilesets=d.default.value(a,"tilesets",null),s.tileLayers=d.default.value(a,"tilelayers",null),s.objectLayers=d.default.value(a,"objectlayers",null),s}return(0,s.default)(e,t),(0,a.default)(e,[{key:"getObjectsLayer",value:function(t){return this.objectLayers.find(function(e){if(e.name===t)return e})||null}},{key:"getTileLayer",value:function(t){return this.tileLayers.find(function(e){if(e.name===t)return e})||null}},{key:"getTilesetByGID",value:function(t){return this.tilesets.each(function(e){if(e.hasGID(t))return e})||null}},{key:"getTileGID",value:function(t){return this.tilesets.each(function(e){var i=e.getTileGID(t);if(void 0!==i)return i})||null}}]),e}(o.default);e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t.length;if(i<2)return t;void 0===e&&(e=function(t,e){return t<e?-1:t===e?0:1});return function i(n,r){var a=r-n;if(a<2)return;var u=n+(a>>>1);i(n,u);i(u,r);return function(i,n,r){var a=n-i,u=r-n,s=t.slice(i,n),o=t.slice(n,r),l=i,d=0,f=0;for(;d<a&&f<u;)e(s[d],o[f])<=0?t[l++]=s[d++]:t[l++]=o[f++];for(;d<a;)t[l++]=s[d++];for(;f<u;)t[l++]=o[f++];return t}(n,u,r)}(0,i)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=h(i(2)),r=h(i(0)),a=h(i(1)),u=h(i(4)),s=h(i(3)),o=h(i(20)),l=h(i(23)),d=h(i(132)),f=h(i(294)),c=h(i(7));function h(t){return t&&t.__esModule?t:{default:t}}var v=function(t){function e(t,i){(0,r.default)(this,e);var a=(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,"tilemap",t));a.resource=i,a.tileWidth=i.metadata.tileWidth,a.tileHeight=i.metadata.tileHeight,a.width=i.metadata.width,a.height=i.metadata.height,a.orientation=i.metadata.orientation,a.pixelsWidth=i.metadata.pixelsWidth,a.pixelsHeight=i.metadata.pixelsHeight,a.animator=void 0,a.culling={method:0,start:{x:0,y:0},end:{x:0,y:0}},a.floorTiles=!1,a.tilesets=i.tilesets,a.layers=new c.default,a.objectLayers=i.objectLayers;for(var s=!1,o=i.tileLayers.length-1;o>=0;o--){var l=i.tileLayers.at(o);l.hasAnimatedTiles&&(s=!0),a.layers.push(new d.default(a,l))}return!0===s&&(a.animator=new f.default(a,a.layers)),a}return(0,s.default)(e,t),(0,a.default)(e,[{key:"getObjectsLayer",value:function(t){return this.resource.getObjectsLayer(t)}},{key:"getTileLayer",value:function(t){return this.resource.getTileLayer(t)}}]),e}(o.default);e.default=v,l.default.register("tilemap",function(t,e){var i=null,n=t.entity.game.system.cache;void 0!==n&&(i=n.tilemap.get(e));var r=new v(t,i);return r.floorTiles=t.entity.game.config.floorTiles||!1,r})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n){var r={x:0,y:0};if(void 0===n)r.x=t*i.x-e*i.y,r.y=t*i.y-e*i.x;else{var a=t-n.x,u=e-n.y;r.x=n.x+a*i.x-u*i.y,r.y=n.y-a*i.y-u*i.x}return r}},function(t,e,i){var n=i(73),r=i(53),a=i(28),u=i(84),s=i(29),o=i(150),l=Object.getOwnPropertyDescriptor;e.f=i(30)?l:function(t,e){if(t=a(t),e=u(e,!0),o)try{return l(t,e)}catch(t){}if(s(t,e))return r(!n.f.call(t,e),t[e])}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){var n=i(26),r=i(13),a=i(85),u=i(76),s=i(31).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=a?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:u.f(t)})}},function(t,e,i){var n=i(51)("meta"),r=i(25),a=i(29),u=i(31).f,s=0,o=Object.isExtensible||function(){return!0},l=!i(40)(function(){return o(Object.preventExtensions({}))}),d=function(t){u(t,n,{value:{i:"O"+ ++s,w:{}}})},f=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,n)){if(!o(t))return"F";if(!e)return"E";d(t)}return t[n].i},getWeak:function(t,e){if(!a(t,n)){if(!o(t))return!0;if(!e)return!1;d(t)}return t[n].w},onFreeze:function(t){return l&&f.NEED&&o(t)&&!a(t,n)&&d(t),t}}},function(t,e,i){e.f=i(35)},function(t,e,i){var n=i(86);t.exports=function(t){return Object(n(t))}},function(t,e,i){var n=i(31).f,r=i(29),a=i(35)("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,a)&&n(t,a,{configurable:!0,value:e})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){var n=i(26),r=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(t){return r[t]||(r[t]={})}},function(t,e,i){var n=i(80)("keys"),r=i(51);t.exports=function(t){return n[t]||(n[t]=r(t))}},function(t,e,i){var n=i(41),r=i(357),a=i(79),u=i(81)("IE_PROTO"),s=function(){},o=function(){var t,e=i(149)("iframe"),n=a.length;for(e.style.display="none",i(352).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),o=t.F;n--;)delete o.prototype[a[n]];return o()};t.exports=Object.create||function(t,e){var i;return null!==t?(s.prototype=n(t),i=new s,s.prototype=null,i[u]=t):i=o(),void 0===e?i:r(i,e)}},function(t,e){t.exports={}},function(t,e,i){var n=i(25);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=!0},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(12));e.default=function t(){var e=void 0,i=void 0,u=void 0,s=void 0,o=void 0,l=void 0;var d=arguments[0]||{};var f=1;var c=arguments.length;var h=!1;"boolean"==typeof d&&(h=d,d=arguments[f]||{},f++);"object"===(void 0===d?"undefined":(0,n.default)(d))||a.default.isFunction(d)||(d={});f===c&&(d=this,f--);for(;f<c;f++)if(null!=(e=arguments[f]))for(i in e)u=d[i],s=e[i],d!==s&&(h&&s&&((0,r.default)(s)||(o=Array.isArray(s)))?(o?(o=!1,l=u&&Array.isArray(u)?u:[]):l=u&&(0,r.default)(u)?u:{},d[i]=t(h,l,s)):void 0!==s&&(d[i]=s));return d};var r=u(i(339)),a=u(i(21));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.context=new AudioContext,void 0===t.context.createGain?t.masterVolume=t.context.createGainNode():t.masterVolume=t.context.createGain();t.masterVolume.gain.value=1,t.masterVolume.connect(t.context.destination),t.destination=t.masterVolume,t.locked="suspended"===t.context.state&&"ontouchstart"in window}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=y(i(12)),r=y(i(2)),a=y(i(0)),u=y(i(1)),s=y(i(4)),o=y(i(3)),l=y(i(18)),d=y(i(9)),f=y(i(6)),c=y(i(11)),h=y(i(19)),v=y(i(14));function y(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function e(t,i,u,o,l){(0,a.default)(this,e);var h={type:c.default.json,ext:d.default.value(t,"ext","json"),responseType:"text",tag:t,url:d.default.value(t,"file",i),path:u,xhrSettings:d.default.value(t,"xhr",o)},v=(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,h));return"object"===(0,n.default)(h.url)&&(v.data=h.url,v.state=f.default.DONE),v}return(0,o.default)(e,t),(0,u.default)(e,[{key:"onProcessing",value:function(t){this.state=f.default.PROCESSING,this.data=JSON.parse(this.xhrRequest.responseText),this.onDone(),t(this)}}]),e}(l.default);e.default=_,v.default.register("json",function(t,e,i,n){return h.default.call(this,new _(t,e,this.path,n)),this})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=y(i(2)),r=y(i(0)),a=y(i(1)),u=y(i(4)),s=y(i(3)),o=y(i(18)),l=y(i(9)),d=y(i(11)),f=y(i(22)),c=y(i(6)),h=y(i(19)),v=y(i(14));function y(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function e(t,i,a,s,o){(0,r.default)(this,e);var c="string"==typeof t?t:l.default.value(t,"key",""),h={type:d.default.script,ext:l.default.value(t,"ext",f.default.getExtension(i)||"js"),responseType:"text",tag:c,url:l.default.value(t,"file",i),path:a,xhrSettings:l.default.value(t,"xhr",s)};return(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,h))}return(0,s.default)(e,t),(0,a.default)(e,[{key:"onPostLoad",value:function(t,e){this.state=c.default.PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrRequest.responseText,document.head.appendChild(this.data),this.loader.game.events.dispatch("file_postload_"+this.tag)}}]),e}(o.default);e.default=_,v.default.register("script",function(t,e,i,n){return h.default.call(this,new _(t,e,this.path,n)),this})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=v(i(2)),r=v(i(0)),a=v(i(1)),u=v(i(4)),s=v(i(3)),o=v(i(62)),l=i(188),d=(v(l),v(i(21))),f=v(i(16)),c=v(i(32)),h=v(i(103));function v(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t,i,a){(0,r.default)(this,e);var s=(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return s.mainImage=i||null,s.type=f.default.Spritesheet,s}return(0,s.default)(e,t),(0,a.default)(e,[{key:"addFrame",value:function(t,e,i,n,r,a,u){void 0===a&&(a=this._secondsPerFrame),void 0===u&&(u=!0),r=void 0===r?this.mainImage:this.cache.image.get(r);var s=new l.SpritesheetKeyFrame(this,r,new c.default(t,e,i,n),a);return this.keyFrames.push(s),!0===u&&h.default.call(this,this._frameRate,null),this}},{key:"addStrip",value:function(t,e,i,n,r,a,u){void 0===a&&(a=r),void 0===u?u={x:0,y:0}:d.default.isNumber(u)&&(u={x:u,y:u});for(var s=t,o=e,l=0;l<r;l++)this.addFrame(s,o,i,n,void 0,void 0,!1),s+=u.x+i,l%a==a-1&&(s=t,o+=u.y+n);return h.default.call(this,this._frameRate,null),this}},{key:"addImageStrip",value:function(t,e,i,n,r,a,u,s){}}]),e}(o.default);e.default=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(2)),r=l(i(0)),a=l(i(4)),u=l(i(3)),s=l(i(47)),o=l(i(16));function l(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,i){(0,r.default)(this,e);var u=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,o.default.Image));return u.data=i,u.width=0,u.height=0,u.imageUrl=null,(u.data.complete||u.data.getContext)&&u.data.width&&u.data.height&&(u.width=u.data.naturalWidth||u.data.width,u.height=u.data.naturalHeight||u.data.height),u}return(0,u.default)(e,t),e}(s.default);e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),r=u(i(1)),a=u(i(7));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){(0,n.default)(this,t),this.game=e,this._soundCache=e.system.cache.audio,this._noAudio=e.config.audio.noAudio,this._sounds=null,this._sounds=new a.default,this._removalList=[],this._system=null,this.add=null,this.volume=1,this.mute=!1,this.muteOnBlur=!0,!1===this._noAudio&&(this.game.system.events.subscribe("blur",function(){!1!==this.muteOnBlur&&this._system.onBlur()},this,0),this.game.system.events.subscribe("focus",function(){!1!==this.muteOnBlur&&this._system.onFocus()},this,0))}return(0,r.default)(t,[{key:"at",value:function(t){return this._noAudio?null:this._sounds.at(t)}},{key:"play",value:function(t,e,i,n){if(this._noAudio)return null;var r=this.add(t,e,i,n);return void 0!==r&&null!==r?(r.play(),r):null}},{key:"playPersistent",value:function(t,e,i,n){var r=this.play(t,e,i,n);return null!==r&&(r.persistent=!0),r}},{key:"playOnce",value:function(t,e,i,n){var r=this.play(t,e,i,n);return null!==r&&(r.once=!0),r}},{key:"get",value:function(t){return this._sounds.each(function(e){if(e.name===t)return e})||null}},{key:"remove",value:function(t){if(this._noAudio)return!1;for(var e=_sounds.length;e--;)if(_sounds[e]===t)return _sounds[e].destroy(!1),_sounds.splice(e,1),!0;return!1}},{key:"stopAll",value:function(t){if(!this._noAudio){void 0===t&&(t=!1);for(var e=0;e<this._sounds.length;e++){var i=this._sounds.at(e);i&&(i.stop(),!0===t&&i.destroy())}}}},{key:"pauseAll",value:function(){if(!this._noAudio)for(var t=0;t<_sounds.length;t++)_sounds[t]&&_sounds[t].pause()}},{key:"resumeAll",value:function(){if(!this._noAudio)for(var t=0;t<_sounds.length;t++)_sounds[t]&&_sounds[t].resume()}},{key:"destroy",value:function(){if(null!==this._system){this._system.destroy(),this.stopAll();for(var t=0;t<this._sounds.length;t++){var e=this._sounds.at(t);e&&e.destroy()}this._sounds.clear()}}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(i(0)),r=d(i(1)),a=d(i(17)),u=d(i(98)),s=d(i(21)),o=d(i(192)),l=d(i(10));function d(t){return t&&t.__esModule?t:{default:t}}var f=function(){function t(){(0,n.default)(this,t),this._signalsMap=new a.default}return(0,r.default)(t,[{key:"create",value:function(t){var e=this._signalsMap.get(t);if(void 0!==e&&null!=e)return e;var i=new u.default;return this._signalsMap.set(t,i),i}},{key:"subscribe",value:function(t,e,i,n){var r=this._signalsMap.get(t);return void 0===r||null===r?(console.warn("EventManager.subscribe: There is no registered event called '"+t+"'."),this):s.default.isFunction(e)?(r.subscribe(e,i,n),this):(console.warn("EventManager.subscribe: The variable is not a function."),this)}},{key:"subscribeOnce",value:function(t,e,i,n){var r=this._signalsMap.get(t);return void 0===r||null===r?(console.warn("EventManager.subscribeOnce: There is no registered event called '"+t+"'."),this):s.default.isFunction(e)?(r.subscribeOnce(e,i,n),this):(console.warn("EventManager.subscribeOnce: The variable '"+t+"' is not a function."),this)}},{key:"dispatch",value:function(t){var e=this._signalsMap.get(t);if(void 0===e||null===e)return this;var i=arguments.length>1?[arguments[1]]:Array.apply(null,arguments);return e.dispatch(i),this}},{key:"has",value:function(t){return this._signalsMap.has(t)}}]),t}();e.default=f,l.default.register("EventManager",f,"events",function(){!function(t,e){for(var i=0;i<e.length;i++)t.create(e[i])}(this,o.default)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){var n=t._bindings.each(function(t,n){if(t._listener===e&&t._context===i)return n});void 0===n&&(n=-1);return n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(0)),r=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,i,r,a,u){(0,n.default)(this,t),this._signal=e,this._listener=i,this._context=r,this._priority=a||0,this.active=!0,this.args=void 0,this._isOnce=u||!1}return(0,r.default)(t,[{key:"execute",value:function(t){var e=void 0,i=void 0;return this.active&&this._listener&&(i=this.args?this.args.concat(t):t,e=this._listener.apply(this._context,i),this._isOnce&&this.detach()),e}},{key:"detach",value:function(){this.isBound()&&this._signal.unsubscribe(this._listener,this._context)}},{key:"isBound",value:function(){return!!this._signal&&!!this._listener}},{key:"_destroy",value:function(){delete this._signal,delete this._listener,delete this.context}},{key:"isOnce",get:function(){return this._isOnce}},{key:"listener",get:function(){return this._listener}},{key:"signal",get:function(){return this._signal}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(0)),r=l(i(1)),a=l(i(7)),u=(l(i(97)),l(i(96))),s=l(i(195)),o=l(i(194));l(i(21));function l(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(){(0,n.default)(this,t),this._bindings=new a.default,this.active=!0,this._shouldPropagate=!0}return(0,r.default)(t,[{key:"has",value:function(t,e){return-1!==(0,u.default)(this,t,e)}},{key:"subscribe",value:function(t,e,i){return(0,s.default)(t,"subscribe"),(0,o.default)(this,t,e,i,!1),this}},{key:"subscribeOnce",value:function(t,e,i){return(0,s.default)(t,"subscribeOnce"),(0,o.default)(this,t,e,i,!0),this}},{key:"unsubscribe",value:function(t,e){(0,s.default)(t,"unsubscribe");var i=(0,u.default)(this,t,e);return-1!==i&&(this._bindings.at(i)._destroy(),this._bindings.eraseAt(i)),t}},{key:"unsubscribeAll",value:function(){}},{key:"dispatch",value:function(t){if(this.active){var e=this._bindings.length;if(e){arguments.length>1&&(t=Array.prototype.slice.call(arguments));var i=this._bindings.childs.slice();do{e--}while(i[e]&&this._shouldPropagate&&!1!==i[e].execute(t))}}}},{key:"destroy",value:function(){this.unsubscribeAll(),delete this._bindings}},{key:"propagate",set:function(t){this._shouldPropagate=t},get:function(){return this._shouldPropagate}},{key:"count",get:function(){return this._bindings.size}}]),t}();e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(0)),r=l(i(1)),a=l(i(7)),u=l(i(100)),s=l(i(199)),o=l(i(198));function l(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(e,i,r,u){(0,n.default)(this,t),this.game=e,this._baseEntity=r,this.name=i||r.name||"Entity Pool",this._pool=new a.default,this._pooledEntities=new a.default,void 0===u&&(u=1),this.add(u)}return(0,r.default)(t,[{key:"add",value:function(t){void 0===t&&(t=1);for(var e=0;e<t;e++){var i=(0,u.default)(this._baseEntity,this.game);void 0!==i.start&&null!==i.start&&i.start.call(i),this._pool.push(i)}return this}},{key:"pull",value:function(){if(0===this._pool.size)return console.warn("Pool.pull: Could not pull entity. The pool is empty"),null;var t=this._pool.popFront();if(void 0!==t&&null!==t){if(!0===(0,s.default)(this,t,this.game))return this._pooledEntities.push(t),t;this._pool.push(t)}else console.warn("Pool.pull: Could not pull entity. The pool is empty");return null}},{key:"push",value:function(t){if(void 0===t)return!1;var e=this._pooledEntities.indexOf(t);return-1!==e&&((0,o.default)(t,this.game),this._pooledEntities.eraseAt(e),this._pool.push(t),!0)}},{key:"remove",value:function(t){var e=this._pooledEntities.indexOf(t);return e>-1&&(this._pooledEntities.eraseAt(e),!0)}},{key:"clear",value:function(){return this._pool.clear(),this._pooledEntities.clear(),this}},{key:"backAll",value:function(){for(var t=0;t<this._pooledEntities.length;t++){var e=this._pooledEntities.at(t);RemoveEntityFromGame(e,this.game),this._pool.push(e)}return this._pooledEntities.childs.length=0,this}},{key:"length",get:function(){return this._pool.size}}]),t}();e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(12));e.default=function(t,e){var i=void 0;if(t instanceof r.default)i=t;else if((void 0===t?"undefined":(0,n.default)(t))===r.default)i=new t(t.name,e);else if("object"===(void 0===t?"undefined":(0,n.default)(t))){var u=new r.default(t.name||void 0,e);i=(0,a.default)(!0,u,t)}else if("function"==typeof t){var s=new r.default(t.name,e),o=new t;i=(0,a.default)(!0,s,o)}return i};var r=u(i(58)),a=u(i(88));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){t.scene=e.scene.currentScene,void 0!==t.start&&null!==t.start&&t.start.call(t);return e.system.entityList.addInstance(t),t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t._resource;if(null!==e){if("animMachine"===t.name){var i=e.at(0);t._currentState=i||null,e=i}else t.loop=e.loop;e.type===r.default.Spritesheet&&(0,n.default)(t._spriteModule,e.get(0)),t.play()}};var n=a(i(42)),r=a(i(16));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){void 0===i&&(i=this.keyFrames.length);null===e&&null===t?(this._frameRate=60,this._totalDuration=t/i*1e3):e&&null===t?(this._totalDuration=e,this._frameRate=i/(e/1e3)):(this._frameRate=t,this._totalDuration=i/t*1e3);this._secondsPerFrame=1e3/this._frameRate}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(2)),r=c(i(0)),a=c(i(1)),u=c(i(4)),s=c(i(3)),o=c(i(20)),l=c(i(32)),d=c(i(224)),f=c(i(23));c(i(223));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,r.default)(this,e);var i=(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,"sprite",t));return i.resource=null,i.frame=new l.default,i}return(0,s.default)(e,t),(0,a.default)(e,[{key:"setFrame",value:function(t,e,i,n){return this.frame.set(t,e,i,n),this}},{key:"setFrameRect",value:function(t){return this.frame.copy(t),this}},{key:"setSprite",value:function(t){if(null!==this.entity&&void 0!==this.entity){var e=this.entity.game.system.cache.image.get(t);this.setImage(e,!0)}else Console.warn("Sprite.setSprite: Could not set Sprite. The entity is null in the game");return this}},{key:"setImage",value:function(t,e){return void 0===e&&(e=!0),this.resource!==t&&(this.resource=t),!0===e&&null!==t&&this.setFrame(0,0,this.resource.width,this.resource.height),this}},{key:"render",value:function(t){return!!this._enabled&&(!!this.resource&&((0,d.default)(t,this.resource.data,this.frame,this.entity._transform,this._originInPixels),!0))}},{key:"width",get:function(){return this.frame.width}},{key:"height",get:function(){return this.frame.height}}]),e}(o.default);e.default=h,f.default.register("sprite",function(t,e){var i=new h(t);return void 0!==e&&void 0!==e[0]&&(i.setSprite(e[0]),null!==i.resource&&(void 0===e[1]&&(e[1]=0),void 0===e[2]&&(e[2]=0),void 0===e[2]&&(e[3]=i.resource.width),void 0===e[4]&&(e[4]=i.resource.height),i.setFrame(e[1],e[2],e[3],e[4]))),i})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),r=s(i(1)),a=s(i(23)),u=s(i(229));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e){(0,n.default)(this,t),this.moduleManager=e}return(0,r.default)(t,[{key:"sprite",value:function(t,e,i,n,r){return a.default.attach(this.moduleManager,"sprite",[t,e,i,n,r])}},{key:"tilemap",value:function(t){return void 0===t||null==t?(console.warn("ModuleAttacher.tilemap: Can not create Tilemap module without a proper tag name."),null):a.default.attach(this.moduleManager,"tilemap",t)}},{key:"spritesheet",value:function(t){var e=(0,u.default)(this.moduleManager,"spritesheet","SpriteSheet");return null===e?null:a.default.attach(this.moduleManager,"spritesheet",[e,t])}},{key:"animMachine",value:function(t){var e=(0,u.default)(this.moduleManager,"animMachine","AnimationMachine");return null===e?null:a.default.attach(this.moduleManager,"animMachine",[e,t])}},{key:"rectangle",value:function(t,e,i){return a.default.attach(this.moduleManager,"rectangle",[t,e,i])}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),r=s(i(1)),a=s(i(33)),u=s(i(38));s(i(49));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(){(0,n.default)(this,t),this.matrix=new u.default(1),this.position=new a.default(0,0,this),this.scale=new a.default(1,1,this),this.origin=new a.default(0,0,this),this.angle=0,this.rotation=0,this._cosSin={x:1,y:0},this._oldRotation=-1,this._isDirty=!0}return(0,r.default)(t,[{key:"markDirty",value:function(){this._isDirty=!0}},{key:"destroy",value:function(){delete this.position,delete this.scale,delete this.matrix,delete this.worldPosition,delete this.worldScale,delete this.origin,delete this.bounds,delete this.globalBounds,delete this._cosSin}},{key:"reset",value:function(){this.matrix.setIdentity(),this._isDirty=!0,this._cosSin.x=1,this._cosSin.y=0,this.position.set(0,0),this.angle=0,this.rotation=0,this._oldRotation=0,this.origin.set(0,0),this.scale.set(0,0)}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(64)),r=o(i(0)),a=o(i(1)),u=o(i(241)),s=o(i(8));function o(t){return t&&t.__esModule?t:{default:t}}var l=new(function(){function t(){(0,r.default)(this,t),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=4022871197,this._mash=(0,u.default)()}return(0,a.default)(t,[{key:"rand",value:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.s0=this.s1,this.s1=this.s2,this.c=0|t,this.s2=t-this.c,this.s2}},{key:"uint32",value:function(){return 4294967296*this.rand()}},{key:"frac",value:function(){return this.rand()+1.1102230246251565e-16*(2097152*this.rand()|0)}},{key:"real",value:function(){return this.uint32()+this.frac()}},{key:"range",value:function(t,e){return this.frac()*(e-t)+t}},{key:"irange",value:function(t,e){return s.default.floor(this.range(0,e-t)+t)}},{key:"reset",value:function(t){this.n=4022871197,this.s0=this._mash(" "),this.s1=this._mash(" "),this.s2=this._mash(" "),this.c=1;for(var e=0;e<t.length&&null!=t[e];e++){var i=t[e];this.s0-=this._mash(i),this.s0+=~~(this.s0<0),this.s1-=this._mash(i),this.s1+=~~(this.s1<0),this.s2-=this._mash(i),this.s2+=~~(this.s2<0)}}}]),t}());(0,n.default)(l),e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),r=s(i(1)),a=s(i(110)),u=s(i(109));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e){(0,n.default)(this,t),this.game=e,this.mouse=null,this.keyboard=null}return(0,r.default)(t,[{key:"init",value:function(){this.keyboard=new a.default(this.game),this.mouse=new u.default(this.game),this.keyboard.init(),this.mouse.init()}},{key:"update",value:function(){this.keyboard.update(),this.mouse.update()}},{key:"reset",value:function(){this.keyboard.reset(),this.mouse.reset()}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MouseEvent=void 0;var n=a(i(0)),r=a(i(1));a(i(112));function a(t){return t&&t.__esModule?t:{default:t}}var u=e.MouseEvent={NONE:0,PRESS:1,PRESSED:2,RELEASE:3},s=function(){function t(e){(0,n.default)(this,t),this.x=0,this.y=0,this.game=e,this.canvas=e.system.render.canvas,this.button=0,this.wheelDelta=0,this.active=!0,this._mouseButtons=[],this._mouseButtonsLocks=[],this._mouseButtonsLocksPressed=[],this._mouseDownDuration=[],this._onMouseDown=null,this._onMouseMove=null,this.reset()}return(0,r.default)(t,[{key:"reset",value:function(){for(var t=0;t<3;t++)this._mouseButtons[t]=!1,this._mouseButtonsLocks[t]=u.NONE,this._mouseButtonsLocksPressed[t]=u.NONE,this._mouseDownDuration[t]=0}},{key:"init",value:function(){var t=this;this._onMouseDown=function(e){return t.onMouseDown(e)},this._onMouseUp=function(e){return t.onMouseUp(e)},this._onMouseMove=function(e){return t.onMouseMove(e)},this.canvas.addEventListener("mousedown",this._onMouseDown,!0),this.canvas.addEventListener("mousemove",this._onMouseMove,!0),this.canvas.addEventListener("mouseup",this._onMouseUp,!0),this.canvas.addEventListener("mouseover",this._onMouseOver,!0),this.canvas.addEventListener("mouseout",this._onMouseOut,!0)}},{key:"onMouseMove",value:function(t){if(this.active){var e=this.canvas.getBoundingClientRect();this.x=Math.floor((t.clientX-e.left)/(e.right-e.left)*this.canvas.width),this.y=Math.floor((t.clientY-e.top)/(e.bottom-e.top)*this.canvas.height)}}},{key:"onMouseDown",value:function(t){if(this.active){var e=t.button;this._mouseButtonsLocksPressed[e]!=u.PRESSED&&this._mouseButtonsLocksPressed[e]!=u.PRESS&&(this._mouseButtonsLocksPressed[e]=u.PRESSED,this._mouseDownDuration[e]=1),this._mouseButtons[e]=!0,this._mouseButtonsLocks[e]=u.PRESS,t.preventDefault()}}},{key:"onMouseUp",value:function(t){if(this.active){var e=t.button;this._mouseButtons[e]=!1,this._mouseButtonsLocks[e]=u.RELEASE,this._mouseButtonsLocksPressed[e]=u.NONE,t.preventDefault()}}},{key:"pressed",value:function(t){var e=!1;return this._mouseButtonsLocksPressed[t]==u.PRESSED&&(e=!0,this._mouseButtonsLocksPressed[t]=u.PRESS),this._mouseButtons[t]&&e}},{key:"release",value:function(t){var e=!1;e=this._mouseButtonsLocks[t]!=u.PRESSED&&this._mouseButtonsLocks[t]!=u.PRESS&&this._mouseButtonsLocks[t]!=u.NONE;var i=!this._mouseButtons[t]&&e;return this._mouseButtonsLocks[t]=u.NONE,i}},{key:"press",value:function(t){var e=!1;return e=this._mouseButtonsLocks[t]!=u.RELEASE&&this._mouseButtonsLocks[t]!=u.NONE,this._mouseButtons[t]&&e}},{key:"update",value:function(){for(var t=0;t<this._mouseButtons.length;t++)this._mouseButtonsLocksPressed[t]==u.PRESSED&&(this._mouseDownDuration[t]>0?this._mouseDownDuration[t]--:this._mouseButtonsLocksPressed[t]=u.PRESS)}},{key:"posRelativeTo",value:function(t){var e={x:0,y:0};return e.x=this.x-t.x,e.y=this.y-t.y,e}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(0)),r=c(i(1)),a=c(i(17)),u=c(i(7)),s=c(i(111)),o=c(i(113)),l=c(i(45)),d=c(i(243)),f=c(i(242));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e){(0,n.default)(this,t),this.game=e,this._enabled=!0,this.eventTarget=null,this.eventHandler=null,this._eventQueue=new u.default,this._keyMapping=new a.default,this._keyWatch=new a.default,this._keyGarbage=[],this.preventDefault=!0,this.lastKey=null}return(0,r.default)(t,[{key:"reset",value:function(){for(var t in this._keyMapping.clear(),o.default)if(o.default.hasOwnProperty(t)){var e=o.default[t];this._keyMapping.set(e,new s.default(e,this.game))}}},{key:"init",value:function(){this.reset(),this.eventTarget=document;var t=this,e=function(e){e.defaultPrevented||(t.preventDefault&&e.preventDefault(),t._eventQueue.push(e))};this.eventHandler=e,this.eventTarget.addEventListener("keydown",e,!1),this.eventTarget.addEventListener("keyup",e,!1)}},{key:"stop",value:function(){this.eventTarget.removeEventListener("keydown",this.eventHandler),this.eventTarget.removeEventListener("keyup",this.eventHandler),this._onKeyDown=null,this._onKeyUp=null,this._onKeyPress=null,this._keyMapping.clear()}},{key:"update",value:function(){if(this._enabled){if(0!==this._keyWatch.length){var t=this;this._keyWatch.each(function(e,i){i.event===l.default.PRESSED?i._event=l.default.IDLEPRESSED:i.event===l.default.RELEASED&&(i._event=l.default.NONE,t._keyGarbage.push(e))}),0!==this._keyGarbage.length&&(this._keyWatch.eraseList(this._keyGarbage),this._keyGarbage.splice(0,this._keyGarbage.length))}var e=this._eventQueue.size;if(0!==e)for(var i=this._eventQueue.splice(0,e),n=0;n<e;n++){var r=i[n],a=r.keyCode,u=this._keyMapping.get(a);void 0!==u&&null!==u&&("keydown"===r.type?!1===u.status&&(u.event===l.default.NONE&&this._keyWatch.set(a,u),(0,d.default)(r,u)):(0,f.default)(r,u))}}}},{key:"pressed",value:function(t){return this._keyMapping.get(t).isPressed()}},{key:"release",value:function(t){return this._keyMapping.get(t).isReleased()}},{key:"press",value:function(t){return this._keyMapping.get(t).status}},{key:"enabled",get:function(){return this._enabled},set:function(t){(t=!!t)!==this._enabled&&(t||this.reset(),this._enabled=t)}}]),t}();e.default=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),r=u(i(1)),a=u(i(45));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i){(0,n.default)(this,t),this.game=i,this.keyCode=e,this._enabled=!0,this.status=!1,this.press=!1,this.release=!1,this.preventDefault=!0,this._event=a.default.NONE,this.pressTime=0,this.pressDuration=-2500,this.releaseTime=0,this.releaseDuration=-2500}return(0,r.default)(t,[{key:"isPressing",value:function(){return this.status}},{key:"isPressed",value:function(){return this.press&&this._event===a.default.PRESSED}},{key:"isReleased",value:function(){return!this.press&&0===this.releaseDuration}},{key:"reset",value:function(){this.status=!1,this._event=a.default.NONE,this.press=!1,this.release=!1,this.pressTime=0,this.pressDuration=-2500,this.releaseTime=0,this.releaseDuration=-2500}},{key:"event",get:function(){return this._event}},{key:"enabled",get:function(){return this._enabled},set:function(t){(t=!!t)!==this._enabled&&(t||this.reset(),this._enabled=t)}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.MouseButton={Left:0,Middle:1,Right:2,WheelUp:3,WheelDown:4}},function(t,e,i){"use strict";t.exports={Backspace:8,Tab:9,Enter:13,Shift:16,Ctrl:17,Alt:18,Pause:19,CapsLock:20,Escape:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Delete:46,Num0:48,Num1:49,Num2:50,Num3:51,Num4:52,Num5:53,Num6:54,Num7:55,Num8:56,Num9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LSystem:91,RSystem:92,SelectK:93,Numpad0:96,Numpad1:97,Numpad2:98,Numpad3:99,Numpad4:100,Numpad5:101,Numpad6:102,Numpad7:103,Numpad8:104,Numpad9:105,Multiply:106,Add:107,Subtract:109,DecimalPoint:110,Divide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NumLock:144,ScrollLock:145,SemiColon:186,Equal:187,Comma:188,Dash:189,Period:190,Slash:191,LBraket:219,BackSlash:220,RBracket:221,Quote:222}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(0)),r=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,i){(0,n.default)(this,t),this.game=e,this.draw=i,this.context=i.context,this.x=8,this.y=12,this.lineHeight=14,this.column=100,this.font="10px Verdana",this.textColor="white",this.bgcolor="#000",this.textShadow="#000"}return(0,r.default)(t,[{key:"test",value:function(){this.draw.disablePointTransform=!0,this.x=4,this.y=12,this.context.strokeStyle=this.bgcolor,this.context.font=this.font,this.draw.alpha=.5,this.draw.rect(0,0,this.game.width,46,this.bgcolor),this.draw.alpha=1,this.drawLine("FPS: "+Math.round(this.game.time.fps)+" / "+this.game.time.desiredFps),this.drawLine("Instances: "+this.game.system.entityList.length),this.drawLine("Draw Calls: "+this.game.system.render.drawCalls),this.x+=this.game.width/2,this.draw.disablePointTransform=!1}},{key:"drawLine",value:function(t){var e=this.x;this.context.fillStyle=this.textShadow,this.context.fillText(t,e+1,this.y+1),this.context.fillStyle=this.textColor,this.context.fillText(t,e,this.y),this.y+=this.lineHeight}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),r=u(i(1)),a=u(i(116));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){(0,n.default)(this,t),this.game=e,this.doubleBuffer=!1,this.smoothing=null,this.imageRendering=null,this.canvas=null,this.context=null,this.layer=new a.default(this.game),this._backgroundColor="#000",this._alpha=1,this._enable=!0,this.clear=!0,this.drawCalls=0}return(0,r.default)(t,[{key:"domCanvas",get:function(){return this.doubleBuffer?this._domCanvas:this.canvas}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t}},{key:"alpha",get:function(){return this._alpha},set:function(t){return this._alpha!==t&&(this.currentContext.globalAlpha=t,this._alpha=t),this._alpha}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(0)),r=o(i(1)),a=(o(i(17)),o(i(117))),u=o(i(7)),s=o(i(20));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,n.default)(this,t),this.game=e,this.renderLayers=new u.default,this.add("default")}return(0,r.default)(t,[{key:"has",value:function(t){return this.renderLayers.hasAt(t)}},{key:"add",value:function(t){if(this.contains(t))throw new Error('RenderLayerManagement.add: There is already a RenderLayer called: "'+t+'".');this.renderLayers.push(new a.default(this.game,t))}},{key:"remove",value:function(t){if("string"!=typeof t)throw new Error("RenderLayerManagement.remove: The value name is not a string.");if("default"===t)throw new Error('RenderLayerManagement.remove: You can not remove the "default" layer.');if(!this.__renderLayersMap.has(t))throw new Error('RenderLayerManagement.remove: Could not remove layer. There is no layer named "'+t+'".');this.__renderLayersMap.get(t);this.renderLayers.erase(t)}},{key:"contains",value:function(t){if("string"!=typeof t)throw new Error("RenderLayerManagement.contains: The value name is not a string.");return this.renderLayers.each(function(e){if(e.name==t)return!0})||!1}},{key:"findRenderableLayer",value:function(t){return this.renderLayers.each(function(e){if(e.has(t))return e})||null}},{key:"findRenderableAtLayer",value:function(t,e){return void 0===e&&(e=0),this.renderLayers.at(e).has(t)}},{key:"removeRenderable",value:function(t){return this.renderLayers.each(function(e){var i=e.renderList.indexOf(t);if(-1!==i)return e.removeAt(i)})||null}},{key:"addRenderable",value:function(t,e){if(void 0===e&&(e=0),e>=this.renderLayers.size?e=this.renderLayers.size-1:e<0&&(e=0),t instanceof s.default){var i=this.findRenderableLayer(t);return null!==i?(console.warn("RenderLayerManagement.addRenderable: Could not add renderable. The renderable is already in the layer '"+i.name+"'."),!1):(this.renderLayers.at(e).add(t),!0)}return console.warn("RenderLayerManagement.addRenderable: Could not add renderable. It is not a instance of Renderable module."),!1}}]),t}();e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),r=u(i(1)),a=u(i(7));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i){(0,n.default)(this,t),this._name=i,this.game=e,this.renderList=new a.default(!0),this.__drawCalls=0,this.__enable=!0,this.__isDirty=!1}return(0,r.default)(t,[{key:"add",value:function(t){void 0!==t&&(this.renderList.push(t),this.__isDirty=!0)}},{key:"has",value:function(t){return-1!==this.renderList.indexOf(t)}},{key:"remove",value:function(t){return this.renderList.remove(t)}},{key:"removeAt",value:function(t){return this.renderList.eraseAt(t)}},{key:"at",value:function(t){if(t<0||t>=this.__renderers.size)throw new Error("RenderLayer.at: Renderer at "+t+' does not exist in the render layer list: "'+name+'".');return this.renderList.at(t)}},{key:"drawCalls",get:function(){return this.__drawCalls}},{key:"length",get:function(){return this.__renderers.length}},{key:"name",get:function(){return this._name}},{key:"enable",get:function(){return this.__enable},set:function(t){(t=!!t)!==this._enabled&&(this._enabled=t)}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(5);var a={crisp:function(t){return["optimizeSpeed","crisp-edges","-moz-crisp-edges","-webkit-optimize-contrast","optimize-contrast","pixelated"].forEach(function(e){t.style["image-rendering"]=e}),t.style.msInterpolationMode="nearest-neighbor",t},bicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}};(0,((n=r)&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(64)),r=s(i(0)),a=s(i(1)),u=s(i(7));function s(t){return t&&t.__esModule?t:{default:t}}var o=new(function(){function t(){(0,r.default)(this,t),this.list=new u.default}return(0,a.default)(t,[{key:"create",value:function(t,e,i){var n=this.firstFree(),r=void 0;return null===n?(n={parent:t,canvas:document.createElement("canvas")},this.list.push(n),r=n.canvas):(n.parent=t,r=n.canvas),r.width=e,r.height=i,r}},{key:"filter",value:function(t){return scintilla.CanvasList.list.parent===t}},{key:"firstFree",value:function(){return this.list.each(function(t){if(!t.parent)return t}),null}},{key:"remove",value:function(t){for(var e=this.list,i=0;i<e.length;i++)e[i].parent===t&&(e[i].parent=null)}},{key:"clear",value:function(){}}]),t}());(0,n.default)(o),e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.RenderingType={NEAREST:0,LINEAR:1}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),r=u(i(1)),a=i(120);function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){(0,n.default)(this,t),this.context=e,this.prefix=this.getPrefix(e)}return(0,r.default)(t,[{key:"getPrefix",value:function(t){for(var e=["i","webkitI","msI","mozI","oI"],i=0;i<e.length;i++){var n=e[i]+"mageSmoothingEnabled";if(n in t)return n}return null}},{key:"setEnable",value:function(t){return"undefined"===t&&(t=!0),""!==this.prefix&&void 0!==this.prefix||(this.prefix=this.getPrefix(this.context)),this.prefix&&(this.context[this.prefix]=t),this.context}},{key:"set",value:function(t){t==a.RenderingType.NEAREST?this.setEnable(!1):this.setEnable(!0)}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t,i=t._system.context.createBufferSource();return i.buffer=t.resource,i.connect(t.gainNode),i.onended=function(t){t.target===e.buffer&&(e._ended=!0)},i}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){void 0===e&&(e=0);var i=t._system.context.currentTime,n=t.duration;t.playTime=i-e,t.startTime=i;var r=t.buffer;void 0!==r.loop&&(r.loop=t.loop);r.start(Math.max(0,i),Math.max(0,0),Math.max(0,n)),t.gainNode.gain.value=t._volume}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(5);var a={NOAUDIO:0,WEBAUDIO:1};(0,((n=r)&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(5)),r=l(i(0)),a=l(i(1)),u=l(i(8)),s=i(27),o=l(s);function l(t){return t&&t.__esModule?t:{default:t}}var d=new(function(){function t(){(0,r.default)(this,t)}return(0,a.default)(t,[{key:"linear",value:function(t,e,i){return u.default.lerp(t,e,i)}},{key:"stepped",value:function(t,e,i){return i<.5?t:t+e}},{key:"cut",value:function(t,e,i,n){return void 0===n&&(n=2),u.default.lerp(t,e,u.default.floor(i*n)/n)}},{key:"sine",value:function(t,e,i){return e*(Math.sin(i*u.default.HALFPI-u.default.HALFPI)+1)+t}},{key:"power",value:function(t,e,i,n){return e*Math.pow(i,n)+t}},{key:"quadratic",value:function(t,e,i){return this.power(t,e,i,2)}},{key:"cubic",value:function(t,e,i){return this.power(t,e,i,3)}},{key:"quartic",value:function(t,e,i){return this.power(t,e,i,4)}},{key:"quintic",value:function(t,e,i){return this.power(t,e,i,5)}},{key:"exponential",value:function(t,e,i){return 0==i?t:e*Math.pow(2,10*(i-1))+t}},{key:"circ",value:function(t,e,i){return-e*(Math.sqrt(1-i*i)-1)+t}},{key:"elastic",value:function(t,e,i,n){if(void 0===n&&(n=1),0==i)return t;if(1==(i/=n))return t+e;var r=.3*n,a=r/4;return-(e*Math.pow(2,10*(i-=1)))*Math.sin((i*n-a)*(2*Math.PI)/r)+t}},{key:"back",value:function(t,e,i){return e*i*i*((s.EASE_BACK_CONST+1)*i-s.EASE_BACK_CONST)+t}},{key:"by",value:function(t,e,i,n,r){switch(void 0===r&&(r=3),t){case o.default.NONE:return n;case o.default.STEPPED:return this.stepped(e,i,n);case o.default.CUT:return this.cut(e,i,n,r);case o.default.LINEAR:return this.linear(e,i,n);case o.default.SINE:return this.sine(e,i,n);case o.default.QUADRATIC:return this.power(e,i,n,2);case o.default.CUBIC:return this.power(e,i,n,3);case o.default.QUARTIC:return this.power(e,i,n,4);case o.default.QUINTIC:return this.power(e,i,n,5);case o.default.POWER:return this.power(e,i,n,r);case o.default.EXPONENTIAL:return this.exponential(e,i,n);case o.default.CIRC:return this.circ(e,i,n);case o.default.BACK:return this.back(e,i,n);case o.default.ELASTIC:return this.elastic(e,i,n,r)}return n}}]),t}());(0,n.default)(d),e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=this;this._filesQueue.each(function(e){e.state!==a.default.FINISHED&&e.state!==a.default.PENDING||(t._filesLoading.insert(e),t._filesQueue.erase(e),t.loadAsset(e))})};var n,r=i(6),a=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this._successFiles.clear(),this._filesQueue.clear();var t=this.cache;if(this._processedFiles.size>0){this._processedFiles.sort(function(t,e){return t.type>e.type});var e=this;this._processedFiles.each(function(i){var n=void 0;switch(i.type){default:break;case a.default.svg:case a.default.image:n=t.image.add(i.tag,i.data);break;case a.default.audio:n=t.audio.add(i.tag,i.data);break;case a.default.json:n=t.json.add(i.tag,i.data);break;case a.default.tilemapJSON:n=(0,u.default)(i.tag,i.data,t),t.tilemap.add(i.tag,n);break;case a.default.spritesheet:n=t.animation.add(i.tag,i.data);break;case a.default.animMachine:n=t.animMachine.add(i.tag,i.data)}void 0!==n&&e.game.events.dispatch("asset_complete",n,i.type)})}this._processedFiles.clear(),this.state=r.default.DONE,n.default.call(this.game.scene)};var n=s(i(135)),r=s(i(6)),a=s(i(11)),u=s(i(291));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(this.state===n.default.PROCESSING)return;this.progress=1,this.isDownloading=!1,this.state=n.default.PROCESSING,this._processedFiles.clear(),0===this._successFiles.size?r.default.call(this):this._successFiles.each(function(t){t.onProcessing(a.default.bind(this))},this)};var n=u(i(6)),r=u(i(127)),a=u(i(276));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(void 0===t)return;void 0===i&&(i=!1);void 0!==t.destroy&&null!==t.destroy&&t.destroy.call(t);var n=!0;!0===i&&(n=!1===t.persistent);if(!1===n)return;var r=void 0;!0===t.isPooled&&(r=e.system.pool.get(t._pool));void 0!==r&&r.remove(t);(0,a.default)(t.modules,e),t._transform=null,t.modules=null,t.scene=null,t=null};var n,r=i(133),a=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){t.entity=e,t.moduleManager=e.modules}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={LINEAR:0,LINEAR90DEG:1}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(i(2)),r=d(i(0)),a=d(i(1)),u=d(i(4)),s=d(i(3)),o=d(i(20)),l=d(i(298));function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i){(0,r.default)(this,e);var a=(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,"tilemapLayer",t.moduleManager));return a.tilemap=t,a.data=i,a}return(0,s.default)(e,t),(0,a.default)(e,[{key:"render",value:function(t){return!(!this._enabled&&!this.tilemap._enabled)&&(0,l.default)(t,this.tilemap,this.data,this.tilemap.moduleManager.entity._transform)}},{key:"getTile",value:function(t,e){return this.data.getTile(t,e)}},{key:"width",get:function(){return this.data.width*this.tilemap.tileWidth}},{key:"height",get:function(){return this.data.height*this.tilemap.tileHeight}}]),e}(o.default);e.default=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){t.attached.each(function(t,i){"render"===i.type&&(0,a.default)(i,e.render),i.entity=null,i.moduleManager=null}),t.attached.clear()};var n,r=i(308),a=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t._transition;t.game.system.transition.by(i),i===a.default.FADEINOUT?t.game.system.events.subscribeOnce("transition_pause_end",e):t.game.system.events.subscribeOnce("transition_end",e);t._transition=a.default.NONE,t._isTranistioning=!0};var n,r=i(24),a=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){!1===this._setup&&this.onLoadingCallback&&this.onLoadingCallback.call(this.currentScene,this.game);function t(){this._scintillaLoading?this._loadingPlaceHolder.start():this.onStartCallback&&this.onStartCallback.call(this.currentScene,this.game)}this._transition<=n.default.NONE?t.call(this):(0,r.default)(this,t.bind(this));this._setup=!0};var n=a(i(24)),r=a(i(134));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var i in e.game=t,u.default){var n=r.GameSystems[u.default[i]];void 0!==n&&(e[n.name]=t.system[n.name])}e.key=t.input.keyboard,e.mouse=t.input.mouse,e.audio=t.audio};var n,r=i(10),a=i(50),u=(n=a)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){t._setup?t._scintillaLoading?t._loadingPlaceHolder.gui(e):t.onRenderCallback&&t.onRenderCallback.call(t.currentScene,e):t._scintillaLoading?t._loadingPlaceHolder.loadingGUI(e):t.onLoadingRenderCallback&&t.onLoadingRenderCallback.call(t.currentScene,e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n,r){void 0===r&&(r={x:0,y:0});var a=e.matrix.transformPoint(-r.x,-r.y),u=e.matrix.transformPoint(i-r.x,-r.y),s=e.matrix.transformPoint(-r.x,n-r.y),o=e.matrix.transformPoint(i-r.x,n-r.y);t.min.x=Math.min(a.x,u.x,s.x,o.x),t.min.y=Math.min(a.y,u.y,s.y,o.y),t.max.x=Math.max(a.x,u.x,s.x,o.x),t.max.y=Math.max(a.y,u.y,s.y,o.y)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(0)),r=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){(0,n.default)(this,t),void 0===e&&(e=!1),this.isRunning=!1,this._isTimeOutMode=e,this.thick=0,this.lastTime=0,this.loopCallback=null,this.timeOutIdentifier=null;var i=this;this.updateRequestAnimationFrame=function(t){i.lastTime=i.thick,i.thick=t,i.loopCallback(t),i.timeOutIdentifier=window.requestAnimationFrame(i.updateRequestAnimationFrame)},this.updateTimeout=function(){var t=Date.now(),e=Math.max(16+i.lastTime-t,0);i.lastTime=i.thick,i.thick=e,i.loopCallback(e),i.timeOutIdentifier=window.setTimeout(i.updateTimeout,e)}}return(0,r.default)(t,[{key:"start",value:function(t){this.isRunning||(this.isRunning=!0,this.loopCallback=t,!window.requestAnimationFrame||this._isTimeOutMode?(this._isTimeOutMode=!0,this.timeOutIdentifier=window.setTimeout(this.updateTimeout,0)):(this._isTimeOutMode=!1,this.timeOutIdentifier=window.requestAnimationFrame(this.updateRequestAnimationFrame)))}},{key:"stop",value:function(){this._isTimeOutMode?clearTimeout(this.timeOutIdentifier):window.cancelAnimationFrame(this.timeOutIdentifier),this.isRunning=!1}},{key:"destroy",value:function(){this.stop(),this.loopingCallback=null}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(0)),r=a(i(9));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e){(0,n.default)(this,t),void 0===e&&(e={});var i=r.default.value,a=r.default.propertyValue;this.width=i(e,"width",640),this.height=i(e,"height",480),this.parent=i(e,"parent",null),this.debug=i(e,"debug",!1),this.pixelated=i(e,"pixelated",!1),this.doubleBuffer=i(e,"doubleBuffer",!0),this.roundPixels=i(e,"roundPixels",!1),this.floorTiles=i(e,"floorTiles",!1),this.autoResize=i(e,"autoResize",!1),this.loader={baseURL:a(e,"loader.baseURL",""),path:a(e,"loader.path",""),responseType:a(e,"loader.responseType",""),async:a(e,"loader.async",!0)},this.audio={noAudio:a(e,"audio.noAudio",!1),context:a(e,"audio.context",null),webAudio:a(e,"audio.webAudio",!0)},this.fps=i(e,"fps",60),this.time={timeoutMode:a(e,"time.timeOutMode",!1)},this.camera={width:a(e,"camera.width",this.width),height:a(e,"camera.height",this.height)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(5)),r=u(i(12)),a=u(i(328));function u(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e){var i=(0,a.default)(e);i.forEach(function(i){var n=e[i];"object"==(void 0===n?"undefined":(0,r.default)(n))&&null!==n&&t(n)});return(0,n.default)(e)}},function(t,e,i){var n=i(147),r=i(79).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},function(t,e,i){var n=i(28),r=i(142).f,a={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==a.call(t)?function(t){try{return r(t)}catch(t){return u.slice()}}(t):r(n(t))}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){var n=i(29),r=i(77),a=i(81)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),n(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){var n=i(29),r=i(28),a=i(355)(!1),u=i(81)("IE_PROTO");t.exports=function(t,e){var i,s=r(t),o=0,l=[];for(i in s)i!=u&&n(s,i)&&l.push(i);for(;e.length>o;)n(s,i=e[o++])&&(~a(l,i)||l.push(i));return l}},function(t,e,i){t.exports=i(36)},function(t,e,i){var n=i(25),r=i(26).document,a=n(r)&&n(r.createElement);t.exports=function(t){return a?r.createElement(t):{}}},function(t,e,i){t.exports=!i(30)&&!i(40)(function(){return 7!=Object.defineProperty(i(149)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(359);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,i){"use strict";var n=i(85),r=i(37),a=i(148),u=i(36),s=i(83),o=i(358),l=i(78),d=i(145),f=i(35)("iterator"),c=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,i,v,y,_,p){o(i,e,v);var m,g,M,b=function(t){if(!c&&t in O)return O[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},x=e+" Iterator",w="values"==y,k=!1,O=t.prototype,S=O[f]||O["@@iterator"]||y&&O[y],L=S||b(y),j=y?w?b("entries"):L:void 0,P="Array"==e&&O.entries||S;if(P&&(M=d(P.call(new t)))!==Object.prototype&&M.next&&(l(M,x,!0),n||"function"==typeof M[f]||u(M,f,h)),w&&S&&"values"!==S.name&&(k=!0,L=function(){return S.call(this)}),n&&!p||!c&&!k&&O[f]||u(O,f,L),s[e]=L,s[x]=h,y)if(m={values:w?L:b("values"),keys:_?L:b("keys"),entries:j},p)for(g in m)g in O||a(O,g,m[g]);else r(r.P+r.F*(c||k),e,m);return m}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={MAJOR:0,MINOR:0,REVISION:1,VERSION:"0.0.1"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(!o.default.features.canvas)throw new Error("Game.CreateRender: Could not create Canvas element. Canvas is not supported in your platform.");var i=new s.default(t);i.imageRendering=e.pixelated?u.RenderingType.NEAREST:u.RenderingType.LINEAR,e.canvas?i.canvas=e.canvas:i.canvas=n.default.create(t,e.width,e.height);i.context=i.canvas.getContext("2d",{alpha:!1}),i.smoothing=new a.default(i.context),e.pixelated&&(r.default.crisp(i.canvas),i.smoothing.set(i.imageRendering));e.doubleBuffer&&(i.doubleBuffer=!0,i._domCanvas=n.default.create(t,e.width,e.height),i._domContext=i._domCanvas.getContext("2d",{alpha:!1}));return i};var n=l(i(119)),r=l(i(118)),a=l(i(121)),u=i(120),s=l(i(115)),o=l(i(39));function l(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),r=s(i(1)),a=s(i(89)),u=s(i(124));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e){(0,n.default)(this,t),this.manager=e,this.context=null,this.masterVolume=null,this.destination=null,this.locked=null,this.type=u.default.WEBAUDIO,(0,a.default)(this)}return(0,r.default)(t,[{key:"onFocus",value:function(){this.context.resume()}},{key:"onBlur",value:function(){this.context.suspend()}},{key:"destroy",value:function(){this.destination=null,this.masterVolume.disconnect(),this.masterVolume=null,this.context.close(),this.context=null}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(2)),r=l(i(0)),a=l(i(1)),u=l(i(4)),s=l(i(43)),o=l(i(3));function l(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(){return(0,r.default)(this,e),(0,u.default)(this,(e.__proto__||(0,n.default)(e)).apply(this,arguments))}return(0,o.default)(e,t),(0,a.default)(e,[{key:"setVolume",value:function(t){return this._volume=t,this}},{key:"play",value:function(){(0,s.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"play",this).call(this)}},{key:"pause",value:function(){}},{key:"stop",value:function(){(0,s.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"stop",this).call(this)}},{key:"destroy",value:function(){(0,s.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"volume",get:function(){return 1},set:function(t){this._volume=t}}]),e}(l(i(57)).default);e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.buffer&&(t.buffer.stop(),t.buffer.disconnect(),t.buffer=null);t.playTime=0,t.startTime=0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=h(i(2)),r=h(i(0)),a=h(i(1)),u=h(i(4)),s=h(i(43)),o=h(i(3)),l=h(i(57)),d=h(i(122)),f=h(i(157)),c=h(i(123));function h(t){return t&&t.__esModule?t:{default:t}}var v=function(t){function e(t,i,a,s,o){(0,r.default)(this,e);var l=(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,o));return l.buffer=null,l.duration=i.duration,l.gainNode=l._system.context.createGain(),l.gainNode.connect(l._system.destination),l.volume=a||1,l.loop=s||!1,l}return(0,o.default)(e,t),(0,a.default)(e,[{key:"setVolume",value:function(t){return this._volume=t,this}},{key:"play",value:function(){(0,s.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"play",this).call(this),(0,f.default)(this),this.buffer=(0,d.default)(this),(0,c.default)(this)}},{key:"pause",value:function(){}},{key:"stop",value:function(){return(0,s.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"stop",this).call(this),(0,f.default)(this),this}},{key:"destroy",value:function(){(0,f.default)(this),this.buffer=null,null!==this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),(0,s.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"volume",get:function(){return this.gainNode.gain.value},set:function(t){this.gainNode&&this.gainNode.gain.setValueAtTime(t,0),this._volume=t}}]),e}(l.default);e.default=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,a){var u=this._soundCache.get(t),s=void 0;void 0===u||null===u?(console.warn("AudioManager.add: Could not add audio source with tag: '"+t+"."),s=new r.default(this,null,t)):s=new n.default(this,u,e,i,a);return this._sounds.push(s),s};var n=a(i(158)),r=a(i(156));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=new r.default(t);if(!t.config.audio.noAudio){var i=n.default.supportAudio&&n.default.supportWebAudio;if(i&&t.config.audio.webAudio){var o=new s.default(e);(0,u.default)(o),e._system=o,e.add=a.default.bind(e)}}return e};var n=o(i(39)),r=o(i(94)),a=o(i(159)),u=o(i(89)),s=o(i(155));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(12),a=(n=r)&&n.__esModule?n:{default:n};e.default=function(t,e,i){void 0===i&&(i=!0);var n=null;e&&("string"==typeof e?n=document.getElementById(e):"object"===(void 0===e?"undefined":(0,a.default)(e))&&1===e.nodeType&&(n=e));n||(n=document.body);i&&n.style&&(n.style.overflow="hidden");return n.appendChild(t),t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=void 0;if(void 0!==document.hidden)e="visibilitychange";else{["webkit","moz","ms"].forEach(function(t){void 0!==document[t+"Hidden"]&&(document.hidden=function(){return document[t+"Hidden"]},e=t+"visibilitychange")})}e&&document.addEventListener(e,function(e){document.hidden||"pause"===e.type?t.dispatch("hidden"):t.dispatch("visible")},!1);window.onblur=function(){t.dispatch("blur")},window.onfocus=function(){t.dispatch("focus")}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(e===i)return e;var n=this.layer.renderLayers.at(e);if(void 0===n&&void 0===(n=this.layer.findRenderableLayer(t)))return this.layer.renderLayers.at(0).add(t),0;var r=this.layer.renderLayers.at(i);if(void 0===r||r===n)return e;var a=n.renderList.indexOf(renderer);return-1===a?e:(n.removeAt(a),r.add(renderer),i)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=this.layer.renderLayers.at(t);if(void 0===e)return;if(!0===e.__isDirty)return;e.__isDirty=!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i={};for(var s in n.GameSystems){var o=n.GameSystems[s];i[o.name]=new o.system(t,i)}for(var l in t.system=i,t.scene=i.scene,t.render=e,t.events=i.events,i.render=e,n.GameSystems){var d=n.GameSystems[l],f=d.init;void 0!==f&&f.call(i[d.name])}return(0,u.default)(t.events),i.events.subscribe("__render_depthsorting",r.default,e),i.events.subscribe("__render_layeridchange",a.default,e),i};var n=i(10),r=s(i(164)),a=s(i(163)),u=s(i(162));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(0)),r=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){(0,n.default)(this,t),this.game=e}return(0,r.default)(t,[{key:"init",value:function(t){this._updateStep=t.updateStep}},{key:"now",get:function(){return this._updateStep.time}},{key:"fps",get:function(){return this._updateStep.fps}},{key:"desiredFps",get:function(){return this._updateStep.fpsDesired}},{key:"delta",get:function(){return this._updateStep.deltaTime}},{key:"elapsed",get:function(){return this._updateStep.elapsed}},{key:"rawDelta",get:function(){return this._updateStep.hiDeltaTime}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(0)),r=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,n.default)(this,t),this.a=null,this.b=null,this.overlapN=new Vector,this.overlapV=new Vector,this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this.indexShapeA=-1,this.indexShapeB=-1,this.clear()}return(0,r.default)(t,[{key:"clear",value:function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this.indexShapeA=-1,this.indexShapeB=-1,this}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),r=u(i(1)),a=u(i(33));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){(0,n.default)(this,t),this.VECTORS=[];for(var e=0;e<10;e++)VECTORS.push(new a.default);this.ARRAYS=[];for(var i=0;i<5;i++)ARRAYS.push([])}return(0,r.default)(t,[{key:"flattenPointsOn",value:function(t,e,i){for(var n=Number.MAX_VALUE,r=-Number.MAX_VALUE,a=t.length,u=0;u<a;u++){var s=t[u].dot(e);s<n&&(n=s),s>r&&(r=s)}i[0]=n,i[1]=r}},{key:"isSeparatingAxis",value:function(t,e,i,n,r,a){var u=ARRAYS.pop(),s=ARRAYS.pop(),o=VECTORS.pop().copy(e).sub(t),l=o.dot(r);if(flattenPointsOn(i,r,u),flattenPointsOn(n,r,s),s[0]+=l,s[1]+=l,u[0]>s[1]||s[0]>u[1])return VECTORS.push(o),ARRAYS.push(u),ARRAYS.push(s),!0;if(a){var d,f,c=0;if(u[0]<s[0])if(a.aInB=!1,u[1]<s[1])c=u[1]-s[0],a.bInA=!1;else c=(d=u[1]-s[0])<(f=s[1]-u[0])?d:-f;else if(a.bInA=!1,u[1]>s[1])c=u[0]-s[1],a.aInB=!1;else c=(d=u[1]-s[0])<(f=s[1]-u[0])?d:-f;var h=Math.abs(c);h<a.overlap&&(a.overlap=h,a.overlapN.copy(r),c<0&&a.overlapN.reverse())}return VECTORS.push(o),ARRAYS.push(u),ARRAYS.push(s),!1}},{key:"testPolygonPolygon",value:function(t,e,i){for(var n=t.shape.getPoints(),r=t.shape.getNormals(),a=r.length,u=e.shape.getPoints(),s=e.shape.getNormals(),o=s.length;a--;)if(isSeparatingAxis(t.position,e.position,n,u,r[a],i))return!1;for(;o--;)if(isSeparatingAxis(t.position,e.position,n,u,s[o],i))return!1;return i&&(i.a=t,i.b=e,i.overlapV.copy(i.overlapN).scale(i.overlap)),!0}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),r=s(i(1)),a=s(i(168)),u=s(i(167));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e){(0,n.default)(this,t),this.game=null,this.sat=null,this.response=null,this.game=e,this.colliadables=[]}return(0,r.default)(t,[{key:"init",value:function(){this.sat=new a.default,this.response=new u.default}},{key:"getColliadables",value:function(){return this.colliadables}},{key:"addColliderObj",value:function(t){this.colliadables.push(t)}},{key:"removeColliderObj",value:function(t){var e=this.colliadables.indexOf(t);-1!=e&&this.colliadables.splice(e,1)}},{key:"clear",value:function(){this.colliadables=[],this.colliadables.length=0}},{key:"length",get:function(){return this.colliadables.length}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(64));e.default=function(t){if(t.systemInited)return;var e=(0,d.default)(t,t.config),i=e.canvas;e.doubleBuffer&&(i=e._domCanvas);(0,o.default)(i,t.config.parent),t.physics=new r.default(t),t.input=new a.default(t),t.time=new u.default(t),f.default.reset([(Date.now()*Math.random()).toString()]),(0,s.default)(t,e),t.audio=(0,l.default)(t),t.input.init(),t.time.init(t.system.loop),t.systemInited=!0,t.isRunning=!0,(0,n.default)(t),console.log("scintilla started!")};var r=c(i(169)),a=c(i(108)),u=c(i(166)),s=c(i(165)),o=c(i(161)),l=c(i(160)),d=c(i(154)),f=c(i(107));function c(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),r=s(i(1)),a=s(i(140)),u=s(i(170));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(){(0,n.default)(this,t),this.parent="body",this.width=800,this.height=600,this.config=new a.default(config),this.systemInited=!1,this.isRunning=!1,this.debugMode=!1,this.timeMode=!1,this.debug=null,this.sound=null,this.input=null,this.pool=null,this.systems=null,this.context=null,this.time=null,this.events=null,this.parseConfiguration(this.config),(0,u.default)(this)}return(0,r.default)(t,[{key:"parseConfiguration",value:function(t){t.debug&&(this.debugMode=t.debug),t.width&&(this.width=t.width),t.height&&(this.height=t.height),t.parent&&(this.parent=t.parent)}},{key:"destroy",value:function(){this.physics.destroy(),this.sound.destroy(),this.input.destroy(),this.debug=null,this.cache=null,this.load=null,this.canvas=null,this.scene=null,this.sound=null,this.draw=null,this.universe=null,this.world=null,this.input=null,this.time=null,this.render=null,this.component=null,this.instance=null,this.animationCache=null,this.updateGameMethod=null}}]),t}();e.default=o,t.exports=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.cache=this.game.system.cache,this._filesQueue=new n.default,this._filesLoading=new n.default,this._successFiles=new n.default,this._failedFiles=new n.default,this._processedFiles=new n.default,this._filesQueueCount=0,this._loadedFilesCount=0,this.progress=0,this.path="",this.baseURL="",this.state=r.default.IDLE};var n=a(i(67)),r=(a(i(95)),a(i(6)));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(0)),r=f(i(1)),a=f(i(10)),u=f(i(9)),s=f(i(56)),o=f(i(14)),l=f(i(6)),d=f(i(172));function f(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){(0,n.default)(this,t),this.game=e,this.cache=null,this._filesQueue=null,this._filesLoading=null,this._successFiles=null,this._failedFiles=null,this._processedFiles=null,this._filesQueueCount=null,this._loadedFilesCount=null,this.isDownloading=!1,this._totalFiles=0,this.progress=null,this.path=null,this.baseURL=null,this.state=null,this.webFontLoader=void 0,this.events=null,this.crossOrigin=void 0;var i=e.config.loader;this.xhr=s.default.createSettings(u.default.value(config,"responseType",i.responseType),u.default.value(config,"async",i.async),u.default.value(config,"timeout",i.timeout)),o.default.inject(this)}return(0,r.default)(t,[{key:"setPath",value:function(t){return""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this}},{key:"setBaseURL",value:function(t){return""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t||"",this}},{key:"setCrossOrigin",value:function(t){return this.crossOrigin=t,this}},{key:"reset",value:function(){this.isDownloading=!1,this._filesQueue.clear(),this._successFiles.clear(),this._failedFiles.clear(),this._processedFiles.clear(),this._filesQueueCount=0,this._loadedFilesCount=0,this.progress=0,this.state=l.default.IDLE}},{key:"loadAsset",value:function(t){t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load(this)}},{key:"isLoading",value:function(){return this.state===l.default.LOADING||this.state===l.default.PROCESSING}},{key:"isOK",value:function(){return this.state===l.default.IDLE||this.state===l.default.DONE||this.state===l.default.ERROR}},{key:"downloadIsDone",value:function(){return this._filesQueue.length==this._successCount+this._fileErrorCount}},{key:"totalQueuedFiles",get:function(){return this._filesQueueCount-this._loadedFilesCount}}]),t}();e.default=c,a.default.register("Loader",c,"load",d.default)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=v(i(2)),r=v(i(0)),a=v(i(1)),u=v(i(4)),s=v(i(3)),o=v(i(14)),l=v(i(11)),d=v(i(19)),f=v(i(18)),c=v(i(6)),h=v(i(55));function v(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t,i,a){(0,r.default)(this,e),a.type=i;var s={type:i,tag:t,config:a};return(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,s))}return(0,s.default)(e,t),(0,a.default)(e,[{key:"load",value:function(t){this.loader=t,this.state===c.default.FINISHED&&this.onDone(),h.default.call(this.loader,this)}},{key:"onProcessing",value:function(t){this.state=c.default.PROCESSING,this.data=this.config,this.onDone(),t(this)}}]),e}(f.default);e.default=y,o.default.register("spritesheet",function(t,e,i){var n,r=i;return Array.isArray(i)||(r=Array.prototype.slice.call(arguments,2,arguments.length-2)),n=new y(t,l.default.spritesheet,{imageTag:e,x:r[0]||0,y:r[1]||0,frameWidth:r[2]||0,frameHeight:r[3]||0,numberOfImages:r[4]||0,framesPerRow:r[5]||void 0,spacing:r[6]||void 0,duration:r[7]||arguments[3]}),d.default.call(this,n),this}),o.default.register("animMachine",function(t,e){var i=new y(t,l.default.animMachine,{animations:e||[]});return d.default.call(this,i),this})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=y(i(2)),r=y(i(0)),a=y(i(1)),u=y(i(4)),s=y(i(3)),o=y(i(18)),l=y(i(11)),d=y(i(6)),f=y(i(21)),c=y(i(19)),h=y(i(14)),v=y(i(55));function y(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function e(t,i,a,s){(0,r.default)(this,e);var o={type:l.default.webFont,tag:t,config:{provider:i||"google",families:a,timeout:s||3e3}};return(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,o))}return(0,s.default)(e,t),(0,a.default)(e,[{key:"load",value:function(t){this.loader=t,this.state===d.default.FINISHED?(this.onDone(),v.default.call(this.loader,this)):void 0!==this.loader.webFontLoader&&this.loader.webFontLoader.state===d.default.DONE&&void 0!==this.fontLoad&&this.fontLoad()}},{key:"fontLoad",value:function(){if(void 0!==WebFont){this.state=d.default.PROCESSING;var t=this.config.provider;if(!f.default.isArray(this.config.families)){var e=[];e.push(this.config.families),this.config.families=e}var i={families:this.config.families},n={timeout:this.config.timeout,inactive:this.onError.bind(this),fontactive:this.onLoad.bind(this),classes:!0};n[t]=i,WebFont.load(n)}}},{key:"onLoad",value:function(t,e){this.data={family:t,fvd:e},v.default.call(this.loader,this)}}]),e}(o.default);e.default=_,h.default.register("webFont",function(t,e,i,n){return c.default.call(this,new _(t,e,i,n)),this})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=v(i(2)),r=v(i(0)),a=v(i(1)),u=v(i(4)),s=v(i(3)),o=(v(i(18)),v(i(90))),l=v(i(6)),d=v(i(22)),f=v(i(11)),c=v(i(19)),h=v(i(14));function v(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t,i,a,s){(0,r.default)(this,e);var o=(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,a,s));return o.type=f.default.tilemapJSON,o}return(0,s.default)(e,t),(0,a.default)(e,[{key:"onPostLoad",value:function(t,e){this.state=l.default.PROCESSING,this.data=JSON.parse(e.responseText),function(t,e,i){if(void 0!==e){var n=e.length;if(!(n<=0))for(var r=0;r<n;r++){var a=e[r];if(a.image){var u=d.default.getFilenameWithoutExtension(a.image)||a.name,s=d.default.getPathWithoutRoot(i).concat(d.default.getFilename(a.image));t.image(u,s,void 0,void 0,!1)}}}}(t,this.data.tilesets,this.url)}},{key:"onProcessing",value:function(t){this.onDone(),t(this)}}]),e}(o.default);e.default=y,h.default.register("tilemapJSON",function(t,e,i,n){return c.default.call(this,new y(t,e,this.path,n)),this})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=y(i(2)),r=y(i(0)),a=y(i(1)),u=y(i(4)),s=y(i(3)),o=y(i(6)),l=y(i(18)),d=y(i(9)),f=y(i(22)),c=y(i(11)),h=y(i(19)),v=y(i(14));function y(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function e(t,i,a,s,o){(0,r.default)(this,e);var l=null;l="string"==typeof t?t:d.default.value(t,"tag","");var h=!1;void 0!==a&&"boolean"==typeof a&&(h=a);var v={type:c.default.text,tag:l,ext:d.default.value(t,"ext",f.default.getExtension(i)),url:d.default.value(t,"file",i),path:a,responseType:"",xhrSettings:d.default.value(t,"xhr",s),config:d.default.value(t,"config",o),useExternal:h};return(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,v))}return(0,s.default)(e,t),(0,a.default)(e,[{key:"onProcessing",value:function(t){this.state=o.default.PROCESSING,this.data=this.xhrRequest.responseText,this.onDone(),t(this)}}]),e}(l.default);e.default=_,v.default.register("text",function(t,e,i,n){var r=this.path;return void 0!==i&&"boolean"==typeof i&&(r=i),h.default.call(this,new _(t,e,r,n)),this}),t.exports=_},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=_(i(2)),r=_(i(0)),a=_(i(1)),u=_(i(4)),s=_(i(3)),o=_(i(18)),l=_(i(9)),d=_(i(11)),f=_(i(22)),c=_(i(6)),h=_(i(19)),v=_(i(14)),y=_(i(54));function _(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,i,a,s){(0,r.default)(this,e);t="string"==typeof t?t:l.default.value(t,"key","");var o={type:d.default.svg,ext:l.default.value(t,"ext",f.default.getExtension(i)||"svg"),responseType:"text",tag:tagFile,url:l.default.value(t,"file",i),path:a,xhrSettings:l.default.value(t,"xhr",s)};return(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,o))}return(0,s.default)(e,t),(0,a.default)(e,[{key:"onProcessing",value:function(t){this.state=c.default.PROCESSING;var e=this,i=[this.xhrLoader.responseText],n=void 0;try{n=new window.Blob(i,{type:"image/svg+xml;charset=utf-8"})}catch(i){return e.state=c.default.ERROR,void t(e)}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){y.default.revoke(e.data),e.onDone(),t(e)},this.data.onerror=function(){y.default.revoke(e.data),console.warn("Loader.SVGFile: Error on load file: "+e.url+"."),e.state=c.default.ERROR,t(e)},y.default.createFromResponse(this.data,n,"image/svg+xml")}}]),e}(o.default);e.default=p,v.default.register("svg",function(t,e,i,n){return h.default.call(this,new p(t,e,this.path,n)),this})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.constructor!==Array&&(t=[t]);for(var e=0;e<t.length;e++){var i=n.default.value(t[e],"uri",t[e]);if(0===i.indexOf("blob:")||0===i.indexOf("data:"))return i;var a=i.match(/\.([a-zA-Z0-9]+)($|\?)/);if(a=n.default.value(t[e],"type",a?a[1]:"").toLowerCase(),r.default.audioFormats[a])return{uri:i,type:a}}return null};var n=a(i(9)),r=a(i(39));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=_(i(2)),r=_(i(0)),a=_(i(1)),u=_(i(4)),s=_(i(3)),o=_(i(18)),l=_(i(14)),d=_(i(11)),f=_(i(9)),c=_(i(179)),h=_(i(19)),v=_(i(6)),y=_(i(39));function _(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,i,a,s,o){(0,r.default)(this,e);var l={tag:t,type:d.default.audio,ext:f.default.value(i,"type",""),responseType:"arraybuffer",url:f.default.value(i,"uri",i),path:a,xhrSettings:s},c=(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,l));return c.context=o,c}return(0,s.default)(e,t),(0,a.default)(e,[{key:"onProcessing",value:function(t){this.state=v.default.PROCESSING;var e=this;this.context.decodeAudioData(this.xhrRequest.response,function(i){e.data=i,e.onDone(),t(e)},function(i){console.error("AudioFile.onProcessing: Failed to decode audio data of the file '"+e.tag+"':",i.message),e.state=v.default.ERROR,t(e)}),this.context=null}}],[{key:"create",value:function(t,i,n,r,a){if(!y.default.supportWebAudio&&!y.default.supportAudio)return console.warn("AudioFile.create: WebAudio is not supported."),null;var u=(0,c.default)(n);return u?new e(i,u,t.path,a,game.audio._system.context):(console.warn("AudioFile.create: URL is not supported for audio file '"+i+"'."),null)}}]),e}(o.default);e.default=p,l.default.register("audio",function(t,e,i,n){var r=p.create(this,t,e,config,n);return r&&h.default.call(this,r),this}),t.exports=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=_(i(2)),r=_(i(0)),a=_(i(1)),u=_(i(4)),s=_(i(3)),o=_(i(6)),l=_(i(18)),d=_(i(54)),f=_(i(9)),c=_(i(22)),h=_(i(11)),v=_(i(19)),y=_(i(14));function _(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,i,a,s,o){(0,r.default)(this,e);var l=null;l="string"==typeof t?t:f.default.value(t,"tag","");var d={type:h.default.image,tag:l,ext:f.default.value(t,"ext",c.default.getExtension(i)),url:f.default.value(t,"file",i),path:a,responseType:"blob",xhrSettings:f.default.value(t,"xhr",s),config:f.default.value(t,"config",o)};return(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,d))}return(0,s.default)(e,t),(0,a.default)(e,[{key:"onProcessing",value:function(t){this.state=o.default.PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var e=this;this.data.onload=function(){d.default.revoke(e.data),e.onDone(),t(e)},this.data.onerror=function(){d.default.revoke(e.data),console.warn("Loader.ImageFile: Error on load file: "+e.url+"."),e.state=o.default.ERROR,t(e)},d.default.createFromResponse(this.data,this.xhrRequest.response,"image/"+this.config.ext)}}]),e}(l.default);e.default=p,y.default.register("image",function(t,e,i,n,r){return v.default.call(this,new p(t,e,this.path,n),r),this}),t.exports=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(0)),r=a(i(1));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,n.default)(this,t),this.list={}}return(0,r.default)(t,[{key:"inject",value:function(t){for(var e in this.list)t[e]=this.list[e]}},{key:"register",value:function(t,e){this.list[t]=e}},{key:"destroyfunction",value:function(){this.list={}}}]),t}();e.default=u},function(t,e,i){"use strict";t.exports={AssetsTypeHandler:i(14),ImageFile:i(181),AudioFile:i(180),SVGFile:i(178),TextFile:i(177),ScriptFile:i(91),JSONFile:i(90),TilemapJSON:i(176),WebFontFile:i(175),AdditionalResources:i(174)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){0!=this._filesQueueCount&&(this.progress=1-this._loadedFilesCount/this._filesQueueCount)}},function(t,e,i){"use strict";t.exports={LoaderState:i(6),File:i(18),XHR:i(56),URLObject:i(54),AssetsType:i(11),Assets:i(183),LoaderManager:i(173)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),r=u(i(1)),a=u(i(17));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){(0,n.default)(this,t),this.resources=new a.default,this.adderWrapper=e||void 0}return(0,r.default)(t,[{key:"add",value:function(t,e){var i=e;return void 0!==this.adderWrapper&&(i=this.adderWrapper(t,e)),this.resources.set(t,i),i}},{key:"has",value:function(t){return this.resources.has(t)}},{key:"get",value:function(t){return this.resources.get(t)}},{key:"erase",value:function(t){return this.resources.delete(t),this}},{key:"clear",value:function(){this.resources.clear()}},{key:"destroy",value:function(){this.resources.clear(),this.resources=null}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(12)),r=c(i(0)),a=c(i(1)),u=c(i(10)),s=c(i(186)),o=c(i(93)),l=(c(i(68)),c(i(92))),d=c(i(60)),f=c(i(11));function c(t){return t&&t.__esModule?t:{default:t}}var h=["image","json","audio","text","tilemap","animation","animMachine"],v=function(){function t(e){(0,r.default)(this,t),this.game=e;var i=this;this.image=new s.default(function(t,e){return new o.default(t,e)}),this.tilemap=new s.default,this.json=new s.default,this.text=new s.default,this.audio=new s.default,this.animation=new s.default(function(t,e){var n=void 0;if(e.type===f.default.spritesheet){var r=i.image.get(e.imageTag);(n=new l.default(t,r)).addStrip(e.x,e.y,e.frameWidth,e.frameHeight,e.numberOfImages,e.framesPerRow,e.spacing),void 0!==e.duration&&(n.duration=e.duration)}return n}),this.animMachine=new s.default(function(t,e){var n=new d.default(t);if(void 0!==e.animations)for(var r=0;r<e.animations.length;r++){var a=i.animation.get(e.animations[r]);n.add(e.animations[r],a)}return n})}return(0,a.default)(t,[{key:"hasCache",value:function(t){return void 0!==(0,n.default)(h[t])}},{key:"getAsset",value:function(t,e){return this.hasCache(t)?this[t].get(e):null}},{key:"clear",value:function(){for(var t=0;t<h.length;t++)this[props[t]].clear()}},{key:"destroy",value:function(){for(var t=0;t<h.length;t++)this[props[t]].destroy(),this[props[t]]=null;this.game=null}}]),t}();e.default=v,u.default.register("Cache",v,"cache")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpritesheetKeyFrame=void 0;var n=l(i(2)),r=l(i(4)),a=l(i(3)),u=l(i(0)),s=l(i(1)),o=l(i(32));function l(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(e){(0,u.default)(this,t),this.animation=e,this.duration=0,this.progress=0,this.type="key"}return(0,s.default)(t,[{key:"destroy",value:function(){this.animation=null}}]),t}();e.default=d;e.SpritesheetKeyFrame=function(t){function e(t,i,a,s){(0,u.default)(this,e);var l=(0,r.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return l.duration=s||1,l.type="sprite",l.frame=a||new o.default,l.image=i||null,l}return(0,a.default)(e,t),(0,s.default)(e,[{key:"destroy",value:function(){this.frame=null,this.image=null,this.animation=null}}]),e}(d)},function(t,e,i){"use strict";t.exports={AnimationBase:i(62),Spritesheet:i(92),AnimationMachine:i(60)}},function(t,e,i){"use strict";t.exports={ResourceType:i(16),Image:i(93),Tilemap:i(68),Animation:i(189)}},function(t,e,i){"use strict";t.exports={Manager:i(94),AudioSource:i(57)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(5);var a=["__render_depthsorting","__render_layeridchange","asset_complete","transition_pause_end","transition_end","hidden","visible","focus","blur"];(0,((n=r)&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t._bindings.length;do{--i}while(t._bindings.at(i)&&e._priority<=t._bindings.at(i)._priority);t._bindings.insert(e,i)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,u,s){var o=null,l=(0,r.default)(t,e,i);if(-1!==l){if((o=t._bindings[l]).isOnce!==s)throw new Error("You cannot add"+(s?"":"Once")+"() then add"+(s?"Once":"")+"() the same listener without removing the relationship first.")}else o=new n.default(t,e,i,u,s),(0,a.default)(t,o);return o};var n=u(i(97)),r=u(i(96)),a=u(i(193));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if("function"!=typeof t)throw new Error("Signal.{fn}: Listener should be a function.".replace("{fn}",e))}},function(t,e,i){"use strict";t.exports={Signal:i(98),EventManager:i(95)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(0)),r=o(i(1)),a=o(i(17)),u=o(i(99)),s=o(i(10));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,n.default)(this,t),this._poolsMap=new a.default,this.game=e}return(0,r.default)(t,[{key:"has",value:function(t){return this._poolsMap.has(t)}},{key:"get",value:function(t){return this._poolsMap.get(t)}},{key:"create",value:function(t,e,i){if(void 0===e||null===e)return null;if(void 0===i&&(i=1),this._poolsMap.has(t))return console.warn("PoolManager.create: Could not create pool named '"+t+"'. There is already a pool registered with this name."),null;var n=new u.default(this.game,t,e,i);return this._poolsMap.set(t,n),n}},{key:"pull",value:function(t){var e=this._poolsMap.get(t);return null!==e&&void 0!==e?e.pull():(console.warn("PoolManager.pull: The specified pool container don't exists: "+t),null)}},{key:"push",value:function(t){if(null!==t.pool){var e=this._poolsMap.get(t._pool);if(null!==e&&void 0!==e)return e.push(t),!0}return!1}},{key:"clearAll",value:function(){return this._poolsMap.each(function(t,e){e.clear()}),this}}]),t}();e.default=l,s.default.register("PoolManager",l,"pool")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){e.system.entityList.removeInstance(t),t.active=!1,t._pool=null,t.scene=null}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(null===i.scene.currentScene||void 0===i.scene.currentScene)return console.warn("Pool.pull: Could not pull entity. There is no active scene."),!1;return e.active=!0,e._pool=t.name,e.scene=i.scene.currentScene,i.system.entityList.addInstance(e),!0}},function(t,e,i){"use strict";t.exports={Pool:i(99),PoolManager:i(197)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(0)),r=o(i(1)),a=(o(i(59)),o(i(10))),u=o(i(100)),s=o(i(101));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,n.default)(this,t),this.game=e,this._entityList=null}return(0,r.default)(t,[{key:"find",value:function(t){for(var e=[],i=this._entityList._instances.size,n=0;n<i;n++)this._entityList[n].name===t&&e.push(this._entityList[n]);return e}},{key:"findFirst",value:function(t){return this._entityList.each(function(e){if(e.name===t)return e}),null}},{key:"findLast",value:function(t){for(var e=this._entityList._instances.size-1;e>=0;e--)if(this._entityList[e].name===t)return this._entityList[e];return null}},{key:"get",value:function(t){return this._entityList._instances.at(t)||null}},{key:"create",value:function(t,e){var i=(0,u.default)(t,this.game);return(0,s.default)(i,this.game),i}},{key:"destroy",value:function(t){return this._entityList.destroyInstance(t)}},{key:"destroyAt",value:function(t){}},{key:"clear",value:function(){}},{key:"count",get:function(){return this._entityList._instances.size}}]),t}();e.default=l,a.default.register("EntityHierarchy",l,"entity",function(){this._entityList=this.game.system.entityList})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(0)),r=o(i(1)),a=o(i(10)),u=o(i(58)),s=o(i(101));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,n.default)(this,t),this.game=e,this.scene=null,this.entityList=null}return(0,r.default)(t,[{key:"empty",value:function(t){return t=t||"Scene Entity "+this.entityList.length,new u.default(t,this.game)}},{key:"sprite",value:function(t,e,i){var n=this.empty(e);n.modules.attach.sprite(t,i.x,i.y,i.width,i.height);return null!==this.scene.current_scene&&(0,s.default)(n,this.game),n}},{key:"tilemap",value:function(t,e){var i=this.empty(e);return i.modules.attach.tilemap(t),null!==this.scene.current_scene&&(0,s.default)(i,this.game),i}},{key:"spritesheet",value:function(t,e){var i=this.empty(e);return i.modules.attach.spritesheet(t),null!==this.scene.current_scene&&(0,s.default)(i,this.game),i}},{key:"rectangle",value:function(t,e,i){var n=this.empty(i);return n.modules.attach.rectangle(t,e),null!==this.scene.current_scene&&(0,s.default)(n,this.game),n}}]),t}();e.default=l,a.default.register("EntityFactory",l,"create",function(){this.entityList=this.game.system.entityList,this.scene=this.game.scene})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t._priority<e._priority}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){t._pendingModulesInitialization.each(function(t){if(t instanceof n.default)for(var i=0;i<t.layers.length;i++)e.system.render.layer.addRenderable(t.layers.at(i),t.layerID||0);else e.system.render.layer.addRenderable(t,t.layerID||0)}),t._pendingModulesInitialization.clear()};r(i(20));var n=r(i(70));r(i(104));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t;t.attached.each(function(t,n){n instanceof a.default&&(e.system.render.layer.removeRenderable(n),i._pendingModulesInitialization.push(n))})};var n,r=i(20),a=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(void 0===e||null===e)return;if(!0===t.isPlaying){t._timer+=i;var u=void 0,s=e.get(t.currentFrame);if(u=e.uniformDuration?e.duration:s.duration,t._position=t._timer/u,t._timer>=u){if(t._timer=0,t._position=0,t.currentFrame+1<e.size)t.currentFrame++;else{var o=t.currentFrame;t.currentFrame=0,e.wrapMode!==a.default.Once&&!1!==t.loop||(t.stop(),t.currentFrame=o),void 0!==t.onAnimationEnd&&t.onAnimationEnd.call(t.entity)}e.type===r.default.Spritesheet&&(s=e.get(t.currentFrame),(0,n.default)(t._spriteModule,s))}}};var n=u(i(42)),r=u(i(16)),a=u(i(61));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(!e._transform._isDirty&&!i._transform._isDirty)return;t._originIsDirty&&(t._originInPixels.x=e._transform.origin.x*t.width,t._originInPixels.y=e._transform.origin.y*t.height);(0,a.default)(t._bounds,e._transform,t.width,t.height,t._originInPixels)};var n,r=i(138),a=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t.animator;if(void 0===i)return;var n=i.animatedTiles.size;if(0===n)return;for(var r=e.hiDeltaTime,a=0;a<n;a++){var u=i.animatedTiles.at(a);u.t+=r;var s=u.tileGID,o=s.keyFrames[u.frame];if(u.t>=o.duration){u.t=0,u.frame+1<s.keyFrames.length?u.frame++:u.frame=0;var l=s.keyFrames[u.frame].tileID;s.currentFrame=l}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t.entity._transform;if((e._transform.rotation+i.rotation)%n.default.HALFPI==0){var a=i.position.x-t._originInPixels.x,u=i.position.y-t._originInPixels.y;t.culling.method=r.default.LINEAR,t.culling.start.x=Math.floor((e.viewBounds.min.x-a)/t.tileWidth),t.culling.start.y=Math.floor((e.viewBounds.min.y-u)/t.tileHeight),t.culling.end.x=Math.ceil((e.viewBounds.max.x-a)/t.tileWidth),t.culling.end.y=Math.ceil((e.viewBounds.max.y-u)/t.tileHeight),function(t,e){t.start.x<0&&(t.start.x=0);t.start.y<0&&(t.start.y=0);t.end.x>e.width&&(t.end.x=e.width);t.end.y>e.height&&(t.end.y=e.height)}(t.culling,t)}else t.culling.method=1};var n=a(i(8)),r=a(i(131));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,u){if("tilemap"===e.name){if(e._originIsDirty&&(e._originInPixels.x=t._transform.origin.x*e.pixelsWidth,e._originInPixels.y=t._transform.origin.y*e.pixelsHeight),(0,r.default)(e,u),!t._transform._isDirty&&!i._transform._isDirty)return;(0,n.default)(e,i);for(var s=0;s<e.layers.length;s++)(0,a.default)(e,t,i)}else(0,a.default)(e,t,i)};var n=u(i(209)),r=u(i(208)),a=u(i(207));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t.entity,a=t.attached.get("animation");if(void 0!==a&&null!==a){var u=void 0;"animationControl"===a.name?u=a._resource:"animMachine"===a.name&&(u=a._currentState),void 0!==u&&(0,r.default)(a,u,e.system.loop.updateStep.hiDeltaTime)}var s=t.attached.get("render");void 0===s&&null===s||(0,n.default)(i,s,e.system.camera,e.system.loop.updateStep)};a(i(130));var n=a(i(210)),r=a(i(206));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(!t._isDirty&&!e._isDirty)return;t.rotation=t.angle*n.default.toRadian,t.rotation!==t._oldRotation&&(t._oldRotation=t.rotation,t._cosSin.y=Math.sin(t.rotation),t._cosSin.x=Math.cos(t.rotation));t.matrix.setModelMatrix(t.position,t.scale,t._cosSin,t.origin).concat(e.matrix)};var n=r(i(8));r(i(38));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(0)),r=c(i(1)),a=c(i(10)),u=c(i(7)),s=c(i(212)),o=(c(i(38)),c(i(211))),l=c(i(129)),d=c(i(205)),f=c(i(204));c(i(203));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e){(0,n.default)(this,t),this.game=e,this._instances=new u.default,this._destroyInstances=new u.default,this._removalInstances=new u.default,this._pendingInstances=new u.default,this._camera=null,this._requirePrioritySorting=!1}return(0,r.default)(t,[{key:"addInstance",value:function(t){return-1===this._instances.indexOf(t)&&-1===this._pendingInstances.indexOf(t)&&this._pendingInstances.push(t),t}},{key:"destroyInstance",value:function(t){return void 0!==t&&(!(!this._instances.has(t)||-1!==this._destroyInstances.indexOf(t))&&(this._destroyInstances.push(t),!0))}},{key:"removeInstance",value:function(t){return this._instances.indexOf(t)>-1&&-1===this._destroyInstances.indexOf(t)&&-1===this._removalInstances.indexOf(t)&&(this._removalInstances.push(t),!0)}},{key:"update",value:function(t){for(var e=this._instances,i=0;i<e.size;i++){var n=e.at(i);n.active&&((0,s.default)(n._transform,this._camera._transform),(0,o.default)(n.modules,this.game),void 0!==n.update&&n.update.call(n,t),n._transform._isDirty&&(n._transform._isDirty=!1))}}},{key:"beginUpdate",value:function(){var t=this._destroyInstances.length,e=this._removalInstances.length,i=this._pendingInstances.length;if(0!==i||0!==e||0!==t){if(t>0){for(var n=0;n<t;n++){var r=this._destroyInstances.at(n);void 0!==r&&((0,l.default)(r,this.game,!1),r=null)}this._instances.eraseList(this._destroyInstances,t),this._destroyInstances.childs.length=0}if(e>0){for(var a=0;a<e;a++){var u=this._removalInstances.at(a);void 0!==u&&((0,d.default)(u.modules,this.game),this._instances.erase(u))}this._removalInstances.childs.length=0}var s=this._pendingInstances.content();if(0!==i){for(var o=0;o<i;o++){var c=s[o];(0,f.default)(c.modules,this.game),this._instances.push(c)}s.length=0}}}},{key:"length",get:function(){return this._instances.size}}]),t}();e.default=h,a.default.register("EntityUpdateList",h,"entityList",function(){this._camera=this.game.system.camera})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(0)),r=l(i(1)),a=l(i(17)),u=l(i(7)),s=l(i(105)),o=l(i(21));function l(t){return t&&t.__esModule?t:{default:t}}var d={sprite:"render"},f=function(){function t(e){(0,n.default)(this,t),this.entity=e||null,this.attached=new a.default,this._pendingModulesInitialization=new u.default,this.attach=new s.default(this)}return(0,r.default)(t,[{key:"detach",value:function(t,e){}},{key:"has",value:function(t){return this.attached.has(t)}},{key:"hasByName",value:function(t){var e=d[t];return void 0!==e&&this.has(e)}},{key:"get",value:function(t){return this.attached.get(t)}},{key:"getByName",value:function(t){return o.default.isString(moduleName)&&this.attached.find(function(t,e){if(e.name===moduleName)return e})||null}}]),t}();e.default=f},function(t,e,i){"use strict";t.exports={Entity:i(59),SceneEntity:i(58),EntityUpdateList:i(213),EntityFactory:i(202),Hierarchy:i(201)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=y(i(2)),r=y(i(0)),a=y(i(1)),u=y(i(4)),s=y(i(43)),o=y(i(3)),l=(y(i(17)),y(i(63))),d=y(i(23)),f=y(i(102)),c=y(i(16)),h=y(i(42)),v=y(i(60));function y(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function e(t,i){(0,r.default)(this,e);var a=(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,"animMachine",t,i));return a._currentState=null,(0,f.default)(a),a}return(0,o.default)(e,t),(0,a.default)(e,[{key:"setState",value:function(t){if(null!==this.resource){var e=this._resource.get(t);return null!==e&&void 0!==e?(this._currentState=e,this.restart()):console.warn("AnimationMachine.setState: Invalid state name '"+t+'".'),this}}},{key:"stop",value:function(){(0,s.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"stop",this).call(this),null!==this._currentState&&this._currentState.type===c.default.Spritesheet&&(0,h.default)(this._spriteModule,this._currentState.get(0))}},{key:"setFrame",value:function(t,e){void 0===e&&(e=!0),t>=this._currentAnimObj.length?t=this._currentAnimObj.length-1:t<0&&(t=0),this.currentFrame=t,this._gameObject.component.render.setFrameRect(this._currentAnimObj.getFrame(this.currentFrame)),this._gameObject.component.render.setImage(this._currentAnimObj.source),e&&(this._timer=0)}},{key:"setSpeed",value:function(t){this.frameSpeed=t}},{key:"add",value:function(t,e){return this.animations[t]=new scintilla.Animation(t,e)}},{key:"addFromCache",value:function(t,e){var i=this.game.animationCache.get(t,e);return i?(this.animations[e]=i,null==this.currentAnimation&&this.setState(e),i):null}},{key:"remove",value:function(t){this.animations[t]&&delete this.animations[t]}},{key:"machine",set:function(t){var e=void 0;if("string"==typeof t){if(null!==this._resource&&this._resource.name===t)return;e=this.entity.game.system.cache.animMachine.get(t)}else t instanceof v.default&&(e=t);void 0!==e?(this._resource=e,(0,f.default)(this)):console.warn("AnimationControl.setAnimation: Could not set animation. The animation is undefined.")},get:function(){return this._resource}},{key:"currentState",get:function(){return this._currentState}}]),e}(l.default);e.default=_,d.default.register("animMachine",function(t,e){var i=void 0;void 0!==e[1]&&(i=t.entity.game.system.cache.animMachine.get(e[1]));var n={resource:i,spriteModule:e[0]};return new _(t,n)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.size;if(0===e)return 0;for(var i=0,n=0;n<e;n++)i+=t.at(n).duration||0;return i}},function(t,e,i){var n=i(28),r=i(72).f;i(34)("getOwnPropertyDescriptor",function(){return function(t,e){return r(n(t),e)}})},function(t,e,i){i(218);var n=i(13).Object;t.exports=function(t,e){return n.getOwnPropertyDescriptor(t,e)}},function(t,e,i){t.exports={default:i(219),__esModule:!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=v(i(2)),r=v(i(0)),a=v(i(1)),u=v(i(4)),s=v(i(43)),o=v(i(3)),l=(v(i(48)),v(i(62)),v(i(23))),d=v(i(63)),f=v(i(102)),c=v(i(16)),h=v(i(42));function v(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t,i){(0,r.default)(this,e);var a=(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,"animationControl",t,i));return a.loop=!1,(0,f.default)(a),a}return(0,o.default)(e,t),(0,a.default)(e,[{key:"getKeyFrame",value:function(t){return null===this._resource?null:this._resource.get(t)}},{key:"stop",value:function(){(0,s.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"stop",this).call(this),null!==this._resource&&this._resource.type===c.default.Spritesheet&&(0,h.default)(this._spriteModule,this._resource.get(0))}},{key:"trackPosition",get:function(){return this._position}},{key:"animation",get:function(){return this._resource},set:function(t){var e=void 0;if("string"==typeof t){if(this._resource.name===t)return;e=this.entity.game.system.cache.animation.get(t)}else t instanceof AnimationResource&&(e=t);void 0!==e?this._resource=e:console.warn("AnimationControl.setAnimation: Could not set animation. The animation is undefined.")}}]),e}(d.default);e.default=y,l.default.register("spritesheet",function(t,e){var i=e[1];void 0!==e[1]&&(i=t.entity.game.system.cache.animation.get(i));var n={resource:i,spriteModule:e[0]};return new y(t,n)})},function(t,e,i){"use strict";t.exports={AnimationBaseModule:i(63),AnimationControl:i(221),AnimationMachine:i(216)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){var n=i.matrix.transformPoint(0,0),r=i.matrix.transformPoint(e.width,0),a=i.matrix.transformPoint(0,e.height),u=i.matrix.transformPoint(e.width,e.height);t.min.x=Math.min(n.x,r.x,a.x,u.x),t.min.y=Math.min(n.y,r.y,a.y,u.y),t.max.x=Math.max(n.x,r.x,a.x,u.x),t.max.y=Math.max(n.y,r.y,a.y,u.y)};n(i(8)),n(i(33)),n(i(71));function n(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n,r){if(void 0===t)return!1;if(void 0===e||null==e)return!1;var a=n.matrix;return t.setTransform(a.a[0],a.a[1],a.a[3],a.a[4],a.a[6],a.a[7]),t.drawImage(e,i.x,i.y,i.width,i.height,-r.x,-r.y,i.width,i.height),!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(void 0===t)return!1;var n=e.matrix;t.setTransform(n.a[0],n.a[1],n.a[3],n.a[4],n.a[6],n.a[7]),t.fillStyle=i.color._css,t.fillRect(0,0,i.width,i.height)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(2)),r=c(i(0)),a=c(i(1)),u=c(i(4)),s=c(i(3)),o=c(i(20)),l=c(i(15)),d=c(i(23)),f=c(i(225));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i,a){(0,r.default)(this,e);var s=(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,"rectangle",t));return s._width=i||100,s._height=a||100,s._color=l.default.magenta,s}return(0,s.default)(e,t),(0,a.default)(e,[{key:"render",value:function(t){return!!this._enabled&&((0,f.default)(t,this.entity._transform,this),!0)}},{key:"width",set:function(t){this._width=t},get:function(){return this._width}},{key:"height",set:function(t){this._height=t},get:function(){return this._height}},{key:"color",set:function(t){this._color.set(t)},get:function(){return this._color}},{key:"outlineColor",get:function(){return-1}},{key:"outlineWidth",get:function(){return-1}}]),e}(o.default);e.default=h,d.default.register("rectangle",function(t,e){return new h(t,e[0],e[1])})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(226),a=(n=r)&&n.__esModule?n:{default:n};e.default={Rectangle:a.default}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Renderable=i(20),e.Primitives=i(227),e.Sprite=i(104),e.Tilemap=i(70)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){var n=void 0;n=!1===t.has("render")?a.default.attach(t,"sprite"):t.getByName("sprite");if(void 0===n||null===n)return console.warn("ModuleAttacher."+e+": Could not create "+i+" module. There is no Sprite module attached. The current Renderable module is not compatible with "+i+" module."),null;return n};var n,r=i(23),a=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";t.exports={Module:i(48),ModuleProvider:i(23),ModuleAttacher:i(105),Renderables:i(228),Animation:i(222)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n){t.width=i,t.height=n,t._aspectRatio=i/n,t._pixelUnit.x=e.width/t.width,t._pixelUnit.y=e.height/t.height}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(0)),r=c(i(1)),a=c(i(10)),u=c(i(49)),s=c(i(106)),o=c(i(15)),l=c(i(8)),d=(c(i(33)),c(i(231))),f=c(i(20));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e){(0,n.default)(this,t),this.game=e,this.canvas=null,this.width=e.config.camera.width,this.height=e.config.camera.height,this.bounds=new u.default,this.viewBounds=new u.default(0,0,this.width,this.height),this._transform=new s.default,this._pixelUnit={x:1,y:1},this._aspectRatio=1,this._backgroundColor=new o.default,this._roundPixels=e.config.roundPixels}return(0,r.default)(t,[{key:"centerView",value:function(){return this.x=.5*this.width,this.y=.5*this.height,this._transform._isDirty=!0,this}},{key:"centerToEntity",value:function(t){return this.x=t.position.x,this.y=t.position.y,this._transform._isDirty=!0,this}},{key:"setBackgroundColor",value:function(t,e,i,n){return void 0===t&&(e=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),this._backgroundColor=o.default.rgba(t,e,i,n),this}},{key:"setSize",value:function(t,e){return(0,d.default)(this,this.canvas,t,e),this._transform._isDirty=!0,this}},{key:"setView",value:function(t,e,i,n){return this._transform.position.x=t,this._transform.position.y=e,(0,d.default)(i,n),this._transform._isDirty=!0,this}},{key:"reset",value:function(){this._transform.reset()}},{key:"isCulled",value:function(t){if(void 0===t||null===t)return!1;if(t instanceof f.default)return this.bounds.intersects(t.bounds);var e=t.modules.get("render");return null!==e||void 0!==e?this.bounds.intersects(e.bounds):this.bounds.contains(t.x,t.y)}},{key:"position",get:function(){return{x:this._transform.position.x,y:this._transform.position.y}},set:function(t){return this._transform.position.x=t.x,this._transform.position.y=t.y,this._transform._isDirty=!0,this}},{key:"x",get:function(){return this._transform.position.x},set:function(t){return this._transform.position.x=t,this._transform._isDirty=!0,this}},{key:"y",get:function(){return this._transform.position.y},set:function(t){return this._transform.position.y=t,this._transform._isDirty=!0,this}},{key:"scale",get:function(){return this._transform.scale.x},set:function(t){return this._transform.scale.x=t,this._transform._isDirty=!0,this}},{key:"angle",get:function(){return this._transform.angle},set:function(t){return this._transform.angle=t,this._transform.rotation=t*l.default.toRadian,this._transform._isDirty=!0,this}},{key:"origin",get:function(){return this._transform.origin},set:function(t){return this._transform.x=t.x,this._transform.y=t.y,this._transform._isDirty=!0,this}},{key:"rotation",get:function(){return this._transform.rotation}},{key:"backgroundColor",set:function(t){return void 0===t&&(t="rgba(0,0,0,0)"),this._backgroundColor=t,this},get:function(){return this._backgroundColor=color}},{key:"roundPixels",set:function(t){return this._roundPixels=t,this._transform._isDirty=!0,this},get:function(){return this._roundPixels}},{key:"size",get:function(){return{x:this.width,y:this.height}}}]),t}();e.default=h,a.default.register("Camera",h,"camera",function(){this.canvas=this.game.system.render.canvas,(0,d.default)(this,this.canvas,this.width,this.height)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(12));e.default=function(t,e){if(void 0===t)throw new Error("SceneManager.add: Could not add Scene. 'scene' is undefined.");if(null===t)throw new Error("SceneManager.add: Could not add Scene. 'scene' is null.");var i;if(t instanceof r.default)i=scene;else if((void 0===t?"undefined":(0,n.default)(t))===r.default)i=new t;else if("object"===(void 0===t?"undefined":(0,n.default)(t))){var u=new r.default(e);i=(0,a.default)(u,t)}else if("function"==typeof t){var s=new t;t instanceof r.default?i=s:(void 0===s.name&&(s.name=e),i=(0,a.default)(!0,s,r.default))}return i};var r=u(i(44)),a=u(i(88));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n){if(!t._scenes.has(e))throw new Error("SceneManager.set: Scene '"+e+"' does not exist.");void 0===i&&(i=!1);void 0===n&&(n=a.default.NONE);return t._transition=n,t._changeScene=e,t._clearCache=i,t};var n,r=i(24),a=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(2)),r=f(i(0)),a=f(i(1)),u=f(i(4)),s=f(i(3)),o=f(i(44)),l=f(i(153)),d=f(i(8));f(i(24));function f(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){(0,r.default)(this,e);var i=(0,u.default)(this,(e.__proto__||(0,n.default)(e)).call(this,"Scintilla Loading Scene"));try{new window.Blob(["%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath d='M224%20387.814V512L32 320l192-192v126.912C447.375 260.152 437.794 103.016 380.93 0 521.287 151.707 491.48 394.785 224 387.814z'/%3E%3C/svg%3E"],{type:"data:image/svg+xml;charset=utf-8"})}catch(t){console.error(t)}i.scintillaLogo=new Image,i.scintillaLogo.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQwIiBoZWlnaHQ9IjI2MC45OCIgdmlld0JveD0iMCAwIDYzLjUgNjkuMDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2RjMzBhOSI+PHBhdGggZD0iTTQzLjQ5IDM2Ljg1NmwtMTQuMTgtNi40MzRMNi45NTYgNDkuNzg0bDE5LjM2Mi0yNy4yNC02LjU3Ni05LjU2OCAxNC40NTUgNi41NzVMNTYuNTUxLjE5IDM3LjE5IDI3LjQzeiIgcGFpbnQtb3JkZXI9InN0cm9rZSBtYXJrZXJzIGZpbGwiLz48cGF0aCBkPSJNMTEuMTIgMzYuOTA4bC0uNTQzLTEuMDQxLTEuMDM2LjU0My41MzggMS4wMzZ6bS0xLjg4OC00LjE3NmwtLjM2LTEuMTE2LTEuMTE2LjM2MS4zNjYgMS4xMTV6bS0xLjA2NC00LjQ1NmwtLjA5Ny0uNjM1di0uMDNsLS4wMDYtLjAzLS4wMy0uNDI5LTEuMTY2LjA4LjAzNC40OC4wMDYuMDQ3LjEwMy42ODZ6bS0uMTAzLTUuNjk4bC0xLjE2Ny0uMTA4LS4xMDggMS4xNjcgMS4xNjcuMTA4em0uODY0LTQuNDMzbC4wMDYtLjAzLjAwNi0uMDMtLjMwMy0uMDgtLjgxMi0uMjgxLS4wMDYuMDMtLjAxMi4wNDYtLjI4NiAxLjExNSAxLjEzMi4yOTN6bTEuNDE5LTMuNjMzbC4zMzctLjYyMy0xLjAzLS41NTUtLjM2LjY2My0uMDE4LjA0Mi0uMTcxLjM4MyAxLjA3NS40N3ptMi44NTQtNC40NWwtLjkyNi0uNzIxLS43MjEuOTI3LjkyNy43MTV6bTMuMTg3LTMuMjlsLS43OS0uODYzLS44NjQuNzk1Ljc5Ni44NTh6bTMuMTgtMi4yNjVsLjAzLS4wM2guMDExbC41MjEtLjI4LS41Ni0xLjAzLS41NjEuMzAyLS4wNC4wMy0uNDQ3LjI5My42NDEuOTg0ek00Mi42NDUgMi41bC0uMjUxLS4xMzItLjA0Ni0uMDMtLjgxOC0uMzQzLS40NTIgMS4wNzUuNzcyLjMyNi4yNTIuMTMyem0tMTguMzIzLS4xMzJsLS4zODMtMS4xMS0xLjEwNC4zODQuMzgzIDEuMTA0ek0zOC4xMi44MjhMMzYuOTgyLjU1M2wtLjI2OSAxLjE0NCAxLjEzOC4yN3ptLTkuNTA3LjUzOGguMTMzTDI4LjY0My4xOTloLS4xODNsLTEuMDE4LjE3OC4yIDEuMTU2em00LjgtMS4zMDRMMzIuNTIgMGgtLjMyNmwuMDEyIDEuMTY3aC4yMzVsLjg4Ni4wNjJ6TTUyLjM4IDEzLjA2NWwuNTM4IDEuMDQgMS4wNC0uNTQyLS41NDMtMS4wMzZ6bTEuODgyIDQuMTc2bC4zNjYgMS4xMTUgMS4xMS0uMzYtLjM2LTEuMTE2em0xLjA2NCA0LjQ1NmwuMTAzLjY0di4wM2wuMDA2LjAzLjAyOS40MyAxLjE2Ny0uMDc4LS4wMzQtLjQ4LS4wMDYtLjA0Ny0uMTAzLS42ODZ6bS4xMDkgNS42OThsMS4xNjcuMTA4LjEwMy0xLjE2Ny0xLjE2Ny0uMTA4em0tLjg2NCA0LjQzM2wtLjAwNi4wMy0uMDA2LjAzLjI5Mi4wOC44MTguMjgxLjAxMi0uMDMuMDEyLS4wNDguMjg1LTEuMTEtMS4xMzItLjI5MnptLTEuNDAyIDMuNTkzbC0uMDEyLjAzLS4wMTIuMDMtLjMzNy42MTcgMS4wMzUuNTU1LjM1NS0uNjYzLjAyMy0uMDQyLjE2Ni0uMzg0LTEuMDctLjQ2OXptLTIuODcxIDQuNDlsLjkyNi43MjEuNzE1LS45MjctLjkyNi0uNzE1em0tMy4xOTIgMy4yOWwuNzk1Ljg2My44NjMtLjc5NS0uNzk1LS44NTh6bS0zLjE3NSAyLjI2NWwtLjAzLjAzaC0uMDEybC0uNTIuMjguNTU1IDEuMDMuNTYtLjMwMy4wNDYtLjAzLjQ0Ni0uMjkzLS42NC0uOTg0em0tMjMuMDc2IDIuMDA4bC4yNTEuMTMyLjA0LjAzLjgxOS4zNDMuNDU3LTEuMDc2LS43NzgtLjMyNmgtLjAwNmwtLjAzNC0uMDMtLjIxMi0uMTE0em0xOC4zMTcuMTM4bC4zODMgMS4xMDQgMS4xMS0uMzg0LS4zODQtMS4xMDR6bS0xMy43OTggMS41MzNsMS4xNDQuMjc1LjI2OS0xLjE0NC0xLjE0NC0uMjd6bTkuNTEzLS41MzhoLS4xMzhsLjEwOCAxLjE2N2guMTgzbDEuMDE5LS4xNzgtLjItMS4xNTZ6bS00LjggMS4zMDRsLjg5My4wNjRoLjMybC0uMDEyLTEuMTY3aC0uMjI5bC0uODkyLS4wNjR6IiBjb2xvcj0iIzAwMCIgc29saWQtY29sb3I9IiMwMDAwMDAiIHN0eWxlPSJmb250LWZlYXR1cmUtc2V0dGluZ3M6bm9ybWFsO2ZvbnQtdmFyaWFudC1hbHRlcm5hdGVzOm5vcm1hbDtmb250LXZhcmlhbnQtY2Fwczpub3JtYWw7Zm9udC12YXJpYW50LWxpZ2F0dXJlczpub3JtYWw7Zm9udC12YXJpYW50LW51bWVyaWM6bm9ybWFsO2ZvbnQtdmFyaWFudC1wb3NpdGlvbjpub3JtYWw7aXNvbGF0aW9uOmF1dG87bWl4LWJsZW5kLW1vZGU6bm9ybWFsO3NoYXBlLXBhZGRpbmc6MDt0ZXh0LWRlY29yYXRpb24tY29sb3I6IzAwMDt0ZXh0LWRlY29yYXRpb24tbGluZTpub25lO3RleHQtZGVjb3JhdGlvbi1zdHlsZTpzb2xpZDt0ZXh0LWluZGVudDowO3RleHQtb3JpZW50YXRpb246bWl4ZWQ7dGV4dC10cmFuc2Zvcm06bm9uZSIgcGFpbnQtb3JkZXI9InN0cm9rZSBtYXJrZXJzIGZpbGwiIHdoaXRlLXNwYWNlPSJub3JtYWwiLz48cGF0aCBkPSJNNi4zMiA2NS43MjhxLS4xMDcgMS4zMzMtLjkxIDIuMjc2LS41MjguNjQyLTEuNDA1LjktLjQ3NS4xNDctMS4wODIuMTQ3LTEuMTMxIDAtMS44MTgtLjU1OS0uNTctLjQ2LS44NTgtMS4yNDMtLjI4OC0uNzg5LS4yNDUtMS44MTVsMS44MzQtLjEyNnEuMDIgMS4xMS40NCAxLjYwNi4zMDYuMzc3Ljc1NS4zNTYuNjMtLjAzIDEuMDY0LS42MTQuMjI0LS4zLjI3Ni0uODQ1LjA3Ny0uODAzLS41NjctMS41ODUtLjUyMS0uNTM4LTEuNTU2LTEuNjEzLS44NjktLjkyMi0xLjE5LTEuNjU1LS4zNDYtLjgyMy0uMjU0LTEuNzg3LjE2Ni0xLjczOCAxLjQxOC0yLjYzMlEyLjk5MiA1NiA0LjA2IDU2cTEuMDI2IDAgMS43MTUuNDYxLjUzMS4zNTYuODE5Ljk5OS4yODguNjM1LjI4NSAxLjQ2NmwtMS44NzUuMzM1cS0uMDAyLS43ODItLjMzLTEuMjE1LS4yMzUtLjMyMS0uNzMtLjMyMS0uNTI0IDAtLjg0OC40NjgtLjI2LjM3Ny0uMzEzLjkzNS0uMDg0Ljg3My41ODMgMS43OC4yNTQuMzQzLjc3NC44MS42MTcuNTU5LjgxMi43ODIuNjM3LjcxMi45NjIgMS40MDQuMTUuMzIuMjM2LjYuMjA3LjY3Ny4xNjkgMS4yMjJ6bTQuOTYgMy4zMnEtMS4yNyAwLTIuMDcyLS44ODctLjgwMi0uODg2LS42ODEtMi4xNWwuNjY3LTYuOTc1cS4xMjEtMS4yNjMgMS4xLTIuMTUuOTgtLjg5NCAyLjIzNi0uODk0IDEuMjcgMCAyLjA2NS44OTQuOC44OTMuNjggMi4xNWwtLjEzOSAxLjQ1MmgtMS45OWwuMTQzLTEuNDg3cS4wNDQtLjQ2LS4yNTMtLjc4Mi0uMjktLjMyOC0uNzUtLjMyOC0uNDU1IDAtLjgwNy4zMjgtLjM1Mi4zMjItLjM5Ni43ODJsLS42NyA2Ljk4OXEtLjA0My40Ni4yNDcuNzgyLjI5LjMyMS43NDQuMzIxLjQ2MSAwIC44MTMtLjMyMS4zNTktLjMyMS40MDMtLjc4MmwuMTY4LTEuNzUyaDEuOTlsLS4xNyAxLjc3M3EtLjEyMiAxLjI3LTEuMSAyLjE1Ny0uOTc4Ljg4LTIuMjI4Ljg4em03LjE5LS4xNmgtMS45MTNsMS4yMi0xMi43MzVoMS45MTJ6bTUuNzQtMTIuNzM0bDEuNzIzIDguNTUzLjgxOC04LjU1M2gxLjkybC0xLjIxOSAxMi43MzVoLTIuMDZsLTEuODY1LTguMTU1LS43OCA4LjE1NWgtMS45MTRsMS4yMi0xMi43MzV6bTguNTMgMS45MjFoLTIuMDM5bC4xODQtMS45Mmg1Ljk5bC0uMTgzIDEuOTJIMzQuNjZMMzMuNjI1IDY4Ljg5aC0xLjkyem03LjAzIDEwLjgxM2gtMS45MTNsMS4yMi0xMi43MzVoMS45MTJ6bTcuNiAwaC01LjIzbDEuMjItMTIuNzM1aDEuOTEzbC0xLjAzNyAxMC44MjloMy4zMTZ6bTcuMjEgMGgtNS4yM2wxLjIyLTEyLjczNWgxLjkxM2wtMS4wMzcgMTAuODI5aDMuMzE2em00LjczLTIuOTJsLS43NDggMi45MjVoLTEuOTk3bDMuMzc3LTEyLjczNWgyLjY0NmwuOTEgMTIuNzM1aC0yLjAxbC0uMTc0LTIuOTI1em0xLjY2NS02Ljg5MWwtMS4xOTMgNS4wMmgxLjQyNXoiLz48L2c+PC9zdmc+",i._loaded=!1;var a=i;i._finished=!1,i.progress=0,i.fromProgress=0,i.toProgress=0,i.t=0,i.game=t,i.nextScene=null,i.preloadingDone=!1;i.scintillaLogo.onload=function(){a._loaded=!0,function(){this._midPos={x:160,y:120},this._barColor="#dc30a9",this._barPosX=160-.3*this.scintillaLogo.width*.5,this._barPosY=104+.3*this.scintillaLogo.height*.5+8,this._barPosW=.3*this.scintillaLogo.width}.call(a)};var s=function(t){this._loaded&&(t.imageExtra(this.scintillaLogo,160,104,.3,.3,.5,.5),t.color=this._barColor,t.outlineRect(this._barPosX,this._barPosY,this._barPosW,7),t.rect(this._barPosX+2,this._barPosY+2,(this._barPosW-4)*this.progress,3),t.font("Verdana",6),t.text("WIP - "+l.default.VERSION,316,236,"#490c37","right"))},o=function(t){if(!this._finished){if(this.t+=t/.15,this.t>=1&&(this.t=1),this.preloadingDone){if(this.wait+=t,this.wait>=1.5){this.transition.in(),this.events.subscribeOnce("transition_end",function(){this.transition.reset(),this.preloadDone()},this),this._finished=!0}}else{var e=this.load.progress;e>=1&&(this.preloadingDone=!0),e>this.progress&&(this.fromProgress=this.progress,this.toProgress=e,this.t=0)}this.progress=d.default.lerp(this.fromProgress,this.toProgress,this.t)}};return i.loading=o,i.update=o,i.loadingGUI=s,i.gui=s,i}return(0,s.default)(e,t),(0,a.default)(e,[{key:"init",value:function(t){this.nextScene=t,this.wait=0,this.t=0,this.progress=0,this.preloadingDone=!1,this.ui.setSize(320,240),this.ui.setViewportByAspectRatio(1.33333333333),this.transition.settings.setInDuration(.35)}},{key:"start",value:function(){}}]),e}(o.default);e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=h(i(0)),r=h(i(1)),a=h(i(10)),u=h(i(17)),s=h(i(44)),o=h(i(235)),l=h(i(234)),d=h(i(136)),f=h(i(233)),c=h(i(21));function h(t){return t&&t.__esModule?t:{default:t}}var v=function(){function t(e){(0,n.default)(this,t),this.game=e,this._scenes=new u.default,this.currentScene=null,this._currentSceneName="",this._changeScene=null,this._transition=null,this._isTranistioning=!1,this._setup=!1,this._clearCache=!1,this._scintillaLoading=!1,this.onStartCallback=null,this.onLoadingCallback=null,this.onLoadingRenderCallback=null,this.onPreloadCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onDestroyCallback=null,this._loadingPlaceHolder=new o.default(this.game)}return(0,r.default)(t,[{key:"add",value:function(t,e){if(void 0===t)throw new Error("SceneManager.add: Could not add Scene. 'sceneName' is undefined.");if(!c.default.isString(t))throw new Error("SceneManager.add: Could not add Scene. 'sceneName' is not string.");if(this._scenes.has(t))throw new Error('SceneManager.add: Could not add Scene. There is already a scene with name "'+t+'".');var i=(0,f.default)(e,t);return this._scenes.set(t,i),this}},{key:"new",value:function(t){if(this._scenes.has(t))throw new Error('Could not create new Scene. The scene name "'+name+'" already exists.');var e=new s.default(this.game,t);return this._scenes.set(t,e),e}},{key:"set",value:function(t,e){return(0,l.default)(this,t,e)}},{key:"transition",value:function(t,e){(0,l.default)(this,t,!1,e)}},{key:"restart",value:function(t){void 0===t&&(t=!1),this._changeScene=this._currentSceneName,this._clearCache=t}},{key:"remove",value:function(t){this._currentSceneName===t&&(this.currentScene=null,this.onStartCallback=null,this.onLoadingCallback=null,this.onLoadingRenderCallback=null,this.onPreloadCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onDestroyCallback=null),delete this.scenes[t]}}]),t}();e.default=v,a.default.register("SceneManager",v,"scene",function(){(0,d.default)(this.game,this._loadingPlaceHolder)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){void 0===e&&(e=r.default.NONE);if(t._scintillaLoading=!1,t._transition=e,void 0===t.currentScene||null===t.currentScene)return;function i(){this._isTranistioning=!1,this.onStartCallback&&this.onStartCallback.call(this.currentScene,this.game)}e<=r.default.NONE?i.call(t):(0,n.default)(t,i.bind(t))};var n=a(i(134)),r=a(i(24));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";var n,r=i(5);var a={NONE:0,START:1,LOADING:2,RUNNING:3};(0,((n=r)&&n.__esModule?n:{default:n}).default)(a),t.exports=a},function(t,e,i){"use strict";t.exports={State:i(238),Scene:i(44),SceneManager:i(236)}},function(t,e,i){"use strict";t.exports={Ease:i(65).default,Type:i(27).default}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=4022871197,e=function(e){e=e.toString();for(var i=0;i<e.length;i++){var n=.02519603282416938*(t+=e.charCodeAt(i));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)};return e.version="Mash 0.9",e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){!0===e.preventDefault&&t.preventDefault();if(!e._enabled)return;e.status=!1,e.press=!1,e.release=!0,e.releaseTime=t.timeStamp,e.pressDuration=e.releaseTime-e.pressTime,e.releaseDuration=0,e.pressTime=0,e._event=a.default.RELEASED};var n,r=i(45),a=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){!0===e.preventDefault&&t.preventDefault();if(!e._enabled)return;!1===e.press&&(e.status=!0,e.press=!0,e.release=!1,e.pressTime=t.timeStamp,e.pressDuration=0,e.releaseDuration=e.pressTime-e.releaseTime,e._event=a.default.PRESSED)};var n,r=i(45),a=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";t.exports={Key:i(111),Keyboard:i(110),Mouse:i(109),Input:i(108)}},function(t,e,i){"use strict";t.exports={State:i(46),Style:i(66),Behavior:i(24)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(0)),r=o(i(1)),a=o(i(15)),u=o(i(27)),s=o(i(66));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,n.default)(this,t),this.transition=e,this.fromAlpha=0,this.toAlpha=0,this.inColor=a.default.black,this.outColor=a.default.black,this.inDuration=.5,this.outDuration=.5,this.pauseDuration=0,this.style=s.default.FILL,this.timingInMethod=u.default.LINEAR,this.timingOutMethod=u.default.LINEAR,this.timingInArgument=3,this.timingOutArgument=3}return(0,r.default)(t,[{key:"setInColor",value:function(t){return this.inColor.parse(t),this}},{key:"setOutColor",value:function(t){return this.outColor.parse(t),this}},{key:"setDuration",value:function(t){return this.setInDuration(t),this.setOutDuration(t),this}},{key:"setInDuration",value:function(t){return this.inDuration=Math.abs(t),this}},{key:"setOutDuration",value:function(t){return this.outDuration=Math.abs(t),this}},{key:"setPauseDuration",value:function(t){return this.pauseDuration=Math.abs(t),this}},{key:"setEaseMethod",value:function(t,e){return this.setInTiming(t,e),this.setOutTiming(t,e),this}},{key:"setEaseInMethod",value:function(t,e){return this.timingInMethod=t,this.timingInArgument=e||1,this}},{key:"setEaseOutMethod",value:function(t,e){return this.timingOutMethod=t,this.timingOutArgument=e||1,this}}]),t}();e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(i(0)),r=d(i(1)),a=d(i(246)),u=d(i(46)),s=d(i(15)),o=d(i(24)),l=d(i(10));function d(t){return t&&t.__esModule?t:{default:t}}var f=function(){function t(e){(0,n.default)(this,t),this.game=e,this.settings=new a.default(this),this._behaviour=o.default.NONE,this._state=u.default.NONE,this._alpha=0,this._tColor=s.default.transparent,this._startColor=new s.default,this._t=0}return(0,r.default)(t,[{key:"in",value:function(){if(this._behaviour!==o.default.FADEIN){this._alpha=0,this._t=0;this._startColor.setColor(this.settings.inColor,0),this._tColor.setColor(this._startColor,0),this.settings.inColor.a=1,this._behaviour=o.default.FADEIN,this._state=u.default.IN}}},{key:"out",value:function(){this._behaviour!==o.default.FADEOUT&&(this._t=0,this._startColor.setColor(this.settings.outColor,1),this._tColor.setColor(this._startColor,1),this.settings.outColor.a=0,this._behaviour=o.default.FADEOUT,this._state=u.default.OUT)}},{key:"inout",value:function(){this.in(),this._behaviour=o.default.FADEINOUT}},{key:"by",value:function(t){switch(t){case o.default.NONE:return;case o.default.FADEINOUT:return this.inout();case o.default.FADEIN:return this.in()}}},{key:"reset",value:function(){this._tColor.setColor(this._startColor,0),this._t=0,this._behaviour=o.default.NONE,this._state=u.default.NONE}}]),t}();e.default=f,l.default.register("Transition",f,"transition")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.canvas=this.game.system.render.canvas,this.context=this.game.system.render.context,this.draw.init(),this.game.config.debug&&(this.debug=new a.default(this.game,this.draw))};var n,r=i(114),a=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),r=u(i(1)),a=u(i(21));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i){(0,n.default)(this,t),this.game=e,this.cache=null,this.context=null,this.ui=i,this.lastAlpha=1,this.lastColor="#000",this.currentColor="#FFF",this.currentTextAlign="center",this.disablePointTransform=!1}return(0,r.default)(t,[{key:"init",value:function(){return this.cache=this.game.system.cache,this.context=this.game.system.render.context,this}},{key:"defaultComposite",value:function(){this.context.globalCompositeOperation="source-over"}},{key:"transformPosition",value:function(t,e,i,n){return this.disablePointTransform?{x:t,y:e,w:i||0,h:n||0}:{x:t-this.ui.viewport.x,y:e-this.ui.viewport.y,w:i-this.ui.viewport.x||0,h:n-this.ui.viewport.y||0}}},{key:"font",value:function(t,e,i){a.default.isNumber(e)&&(e=e.toString()+"px"),void 0===i&&(i="normal"),this.context.font=i+" "+e+" '"+t+"'"}},{key:"text",value:function(t,e,i,n,r){void 0!==n&&(this.color=n),void 0!==r&&(this.align=r);var a=this.transformPosition(e,i);this.context.textAlign=r,this.context.fillText(t,a.x,a.y)}},{key:"image",value:function(t,e,i,n,r){var a=this.transformPosition(e,i);this.context.drawImage(t,0,0,t.width,t.height,a.x,a.y,t.width,t.height)}},{key:"imageExtra",value:function(t,e,i,n,r,a,u){if(void 0!==t&&null!==t){void 0===n&&(n=1),void 0===r&&(r=1),void 0===a&&(a=0),void 0===u&&(u=0);var s=this.transformPosition(e,i),o=t.width*a,l=t.height*u;this.context.save(),this.context.translate(s.x,s.y),this.context.scale(n,r),this.context.drawImage(t,0,0,t.width,t.height,-o,-l,t.width,t.height),this.context.restore()}}},{key:"sprite",value:function(t,e,i,n,r){var a=this.cache.image.get(t);if(null!==a){void 0===n&&(n=0),void 0===r&&(r=0);var u=this.transformPosition(e,i),s=a.width*n,o=a.height*r;this.context.save(),this.context.translate(u.x,u.y),this.context.drawImage(a.data,0,0,a.width,a.height,-s,-o,a.width,a.height),this.context.restore()}}},{key:"spriteScaled",value:function(t,e,i,n,r,a,u){var s=this.cache.image.get(t);if(null!==s){void 0===a&&(a=0),void 0===u&&(u=0);var o=this.transformPosition(e,i),l=s.width*a,d=s.height*u;this.context.save(),this.context.translate(o.x,o.y),this.context.scale(n,r),this.context.drawImage(s.data,0,0,s.width,s.height,-l,-d,s.width,s.height),this.context.restore()}}},{key:"spriteSkew",value:function(t,e,i,n,r,a,u){var s=this.cache.image.get(t);if(null!==s){void 0===a&&(a=0),void 0===u&&(u=0);this.transformPosition(e,i);var o=s.width*a,l=s.height*u;this.context.save(),this.context.transform(1,Math.tan(n),0,1,e,i),this.context.transform(1,0,Math.tan(r),1,0,0),this.context.drawImage(s.data,0,0,s.width,s.height,-o,-l,s.width,s.height),this.context.restore()}}},{key:"spriteAskew",value:function(t,e,i,n,r,a,u){var s=this.cache.image.get(t);if(null!==s){void 0===a&&(a=0),void 0===u&&(u=0);this.transformPosition(e,i);var o=s.width*a,l=s.height*u;this.context.save(),this.context.transform(1,Math.atan(n),0,1,e,i),this.context.transform(1,0,Math.atan(r),1,0,0),this.context.drawImage(s.data,0,0,s.width,s.height,-o,-l,s.width,s.height),this.context.restore()}}},{key:"spriteRskew",value:function(t,e,i,n,r,a,u){var s=this.cache.image.get(t);if(null!==s){void 0===a&&(a=0),void 0===u&&(u=0);this.transformPosition(e,i);var o=s.width*a,l=s.height*u;this.context.save(),this.context.transform(1,n,0,1,e,i),this.context.transform(1,0,r,1,0,0),this.context.drawImage(s.data,0,0,s.width,s.height,-o,-l,s.width,s.height),this.context.restore()}}},{key:"spritePart",value:function(t,e,i,n,r,a,u,s,o){var l=this.cache.image.get(t);if(null!==l){void 0===s&&(s=0),void 0===o&&(o=0);var d=this.transformPosition(e,i),f=a*s,c=u*o;this.context.save(),this.context.translate(d.x,d.y),this.context.drawImage(l.data,n,r,a,u,-f,-c,a,u),this.context.restore()}}},{key:"spritesheet",value:function(t,e,i,n,r,a,u,s){var o=this.cache.animation.get(t);if(null===o)return!1;var l=o.get(n);if(null===l||void 0===l)return!1;if(null===l.image)return!1;var d=l.frame;void 0===u&&(u=1),void 0===s&&(s=u),void 0===r&&(r=0),void 0===a&&(a=0);var f=this.transformPosition(e,i),c=d.width*r,h=d.height*a;return this.context.save(),this.context.translate(f.x,f.y),this.context.scale(u,s),this.context.drawImage(l.image.data,d.x,d.y,d.width,d.height,-c,-h,d.width,d.height),this.context.restore(),!0}},{key:"rect",value:function(t,e,i,n,r){var a=this.transformPosition(t,e,i,n);this.context.save(),this.context.fillStyle=r||this.currentColor,this.context.translate(a.x,a.y),this.context.fillRect(0,0,a.w,a.h),this.context.restore()}},{key:"outlineRect",value:function(t,e,i,n,r,a){a=a||this.currentColor;var u=this.transformPosition(t,e,i,n);this.context.save(),this.context.translate(u.x,u.y),this.context.lineWidth=r||1,this.context.strokeStyle=a,this.context.strokeRect(0,0,u.w,u.h),this.context.restore()}},{key:"bounds",value:function(t,e){void 0===e&&(e="red"),this.context.setTransform(1,0,0,1,0,0),this.outlineRectangle(t.min.x,t.min.y,t.max.x-t.min.x,t.max.y-t.min.y,e,1)}},{key:"color",set:function(t){this.lastColor=this.context.fillStyle,this.context.fillStyle=t,this.currentColor=this.context.fillStyle}},{key:"alpha",set:function(t){this.lastAlpha=this.context.globalAlpha,this.context.globalAlpha=t}},{key:"align",set:function(t){this.context.textAlign=t,this.currentTextAlign=this.context.textAlign}},{key:"composite",set:function(t){this.context.globalCompositeOperation=t}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){t.width=e,t.height=i,t.aspectRatio=e/i,t.pixelUnit.x=t.canvas.width/e,t.pixelUnit.y=t.canvas.height/i,t._isDirty=!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={Square:0,Pillarbox:1,Letterbox:2,computeViewPort:function(t,e){var i={x:0,y:0,w:1,h:1,style:0};if(Math.round(100*t)/100==Math.round(100*e)/100)return i;if(t>e){var r=1-e/t;i.x=r/2,i.y=0,i.w=1-r,i.h=1,i.style=n.Pillarbox}else{var a=1-t/e;i.x=0,i.y=a/2,i.w=1,i.h=1-a,i.style=n.Letterbox}return i}};e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(0)),r=c(i(1)),a=c(i(10)),u=c(i(32)),s=c(i(251)),o=c(i(38)),l=c(i(250)),d=(c(i(114)),c(i(8)),c(i(249))),f=c(i(248));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e){(0,n.default)(this,t),this.game=e,this.canvas=null,this.width=this.game.width,this.height=this.game.height,this.viewport=new u.default(0,0,this.width,this.height),this.ratiobox=null,this.aspectRatio=this.width/this.height,this.pixelUnit={x:1,y:1},this._isDirty=!0,this.matrix=new o.default(1),this.context=null,this._alpha=1,this.backgroundColor="#000",this.backgroundAlpha=0,this.debug=null,this.draw=new d.default(e,this)}return(0,r.default)(t,[{key:"setSize",value:function(t,e){return(0,l.default)(this,t,e),this}},{key:"setViewport",value:function(t,e,i,n){return this.viewport.x=t,this.viewport.y=e,this.viewport.width=i,this.viewport.height=n,this._isDirty=!0,this}},{key:"setViewportByAspectRatio",value:function(t){var e=this.game.system.render.canvas.width,i=this.game.system.render.canvas.height;this.ratiobox=s.default.computeViewPort(e/i,t);var n=0,r=0;if(this.ratiobox.style===s.default.Square)return this.viewport.set(0,0,e,i),this;this.ratiobox.style===s.default.Pillarbox?n=this.ratiobox.x*this.width:this.ratiobox.style===s.default.Letterbox&&(r=this.ratiobox.y*this.height),this.viewport.set(n,r,this.width*(e/this.width)-2*n,this.height*(i/this.height)-2*r);var a=e*(2*this.ratiobox.x),u=(this.ratiobox.y,(this.canvas.clientWidth-a)/i),o=i/(2*(this.height/2))*u;return this.pixelUnit.x=o,this.pixelUnit.y=o,this._isDirty=!0,this}},{key:"setSizeByCanvas",value:function(){return(0,l.default)(this,this.game.system.render.canvas.width,this.game.system.render.canvas.height),this}},{key:"setSizeByCamera",value:function(){return(0,l.default)(this,this.game.system.camera.width,this.game.system.camera.height),this}},{key:"setSizeByAspectRatio",value:function(t){return(0,l.default)(this,this.game.system.render.canvas.width*t,this.game.system.render.canvas.height*t),this}},{key:"alpha",get:function(){return this._alpha},set:function(t){this._alpha=t}}]),t}();e.default=h,a.default.register("UserInterface",h,"ui",f.default)},function(t,e,i){var n=i(25),r=i(75).onFreeze;i(34)("seal",function(t){return function(e){return t&&n(e)?t(r(e)):e}})},function(t,e,i){i(253),t.exports=i(13).Object.seal},function(t,e,i){"use strict";t.exports={Smoothing:i(121),Manager:i(119),Interpolation:i(118)}},function(t,e,i){"use strict";t.exports={Canvas:i(255),RenderLayer:i(117),RenderLayerManagement:i(116),Render:i(115),UI:i(252),Transition:i(247)}},function(t,e,i){"use strict";t.exports={MergeSort:i(69)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Utils=i(257),e.Set=i(67).default,e.Map=i(17).default,e.List=i(7).default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){!0===t._ended&&(t._ended=!1,t.loop?(t.playTime=t.startTime=0,t.buffer=(0,r.default)(t),(0,n.default)(t,0)):t.stop(),t.once&&(t.destroy(),t._pendingRemoval=!0))};var n=a(i(123)),r=a(i(122));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(this._noAudio)return;for(var t=0;t<this._sounds.length;t++){var e=this._sounds.at(t);this._system.type===n.default.WEBAUDIO&&(0,r.default)(e),e._requireRemoval&&this._removalList.push(t)}if(0===this._removalList.length)return;this._sounds.eraseIndexedList(this._removalList),this._removalList.length=0};var n=a(i(124)),r=a(i(259));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(12));e.default=function(t,e){var i=void 0===e?"undefined":(0,n.default)(e);if("number"===i)return IntToColor(e,t);if("string"===i)return"rgb"===e.substr(0,3).toLowerCase()?CSSToColor(e,t):HexToColor(e,t);if("object"===i)return ObjectToColor(e,t)};r(i(15));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(5));e.default=function(t,e){void 0===e&&(e=!1);if(Array.isArray(t))for(var i=0;i<t.length;i++)e?(0,r.default)(t[i]):(0,n.default)(t[i]);else e?(0,r.default)(t):(0,n.default)(t);return t};var r=a(i(141));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(void 0===source)return new a.default(t.r,t.g,t.b,t.a);source.setRGBA(t.r,t.g,t.b,t.a)};var n,r=i(15),a=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=void 0;i=void 0===e?new a.default:e;hex=hex.replace(u,function(t,e,i,n,r){return void 0!==r&&(r="F"),e+e+i+i+n+n+r+r});var n=s.exec(hex);n&&i.setRGBA(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),void 0===n[4]?1:parseInt(n[4],16));return i};var n,r=i(15),a=(n=r)&&n.__esModule?n:{default:n};var u=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=void 0;i=void 0===e?new a.default:e;var n=u.exec(t.toLowerCase());if(n){var r=parseInt(n[0],10)||0,s=parseInt(n[1],10)||0,o=parseInt(n[3],10)||0,l=1;void 0!==n[4]&&(l=parseFloat(n[4],10)||1),i.setRGBA(r,s,o,l)}return i};var n,r=i(15),a=(n=r)&&n.__esModule?n:{default:n};var u=/^(?:\w*|rgba?)\(?\s*(\d+)\s*\,?(?:\s*(\d+)\s*)?\,?(?:\s*(\d+)\s*)?\,?(?:\s*(\d+(?:\.\d+)?))?\s*\)?$/},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=e||new a.default,n=void 0,r=void 0,u=void 0,s=void 0;s=t>=16777216?i>>>24:1;return n=i>>16&255,r=i>>8&255,u=255&i,i.setRGBA(n,r,u,s),i};var n,r=i(15),a=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(12));e.default=function(t){var e=void 0===t?"undefined":(0,n.default)(t);if("number"===e)return(0,r.default)(t);if("string"===e)return"rgb"===t.substr(0,3).toLowerCase()?(0,a.default)(t):(0,u.default)(t);if("object"===e)return(0,s.default)(t)};var r=o(i(266)),a=o(i(265)),u=o(i(264)),s=o(i(263));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(5)),r=f(i(0)),a=f(i(1)),u=f(i(8)),o=f(i(125)),l=i(27),d=f(l);function f(t){return t&&t.__esModule?t:{default:t}}var c=new(function(){function t(){(0,r.default)(this,t)}return(0,a.default)(t,[{key:"linear",value:function(t,e,i){return u.default.lerp(t,e,i)}},{key:"stepped",value:function(t,e,i){return e*(i<.5?0:1)+t}},{key:"cut",value:function(t,e,i,n){return void 0===n&&(n=2),u.default.lerp(t,e,u.default.floor(i*n)/n)}},{key:"sine",value:function(t,e,i){return e*((Math.sin(i*Math.PI-u.default.HALFPI)+1)/2)+t}},{key:"power",value:function(t,e,i,n){if((i*=2)<1)return o.default.power(t,e,i,n)/2;var r=n%2==0?-1:1;return e*(r/2*(Math.pow(s-2,n)+2*r))+t}},{key:"quadratic",value:function(t,e,i){return this.power(t,e,i,2)}},{key:"cubic",value:function(t,e,i){return this.power(t,e,i,3)}},{key:"quartic",value:function(t,e,i){return this.power(t,e,i,4)}},{key:"quintic",value:function(t,e,i){return this.power(t,e,i,5)}},{key:"exponential",value:function(t,e,i){return 0==i||1==i?e*i+t:i<.5?.5*e*Math.pow(2,20*i-10)+t:-.5*e*Math.pow(2,-20*i+10)+1+t}},{key:"circ",value:function(t,e,i){return i/2<1?-e/2*(Math.sqrt(1-i*i)-1)+t:e/2*(Math.sqrt(1-i*(i-=2))+1)+t}},{key:"elastic",value:function(t,e,i,n){if(void 0===n&&(n=1),0==i)return t;if(2==(i/=n/2))return t+e;var r=n*(.3*1.5),a=r/4;return e>=Math.abs(e)&&(a=r/(2*Math.PI)*Math.asin(e/e)),i<1?e*Math.pow(2,10*(i-=1))*Math.sin((i*n-a)*(2*Math.PI)/r)*-.5+t:e*Math.pow(2,-10*(i-=1))*Math.sin((i*n-a)*(2*Math.PI)/r)*.5+e+t}},{key:"back",value:function(t,e,i){if(0==i)return t;if(2==(i/=.5))return t+e;var n=l.EASE_BACK_CONST;return i<1?e/2*(i*i*((1+(n*=1.525))*i-n))+t:e/2*((i-=2)*i*((1+(n*=1.525))*i+n)+2)+t}},{key:"by",value:function(t,e,i,n,r){switch(void 0===r&&(r=1),t){case d.default.NONE:return n;case d.default.CUT:return this.cut(e,i,n,r);case d.default.LINEAR:return this.linear(e,i,n);case d.default.SINE:return this.sine(e,i,n);case d.default.QUADRATIC:return this.power(e,i,n,2);case d.default.CUBIC:return this.power(e,i,n,3);case d.default.QUARTIC:return this.power(e,i,n,4);case d.default.QUINTIC:return this.power(e,i,n,5);case d.default.POWER:return this.power(e,i,n,r);case d.default.EXPONENTIAL:return this.exponential(e,i,n);case d.default.CIRC:return this.circ(e,i,n);case d.default.BACK:return this.back(e,i,n);case d.default.ELASTIC:return this.elastic(e,i,n,r)}return n}}]),t}());(0,n.default)(c),e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(5)),r=l(i(0)),a=l(i(1)),u=l(i(8)),s=i(27),o=l(s);function l(t){return t&&t.__esModule?t:{default:t}}var d=new(function(){function t(){(0,r.default)(this,t)}return(0,a.default)(t,[{key:"linear",value:function(t,e,i){return u.default.lerp(t,e,i)}},{key:"stepped",value:function(t,e,i){return e*(i<.5?0:1)+t}},{key:"cut",value:function(t,e,i,n){return void 0===n&&(n=2),u.default.lerp(t,e,u.default.floor(i*n)/n)}},{key:"sine",value:function(t,e,i){return-t*(Math.sin(i*u.default.HALFPI)+1)+t+e}},{key:"power",value:function(t,e,i,n){var r=n%2==0?-1:1;return e*(r*Math.pow(i-1,n)+r)+t}},{key:"quadratic",value:function(t,e,i){return this.power(t,e,i,2)}},{key:"cubic",value:function(t,e,i){return this.power(t,e,i,3)}},{key:"quartic",value:function(t,e,i){return this.power(t,e,i,4)}},{key:"quintic",value:function(t,e,i){return this.power(t,e,i,5)}},{key:"exponential",value:function(t,e,i){return 1==i?t:e*(1-Math.pow(2,10*i))+t}},{key:"circ",value:function(t,e,i){return e*Math.sqrt(1-(i-1)*i)+t}},{key:"elastic",value:function(t,e,i,n){if(void 0===n&&(n=1),0==i)return t;if(1==(i/=n))return t+e;var r=.3*n,a=r/4;return e*Mathf.pow(2,-10*i)*Math.sin((i-a)*(2*Math.PI)/r)+1+t}},{key:"back",value:function(t,e,i){return e*((i-1)*i*((s.EASE_BACK_CONST+1)*i+s.EASE_BACK_CONST)+1)+t}},{key:"by",value:function(t,e,i,n,r){switch(void 0===r&&(r=1),t){case o.default.NONE:return n;case o.default.STEPPED:return this.stepped(e,i,n);case o.default.CUT:return this.cut(e,i,n,r);case o.default.LINEAR:return this.linear(e,i,n);case o.default.SINE:return this.sine(e,i,n);case o.default.QUADRATIC:return this.power(e,i,n,2);case o.default.CUBIC:return this.power(e,i,n,3);case o.default.QUARTIC:return this.power(e,i,n,4);case o.default.QUINTIC:return this.power(e,i,n,5);case o.default.POWER:return this.power(e,i,n,r);case o.default.EXPONENTIAL:return this.exponential(e,i,n);case o.default.CIRC:return this.circ(e,i,n);case o.default.BACK:return this.back(e,i,n);case o.default.ELASTIC:return this.elastic(e,i,n,r)}return n}}]),t}());(0,n.default)(d),e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(t._behaviour===n.default.NONE)return;var i=t.settings,u=void 0;switch(t._state){case r.default.IN:t._t+=e/i.inDuration,t._t>=1&&(t._t=1,u=!0),a.default.ease(t._startColor,i.inColor,t._t,i.timingInMethod,0,i.timingInArgument,t._tColor);break;case r.default.WAIT:t._t+=e/i.pauseDuration,t._t>=1&&(t._t=1,u=!0);break;case r.default.OUT:t._t+=e/i.outDuration,t._t>=1&&(t._t=1,u=!0),a.default.ease(t._startColor,i.outColor,t._t,i.timingOutMethod,1,i.timingOutArgument,t._tColor)}if(void 0===u)return;switch(t._t=0,t._behaviour){case n.default.FADEIN:case n.default.FADEOUT:t._behaviour=n.default.NONE,t._state=r.default.IDLE,t._behaviour===n.default.FADEOUT&&(t._behaviour=n.default.FADEOUT),t.game.system.events.dispatch("transition_end");break;case n.default.FADEINOUT:t._state===r.default.IN?(t._color.setColor(i.outColor),i.pauseDuration>0?t._state=r.default.WAIT:t._state=r.default.OUT):t._state===r.default.WAIT?(t._state=r.default.OUT,t.game.system.events.dispatch("transition_pause_end")):t._state===r.default.OUT&&(t._state=r.default.IDLE,t._behaviour=n.default.NONE,t.game.system.events.dispatch("transition_end"))}};var n=u(i(24)),r=u(i(46)),a=(u(i(8)),u(i(65)),u(i(15)));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(t._state===r.default.NONE)return;switch(i.globalCompositeOperation="source-over",t.settings.style){case n.default.NONE:return;case n.default.FILL:i.fillStyle=t._tColor.rgba,i.fillRect(0,0,e.width,e.height)}};var n=a(i(66)),r=a(i(46));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(!t._isDirty)return;t.matrix.setIdentity().scale(t.pixelUnit.x,t.pixelUnit.y).translate(t.viewport.x,t.viewport.y),t._isDirty=!1}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){(0,n.default)(t),t.context.globalCompositeOperation="source-over";var i=0!==t.viewport.x||0!==t.viewport.x||t.viewport.width!==t.canvas.width||t.viewport.height!==t.canvas.height;i&&(t.context.save(),t.context.beginPath(),t.context.rect(0,0,t.viewport.width,t.viewport.height),t.context.clip());t.context.setTransform(t.matrix.a[0],t.matrix.a[1],t.matrix.a[3],t.matrix.a[4],t.matrix.a[6],t.matrix.a[7]),t.backgroundAlpha>0&&(t.context.globalAlpha=t.backgroundAlpha,t.context.fillStyle=t.backgroundColor,t.context.fillRect(0,0,t.width,t.height));1!==t._alpha&&(t.context.globalAlpha=1,t._alpha=1);(0,r.default)(e,t.draw),i&&t.context.restore()};var n=a(i(272)),r=a(i(137));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){t._setup?t._scintillaLoading?t._loadingPlaceHolder.update(e):t.onUpdateCallback&&t.onUpdateCallback.call(t.currentScene,e):t._scintillaLoading?t._loadingPlaceHolder.loading(e):t.onLoadingCallback&&t.onLoadingCallback.call(t.currentScene,e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){this._successFiles.erase(t),0===this._successFiles.size&&this.state===n.default.PROCESSING&&r.default.call(this)};var n=a(i(6)),r=a(i(127));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(t.state===n.default.ERROR)return this._failedFiles.insert(t),r.default.call(this,t);return this._processedFiles.insert(t),r.default.call(this,t)};var n=a(i(6)),r=a(i(275));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(5);var a={None:0,Point:1,Rect:2,Ellipse:3,Polygon:4,Polyline:5};(0,((n=r)&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),r=s(i(1)),a=s(i(9)),u=s(i(277));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e){(0,n.default)(this,t),this.x=a.default.value(e,"x",0),this.y=a.default.value(e,"y",0),this.width=a.default.value(e,"width",0),this.height=a.default.value(e,"height",0),this.rotation=a.default.value(e,"rotation",0),this.name=a.default.value(e,"name",""),this.id=a.default.value(e,"id",null),this.visible=a.default.value(e,"visible",!0),this.type=a.default.value(e,"type",""),this.objectType=u.default.Rect,!0===e.ellipse?this.objectType=u.default.Ellipse:!0===e.point?this.objectType=u.default.Point:!0===e.polygon?this.objectType=u.default.Polygon:!0===e.polyline&&(this.objectType=u.default.Polyline)}return(0,r.default)(t,[{key:"contains",value:function(t,e){return!(this.width<=0&&this.height<=0)&&(t>this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)}},{key:"intersects",value:function(t,e,i,n){return!(i<=0||n<=0||this.width<=0||this.height<=0)&&!(t>this.x+this.width||t+i<this.x||e>this.y+this.height||e+n<this.y)}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t.layers.length,a=new r.default;if(i<=0)return a;for(var u=0;u<i;u++){var s=t.layers[u];if("objectgroup"===s.type&&void 0!==s.objects){for(var o={name:s.name||"",objects:new r.default},l=s.objects.length,d=0;d<l;d++){var f=new n.default(s.objects[d]);o.objects.push(f)}a.push(o)}}return a};var n=a(i(278)),r=a(i(7));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(0),a=(n=r)&&n.__esModule?n:{default:n};e.default=function t(e,i,n,r,u){(0,a.default)(this,t),this.layer=e,this.data=i,this.tileX=n,this.tileY=r,this.id=u,this.frame=i.st,this.x=Math.round(n*i.st.width),this.y=Math.round(r*i.st.height)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),r=u(i(1)),a=u(i(9));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){(0,n.default)(this,t),this.width=a.default.value(e,"width",0),this.height=a.default.value(e,"height",0),this.x=a.default.value(e,"x",0),this.y=a.default.value(e,"y",0),this.name=a.default.value(e,"name",""),this.alpha=a.default.value(e,"alpha",1),this.visible=a.default.value(e,"visible",!0),this.tiles=a.default.value(e,"tiles",[]),this.hasAnimatedTiles=!1}return(0,r.default)(t,[{key:"getTile",value:function(t,e){var i=t+e*this.width;return this.tiles[i]}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=Boolean(t&n),i=Boolean(t&r),u=Boolean(t&a);t&=~(n|r|a);var s={flipped:!1,rotation:0};return{gid:t,flipHorizontal:e,flipVertical:i,flipDiagonal:u,flipped:s.flipped,rotation:s.rotation}};var n=2147483648,r=1073741824,a=536870912},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(5);var a={decode:function(t){return window.atob(t)},decodeToUint32:function(t){for(var e=window.atob(t),i=e.length,n=new Array(i),r=0;r<i;r+=4)n[r/4]=(e.charCodeAt(r)|e.charCodeAt(r+1)<<8|e.charCodeAt(r+2)<<16|e.charCodeAt(r+3)<<24)>>>0;return n},encode:function(t){return window.btoa(t)}};(0,((n=r)&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t.layers.length,d=new u.default;if(i<=0)return d;for(var c=i-1;c>=0;c--){var h=t.layers[c];if("tilelayer"===h.type){h.enconding&&"base64"===h.enconding&&(h.data=r.default.decodeToUint32(h.data),delete h.enconding);for(var v=new o.default({name:h.name,x:n.default.value(h,"offsetx",0)+h.x,y:n.default.value(h,"offsety",0)+h.y,width:h.width,height:h.height,tileWidth:h.tilewidth,tileHeight:h.tileheight,alpha:h.opacity,visible:h.visible}),y=[],_=0,p=0,m=!1,g=new a.default,M=0;M<h.data.length;M++){var b=(0,s.default)(h.data[M]),x=_+p*v.width,w=null;if(b.gid>0){var k=b.gid,O=f(e,k),S=O.getTileGID(k);S.isAnimated&&(g.insert(k),m=!0),w=new l.default(v,S,_,p,x)}y.push(w),++_>=v.width&&(_=0,p++)}v.tiles=y,v.hasAnimatedTiles=m,v.animatedTiles=g.size>0?g:void 0,d.push(v)}}return d};var n=d(i(9)),r=d(i(283)),a=d(i(67)),u=d(i(7)),s=d(i(282)),o=d(i(281)),l=d(i(280));function d(t){return t&&t.__esModule?t:{default:t}}function f(t,e){return t.each(function(t){if(t.hasGID(e))return t})||null}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var i in e){var n=parseInt(i),r=t.getTile(n);if(null!==r&&void 0!==r){var a=e[i];r.properties=a}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var i in e){var n=parseInt(i),r=t.getTile(n);if(null!==r&&void 0!==r){var a=e[i];for(var u in a){var s=a[u];if("animation"==u){var o=s.length;if(o>1){r.isAnimated=!0;for(var l=[],d=0;d<o;d++){var f=s[d];l.push({duration:f.duration,tileID:f.tileid})}r.keyFrames=l}}}}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(0)),r=a(i(32));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,i,a,u,s,o,l){(0,n.default)(this,t),this.id=a,this.gid=i,this.tileset=e||null,this.st=new r.default(u,s,o,l),this.keyFrames=void 0,this.isAnimated=!1,this.currentFrame=0,this.properties=null}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),r=s(i(1)),a=s(i(7)),u=s(i(287));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e,i,r,u,s,o){(0,n.default)(this,t),this.name=e,this.firstgid=i||1,this.tileWidth=r||16,this.tileHeight=u||16,this.margin=s||0,this.spacing=o||0,this.image=null,this.data=new a.default,this.rows=0,this.collumns=0,this.gidCount=0}return(0,r.default)(t,[{key:"getTileGID",value:function(t){return"string"===t&&(t=parseInt(t)),t<this.firstgid&&t>=this.firstgid+this.gidCount?null:this.data.at(t-this.firstgid)}},{key:"getTile",value:function(t){return"string"===t&&(t=parseInt(t)),this.data.at(t)}},{key:"hasGID",value:function(t){return t>=this.firstgid&&t<this.firstgid+this.gidCount}},{key:"updateData",value:function(t,e){void 0===this.image&&null==this.image||(t=this.image.width,e=this.image.height);var i=(e-2*this.margin+this.spacing)/(this.tileHeight+this.spacing),n=(t-2*this.margin+this.spacing)/(this.tileWidth+this.spacing);this.rows=Math.floor(n),this.collumns=Math.floor(i),this.gidCount=n*i;var r=this.margin,a=this.margin,s=0;this.data.clear();for(var o=0;o<this.gidCount;o++)this.data.push(new u.default(this,this.firstgid+o,o,r,a,this.tileWidth,this.tileHeight)),r+=this.tileWidth+this.spacing,++s>=n&&(s=0,r=this.margin,a+=this.tileHeight+this.spacing)}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var i=t.tilesets.length||0,o=new r.default,l=0;l<i;l++){var d=t.tilesets[l];if(d.image){var f=new n.default(d.name,d.firstgid,d.tilewidth,d.tileheight,d.margin,d.spacing);f.image=e.image.get(a.default.getFilenameWithoutExtension(d.image)||d.name),f.updateData(d.imagewidth,d.imageheight),void 0!==d.tiles&&(0,u.default)(f,d.tiles),void 0!==d.tileproperties&&(0,s.default)(f,d.tileproperties),o.push(f)}}return o};var n=o(i(288)),r=o(i(7)),a=o(i(22)),u=o(i(286)),s=o(i(285));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(0)),r=a(i(9));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e){(0,n.default)(this,t),this.name=r.default.value(e,"name","tilemap"),this.width=r.default.value(e,"width",0),this.height=r.default.value(e,"height",0),this.tileWidth=r.default.value(e,"tileWidth",16),this.tileHeight=r.default.value(e,"tileHeight",16),this.pixelsWidth=r.default.value(e,"pixelsWidth",this.width*this.tileWidth),this.pixelsHeight=r.default.value(e,"pixelsHeight",this.height*this.tileHeight),this.orientation=r.default.value(e,"orientation","orthogonal")}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){var o=new r.default({name:e.name,width:e.width,height:e.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,orientation:e.orientation}),l=(0,a.default)(e,i),d={tilesets:l,tilelayers:(0,u.default)(e,l),objectlayers:(0,s.default)(e)};return new n.default(t,o,d)};var n=o(i(68)),r=o(i(290)),a=o(i(289)),u=o(i(284)),s=o(i(279));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(!this.isOK())return-1;this.progress=0,this._loadedFilesCount=0,this.state=a.default.LOADING,this._filesQueueCount=this._filesQueue.size,0===this._filesQueue.size?n.default.call(this):(this.isDownloading=!0,this._successFiles.clear(),this._failedFiles.clear(),this._filesLoading.clear(),r.default.call(this))};var n=u(i(128)),r=u(i(126)),a=u(i(6));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this._keyWatch.each(function(t,e){e._event=KeyEvent.NONE,e.status=!1}),this._keyWatch.clear(),this._keyGarbage.splice(0,this._keyGarbage.length),this._eventQueue.splice(0,this._eventQueue.length)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),r=u(i(1)),a=u(i(7));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i){var r=this;(0,n.default)(this,t),this.tilemap=e,this.animatedTiles=new a.default;for(var u=0;u<i.length;u++)if(i.at(u).data.hasAnimatedTiles)for(var s=i.at(u).data.animatedTiles,o=function(t){var i=s.at(t),n=e.resource.getTileGID(i);if(null!==r.animatedTiles.find(function(t){return t.tileGID.gid===n.gid}))return"continue";r.animatedTiles.push({t:0,frame:0,tileGID:n})},l=0;l<s.size;l++)o(l)}return(0,r.default)(t,[{key:"update",value:function(){}}]),t}();e.default=s},function(t,e,i){var n=i(77),r=i(52);i(34)("keys",function(){return function(t){return r(n(t))}})},function(t,e,i){i(295),t.exports=i(13).Object.keys},function(t,e,i){t.exports={default:i(296),__esModule:!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,r){var a=0,u=r.matrix,s=u.a[6],o=u.a[7];e.floorTiles&&(s=n.default.round(s),o=n.default.round(o));if(t.setTransform(u.a[0],u.a[1],u.a[3],u.a[4],s,o),e.culling.method<=1)for(var l=0,d=e.culling.start.y;d<e.culling.end.y;d++)for(var f=e.culling.start.x;f<e.culling.end.x;f++){l=f+d*e.width;var c=i.tiles[l];if(null!=c&&void 0!==c){var h=void 0;h=!1===c.data.isAnimated||void 0===c.data.isAnimated?c.data.st:c.data.tileset.getTile(c.data.currentFrame).st,t.drawImage(c.data.tileset.image.data,h.x,h.y,h.width,h.height,c.x-e._originInPixels.x,c.y-e._originInPixels.y,h.width,h.height),a++}}return a};var n=r(i(8));r(i(131));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){var n=i(37);n(n.S,"Object",{create:i(82)})},function(t,e,i){i(299);var n=i(13).Object;t.exports=function(t,e){return n.create(t,e)}},function(t,e,i){t.exports={default:i(300),__esModule:!0}},function(t,e,i){var n=i(25),r=i(41),a=function(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=i(151)(Function.call,i(72).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return a(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:a}},function(t,e,i){var n=i(37);n(n.S,"Object",{setPrototypeOf:i(302).set})},function(t,e,i){i(303),t.exports=i(13).Object.setPrototypeOf},function(t,e,i){t.exports={default:i(304),__esModule:!0}},function(t,e,i){var n=i(77),r=i(145);i(34)("getPrototypeOf",function(){return function(t){return r(n(t))}})},function(t,e,i){i(306),t.exports=i(13).Object.getPrototypeOf},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,i){if(e instanceof n.default){for(var r=0;r<e.layers.length;r++){var a=e.layers.at(r);t(a,i)}e.layers.clear()}i.layer.removeRenderable(e);e._bounds=null;e.resource=null;e.frame=null};r(i(132));var n=r(i(70));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var i=0;i<t._instances.length;i++){var r=t._instances.at(i);!0===r.isPooled?e.system.pool.push(r):(0,n.default)(r,e,!0)}for(var a=0;a<t._pendingInstances.length;a++){var u=t._instances.at(a);!0===u.isPooled?e.system.pool.push(u):(0,n.default)(u,e,!0)}t._pendingInstances.destroy(),t._destroyInstances.destroy(),t._instances.destroy()};r(i(133));var n=r(i(129));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(!0===this._noAudio)return;for(var t=0;t<this._sounds.length;t++){var e=this._sounds.at(t);!1!==e.persistent&&void 0!==e.persistent&&!0!==e._pendingRemoval||(e.stop(),e.destroy(),this._sounds.splice(t,1))}this._removalList.length=0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e in u.default){var i=r.GameSystems[u.default[e]];void 0!==i&&delete t[i.name]}delete t.key,delete t.mouse,delete t.audio};var n,r=i(10),a=i(50),u=(n=a)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){null!==e.currentScene&&void 0!==e.currentScene&&((0,n.default)(e.currentScene),e.onDestroyCallback&&e.onDestroyCallback.call(e.currentScene),e._clearCache&&t.cache.clear(),(0,a.default)(t.system.entityList,t),u.default.call(t.input.keyboard),r.default.call(t.audio))};var n=s(i(311)),r=s(i(310)),a=s(i(309)),u=s(i(293));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){this.currentScene=this._scenes.get(t),this.onLoadingCallback=this.currentScene.loading||null,this.onLoadingRenderCallback=this.currentScene.loadingGUI||null,this.onRenderCallback=this.currentScene.gui||null,this.onUpdateCallback=this.currentScene.update||null,this.onStartCallback=this.currentScene.start||null,this.onPreloadCallback=this.currentScene.preload||null,this.onDestroyCallback=this.currentScene.destroy||null,(0,a.default)(this.game,this.currentScene),this._currentSceneName=t,this._setup=!1};var n,r=i(136),a=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(!t.game.systemInited||null===t._changeScene)return;if((0,a.default)(t.game,t),n.default.call(t,t._changeScene),t._currentSceneName!==t._changeScene)return;t._changeScene=null;if(t.onPreloadCallback){t.game.system.load.reset(),t.onPreloadCallback.call(t.currentScene,t.game);var e=null===t.onLoadingCallback&&null===t.onLoadingRenderCallback;null!==t.onLoadingCallback&&null!==t.onLoadingRenderCallback||(e&&t.game.system.load.totalQueuedFiles>0?(t._loadingPlaceHolder.init(t.currentScene),t._scintillaLoading=!0):t._scintillaLoading=!1),0===t.game.system.load.totalQueuedFiles?r.default.call(t):u.default.call(t.game.system.load)}else r.default.call(t)};var n=s(i(313)),r=s(i(135)),a=s(i(312)),u=s(i(292));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.context.globalAlpha=1,t.context.globalCompositeOperation="source-over"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t._depthSorting-e._depthSorting}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(!t.__enable)return 0;var n=0;t.__isDirty&&(t.renderList.sort(a.default),t.__isDirty=!1);for(var r=t.renderList.size,u=0;u<r;u++){var s=t.renderList.at(u);e.bounds.intersects(s.bounds)&&(i.globalAlpha=s.alpha,n+=s.render(i))}return n};var n,r=i(316),a=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(!t._enable)return;1!==t._alpha&&(t.context.globalAlpha=1,t._alpha=1);if(t.context.globalCompositeOperation="source-over",!0===t.game.scene._setup)for(var r=0;r<t.layer.renderLayers.length;r++){var a=t.layer.renderLayers.at(r);if(a.enable){var u=0;u+=(0,n.default)(a,e,t.context),t.drawCalls+=u}}};var n=r(i(317));r(i(137));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.clear&&t.context.clearRect(0,0,t.canvas.width,t.canvas.height);t.context.fillStyle=t._backgroundColor,t.context.fillRect(0,0,t.canvas.width,t.canvas.height),t.drawCalls=0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n,r,u,s){var o=[];o[0]=(0,a.default)(e,i,u,s),o[1]=(0,a.default)(e+n,i,u,s),o[2]=(0,a.default)(e,i+r,u,s),o[3]=(0,a.default)(e+n,i+r,u,s),t.min.x=Math.min(o[0].x,o[1].x,o[2].x,o[3].x),t.min.y=Math.min(o[0].y,o[1].y,o[2].y,o[3].y),t.max.x=Math.max(o[0].x,o[1].x,o[2].x,o[3].x),t.max.y=Math.max(o[0].y,o[1].y,o[2].y,o[3].y)};var n,r=i(71),a=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(!1===t._transform._isDirty)return;var i=t._transform;i.rotation!=i._oldRotation&&(i._oldRotation=i.rotation,i._cosSin.y=Math.sin(i.rotation),i._cosSin.x=Math.cos(i.rotation));var a={x:t.width*i.origin.x,y:t.height*i.origin.y},u={x:i.position.x+a.x,y:i.position.y+a.y};t._roundPixels&&(u.x=r.default.round(u.x),u.y=r.default.round(u.y));t.viewBounds.setMin(u.x,u.y).setMax(u.x+t.width,u.y+t.height),u.x=-u.x,u.y=-u.y,i.matrix.setIdentity().scale(t._pixelUnit.x,t._pixelUnit.y).translate(u.x,u.y).scale(i.scale.x,i.scale.x),(0,n.default)(t.bounds,t._transform,t.width,t.height,u),i.matrix.radianRotate(i._cosSin.x,i._cosSin.y).translate(-a.x,-a.y)};a(i(320)),a(i(71));var n=a(i(138)),r=a(i(8));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(0)),r=o(i(1)),a=o(i(139)),u=o(i(9)),s=o(i(8));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e,i){(0,n.default)(this,t),this.game=e,this.requestAnimationFrame=new a.default(i.time.timeoutMode),this.isRunning=!1,this.loop=null,this.render=null,this.startTime=0,this.time=0,this.previousTime=0,this.elapsed=0,this.hiDeltaTime=0,this.deltaTime=0,this.requireFpsUpdate=!0,this.fpsDesired=u.default.value(i,"fps",60),this.fps=this.fpsDesired,this.currentFps=0,this._nextFpsUpdate=0,this._framesThisSecond=0,this.interpolation=!1,this.timeStep=Math.ceil(1e3/this.fpsDesired),this.minTimeStep=1.25*this.timeStep,this.accumalator=0,this.accumulatorMax=10*this.timeStep,this.updateLast=0,this.updateAverageDelta=0,this.frameCounter=0}return(0,r.default)(t,[{key:"init",value:function(t){this.isRunning||(this.reset(),this.loop=t.loop.bind(t),this.render=t.render.bind(t),this.startTime=window.performance.now(),this.requestAnimationFrame.start(this.update.bind(this)),this.isRunning=!0)}},{key:"update",value:function(t){this.hiDeltaTime=t-this.previousTime,this.time=t,this.elapsed+=this.hiDeltaTime,this.requireFpsUpdate&&this.fpsUpdate(t),this.previousTime=t,this.accumalatorMethod(this.hiDeltaTime),this.render(this.hiDeltaTime)}},{key:"fpsUpdate",value:function(t){t>this._nextFpsUpdate&&(this.currentFps=.25*this._framesThisSecond+.75*this.fps,this.fps=s.default.clamp(~~this.currentFps,0,this.fpsDesired),this._nextFpsUpdate=t+1e3,this._framesThisSecond=0),this._framesThisSecond++}},{key:"accumalatorMethod",value:function(t){if(++this.frameCounter%this.frameRate==0){this.frameCounter=0,this.accumalator+=t,this.accumulator=Math.min(this.accumalator,this.accumalatorMax);var e=this.interpolation?t:this.timeStep,i=this.interpolation?e:Math.max(e,this.updateAverageDelta);for(this.deltaTime=e/1e3;this.accumalator>=i||this.interpolation;){var n=window.performance.now();this.loop(e/1e3);var r=window.performance.now();if(this.updateAverageDelta=r-n,this.accumalator-=i,this.interpolation){this.accumalator=0;break}}}}},{key:"accumalatorReset",value:function(){this.frameCounter=0,this.frameRate=~~(.5+60/this.fpsDesired),this.accumalator=0,this.timeStep=1e3/this.fpsDesired,this.accumulatorMax=10*this.stepSize}},{key:"reset",value:function(){var t=window.performance.now();this.deltaTime=0,this.hiDeltaTime=0,this.time=t,this.previousTimeTime=t,this._nextFpsUpdate=t+1e3,this._framesThisSecond=0,this.accumalatorReset()}}]),t}();e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=p(i(0)),r=p(i(1)),a=p(i(10)),u=(p(i(139)),p(i(322))),s=p(i(321)),o=p(i(319)),l=p(i(318)),d=p(i(315)),f=p(i(314)),c=p(i(274)),h=p(i(273)),v=p(i(271)),y=p(i(270)),_=p(i(260));function p(t){return t&&t.__esModule?t:{default:t}}var m=function(){function t(e,i){(0,n.default)(this,t),this.game=e,this.system=i,this.updateStep=new u.default(e,e.config),this.entityUpdateList=null,this.currentScene=null,this.camera=null,this.canvas=null,this.renderer=null}return(0,r.default)(t,[{key:"loop",value:function(t){_.default.call(this.game.audio),this.game.input.update(),(0,y.default)(this.game.system.transition,t),this.currentScene=this.game.scene.currentScene;var e=null!=this.currentScene&&void 0!==this.currentScene;if((0,f.default)(this.game.scene),e){this.entityUpdateList.beginUpdate(t);var i=this.camera._transform._isDirty;(0,c.default)(this.game.scene,t),(0,s.default)(this.camera,this.canvas),this.entityUpdateList.update(t),i&&(this.camera._transform._isDirty=!1)}}},{key:"render",value:function(t){(0,o.default)(this.renderer),null===this.currentScene&&void 0===this.currentScene||((0,l.default)(this.renderer,this.camera,t),(0,h.default)(this.system.ui,this.game.scene)),(0,d.default)(this.system.render),this.renderer.context.setTransform(1,0,0,1,0,0),(0,v.default)(this.system.transition,this.renderer.canvas,this.renderer.context),null!==this.system.ui.debug&&void 0!==this.system.ui.debug&&this.system.ui.debug.test(),this.renderer.doubleBuffer&&this.renderer._domContext.drawImage(this.renderer.canvas,0,0)}}]),t}();e.default=m,a.default.register("GameLoop",m,"loop",function(){this.updateStep.init(this),this.entityUpdateList=this.game.system.entityList,this.camera=this.system.camera,this.canvas=this.system.render.canvas,this.renderer=this.system.render})},function(t,e,i){"use strict";t.exports={Config:i(140),System:i(10),SceneSystem:i(50),GameLoop:i(323)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){for(var t={available:!1,cancel:"",request:""},e=["requestFullscreen","requestFullScreen","webkitRequestFullscreen","webkitRequestFullScreen","msRequestFullscreen","msRequestFullScreen","mozRequestFullScreen","mozRequestFullscreen"],i=document.createElement("div"),n=0;n<e.length;n++)if(i[e[n]]){t.available=!0,t.request=e[n];break}if(t.available)for(var r=["cancelFullScreen","exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","msCancelFullScreen","msExitFullscreen","mozCancelFullScreen","mozExitFullscreen"],a=0;a<r.length;a++)if(document[r[a]]){t.cancel=r[a];break}return t}},function(t,e,i){i(34)("getOwnPropertyNames",function(){return i(143).f})},function(t,e,i){i(326);var n=i(13).Object;t.exports=function(t){return n.getOwnPropertyNames(t)}},function(t,e,i){t.exports={default:i(327),__esModule:!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e={webAudio:!1,audioData:!1,format:{ogg:!1,mp3:!1,wav:!1,webm:!1,dolby:!1,opus:!1}};e.audioData=!!window.Audio,e.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var i=document.createElement("audio");if(i.canPlayType)try{if(i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(e.format.ogg=!0),(i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||i.canPlayType("audio/opus;").replace(/^no$/,""))&&(e.format.opus=!0),i.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(e.format.mp3=!0),i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(e.format.wav=!0),(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/aac;").replace(/^no$/,""))&&(e.format.m4a=!0),i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(e.format.webm=!0),""!==i.canPlayType('audio/mp4;codecs="ec-3"'))if(t.manufacturer.edge)e.format.dolby=!0;else if(t.manufacturer.safari&&t.version>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var n=parseInt(RegExp.$1,10),r=parseInt(RegExp.$2,10);(10===n&&r>=11||n>10)&&(e.format.dolby=!0)}}catch(t){}return e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(12),a=(n=r)&&n.__esModule?n:{default:n};e.default=function(t){var e={canvas:!1,svg:!1,file:!1,fileSystem:!1,worker:!1,pointerLock:!1,vibration:!1};e.canvas=!!window.CanvasRenderingContext2D||t.environment.cocoonJS,e.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),e.fileSystem=!!window.requestFileSystem,e.worker=!!window.Worker,e.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,e.svg=void 0!==("undefined"==typeof SVGRect?"undefined":(0,a.default)(SVGRect))&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(e.vibration=!0);return e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e={name:void 0,version:0,manufacturer:{firefox:!1,opera:!1,ie:!1,edge:!1,chrome:!1,blink:!1,safari:!1,silk:!1}};e.manufacturer.opera=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,e.manufacturer.firefox="undefined"!=typeof InstallTrigger,e.manufacturer.safari=/constructor/i.test(window.HTMLElement)||(i=!window.safari||safari.pushNotification,"[object SafariRemoteNotification]"===i.toString()),e.manufacturer.ie=!!document.documentMode,e.manufacturer.edge=!e.manufacturer.edge&&!!window.StyleMedia,e.manufacturer.chrome=!!window.chrome&&!!window.chrome.webstore,e.manufacturer.blink=(e.manufacturer.chrome||e.manufacturer.opera)&&!!window.CSS;var i;var n=/(\w+)(?:\D+|\/)?((\d+)?\.?(\d+)?)?;?/.exec(t),r=0;e.name=n[0],void 0!==n[1]&&(r=parseInt(n[1],10));return e.version=r,e}},function(t,e){var i,n,r=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function s(t){if(i===setTimeout)return setTimeout(t,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(t){i=a}try{n="function"==typeof clearTimeout?clearTimeout:u}catch(t){n=u}}();var o,l=[],d=!1,f=-1;function c(){d&&o&&(d=!1,o.length?l=o.concat(l):f=-1,l.length&&h())}function h(){if(!d){var t=s(c);d=!0;for(var e=l.length;e;){for(o=l,l=[];++f<e;)o&&o[f].run();f=-1,e=l.length}o=null,d=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function y(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new v(t,e)),1!==l.length||d||s(h)},v.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(12),a=(n=r)&&n.__esModule?n:{default:n};e.default=function(e){var i=/Silk/.test(e),n={name:void 0,mobile:!1,desktop:!1,os:{windows:!1,windowsPhone:!1,macOS:!1,linux:!1,android:!1,iOS:!1,chromeOS:!1,kindle:!1},environment:{node:!1,electron:!1,cordova:!1,nodewebkit:!1,cocoonJS:!1,cocoonApp:!1,ejecta:!1}};/Windows/.test(e)?(n.name="Windows",n.os.windows=!0):/Mac OS/.test(e)?(n.name="MacOS",n.os.macOS=!0):/Linux/.test(e)?(n.name="Linux",n.os.linux=!0):/Android/.test(e)?(n.name="Android",n.os.android=!0):/iP[ao]d|iPhone/i.test(e)?(n.name="iOS",n.os.iOS=!0):/Kindle/.test(e)||/\bKF[A-Z][A-Z]+/.test(e)||/Silk.*Mobile Safari/.test(e)?(n.name="Kindle",n.os.kindle=!0):/CrOS/.test(e)&&(n.name="ChromeOS",n.os.chromeOS=!0);(/Windows Phone/i.test(e)||/IEMobile/i.test(e))&&(n.name="Windows Phone",n.os.android=!1,n.os.iOS=!1,n.os.macOS=!1,n.os.windows=!0,n.os.windowsPhone=!0);(n.os.windows||n.os.macOS||n.os.linux&&!i||n.os.chromeOS)&&(n.desktop=!0,n.mobile=!1);(n.os.windowsPhone||/Windows NT/i.test(e)&&/Touch/i.test(e))&&(n.os.desktop=!1,n.mobile=!0);void 0!==window.cordova&&(n.environment.cordova=!0);void 0!==t&&void 0!==t.versions.node&&(n.environment.node=!0);n.environment.node&&"object"===(0,a.default)(t.versions)&&(n.environment.nodeWebkit=!!t.versions["node-webkit"],n.environment.electron=!!t.versions.electron);if(navigator.isCocoonJS){n.environment.cocoonJS=!0;try{n.environment.cocoonApp="undefined"!=typeof CocoonJS}catch(t){n.environment.cocoonApp=!1}}void 0!==window.ejecta&&(n.environment.ejecta=!0);return n}}).call(this,i(332))},function(t,e,i){var n=i(37);n(n.S+n.F*!i(30),"Object",{defineProperty:i(31).f})},function(t,e,i){i(334);var n=i(13).Object;t.exports=function(t,e,i){return n.defineProperty(t,e,i)}},function(t,e,i){t.exports={default:i(335),__esModule:!0}},function(t,e,i){var n=i(25),r=i(75).onFreeze;i(34)("freeze",function(t){return function(e){return t&&n(e)?t(r(e)):e}})},function(t,e,i){i(337),t.exports=i(13).Object.freeze},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(12),a=(n=r)&&n.__esModule?n:{default:n};e.default=function(t){if("object"!==(void 0===t?"undefined":(0,a.default)(t))||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0}},function(t,e,i){i(74)("observable")},function(t,e,i){i(74)("asyncIterator")},function(t,e){},function(t,e,i){var n=i(146);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){var n=i(52),r=i(144),a=i(73);t.exports=function(t){var e=n(t),i=r.f;if(i)for(var u,s=i(t),o=a.f,l=0;s.length>l;)o.call(t,u=s[l++])&&e.push(u);return e}},function(t,e,i){"use strict";var n=i(26),r=i(29),a=i(30),u=i(37),s=i(148),o=i(75).KEY,l=i(40),d=i(80),f=i(78),c=i(51),h=i(35),v=i(76),y=i(74),_=i(344),p=i(343),m=i(41),g=i(25),M=i(28),b=i(84),x=i(53),w=i(82),k=i(143),O=i(72),S=i(31),L=i(52),j=O.f,P=S.f,T=k.f,N=n.Symbol,E=n.JSON,A=E&&E.stringify,D=h("_hidden"),I=h("toPrimitive"),C={}.propertyIsEnumerable,R=d("symbol-registry"),F=d("symbols"),z=d("op-symbols"),U=Object.prototype,B="function"==typeof N,W=n.QObject,G=!W||!W.prototype||!W.prototype.findChild,Q=a&&l(function(){return 7!=w(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=j(U,e);n&&delete U[e],P(t,e,i),n&&t!==U&&P(U,e,n)}:P,Y=function(t){var e=F[t]=w(N.prototype);return e._k=t,e},H=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},V=function(t,e,i){return t===U&&V(z,e,i),m(t),e=b(e,!0),m(i),r(F,e)?(i.enumerable?(r(t,D)&&t[D][e]&&(t[D][e]=!1),i=w(i,{enumerable:x(0,!1)})):(r(t,D)||P(t,D,x(1,{})),t[D][e]=!0),Q(t,e,i)):P(t,e,i)},q=function(t,e){m(t);for(var i,n=_(e=M(e)),r=0,a=n.length;a>r;)V(t,i=n[r++],e[i]);return t},J=function(t){var e=C.call(this,t=b(t,!0));return!(this===U&&r(F,t)&&!r(z,t))&&(!(e||!r(this,t)||!r(F,t)||r(this,D)&&this[D][t])||e)},Z=function(t,e){if(t=M(t),e=b(e,!0),t!==U||!r(F,e)||r(z,e)){var i=j(t,e);return!i||!r(F,e)||r(t,D)&&t[D][e]||(i.enumerable=!0),i}},X=function(t){for(var e,i=T(M(t)),n=[],a=0;i.length>a;)r(F,e=i[a++])||e==D||e==o||n.push(e);return n},K=function(t){for(var e,i=t===U,n=T(i?z:M(t)),a=[],u=0;n.length>u;)!r(F,e=n[u++])||i&&!r(U,e)||a.push(F[e]);return a};B||(s((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=c(arguments.length>0?arguments[0]:void 0),e=function(i){this===U&&e.call(z,i),r(this,D)&&r(this[D],t)&&(this[D][t]=!1),Q(this,t,x(1,i))};return a&&G&&Q(U,t,{configurable:!0,set:e}),Y(t)}).prototype,"toString",function(){return this._k}),O.f=Z,S.f=V,i(142).f=k.f=X,i(73).f=J,i(144).f=K,a&&!i(85)&&s(U,"propertyIsEnumerable",J,!0),v.f=function(t){return Y(h(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;$.length>tt;)h($[tt++]);for(var et=L(h.store),it=0;et.length>it;)y(et[it++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return r(R,t+="")?R[t]:R[t]=N(t)},keyFor:function(t){if(!H(t))throw TypeError(t+" is not a symbol!");for(var e in R)if(R[e]===t)return e},useSetter:function(){G=!0},useSimple:function(){G=!1}}),u(u.S+u.F*!B,"Object",{create:function(t,e){return void 0===e?w(t):q(w(t),e)},defineProperty:V,defineProperties:q,getOwnPropertyDescriptor:Z,getOwnPropertyNames:X,getOwnPropertySymbols:K}),E&&u(u.S+u.F*(!B||l(function(){var t=N();return"[null]"!=A([t])||"{}"!=A({a:t})||"{}"!=A(Object(t))})),"JSON",{stringify:function(t){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=e=n[1],(g(e)||void 0!==t)&&!H(t))return p(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!H(e))return e}),n[1]=e,A.apply(E,n)}}),N.prototype[I]||i(36)(N.prototype,I,N.prototype.valueOf),f(N,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},function(t,e,i){i(345),i(342),i(341),i(340),t.exports=i(13).Symbol},function(t,e,i){t.exports={default:i(346),__esModule:!0}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports=function(){}},function(t,e,i){"use strict";var n=i(349),r=i(348),a=i(83),u=i(28);t.exports=i(152)(Array,"Array",function(t,e){this._t=u(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(t,e,i){i(350);for(var n=i(26),r=i(36),a=i(83),u=i(35)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),o=0;o<s.length;o++){var l=s[o],d=n[l],f=d&&d.prototype;f&&!f[u]&&r(f,u,l),a[l]=a.Array}},function(t,e,i){var n=i(26).document;t.exports=n&&n.documentElement},function(t,e,i){var n=i(87),r=Math.max,a=Math.min;t.exports=function(t,e){return(t=n(t))<0?r(t+e,0):a(t,e)}},function(t,e,i){var n=i(87),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},function(t,e,i){var n=i(28),r=i(354),a=i(353);t.exports=function(t){return function(e,i,u){var s,o=n(e),l=r(o.length),d=a(u,l);if(t&&i!=i){for(;l>d;)if((s=o[d++])!=s)return!0}else for(;l>d;d++)if((t||d in o)&&o[d]===i)return t||d||0;return!t&&-1}}},function(t,e,i){var n=i(146);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){var n=i(31),r=i(41),a=i(52);t.exports=i(30)?Object.defineProperties:function(t,e){r(t);for(var i,u=a(e),s=u.length,o=0;s>o;)n.f(t,i=u[o++],e[i]);return t}},function(t,e,i){"use strict";var n=i(82),r=i(53),a=i(78),u={};i(36)(u,i(35)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(u,{next:r(1,i)}),a(t,e+" Iterator")}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var n=i(87),r=i(86);t.exports=function(t){return function(e,i){var a,u,s=String(r(e)),o=n(i),l=s.length;return o<0||o>=l?t?"":void 0:(a=s.charCodeAt(o))<55296||a>56319||o+1===l||(u=s.charCodeAt(o+1))<56320||u>57343?t?s.charAt(o):a:t?s.slice(o,o+2):u-56320+(a-55296<<10)+65536}}},function(t,e,i){"use strict";var n=i(360)(!0);i(152)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e,i){i(361),i(351),t.exports=i(76).f("iterator")},function(t,e,i){t.exports={default:i(362),__esModule:!0}},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";(function(e){var n=a(i(153)),r=a(i(88));function a(t){return t&&t.__esModule?t:{default:t}}var u=u||{Environment:i(39).default,Core:i(324),Structure:i(258),Render:i(256),Color:i(15),Transition:i(245),KeyCode:i(113),MouseButton:i(112),Input:i(244),Math:i(8).default,Random:i(107).default,Matrix:i(38),Ease:i(240).Ease,Scene:i(239),Camera:i(232),Module:i(230),Entity:i(215),Pool:i(200),Event:i(196),Audio:i(191),Resource:i(190),Cache:i(187),AssetType:i(11),Loader:i(185),Game:i(171),Path:i(22),WrapMode:i(61).default};(0,r.default)(n.default,u),t.exports=u,e.scintilla=u}).call(this,i(364))}])});