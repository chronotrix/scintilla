{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///../node_modules/webpack/buildin/global.js","webpack:///./Scintilla.js","webpack:///./core/cache.js","webpack:///./core/config.js","webpack:///./core/game.js","webpack:///./core/scenemanager.js","webpack:///./input/input.js","webpack:///./input/key.js","webpack:///./input/keyboard.js","webpack:///./input/mouse.js","webpack:///./loader/XHR.js","webpack:///./loader/listinjector.js","webpack:///./loader/loaderstate.js","webpack:///./loader/loadmanager.js","webpack:///./math/vector.js","webpack:///./others/debug.js","webpack:///./physics/physics.js","webpack:///./physics/sat.js","webpack:///./physics/satresponse.js","webpack:///./render/canvas/canvas.js","webpack:///./structures/map.js","webpack:///./structures/set.js","webpack:///./time/time.js","webpack:///./time/updatetime.js","webpack:///./utils/utils.js"],"names":["scintilla","VERSION","Game","require","ShapeType","Rect","Circle","Polygon","module","exports","global","Cache","game","_cache","images","sounds","tag","url","data","tagExists","removeTagAt","img","console","log","webAudio","decoded","audio","usingWebAudio","isDecoding","sound","getAssetInfo","cacheType","asset","property","Config","config","undefined","callback","getValue","callback_2","getPropertyValue","width","height","parent","debug","loader","baseURL","path","responseType","async","systemInited","isRunning","debugMode","timeMode","_spiraling","_lastFrameCount","cache","load","canvas","scene","draw","render","universe","world","input","time","component","instance","animationCache","updateGameMethod","pool","context","parseConfiguration","init","create","getContext","alpha","physics","start","update","deltaTime","accumalator","_render","accumulatorDelta","countFrames","Math","min","logic","refresh","timeStep","preUpdate","destroy","SceneManager","_scenes","current_scene_name","change_scene","_setup","_clearCache","current_scene","onStartCallback","onLoadingCallback","onLoadingRenderCallback","onPreloadCallback","onUpdateCallback","onRenderCallback","onDestroyCallback","sceneName","newScene","Scene","prototype","isPrototypeOf","set","has","name","clearCache","scenes","get","camera","call","clear","destroyAllChilds","clearCurrentScene","setupScene","reset","totalQueuedFiles","preloadComplete","Input","mouse","keyboard","KeyEvent","NONE","IDLE","PRESSED","RELEASED","Key","keycode","keyCode","_enabled","status","press","release","_event","pressTime","pressDuration","releaseTime","releaseDuration","value","Keyboard","active","_keyMapping","_keyWatch","_keyGarbage","lastKey","_onKeyDown","_onKeyUp","_onKeyPress","prop","KeyCode","hasOwnProperty","self","event","processKeyDown","processKeyUp","window","addEventListener","removeEventListener","key","preventDefault","keyObj","onKeyUp","onKeyDown","each","push","length","deleteByIndexedArray","splice","isPressed","isReleased","Backspace","Tab","Enter","Shift","Ctrl","Alt","Pause","CapsLock","Escape","Space","PageUp","PageDown","End","Home","Left","Up","Right","Down","Insert","Delete","Num0","Num1","Num2","Num3","Num4","Num5","Num6","Num7","Num8","Num9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","LSystem","RSystem","SelectK","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","Multiply","Add","Subtract","DecimalPoint","Divide","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","NumLock","ScrollLock","SemiColon","Equal","Comma","Dash","Period","Slash","LBraket","BackSlash","RBracket","Quote","MouseButton","LEFT_BUTTON","MIDDLE_BUTTON","RIGHT_BUTTON","WHEEL_UP","WHEEL_DOWN","MouseEvent","PRESS","RELEASE","Mouse","x","y","button","wheelDelta","_mouseButtons","_mouseButtonsLocks","_mouseButtonsLocksPressed","_mouseDownDuration","_onMouseDown","_onMouseMove","i","onMouseDown","_onMouseUp","onMouseUp","onMouseMove","_onMouseOver","_onMouseOut","rect","getBoundingClientRect","floor","clientX","left","right","clientY","top","bottom","buttonLock","hit","object","vec2","file","settings","xhrSettings","XHR","merge","xmlHttpRequest","XMLHttpRequest","open","source","timeout","onload","onLoad","bind","onerror","onError","onprogress","onProgress","send","type","doAsync","a","b","out","createSettings","setting","ListInjector","list","toObj","func","AssetTypeHandler","LOADER_STATE","PENDING","LOADING","PROCESSING","ERROR","FINISHED","DONE","LoadManager","_filesQueue","_successFiles","_failedFiles","_processedFiles","_filesQueueCount","_loadedFilesCount","isDownloading","_totalFiles","gameConfig","xhr","progress","state","inject","substr","concat","baseUrl","isOK","_successCount","_fileErrorCount","size","loadFinished","processFileQueue","concludedFile","hasError","delete","updateProgress","processingDone","onProcessing","processingUpdate","deleteFromSuccessQueue","addImage","requestXHR","response","addSound","autoDecode","decode","Vector","radians","cos","sin","other","dx","dy","c","s","otherVector","mag","dot","project","sqrt","squaredLenght","magnitude","vec","tobiJS","distance","angleBetween","dp","proj","axis","r","scale","sub","projectNormal","t","lerp","Debug","lineHeight","column","font","textColor","bgcolor","textShadow","setTransform","strokeStyle","rectangle","drawLine","round","fps","instancesInView","textLine","xx","fillStyle","fillText","Physics","sat","colliadables","obj","indexOf","objA","shapeA","shape","_gameObject","_selfDestroy","jit","j","objB","shapeB","bounds","box","intersects","getType","onCollision","SAT","VECTORS","v","ARRAYS","points","normal","result","Number","MAX_VALUE","max","len","posA","posB","pointsA","pointsB","rangeA","pop","rangeB","offsetV","copy","projectedOffset","flattenPointsOn","overlap","aInB","bInA","option1","option2","absOverlap","abs","overlapN","reverse","getPoints","normalsA","getNormals","normalsALen","normalsB","normalsBLen","isSeparatingAxis","position","overlapV","SATResponse","indexShapeA","indexShapeB","defaultDef","id","random","toString","class","container","style","CO","document","createElement","setAttribute","Canvas","appendDOM","appendTo","overflowHidden","target","getElementById","nodeType","body","appendChild","Map","_content","_size","entries","Object","keys","values","content","array","_contents","Set","elements","Array","isArray","index","idx","scope","slice","Time","startTime","currentTime","previousTime","elapsed","elapsed_mili","timeOut_toCall","timeOut_expected","fpsDesired","timeStep_mili","accumulatorMax","updateStart","updateLast","updateAverage","updateDelta","_lastFpsUpdate","_framesThisSecond","Date","now","previousDateNow","timestamp","_isTimeOutMode","fpsUpdate","UpdateTime","setTimeOutMode","vendors","requestAnimationFrame","cancelAnimationFrame","_onLoopingCallback","_timeOutCallback","updateTimeout","setTimeout","updateRequestAnimationFrame","clearTimeout","Utils","constructor","apply","defaultValue","split","filename","substring","lastIndexOf","match"],"mappings":"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","file":"scintilla.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"estest\"] = factory();\n\telse\n\t\troot[\"estest\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./Scintilla.js\");\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","/**\r\n* @author       Tobias Beise Ulrich\r\n* @license      MIT\r\n*\r\n* @overview\r\n*\r\n* --- Scintilla ---\r\n*\r\n* v0.0.2\r\n*\r\n* tobiasbu.github.io\r\n*\r\n* Scintilla is simple 2D game engine for HTML5 games.\r\n* The first version is only for browsers based in canvas.\r\n*\r\n*/\r\n\r\n/**\r\n* @namespace scintilla\r\n*/\r\nvar scintilla = scintilla || {\r\n  VERSION: '0.0.1',\r\n  Game : require('./core/game'),\r\n};\r\n\r\nscintilla.ShapeType = {\r\nRect : 1,\r\nCircle : 2,\r\nPolygon : 3\r\n}\r\n\r\n\r\nmodule.exports = scintilla;\r\n\r\nglobal.scintilla = scintilla;","\r\n/**\r\n* Cache manager - holds file data\r\n* @class Cache\r\n* @constructor\r\n*/\r\nexport default class Cache {\r\n\r\nconstructor(game) {\r\n  this.game = game;\r\n  this._cache = {\r\n      images : {},\r\n      sounds : {}\r\n  }\r\n}\r\n\r\n  addImage(tag, url, data) {\r\n\r\n    if (this.tagExists('images',tag)) {\r\n\r\n      this.removeTagAt('images',tag);\r\n\r\n    }\r\n\r\n    var img = {\r\n            tag: tag,\r\n            url: url,\r\n            data: data,\r\n    };\r\n\r\n    console.log(data);\r\n\r\n    this._cache.images[tag] = img;\r\n\r\n  }\r\n\r\n  addSound(tag, url,data,webAudio) {\r\n\r\n    var decoded = false;\r\n\r\n    if (!webAudio)\r\n    {\r\n        decoded = true;\r\n    }\r\n\r\n    var audio = {\r\n            tag: tag,\r\n            url: url,\r\n            data: data,\r\n            usingWebAudio: webAudio,\r\n            decoded: decoded,\r\n            isDecoding: false\r\n    };\r\n\r\n    this._cache.sounds[tag] = audio;\r\n\r\n  }\r\n\r\n  soundDecoded(tag, data) {\r\n\r\n    var sound = this.getAssetInfo(\"sounds\",tag);\r\n\r\n    sound.data = data;\r\n    sound.decoded = true;\r\n    sound.isDecoding = false;\r\n\r\n  }\r\n\r\n  tagExists(cacheType, tag) {\r\n\r\n    if (this._cache[cacheType][tag])\r\n      return true;\r\n\r\n    return false;\r\n\r\n  }\r\n\r\n  removeTagAt(cacheType, tag) {\r\n\r\n    delete this._cache[cacheType][tag];\r\n\r\n  }\r\n\r\n  getAsset(cacheType, tag) { // return the cache container\r\n\r\n    if (this.tagExists(cacheType,tag)) {\r\n\r\n      var asset = this._cache[cacheType][tag];\r\n\r\n        return asset.data;\r\n\r\n\r\n    } else {\r\n      return null;\r\n    }\r\n\r\n  }\r\n\r\n  getAssetInfo(cacheType, tag) { // return the raw data\r\n\r\n    if (this.tagExists(cacheType,tag)) {\r\n\r\n      var asset = this._cache[cacheType][tag];\r\n\r\n      //if (cacheType == 'images')\r\n        return asset;\r\n\r\n\r\n    } else {\r\n      return null;\r\n    }\r\n\r\n  }\r\n\r\n  clear() {\r\n\r\n    //console.log(this._cache[property][tag]);\r\n\r\n    for (var property in this._cache) {\r\n\r\n         for (var tag in this._cache[property]) {\r\n\r\n            delete this._cache[property][tag];\r\n\r\n         }\r\n    }\r\n\r\n  }\r\n\r\n  // SOUND STUFF\r\n\r\n}\r\n","\r\nimport Utils from '../utils/utils';\r\n\r\nexport default class Config {\r\n\r\n    constructor(config)\r\n    {\r\n        if (config === undefined) \r\n            config = {};\r\n\r\n        var callback = Utils.getValue;\r\n        var callback_2 = Utils.getPropertyValue;\r\n\r\n        // view and canvas\r\n        this.width = callback(config, 'width', 640);\r\n        this.height = callback(config, 'height', 480);\r\n        this.parent = callback(config, 'parent', null);\r\n        this.debug =  callback(config, 'debug', false);\r\n        \r\n        // loader\r\n        this.loader = {\r\n            baseURL : callback_2(config, 'loader.baseURL', ''),\r\n            path : callback_2(config, 'loader.path', ''),\r\n            responseType : callback_2(config, 'loader.responseType', ''),\r\n            async : callback_2(config, 'loader.async', true),\r\n        }\r\n        /* this.loaderEnableParallel = GetValue(config, 'loader.enableParallel', true);\r\n            this.loaderMaxParallelDownloads = GetValue(config, 'loader.maxParallelDownloads', 4);\r\n            this.loaderCrossOrigin = GetValue(config, 'loader.crossOrigin', undefined);\r\n            \r\n            this.loaderUser = GetValue(config, 'loader.user', '');\r\n            this.loaderPassword = GetValue(config, 'loader.password', '');\r\n    this.loaderTimeout = GetValue(config, 'loader.timeout', 0);*/\r\n\r\n\r\n    }\r\n\r\n}","\r\nimport Config from './config';\r\nimport Canvas from '../render/canvas/canvas'\r\nimport Cache from './cache'\r\nimport LoadManager from '../loader/loadmanager'\r\nimport Time from '../time/time'\r\nimport UpdateTime from '../time/updatetime'\r\nimport Input from '../input/input'\r\nimport SceneManager from './scenemanager'\r\nimport Physics from '../physics/physics'\r\nimport Debug from '../others/debug'\r\n\r\n/**\r\n* Main class of engine. Holds all main data.\r\n* @class Game\r\n* @constructor\r\n*/\r\nexport default class Game {\r\n\r\n  /**\r\n  * @property {string|HTMLElement} parent - The Games DOM parent.\r\n  * @default\r\n  */\r\n constructor()\r\n {\r\n  this.parent = 'body';\r\n  this.width = 800;\r\n  this.height = 600;\r\n\r\n  // object\r\n  this.config = new Config(config);\r\n\r\n  // boolean\r\n  this.systemInited = false;\r\n  this.isRunning = false;\r\n  this.debugMode = false;\r\n\r\n  // float\r\n  this.timeMode = false;\r\n\r\n  // time\r\n  this._spiraling = 0;\r\n  this._lastFrameCount = 0;\r\n\r\n\r\n  //objects\r\n  this.debug = null;\r\n  this.cache = null;\r\n  this.load = null;\r\n  this.canvas = null;\r\n  this.scene = null;\r\n  this.sound = null;\r\n  this.draw = null;\r\n  this.render = null;\r\n  this.universe = null;\r\n  this.world = null;\r\n  this.input = null;\r\n  this.time = null;\r\n  this.component = null;\r\n  this.instance = null;\r\n  this.animationCache = null;\r\n  this.updateGameMethod = null;\r\n  this.pool = null;\r\n\r\n  this.context = null;\r\n\r\n  this.parseConfiguration(this.config);\r\n\r\n  this.init();\r\n }\r\n\r\n  parseConfiguration(config) {\r\n\r\n    //this.config = config;\r\n\r\n    if (config['debug'])\r\n    {\r\n        this.debugMode = config['debug'];\r\n\r\n    }\r\n\r\n    if (config['width'])\r\n    {\r\n        this.width = config['width'];\r\n    }\r\n\r\n    if (config['height'])\r\n    {\r\n        this.height = config['height'];\r\n    }\r\n\r\n    if (config['parent'])\r\n    {\r\n        this.parent = config['parent'];\r\n    }\r\n\r\n  }\r\n  /**\r\n    * Initialize engine\r\n    *\r\n    * @method tobiJS.Game#init()\r\n    * @protected\r\n    */\r\n  init() {\r\n\r\n    if (this.systemInited)\r\n        return;\r\n\r\n    this.canvas = Canvas.create(this.parent,this.width,this.height);\r\n    this.context = this.canvas.getContext(\"2d\", { alpha: false });\r\n\r\n    this.cache = new Cache(this);\r\n    this.load = new LoadManager(this);\r\n    this.time = new Time(this);\r\n    //this.universe = new scintilla.Universe(this);\r\n    //this.world = new scintilla.World(this);\r\n    //this.draw = new scintilla.Draw(this);\r\n    //this.render = new scintilla.Render(this, this.canvas, this.context);\r\n    this.scene = new SceneManager(this);\r\n    this.input = new Input(this);\r\n    //this.instance = new scintilla.Creator(this,this.world);\r\n    //this.component = new scintilla.GameComponents(this);\r\n    //this.animationCache = new scintilla.AnimationCache(this);\r\n    //this.sound = new scintilla.SoundManager(this);\r\n    //this.pool = new scintilla.Pool(this);\r\n    this.physics = new Physics(this);\r\n\r\n    if (this.debugMode)\r\n      this.debug = new Debug(this);\r\n\r\n    this.time.start();\r\n    this.input.init();\r\n    //this.sound.start();\r\n    //this.world.start();\r\n\r\n    this.updateGameMethod = new UpdateTime(this,this.timeMode);\r\n    this.updateGameMethod.start();\r\n\r\n\r\n\r\n    this.systemInited = true;\r\n    this.isRunning = true;\r\n\r\n\r\n    console.log(\"scintilla started!\");\r\n\r\n  }\r\n  \r\n  /**\r\n    * core game loop\r\n    *\r\n    * @method tobiJS.Game#update()\r\n    * @protected\r\n    */\r\n  update(time) {\r\n\r\n    if (this.systemInited) {\r\n\r\n\r\n\r\n      this.time.update(time);\r\n\r\n      if (this._spiraling > 1) {\r\n\r\n          this.time.deltaTime = 0;\r\n          this._spiraling = 0;\r\n          this.time.accumalator = 0;\r\n\r\n          this.render._render(this.time.accumulatorDelta);\r\n\r\n      } else {\r\n\r\n      var countFrames = 0;\r\n\r\n      while (this.time.accumalator >= this.time.accumulatorDelta) {\r\n\r\n        //  this.time.updateStart = window.performance.now();\r\n\r\n          this.time.deltaTime = Math.min(this.time.accumalator,this.time.accumulatorDelta) / 1000;\r\n\r\n          this.logic(this.time.deltaTime);\r\n\r\n          //this.time.updateLast =  window.performance.now();\r\n        //  this.time.updateAverage = this.time.updateLast - this.time.updateStart;\r\n\r\n          this.time.accumalator -= this.time.accumulatorDelta;\r\n\r\n          countFrames++;\r\n\r\n          this.time.refresh();\r\n\r\n          if (countFrames >= 240) { // SPIRAL\r\n              //panic();\r\n              this.time.accumalator = 0;\r\n\r\n              break;\r\n          }\r\n      }\r\n\r\n        if (countFrames > this._lastFrameCount)\r\n           this._spiraling++;\r\n       else if (countFrames < this._lastFrameCount)\r\n          this._spiraling = 0;\r\n\r\n          this._lastFrameCount = countFrames;\r\n\r\n            this.render._render(this.time.accumalator/this.time.accumulatorDelta);\r\n\r\n      }\r\n\r\n\r\n\r\n    }\r\n  }\r\n\r\n  logic(timeStep) {\r\n\r\n    this.scene.preUpdate();\r\n    this.scene.update(timeStep);\r\n    this.input.update();\r\n    //this.universe.preUpdate(timeStep);\r\n\r\n\r\n    //this.world.camera.update();\r\n\r\n    //this.universe.update(timeStep);\r\n    this.physics.update();\r\n    //this.sound.update();\r\n\r\n    //this.universe._updateTransform();\r\n\r\n\r\n  }\r\n\r\n  destroy() {\r\n\r\n    this.updateGameMethod.destroy();\r\n    this.physics.destroy();\r\n    this.universe.destroy();\r\n    this.sound.destroy();\r\n    this.input.destroy();\r\n\r\n    this.debug = null;\r\n    this.cache = null;\r\n    this.load = null;\r\n    this.canvas = null;\r\n    this.scene = null;\r\n    this.sound = null;\r\n    this.draw = null;\r\n    this.universe = null;\r\n    this.world = null;\r\n    this.input = null;\r\n    this.time = null;\r\n    this.render = null;\r\n    this.component = null;\r\n    this.instance = null;\r\n    this.animationCache = null;\r\n    this.updateGameMethod = null;\r\n\r\n\r\n  }\r\n\r\n}\r\n\r\n//scintilla.Game.prototype.constructor = scintilla.Game;\r\n\r\n\r\nmodule.exports = Game;","\r\nimport Map from '../structures/map'\r\n\r\nexport default class SceneManager {\r\n  \r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    this._scenes = new Map();\r\n\r\n    this.current_scene_name = '';\r\n    this.change_scene = null;\r\n\r\n    this._setup = false;\r\n    this._clearCache = false;\r\n\r\n    // callbacks\r\n    this.current_scene = null;\r\n    this.onStartCallback = null;\r\n    this.onLoadingCallback = null;\r\n    this.onLoadingRenderCallback = null;\r\n    this.onPreloadCallback = null;\r\n    this.onUpdateCallback = null;\r\n    this.onRenderCallback = null;\r\n    this.onDestroyCallback = null;\r\n\r\n  }\r\n\r\n\r\nadd(sceneName,scene) {\r\n\r\n  var newScene;\r\n\r\n  if (scintilla.Scene.prototype.isPrototypeOf(scene)) {\r\n    newScene = scene;\r\n    newScene.game = this.game;\r\n  } else\r\n    newScene = null;\r\n\r\n\r\n  if (newScene != null)\r\n    this._scenes.set(sceneName,newScene);\r\n\r\n}\r\n\r\nnew(sceneName)\r\n{\r\n\r\n  if (this._scenes.has(sceneName))\r\n  {\r\n    throw \"Could not create new Scene. The scene name \\\"\" + name + \"\\\" already exists.\"; \r\n    return null;\r\n  }\r\n  \r\n  var newScene = new scintilla.Scene(this.game);\r\n  this._scenes.set(sceneName,newScene);\r\n\r\n  return newScene;\r\n\r\n}\r\n\r\nset(sceneName, clearCache) {\r\n\r\n  if (clearCache === undefined) { clearCache = false; }\r\n\r\n  this.change_scene = sceneName;\r\n  this._clearCache = clearCache;\r\n\r\n\r\n\r\n}\r\n\r\nrestart(clearCache) {\r\n\r\n  if (clearCache === undefined) { clearCache = false; }\r\n\r\n  this.change_scene = this.current_scene_name;\r\n  this._clearCache = clearCache;\r\n\r\n}\r\n\r\nremove(sceneName) {\r\n\r\n  if (this.current_scene_name === sceneName) {\r\n\r\n    this.current_scene = null;\r\n\r\n    this.onStartCallback = null;\r\n    this.onLoadingCallback = null;\r\n    this.onLoadingRenderCallback = null;\r\n    this.onPreloadCallback = null;\r\n    this.onUpdateCallback = null;\r\n    this.onRenderCallback = null;\r\n    this.onDestroyCallback = null;\r\n\r\n\r\n  }\r\n\r\n  delete this.scenes[sceneName];\r\n\r\n}\r\n\r\nsetupScene(sceneName) {\r\n\r\n  this.current_scene = this._scenes.get(sceneName);\r\n  this.onStartCallback = this.current_scene['start'] || null;\r\n  this.onLoadingCallback = this.current_scene['loading'] || null;\r\n  this.onLoadingRenderCallback = this.current_scene['loadingRender'] || null;\r\n  this.onPreloadCallback = this.current_scene['preload'] || null;\r\n  this.onUpdateCallback = this.current_scene['update'] || null;\r\n  this.onRenderCallback = this.current_scene['render'] || null;\r\n  this.onDestroyCallback = this.current_scene['destroy'] || null;\r\n  this.current_scene_name = sceneName;\r\n\r\n  this.game.time.refresh();\r\n\r\n  this.current_scene.camera = this.game.world.camera;\r\n\r\n  this.game.instance.scene = this.current_scene;\r\n\r\n  this._setup = false;\r\n\r\n}\r\n\r\nclearCurrentScene() {\r\n\r\n  if (this.current_scene_name)\r\n  {\r\n\r\n    if (this.onDestroyCallback)\r\n    {\r\n        this.onDestroyCallback.call(this.current_scene, this.game);\r\n    }\r\n\r\n    if (this._clearCache)\r\n    {\r\n          this.game.cache.clear();\r\n    }\r\n\r\n    this.game.world.destroyAllChilds();\r\n\r\n  }\r\n\r\n}\r\n\r\npreUpdate() {\r\n\r\n  if (this.game.systemInited && this.change_scene != null)\r\n  {\r\n\r\n    this.clearCurrentScene();\r\n\r\n    this.setupScene(this.change_scene);\r\n\r\n    if (this.current_scene_name !== this.change_scene)\r\n    {\r\n        return;\r\n    }\r\n    else\r\n    {\r\n        this.change_scene = null;\r\n    }\r\n\r\n    if (this.onPreloadCallback) {\r\n\r\n      this.game.load.reset();\r\n      this.onPreloadCallback.call(this.current_scene, this.game);\r\n\r\n      if (this.game.load.totalQueuedFiles() === 0)\r\n      {\r\n        this.preloadComplete();\r\n\r\n      } else {\r\n\r\n        this.game.load.start();\r\n      }\r\n\r\n    } else {\r\n\r\n      this.preloadComplete();\r\n    }\r\n\r\n  }\r\n\r\n  }\r\n\r\n  preloadComplete() {\r\n\r\n    //this.current_scene.quadtree = new tobiJS.Quadtree({x: 0, y: 0, width: 640,height: 480});\r\n\r\n      if (this._setup === false && this.onLoadingCallback)\r\n      {\r\n          this.onLoadingCallback.call(this.current_scene, this.game);\r\n      }\r\n\r\n      if (this._setup === false && this.onStartCallback)\r\n      {\r\n          this._setup  = true;\r\n          this.onStartCallback.call(this.current_scene, this.game);\r\n      }\r\n      else\r\n      {\r\n          this._setup = true;\r\n\r\n      }\r\n  }\r\n\r\n    update() {\r\n\r\n      if (this._setup) {\r\n\r\n        if (this.onUpdateCallback)\r\n        {\r\n            this.onUpdateCallback.call(this.current_scene, this.game);\r\n        }\r\n\r\n        //this.current_scene._update();\r\n\r\n      } else {\r\n\r\n        if (this.onLoadingCallback)\r\n        {\r\n            this.onLoadingCallback.call(this.current_scene, this.game);\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n\r\n    render() {\r\n\r\n      if (this._setup) {\r\n\r\n\r\n          if (this.onRenderCallback)\r\n          {\r\n              this.onRenderCallback.call(this.current_scene, this.game);\r\n          }\r\n\r\n      } else {\r\n\r\n        if (this.onLoadingRenderCallback)\r\n        {\r\n            this.onLoadingRenderCallback.call(this.current_scene, this.game);\r\n        }\r\n\r\n\r\n      }\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n","\r\nimport Keyboard from \"./keyboard\";\r\nimport Mouse from \"./mouse\";\r\n\r\nexport default class Input {\r\n\r\n  constructor(game) {\r\n\r\n  this.game = game;\r\n  this.mouse = null;\r\n  this.keyboard = null;\r\n\r\n  }\r\n\r\n  init() {\r\n\r\n    //this.mouse = new tobiJS.Mouse(this.game);\r\n    this.keyboard = new Keyboard(this.game);\r\n    this.mouse = new Mouse(this.game);\r\n    this.keyboard.init();\r\n    this.mouse.init();\r\n\r\n  }\r\n\r\n  update() {\r\n\r\n    this.keyboard.update();\r\n    this.mouse.update();\r\n\r\n  }\r\n\r\n  reset()\r\n  {\r\n    this.keyboard.reset();\r\n    this.mouse.reset();\r\n  }\r\n\r\n}\r\n","\r\n\r\nexport const KeyEvent = {\r\n    NONE : -1,\r\n    IDLE: 0,\r\n    PRESSED : 1,\r\n    RELEASED : 2,\r\n};\r\n\r\nexport default class Key {\r\n    \r\n    constructor(keycode, game) {\r\n\r\n        this.game = game;\r\n        this.keyCode = keycode; \r\n\r\n        this._enabled = true;       \r\n        this.status = false;\r\n        this.press = false;\r\n        this.release = false;\r\n\r\n        this._event = scintilla.KeyEvent.NONE;\r\n\r\n        this.pressTime = 0;\r\n        this.pressDuration = -2500;\r\n        this.releaseTime = 0;\r\n        this.releaseDuration = -2500;\r\n\r\n    }\r\n\r\n\r\n    onKeyDown()\r\n    {\r\n        if (!this._enabled)\r\n            return;\r\n\r\n        if (this.press)\r\n            return;\r\n\r\n        // set key properties\r\n        this.status = true;\r\n        this.press = true;\r\n        this.release = false;\r\n\r\n        // set press time duration\r\n        this.pressTime = this.game.time.time;\r\n        this.pressDuration = 0;\r\n        this.releaseDuration = this.game.time.time - this.releaseTime;\r\n    \r\n    }\r\n\r\n    onKeyUp()\r\n    {\r\n        if (!this._enabled)\r\n            return;\r\n\r\n        if (this.release)\r\n            return;\r\n\r\n        // set key properties\r\n        this.status = false;\r\n        this.press = false;\r\n        this.release = true;\r\n\r\n        // set press time duration\r\n        this.releaseTime = this.game.time.time;\r\n        this.pressDuration = this.game.time.time - this.pressTime;\r\n        this.releaseDuration = 0;\r\n\r\n    }\r\n\r\n    update()\r\n    {\r\n        if (!this._enabled)\r\n            return;\r\n\r\n  \r\n\r\n        if (this.press)\r\n        {\r\n            this.pressDuration = this.game.time.time - this.pressTime;\r\n            \r\n        }\r\n        else\r\n        {\r\n            this.releaseDuration = this.game.time.time - this.releaseTime;\r\n        }\r\n\r\n\r\n        if (this.press)\r\n        {\r\n            if (this.pressDuration == 0)\r\n            {\r\n                this._event = scintilla.KeyEvent.PRESSED;\r\n            }\r\n\r\n        } else {\r\n\r\n            if (this.releaseDuration == 0)\r\n            {\r\n                this._event = scintilla.KeyEvent.RELEASED;\r\n            } else {\r\n                this._event = scintilla.KeyEvent.IDLE;\r\n            }\r\n\r\n        }\r\n\r\n        if (this._event == scintilla.KeyEvent.IDLE)\r\n        {\r\n            this._event = scintilla.KeyEvent.NONE;\r\n        }\r\n        \r\n    }\r\n\r\n    isPressing()\r\n    {\r\n        return this.status;\r\n    }\r\n\r\n    isPressed()\r\n    {\r\n        return (this.press && this.pressDuration == 0);\r\n    }\r\n\r\n    isReleased()\r\n    {\r\n        return (!this.press && this.releaseDuration == 0)\r\n    }\r\n\r\n    event()\r\n    {\r\n        return this._event;\r\n    }\r\n\r\n    reset()\r\n    {   \r\n        this.status = false;\r\n        this._event = scintilla.KeyEvent.NONE;\r\n        this.press = false;\r\n        this.release = false;\r\n    \r\n        this.pressTime = 0;\r\n        this.pressDuration = -2500;\r\n        this.releaseTime = 0;\r\n        this.releaseDuration = -2500;\r\n    }\r\n\r\n    get enabled() {return this._enabled;}\r\n    set enabled(value) {\r\n        value = !!value;\r\n\r\n        if (value !== this._enabled)\r\n        {\r\n            if (!value)\r\n                this.reset();\r\n\r\n            this._enabled = value;\r\n        }\r\n    }\r\n};\r\n\r\n\r\n\r\n  \r\n","\r\n\r\nimport Key from './key'\r\nimport Map from '../structures/map'\r\n\r\nexport default class Keyboard {\r\n  \r\n  constructor(game) {\r\n\r\n  this.game = game;\r\n  this.context = game.context;\r\n  this.active = true;\r\n  //this._keys = [];\r\n  this._keyMapping = new Map();\r\n  this._keyWatch = new Map();\r\n  this._keyGarbage = [];\r\n  //this._keyLock = [];\r\n  //this._keyLockPressed = [];\r\n  //this._keyDownDuration = [];\r\n  this.lastKey = null;\r\n\r\n  //callbacks\r\n  this._onKeyDown = null;\r\n  this._onKeyUp = null;\r\n  this._onKeyPress = null;\r\n}\r\n\r\n  reset() {\r\n\r\n    this._keyMapping.clear();\r\n    this._keyWatch.clear();\r\n    this._keyGarbage = [];\r\n    for (var prop in scintilla.KeyCode){\r\n\r\n      if (scintilla.KeyCode.hasOwnProperty(prop)) {\r\n        var value = scintilla.KeyCode[prop];\r\n        this._keyMapping.set(value, new scintilla.Key(value,this.game));\r\n      }\r\n      /*if (scintilla.KeyCode.hasOwnProperty(prop)) {\r\n\r\n        \r\n\r\n            var value = scintilla.KeyCode[prop];\r\n            this._keys[value] = false;\r\n            this._keyLock[value] = scintilla.KeyEvent.NONE;\r\n            this._keyLockPressed[value] = scintilla.KeyEvent.NONE;\r\n            this._keyDownDuration[value] = 0;\r\n      }*/\r\n    }\r\n\r\n  }\r\n\r\n  init() {\r\n\r\n    var self = this;\r\n\r\n    this.reset();\r\n\r\n      this._onKeyDown = function (event) {\r\n            return self.processKeyDown(event);\r\n    };\r\n\r\n    this._onKeyUp = function (event) {\r\n        return self.processKeyUp(event);\r\n    };\r\n\r\n    window.addEventListener('keydown', this._onKeyDown, false);\r\n    window.addEventListener('keyup', this._onKeyUp, false);\r\n  }\r\n\r\n  stop() {\r\n\r\n    window.removeEventListener('keydown', this._onKeyDown);\r\n    window.removeEventListener('keyup', this._onKeyUp);\r\n    this._onKeyDown = null;\r\n    this._onKeyUp = null;\r\n    this._onKeyPress = null;\r\n\r\n    this._keyMapping.clear();\r\n  }\r\n\r\n  processKeyUp(event) {\r\n\r\n    var key = event.keyCode;\r\n\r\n    event.preventDefault();\r\n\r\n    if (!this.active)\r\n      return;\r\n\r\n      var keyObj = this._keyMapping.get(key);\r\n      keyObj.onKeyUp();\r\n\r\n      /*this._keyLock[key] = scintilla.KeyEvent.RELEASE;\r\n      this._keyLockPressed[key] = scintilla.KeyEvent.NONE;\r\n      this._keys[key] = false;*/\r\n\r\n  }\r\n\r\n  processKeyDown(event) { \r\n\r\n    var key = event.keyCode;\r\n\r\n    event.preventDefault();\r\n\r\n    if (!this.active)\r\n    return;\r\n\r\n    this.lastKey = key;\r\n\r\n    var keyObj = this._keyMapping.get(key);\r\n    keyObj.onKeyDown();\r\n\r\n    if (!this._keyWatch.has(key))\r\n    {\r\n      this._keyWatch.set(key, keyObj);\r\n    }\r\n\r\n    //_keyMapping[]\r\n    //this._keys[key] = true;\r\n    /* if (this._keyLockPressed[key] != scintilla.KeyEvent.PRESSED && this._keyLockPressed[key] != scintilla.KeyEvent.PRESS) {\r\n      this._keyLockPressed[key] = scintilla.KeyEvent.PRESSED;\r\n      this._keyDownDuration[key] = 1;\r\n    }\r\n\r\n    this._keyLock[key] = scintilla.KeyEvent.PRESS;\r\n    this._keys[key] = true;\r\n    */\r\n\r\n\r\n  }\r\n\r\n  /*processKeyPress : function(event) { // commom characters\r\n\r\n    var key = event.keyCode;\r\n\r\n    event.preventDefault();\r\n\r\n    if (!this.active)\r\n      return;\r\n\r\n\r\n      this._keyLock[key] = tobiJS.KeyEvent.PRESS;\r\n      this._keys[key] = true;\r\n\r\n\r\n\r\n  },*/\r\n\r\n  update() {\r\n\r\n      /*var keys = this._keyMapping.keys();\r\n      for (var key in keys)\r\n      {\r\n        if (keys.hasOwnProperty(key)) {\r\n\r\n          var value = this._keyMapping.get(key);\r\n          value.update();\r\n\r\n        }\r\n      }*/\r\n\r\n    //var keyswatch = this._keyWatch; //.keys();\r\n\r\n      var self = this;\r\n\r\n    this._keyWatch.each(function (key, value) {\r\n        //var value = this._keyWatch.get(key);\r\n        value.update();\r\n\r\n        //console.log(value);\r\n\r\n        if (value.event() == scintilla.KeyEvent.IDLE)\r\n        {\r\n        \r\n          // value.reset();\r\n            self._keyGarbage.push(key);\r\n        }\r\n    });\r\n      /*for (var key in keys)\r\n      {\r\n        //console.log(\"UPDATE\")\r\n\r\n        if (keys.hasOwnProperty(key)) {\r\n\r\n            var value = this._keyWatch.get(key);\r\n            value.update();\r\n\r\n            if (value.event() == scintilla.KeyEvent.IDLE)\r\n            {\r\n              // value.reset();\r\n                this._keyGarbage.push(key);\r\n            }\r\n        }\r\n      }*/\r\n\r\n      if (this._keyGarbage.length > 0)\r\n      {\r\n        this._keyWatch.deleteByIndexedArray(this._keyGarbage);\r\n        this._keyGarbage.splice(0, this._keyGarbage.length)\r\n      }\r\n\r\n  }\r\n\r\n  pressed(keycode) {\r\n\r\n    /*var keyLock = false;\r\n\r\n  if (this._keyLockPressed[keycode] == scintilla.KeyEvent.PRESSED) {\r\n      keyLock = true;\r\n      this._keyLockPressed[keycode] = scintilla.KeyEvent.PRESS;\r\n    }\r\n\r\n    var hit = this._keys[keycode] && keyLock;*/\r\n\r\n    //return hit;\r\n\r\n    return this._keyMapping.get(keycode).isPressed();\r\n    \r\n  /* if (this._keyMapping.has(keycode))\r\n    {\r\n      \r\n    } \r\n    else \r\n    {\r\n      return false;\r\n    }*/\r\n\r\n  }\r\n\r\n  release(keycode) {\r\n\r\n    /*var keyLock = false;\r\n\r\n    if (this._keyLock[keycode] ==  scintilla.KeyEvent.PRESSED ||\r\n      this._keyLock[keycode] ==  scintilla.KeyEvent.PRESS ||\r\n      this._keyLock[keycode] ==  scintilla.KeyEvent.NONE)\r\n      keyLock = false;\r\n    else\r\n      keyLock = true;\r\n\r\n    var hit = !this._keys[keycode] && keyLock;\r\n\r\n    this._keyLock[keycode] = scintilla.KeyEvent.NONE;\r\n\r\n    return hit;*/\r\n    return this._keyMapping.get(keycode).isReleased();\r\n\r\n  }\r\n\r\n  press(keycode) {\r\n\r\n\r\n    /*var key = this._keyWatch.get(keycode);\r\n\r\n    if (key === undefined)\r\n      return false;*/\r\n\r\n    return key.status;\r\n\r\n    /*var keyLock = false;\r\n\r\n    if (this._keyLock[keycode] ==  scintilla.KeyEvent.RELEASE ||\r\n      this._keyLock[keycode] ==  scintilla.KeyEvent.NONE)\r\n      keyLock = false;\r\n    else\r\n      keyLock = true;\r\n\r\n    var hit = this._keys[keycode] && keyLock;\r\n\r\n    return hit;*/\r\n\r\n  }\r\n}\r\n\r\n  export const KeyCode = {\r\n    Backspace: 8,\r\n    Tab: 9,\r\n    Enter: 13,\r\n    Shift: 16,\r\n    Ctrl: 17,\r\n    Alt: 18,\r\n    Pause: 19,\r\n    CapsLock: 20,\r\n    Escape: 27,\r\n    Space:32,\r\n    PageUp: 33,\r\n    PageDown: 34,\r\n    End: 35,\r\n    Home: 36,\r\n    Left: 37,\r\n    Up: 38,\r\n    Right: 39,\r\n    Down: 40,\r\n    Insert: 45,\r\n    Delete:\t46,\r\n    Num0: 48,\r\n    Num1: 49,\r\n    Num2: 50,\r\n    Num3: 51,\r\n    Num4: 52,\r\n    Num5:\t53,\r\n    Num6: 54,\r\n    Num7: 55,\r\n    Num8: 56,\r\n    Num9: 57,\r\n    A: 65,\r\n    B: 66,\r\n    C: 67,\r\n    D: 68,\r\n    E: 69,\r\n    F: 70,\r\n    G: 71,\r\n    H: 72,\r\n    I: 73,\r\n    J: 74,\r\n    K: 75,\r\n    L: 76,\r\n    M: 77,\r\n    N: 78,\r\n    O: 79,\r\n    P: 80,\r\n    Q: 81,\r\n    R: 82,\r\n    S: 83,\r\n    T: 84,\r\n    U: 85,\r\n    V: 86,\r\n    W: 87,\r\n    X: 88,\r\n    Y: 89,\r\n    Z: 90,\r\n    LSystem: 91,\r\n    RSystem: 92,\r\n    SelectK:\t93,\r\n    Numpad0: 96,\r\n    Numpad1: 97,\r\n    Numpad2: 98,\r\n    Numpad3: 99,\r\n    Numpad4: 100,\r\n    Numpad5: 101,\r\n    Numpad6: 102,\r\n    Numpad7: 103,\r\n    Numpad8: 104,\r\n    Numpad9: 105,\r\n    Multiply: 106,\r\n    Add: 107,\r\n    Subtract: 109,\r\n    DecimalPoint: 110,\r\n    Divide: 111,\r\n    F1:\t112,\r\n    F2:\t113,\r\n    F3:\t114,\r\n    F4:\t115,\r\n    F5:\t116,\r\n    F6:\t117,\r\n    F7:\t118,\r\n    F8:\t119,\r\n    F9:\t120,\r\n    F10: 121,\r\n    F11: 122,\r\n    F12: 123,\r\n    NumLock: 144,\r\n    ScrollLock: 145,\r\n    SemiColon: 186,\r\n    Equal: 187,\r\n    Comma: 188,\r\n    Dash: 189,\r\n    Period:\t190,\r\n    Slash: 191,\r\n    LBraket: 219,\r\n    BackSlash: 220,\r\n    RBracket: 221,\r\n    Quote: 222,\r\n    };\r\n    ","\r\n\r\nexport const MouseButton = {\r\n  LEFT_BUTTON : 0,\r\n  MIDDLE_BUTTON : 1,\r\n  RIGHT_BUTTON : 2,\r\n  WHEEL_UP : 3,\r\n  WHEEL_DOWN : 4\r\n  };\r\n  \r\n  export const MouseEvent = {\r\n  NONE : 0,\r\n  PRESS : 1,\r\n  PRESSED : 2,\r\n  RELEASE : 3\r\n  };\r\n  \r\n\r\nexport default class Mouse {\r\n  \r\n  constructor(game) {\r\n\r\n    this.x = 0;\r\n    this.y = 0;\r\n    this.game = game;\r\n    this.canvas = game.canvas;\r\n    this.button = 0;\r\n    this.wheelDelta = 0;\r\n    this.active = true;\r\n\r\n    this._mouseButtons = [];\r\n    this._mouseButtonsLocks = [];\r\n    this._mouseButtonsLocksPressed = [];\r\n    this._mouseDownDuration = [];\r\n\r\n    //callbacks\r\n    this._onMouseDown = null;\r\n    this._onMouseMove = null;\r\n\r\n    this.reset();\r\n  }\r\n\r\n  reset() {\r\n\r\n    for (var i = 0; i < 3; i++){\r\n\r\n\r\n            this._mouseButtons[i] = false;\r\n            this._mouseButtonsLocks[i] = MouseEvent.NONE;\r\n            this._mouseButtonsLocksPressed[i] = MouseEvent.NONE;\r\n            this._mouseDownDuration[i] = 0;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  init() {\r\n\r\n\r\n    var self = this;\r\n\r\n    this._onMouseDown = function (event) {\r\n            return self.onMouseDown(event);\r\n    };\r\n\r\n    this._onMouseUp = function (event) {\r\n            return self.onMouseUp(event);\r\n    };\r\n\r\n    this._onMouseMove = function (event) {\r\n            return self.onMouseMove(event);\r\n    };\r\n\r\n    this.canvas.addEventListener('mousedown', this._onMouseDown, true);\r\n    this.canvas.addEventListener('mousemove', this._onMouseMove, true);\r\n    this.canvas.addEventListener('mouseup', this._onMouseUp, true);\r\n    this.canvas.addEventListener('mouseover', this._onMouseOver, true);\r\n    this.canvas.addEventListener('mouseout', this._onMouseOut, true);\r\n\r\n  }\r\n\r\n  onMouseMove(event) {\r\n\r\n    if (!this.active)\r\n      return;\r\n\r\n\r\n    var rect = this.canvas.getBoundingClientRect();\r\n\r\n\r\n    this.x = Math.floor((event.clientX-rect.left)/(rect.right-rect.left)*this.canvas.width);\r\n    this.y = Math.floor((event.clientY-rect.top)/(rect.bottom-rect.top)*this.canvas.height);\r\n    //this.x = event.clientX - rect.left;\r\n    //this.y = event.clientY - rect.top;\r\n\r\n  }\r\n\r\n  onMouseDown(event) {\r\n\r\n    if (!this.active)\r\n      return;\r\n\r\n\r\n\r\n    var value = event.button;\r\n\r\n    if (this._mouseButtonsLocksPressed[value] != KeyEvent.PRESSED && this._mouseButtonsLocksPressed[value] != KeyEvent.PRESS) {\r\n      this._mouseButtonsLocksPressed[value] = MouseEvent.PRESSED;\r\n      this._mouseDownDuration[value] = 1;\r\n    }\r\n\r\n    this._mouseButtons[value] = true;\r\n    this._mouseButtonsLocks[value] = MouseEvent.PRESS;\r\n\r\n    event.preventDefault();\r\n\r\n  }\r\n\r\n  onMouseUp(event) {\r\n\r\n    if (!this.active)\r\n      return;\r\n\r\n    var value = event.button;\r\n\r\n    this._mouseButtons[value] = false;\r\n    this._mouseButtonsLocks[value] = MouseEvent.RELEASE;\r\n    this._mouseButtonsLocksPressed[value] = MouseEvent.NONE;\r\n\r\n    event.preventDefault();\r\n\r\n\r\n  }\r\n\r\n  pressed(button) {\r\n\r\n    var buttonLock = false;\r\n\r\n    if (this._mouseButtonsLocksPressed[button] == MouseEvent.PRESSED) {\r\n      buttonLock = true;\r\n      this._mouseButtonsLocksPressed[button] = MouseEvent.PRESS;\r\n    }\r\n\r\n    var hit = this._mouseButtons[button] && buttonLock;\r\n\r\n    return hit;\r\n\r\n  }\r\n\r\n  release(button) {\r\n\r\n    var buttonLock = false;\r\n\r\n  \tif (this._mouseButtonsLocks[button] ==  MouseEvent.PRESSED ||\r\n        this._mouseButtonsLocks[button] ==  MouseEvent.PRESS ||\r\n        this._mouseButtonsLocks[button] ==  MouseEvent.NONE)\r\n  \t\tbuttonLock = false;\r\n  \telse\r\n  \t\tbuttonLock = true;\r\n\r\n  \tvar hit = !this._mouseButtons[button] && buttonLock;\r\n\r\n  \tthis._mouseButtonsLocks[button] = MouseEvent.NONE;\r\n\r\n  \treturn hit;\r\n\r\n  }\r\n\r\n  press(button) {\r\n\r\n    var buttonLock = false;\r\n\r\n    if (this._mouseButtonsLocks[button] ==  MouseEvent.RELEASE ||\r\n      this._mouseButtonsLocks[button] ==  MouseEvent.NONE)\r\n      buttonLock = false;\r\n    else\r\n      buttonLock = true;\r\n\r\n    var hit = this._mouseButtons[button] && buttonLock;\r\n\r\n    return hit;\r\n\r\n\r\n  }\r\n\r\n  update() {\r\n\r\n    for (var i = 0; i < this._mouseButtons.length; i++) {\r\n\r\n          if (this._mouseButtonsLocksPressed[i] ==  MouseEvent.PRESSED) {\r\n              if (this._mouseDownDuration[i] > 0)\r\n                this._mouseDownDuration[i]--;\r\n              else\r\n                this._mouseButtonsLocksPressed[i] = MouseEvent.PRESS;\r\n          } else\r\n            continue;\r\n\r\n\r\n    }\r\n\r\n  }\r\n\r\n  posRelativeTo(object) {\r\n\r\n    var vec2 = {x:0,y:0};\r\n\r\n    vec2.x = this.x - object.x;\r\n    vec2.y = this.y - object.y;\r\n\r\n\r\n    return vec2;\r\n\r\n  }\r\n\r\n\r\n}\r\n\r\n","\r\n\r\nexport default (\r\n    class XHR {\r\n\r\n    static createFileRequest(file, settings)\r\n    {\r\n        var xhrSettings = XHR.merge(settings, file.xhrSettings);\r\n\r\n        var xmlHttpRequest = new XMLHttpRequest();\r\n        xmlHttpRequest.open(\"GET\", file.source, xhrSettings.async);\r\n\r\n        xmlHttpRequest.responseType = file.xhrSettings.responseType;\r\n        xmlHttpRequest.timeout = xhrSettings.timeout;\r\n\r\n        xmlHttpRequest.onload = file.onLoad.bind(file);\r\n        xmlHttpRequest.onerror = file.onError.bind(file);\r\n        xmlHttpRequest.onprogress = file.onProgress.bind(file);\r\n\r\n        xmlHttpRequest.send();\r\n\r\n        return xmlHttpRequest;\r\n    }\r\n\r\n    static createSettings(type, doAsync, timeout)\r\n    {\r\n        if (type === undefined) \r\n            type = '';\r\n\r\n        if (doAsync === undefined) \r\n            doAsync = true;\r\n\r\n        if (timeout === undefined)\r\n            timeout = 0;\r\n\r\n        var settings = {\r\n            responseType: type,\r\n            timeout: timeout,\r\n            async: doAsync,\r\n        }\r\n\r\n        return settings;\r\n    }\r\n\r\n    static merge(a, b)\r\n    {\r\n        var out = {};\r\n\r\n        if (a === undefined)\r\n            out = XHR.createSettings(); // : Extend(global);\r\n        // else\r\n            // do something cool\r\n\r\n        if (b)\r\n        {\r\n            for (let setting in b)\r\n            {\r\n                if (b[setting] !== undefined)\r\n                    out[setting] = b[setting];\r\n            }\r\n        }\r\n    \r\n        return out;\r\n    }\r\n\r\n\r\n\r\n})","\r\nexport default class ListInjector {\r\n\r\n    constructor()\r\n    {\r\n        this.list = {};\r\n    }\r\n\r\n    inject(toObj)\r\n    {\r\n        for (var key in this.list)\r\n        {\r\n            toObj[key] = this.list[key];\r\n        }\r\n    }\r\n\r\n    register(key, func)\r\n    {\r\n        this.list[key] = func;\r\n    }\r\n\r\n    destroyfunction()\r\n    {\r\n        this.list = {};\r\n    }\r\n\r\n};","\r\nimport ListInjector from './listinjector'\r\n\r\nexport var AssetTypeHandler = new ListInjector();\r\n\r\nexport const LOADER_STATE = {\r\n    NONE : 0,\r\n    IDLE : 1,\r\n    PENDING : 2,\r\n    LOADING : 3,\r\n    PROCESSING : 4,\r\n    ERROR : 5,\r\n    FINISHED : 6,\r\n    DONE : 7, \r\n}\r\n\r\n//export var AssetTypeHandler;\r\n//export var LOADER_STATE;\r\n","\r\nimport { LOADER_STATE, AssetTypeHandler} from './loaderstate'\r\nimport Set from '../structures/set'\r\nimport XHR from './XHR'\r\nimport Utils from '../utils/utils';\r\n\r\n// Class LoaderManager\r\nexport default class LoadManager {\r\n  \r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    this.cache = game.cache;\r\n\r\n    this._filesQueue = new Set();\r\n    this._successFiles = new Set();\r\n    this._failedFiles = new Set();\r\n    this._processedFiles = new Set();\r\n\r\n    this._filesQueueCount = 0;\r\n    this._loadedFilesCount = 0;\r\n\r\n    this.isDownloading = false;\r\n    this._totalFiles = 0;\r\n\r\n    let gameConfig = game.config.loader;\r\n\r\n    this.xhr = XHR.createSettings(\r\n      Utils.getValue(config, 'responseType', gameConfig.responseType),\r\n      Utils.getValue(config, 'async', gameConfig.async),\r\n      //scintilla.Utils.getPropertyValue(config, 'user', gameConfig.loaderUser),\r\n      //scintilla.Utils.getPropertyValue(config, 'password', gameConfig.loaderPassword),\r\n      Utils.getValue(config, 'timeout', gameConfig.timeout)\r\n  );\r\n\r\n\r\n    this.progress = 0;\r\n    this.path = '';\r\n    this.baseURL = '';\r\n    this.state = LOADER_STATE.IDLE;\r\n  \r\n\r\n    AssetTypeHandler.inject(this);\r\n\r\n  }\r\n\r\n\r\n  setPath(path) {\r\n    if (path !== '' && path.substr(-1) !== '/')\r\n        path = path.concat('/');\r\n\r\n    this.path = path;\r\n\r\n    return this;\r\n  }\r\n\r\n  setBaseURL(baseUrl) {\r\n    if (baseUrl !== '' && baseUrl.substr(-1) !== '/')\r\n    {\r\n      baseUrl = baseUrl.concat('/');\r\n    }\r\n\r\n    this.baseURL = baseUrl || '';\r\n\r\n    return this;\r\n  }\r\n\r\n  addAsset(asset) {\r\n    if (!this.isOK())\r\n        return -1;\r\n\r\n    asset.path = this.path;\r\n    this._filesQueue.set(asset);\r\n    this._filesQueueCount++;\r\n    return asset;\r\n\r\n  }\r\n\r\n  reset() {\r\n\r\n    this.isDownloading = false;\r\n    this._filesQueueCount = 0;\r\n    this._successCount = 0;\r\n    this._filesQueue.length = 0;\r\n    this._fileErrorCount = 0;\r\n    this.progress = 0\r\n    this.state = LOADER_STATE.IDLE;\r\n\r\n\r\n  }\r\n\r\n  start() {\r\n\r\n    if (!this.isOK())\r\n    {\r\n        return -1;\r\n    }\r\n\r\n    this.progress = 0;\r\n    this._loadedFilesCount = 0;\r\n    this.state = LOADER_STATE.LOADING;\r\n    this._filesQueueCount = this._filesQueue.size;\r\n\r\n    if (this._filesQueue.size === 0)\r\n    {\r\n      console.log(0);\r\n      this.loadFinished();\r\n    }\r\n    else\r\n    {\r\n      this.isDownloading = true;\r\n      this._successFiles.clear();\r\n      this._failedFiles.clear();\r\n      //this._filesQueue.clear();\r\n\r\n      this.processFileQueue();\r\n    }\r\n\r\n  }\r\n\r\n  /*end : function() {\r\n\r\n    if (this.state === LOADER_STATE.PROCESSING)\r\n        return;\r\n  \r\n    this.progress = 1;\r\n    this.isDownloading = false;\r\n    this.state = LOADER_STATE.PROCESSING;\r\n\r\n    \r\n    this._filesQueue.clear();\r\n    this._failedFiles.length = 0;\r\n    \r\n    this.processFiles();\r\n\r\n    this._successFiles.clear();\r\n\r\n    this.state = LOADER_STATE.DONE;\r\n    //this.game.scene.preloadComplete();\r\n\r\n  },*/\r\n\r\n  processFileQueue() {\r\n\r\n    let self = this;\r\n\r\n    this._filesQueue.each(function(file) {\r\n\r\n      //var file = this._filesQueue[i];\r\n\r\n      if (file.state === LOADER_STATE.FINISHED ||\r\n         file.state === LOADER_STATE.PENDING) //  && this.inflight.size < this.maxParallelDownloads))\r\n      {\r\n        file.load(self);\r\n      }\r\n\r\n    });\r\n\r\n  }\r\n\r\n  next(concludedFile, hasError) {\r\n      if (hasError)\r\n          this._failedFiles.set(concludedFile);\r\n      else \r\n          this._successFiles.set(concludedFile);\r\n      \r\n\r\n      this._filesQueue.delete(concludedFile);\r\n      this._loadedFilesCount++;\r\n\r\n      this.updateProgress();\r\n\r\n      if (this._loadedFilesCount < this._filesQueueCount)\r\n      {\r\n        console.log(\"asdasd\");\r\n          this.processFileQueue();\r\n      } else  {\r\n        \r\n          this.loadFinished();\r\n      }\r\n\r\n  }\r\n\r\n  loadFinished() {\r\n    if (this.state === LOADER_STATE.PROCESSING)\r\n        return;\r\n  \r\n    this.progress = 1;\r\n    this.isDownloading = false;\r\n    this.state = LOADER_STATE.PROCESSING;\r\n\r\n    this._processedFiles.clear();\r\n\r\n    if (this._successFiles.size === 0)\r\n    {\r\n     \r\n        this.processingDone();\r\n    } else {\r\n     \r\n      console.log(\"asdasd\");\r\n      this._successFiles.each(function(file) {\r\n        file.onProcessing(this.processingUpdate.bind(this));\r\n      },this);\r\n    }\r\n   \r\n  }\r\n\r\n\r\n  processingUpdate(file) {\r\n    \r\n    if (file.state === LOADER_STATE.ERROR)\r\n    {\r\n       this._failedFiles.set(file);\r\n\r\n        /*if (file.linkFile)\r\n        {\r\n            this.queue.delete(file.linkFile);\r\n        }*/\r\n        return this.deleteFromSuccessQueue(file);\r\n    }\r\n\r\n\r\n    this._processedFiles.set(file);\r\n\r\n    return this.deleteFromSuccessQueue(file);\r\n\r\n  }\r\n\r\n  deleteFromSuccessQueue(file) {\r\n    \r\n      this._successFiles.delete(file);\r\n\r\n      if (this._successFiles.size === 0 && this.state === LOADER_STATE.PROCESSING)\r\n          this.processingDone();\r\n  }\r\n\r\n  processingDone() {\r\n    console.log(\"done\")\r\n    this._successFiles.clear();\r\n    this._filesQueue.clear();\r\n\r\n    var cache = this.game.cache;\r\n\r\n    if (this._processedFiles.size > 0)\r\n    {\r\n      this._processedFiles.each(function(file) {\r\n\r\n        switch (file.type)\r\n        {\r\n          case 'image': {\r\n            cache.addImage(file.tag,file.url,file.data);\r\n            break;\r\n          }\r\n          case 'audio': {\r\n\r\n            file.data = requestXHR.response;\r\n\r\n            cache.addSound(file.tag,file.url,file.data,true);\r\n\r\n            if (file.autoDecode)\r\n            {\r\n                this.game.sound.decode(file.tag);\r\n            }\r\n\r\n            break;\r\n          }\r\n        }\r\n\r\n      })\r\n\r\n      this._processedFiles.clear();\r\n    }\r\n\r\n    this.state = LOADER_STATE.DONE;\r\n\r\n    this.game.scene.preloadComplete();\r\n    console.log(\"asdasd\");\r\n\r\n  }\r\n\r\n  isLoading() {\r\n    return (this.state === LOADER_STATE.LOADING || this.state === LOADER_STATE.PROCESSING);\r\n  }\r\n\r\n  isOK() {\r\n    return (this.state === LOADER_STATE.IDLE || this.state === LOADER_STATE.DONE || this.state === LOADER_STATE.ERROR);\r\n  }\r\n\r\n  downloadIsDone() {\r\n    return (this._filesQueue.length == (this._successCount + this._fileErrorCount));\r\n  }\r\n\r\n  updateProgress() {\r\n\r\n    var progress = 0;\r\n\r\n    if (this._filesQueueCount != 0)\r\n    {\r\n      this.progress = 1 - (this._loadedFilesCount / this._filesQueueCount);\r\n    }\r\n     //progress = parseFloat(this._successCount) / parseFloat(this._filesQueueCount);\r\n\r\n    this.progress = progress;\r\n\r\n  }\r\n\r\n\r\n  totalQueuedFiles() {\r\n    return this._filesQueueCount - this._successCount;\r\n  }\r\n\r\n\r\n};\r\n\r\n","\r\n\r\n/**\r\n* Class for points and vectors.\r\n* @class Vector\r\n* @constructor\r\n*/\r\nexport default class Vector {\r\n  \r\n  constructor(x,y) {\r\n\r\n    this.x = x || 0;\r\n    this.y = y || 0;\r\n  }\r\n\r\n  set(x,y) {\r\n\r\n    this.x = x;\r\n    this.y = y || x\r\n\r\n  }\r\n\r\n  move(x,y) {\r\n\r\n    this.x += x;\r\n    this.y += y;\r\n\r\n  }\r\n\r\n  scale(x, y) {\r\n\r\n    this.x *= x;\r\n    this.y *= y || x;\r\n    return this;\r\n\r\n  }\r\n\r\n  rotate(radians) {\r\n\r\n    var x = this.x;\r\n    var y = this.y;\r\n    this.x = x * Math.cos(radians) - y * Math.sin(radians);\r\n    this.y = x * Math.sin(radians) + y * Math.cos(radians);\r\n    return this;\r\n\r\n  }\r\n\r\n  rotateAround(radians, other) {\r\n\r\n    /*var x = this.x;\r\n    var y = this.y;*/\r\n    var dx = this.x-other.x;\r\n    var dy = this.y-other.y;\r\n\r\n    var c = Math.cos(radians);\r\n    var s = Math.sin(radians);\r\n\r\n    /*this.x = c * (x-other.x) - s * (y-other.y) + other.x;\r\n    this.y = s * (x-other.x) + c * (y-other.y) + other.y;*/\r\n\r\n\r\n    this.x =  other.x + (c * dx - s * dy);\r\n    this.y =  other.y + (s * dx + c * dy);\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  copy(otherVector) {\r\n\r\n    this.x = otherVector.x;\r\n    this.y = otherVector.y;\r\n    return this;\r\n\r\n  }\r\n\r\n  normalize() {\r\n\r\n    var mag = this.length();\r\n    if (mag > 0) {\r\n      this.x = this.x / mag;\r\n      this.y = this.y / mag;\r\n    }\r\n    return this;\r\n\r\n  }\r\n\r\n  reverse() {\r\n    this.x = -this.x;\r\n    this.y = -this.y;\r\n    return this;\r\n  }\r\n\r\n  add(other) {\r\n    this.x += other.x;\r\n    this.y += other.y;\r\n    return this;\r\n  }\r\n\r\n  sub(other) {\r\n    this.x -= other.x;\r\n    this.y -= other.y;\r\n    return this;\r\n  }\r\n\r\n  perp() {\r\n\r\n    var x = this.x;\r\n    this.x = this.y;\r\n    this.y = -x;\r\n    return this;\r\n  }\r\n\r\n  dot(other) {\r\n    return Vector.dot(this,other);\r\n  }\r\n\r\n  project(other) {\r\n    return Vector.project(this,other);\r\n  }\r\n\r\n  clone() {\r\n    return new Vector(this.x,this.y);\r\n  }\r\n\r\n  length() {\r\n    return Math.sqrt(this.squaredLenght());\r\n  }\r\n\r\n  squaredLenght() {\r\n    return Vector.dot(this,this);\r\n  }\r\n\r\n  static scalar(a, b) {\r\n    return a.x * b.y - a.y * b.x;\r\n  }\r\n\r\n  static distance(a, b) {\r\n    return Math.distance(a.x,a.y,b.x,b.y);\r\n  }\r\n\r\n  static angleBetween(a, b) {\r\n    return Math.angleBetween(a.x,a.y,b.x,b.y);\r\n  }\r\n\r\n  static dot(a, b) {\r\n    return (a.x * b.x) + (a.y * b.y);\r\n  }\r\n\r\n  static project(a,b) {\r\n    var dp = Vector.dot(a,b);\r\n    var proj = new Vector(\r\n      ( dp / (b.x*b.x + b.y*b.y) ) * b.x,\r\n      ( dp / (b.x*b.x + b.y*b.y) ) * b.y\r\n    );\r\n    return proj;\r\n  };\r\n\r\n  // project for unit vector\r\n  static projectNormal(a,b) {\r\n    var dp = Vector.dot(a,b);\r\n    var proj = new Vector(   dp / b.x,   dp / b.y );\r\n    return proj;\r\n  };\r\n\r\n  static reflect(vec,axis) {\r\n\r\n    var r = Vector.project(vec,axis);\r\n    r.scale(2);\r\n    r.sub(vec);\r\n    return r;\r\n\r\n  };\r\n\r\n  static reflectNormal(vec,axis) {\r\n\r\n    var r = Vector.projectNormal(vec,axis);\r\n    r.scale(2);\r\n    r.sub(vec);\r\n    return r;\r\n\r\n  };\r\n\r\n\r\n  static lerp(a, b, t) {\r\n    var vec = new Vector(\r\n      scintilla.Math.lerp(a.x,b.x,t),\r\n      scintilla.Math.lerp(a.y,b.y,t)\r\n    );\r\n    return vec;\r\n  }\r\n\r\n  get magnitude() {return Math.sqrt((this.x * this.x) + (this.y * this.y));}\r\n  get normal() {\r\n    var mag = this.magnitude;\r\n    var vec = new tobiJS.Vector(this.x / mag,this.y / mag);\r\n    return vec;\r\n  }\r\n\r\n}\r\n\r\n","\r\nexport default class Debug {\r\n  \r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n    this.context = game.context;\r\n    this.x = 8;\r\n    this.y = 12;\r\n    this.lineHeight = 14;\r\n    this.column = 100;\r\n    this.font =\"12px Verdana\";\r\n    this.textColor = 'white';\r\n    this.bgcolor = 'black';\r\n    this.textShadow = 'black';\r\n\r\n  }\r\n\r\n  test() {\r\n\r\n    this.context.setTransform(1, 0, 0, 1, 0, 0);\r\n    this.context.strokeStyle = this.bgcolor;\r\n    this.context.font = this.font;\r\n    this.game.draw.alpha(0.5);\r\n    this.game.draw.rectangle(0,0,this.game.width,(14 * 4)+ 16,this.bgcolor);\r\n    this.game.draw.alpha(1);\r\n    this.drawLine(\"FPS: \" + Math.round(this.game.time.fps) + \" / 60\");\r\n    this.drawLine(\"Instances in view: \" + this.game.camera.instancesInView);\r\n    this.drawLine(\"Instances count \" + this.game.world.length);\r\n    this.drawLine(\"Colliders count \" + this.game.physics.length);\r\n    this.x += this.game.width / 2;\r\n    this.y = 12+8;\r\n    this.drawLine(\"Sounds count \" + this.game.sound.length);\r\n    this.x = 8;\r\n    this.y = 12+8;\r\n\r\n  }\r\n\r\n  drawLine(textLine) {\r\n\r\n    var xx = this.x;\r\n\r\n            this.context.fillStyle = this.textShadow;\r\n            this.context.fillText(textLine, xx + 1, this.y + 1);\r\n            this.context.fillStyle = this.textColor;\r\n\r\n        this.context.fillText(textLine, xx, this.y);\r\n\r\n\r\n    this.y += this.lineHeight;\r\n\r\n  }\r\n\r\n\r\n\r\n}\r\n","\r\nimport SAT from './sat'\r\nimport SATResponse from './satresponse'\r\n\r\nexport default class Physics {\r\n\r\n  \r\n\r\n  constructor(game) {\r\n\r\n    this.game = null;\r\n    this.sat = null;\r\n    this.response = null;\r\n\r\n   \r\n    this.game = game;\r\n    this.colliadables = [];\r\n\r\n  }\r\n\r\n  init() {\r\n\r\n    this.sat = new SAT();\r\n    this.response = new SATResponse();\r\n\r\n  }\r\n\r\n  getColliadables() {\r\n    return this.colliadables;\r\n  }\r\n\r\n  addColliderObj(obj) {\r\n    this.colliadables.push(obj);\r\n  }\r\n\r\n  removeColliderObj(obj) {\r\n\r\n    var i = this.colliadables.indexOf(obj);\r\n\r\n    if(i != -1) {\r\n      this.colliadables.splice(i, 1);\r\n    }\r\n\r\n  }\r\n\r\n  clear() {\r\n\r\n    this.colliadables = [];\r\n    this.colliadables.length = 0;\r\n\r\n  }\r\n\r\n  update(time) {\r\n\r\n    let size = this.colliadables.length;\r\n\r\n    // CHECK COLLISION\r\n    if (size < 2) // at least we must have 2 objects\r\n      return;\r\n\r\n    //var collision = 0;\r\n\r\n    for (var i = 0; i < size; i++) {\r\n\r\n        var objA = this.colliadables[i];\r\n        var shapeA = objA.shape;\r\n\r\n        if (objA._gameObject._selfDestroy || !objA._gameObject.active)\r\n          continue;\r\n\r\n        var jit = i + 1;\r\n\r\n        if (jit >= size)\r\n          break;\r\n\r\n        for (var j = jit; j < size; j++) {\r\n\r\n          var objB = this.colliadables[j];\r\n          var shapeB = objB.shape;\r\n\r\n          if (objB._gameObject._selfDestroy || !objB._gameObject.active)\r\n            continue;\r\n\r\n          // AABB check of the shapes\r\n        if (objB.bounds.box.intersects(objA.bounds.box)) {\r\n\r\n          // check SAT\r\n          if (this.sat[\"test\" + shapeA.getType() + shapeB.getType()].call(this,\r\n            objA,objB,this.response.clear()) === true) {\r\n\r\n\r\n              if (objA._gameObject['onCollision'])\r\n              if (objA._gameObject.onCollision(objB._gameObject,this.response) !== false) {\r\n\r\n\r\n              }\r\n\r\n              if (objB._gameObject['onCollision'])\r\n              if (objB._gameObject.onCollision(objA._gameObject,this.response) !== false) {\r\n\r\n\r\n              }\r\n\r\n          } else\r\n            continue;\r\n          } else\r\n            continue;\r\n        }\r\n      }\r\n  }\r\n\r\n  get length() {return this.colliadables.length;}\r\n\r\n}\r\n\r\n","\r\nimport Vector from '../math/vector' \r\n\r\nexport default class SAT {\r\n\r\n  constructor()\r\n  {\r\n\r\n    this.VECTORS = [];\r\n    for (var v = 0; v < 10; v++) { \r\n      VECTORS.push(new Vector()); \r\n    }\r\n\r\n    this.ARRAYS = [];\r\n    for (var a = 0; a < 5; a++) { \r\n      ARRAYS.push([]); \r\n    }\r\n  }\r\n\r\n  flattenPointsOn(points, normal, result) {\r\n          var min = Number.MAX_VALUE;\r\n          var max = -Number.MAX_VALUE;\r\n          var len = points.length;\r\n          for (var i = 0; i < len; i++) {\r\n              // The magnitude of the projection of the point onto the normal\r\n              var dot = points[i].dot(normal);\r\n              if (dot < min) { min = dot; }\r\n              if (dot > max) { max = dot; }\r\n          }\r\n          result[0] = min;\r\n          result[1] = max;\r\n  };\r\n\r\n  isSeparatingAxis(posA, posB, pointsA, pointsB, axis, response) {\r\n\r\n    var rangeA = ARRAYS.pop();\r\n    var rangeB = ARRAYS.pop();\r\n\r\n    // magnitude between the two polygons\r\n    var offsetV = VECTORS.pop().copy(posB).sub(posA);\r\n    var projectedOffset = offsetV.dot(axis);\r\n\r\n    // Project the polygons onto the axis.\r\n    flattenPointsOn(pointsA, axis, rangeA);\r\n    flattenPointsOn(pointsB, axis, rangeB);\r\n\r\n    // Move B's range to its position relative to A.\r\n    rangeB[0] += projectedOffset;\r\n    rangeB[1] += projectedOffset;\r\n\r\n    // Check if there is a gap. If there is, this is a separating axis and we can stop\r\n    if (rangeA[0] > rangeB[1] || rangeB[0] > rangeA[1]) {\r\n        VECTORS.push(offsetV);\r\n        ARRAYS.push(rangeA);\r\n        ARRAYS.push(rangeB);\r\n        return true;\r\n    }\r\n\r\n    if (response) {\r\n        var overlap = 0;\r\n        // A starts further left than B\r\n        if (rangeA[0] < rangeB[0]) {\r\n\r\n          response.aInB = false;\r\n\r\n          // A ends before B does. We have to pull A out of B\r\n          if (rangeA[1] < rangeB[1]) {\r\n\r\n            overlap = rangeA[1] - rangeB[0];\r\n            response.bInA = false;\r\n\r\n          // B is fully inside A.  Pick the shortest way out.\r\n          } else {\r\n\r\n            var option1 = rangeA[1] - rangeB[0];\r\n            var option2 = rangeB[1] - rangeA[0];\r\n            overlap = option1 < option2 ? option1 : -option2;\r\n\r\n          }\r\n        // B starts further left than A\r\n        } else {\r\n\r\n          response.bInA = false;\r\n\r\n          // B ends before A ends. We have to push A out of B\r\n          if (rangeA[1] > rangeB[1]) {\r\n\r\n            overlap = rangeA[0] - rangeB[1];\r\n            response.aInB = false;\r\n\r\n          // A is fully inside B.  Pick the shortest way out.\r\n          } else {\r\n\r\n            var option1 = rangeA[1] - rangeB[0];\r\n            var option2 = rangeB[1] - rangeA[0];\r\n            overlap = option1 < option2 ? option1 : -option2;\r\n\r\n          }\r\n        }\r\n        // If this is the smallest amount of overlap we've seen so far, set it as the minimum overlap.\r\n        var absOverlap = Math.abs(overlap);\r\n\r\n        if (absOverlap < response.overlap) {\r\n\r\n          response.overlap = absOverlap;\r\n          response.overlapN.copy(axis);\r\n\r\n          if (overlap < 0)\r\n            response.overlapN.reverse();\r\n        }\r\n      }\r\n\r\n      VECTORS.push(offsetV);\r\n      ARRAYS.push(rangeA);\r\n      ARRAYS.push(rangeB);\r\n\r\n\r\n\r\n      return false;\r\n\r\n  };\r\n\r\n  testPolygonPolygon(a,b,response) {\r\n\r\n    // collider a\r\n\r\n    var pointsA = a.shape.getPoints();\r\n    var normalsA =  a.shape.getNormals();\r\n    var normalsALen = normalsA.length;\r\n\r\n    // collider b\r\n\r\n    var pointsB = b.shape.getPoints();\r\n    var normalsB =  b.shape.getNormals();\r\n    var normalsBLen = normalsB.length;\r\n\r\n\r\n    // If any of the edge normals of A is a separating axis, no intersection.\r\n    while (normalsALen--) {\r\n        if (isSeparatingAxis(a.position, b.position, pointsA, pointsB, normalsA[normalsALen],response)) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    // If any of the edge normals of B is a separating axis, no intersection.\r\n    while (normalsBLen--) {\r\n        if (isSeparatingAxis(a.position, b.position, pointsA, pointsB, normalsB[normalsBLen], response)) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n\r\n\r\n    // Since none of the edge normals of A or B are a separating axis, there is an intersection\r\n    // and we've already calculated the smallest overlap (in isSeparatingAxis).  Calculate the\r\n    // final overlap vector.\r\n      if (response) {\r\n          response.a = a;\r\n          response.b = b;\r\n          response.overlapV.copy(response.overlapN).scale(response.overlap);\r\n      }\r\n    return true;\r\n\r\n  };\r\n\r\n}\r\n\r\n\r\n","\r\nexport default class SATResponse {\r\n\r\n    constructor()\r\n    {\r\n        this.a = null;\r\n        this.b = null;\r\n        this.overlapN = new scintilla.Vector();\r\n        this.overlapV = new scintilla.Vector();\r\n        this.aInB = true;\r\n        this.bInA = true;\r\n        this.overlap = Number.MAX_VALUE;\r\n        this.indexShapeA = -1;\r\n        this.indexShapeB = -1;\r\n        this.clear();\r\n    }\r\n\r\n    clear()\r\n    {\r\n        this.aInB = true;\r\n        this.bInA = true;\r\n        this.overlap = Number.MAX_VALUE;\r\n        this.indexShapeA = -1;\r\n        this.indexShapeB = -1;\r\n        return this;\r\n    }\r\n}\r\n","\r\n/**\r\n * Create a Canvas object.\r\n * @class Canvas\r\n */\r\nexport default (\r\n    class Canvas {\r\n\r\n  static create (parent,width, height) {\r\n\r\n  // default definition\r\n  let defaultDef = {\r\n    width: width,\r\n    height: height,\r\n    id: Math.random().toString(36).substr(2, 9),\r\n    class: \"\",\r\n    container: \"body\",\r\n    style: \"padding: 0;margin: auto;display: block;top: 0; bottom: 0;left: 0;right: 0;border:1px solid #d3d3d3;background-color: #f1f1f1;\"\r\n  };\r\n\r\n  //var CO = Object.assign(defaultDef, options);\r\n  let CO = defaultDef;\r\n  let canvas;\r\n\r\n\r\n  canvas = document.createElement('canvas');\r\n  //canvas.parent = parent;\r\n  canvas.setAttribute(\"id\", CO.id);\r\n  canvas.setAttribute(\"width\", CO.width);\r\n  canvas.setAttribute(\"height\", CO.height);\r\n  canvas.setAttribute(\"style\", CO.style);\r\n  //canvas.style.position = 'absolute';\r\n\r\n\r\n  Canvas.appendDOM(canvas,parent);\r\n  //document.body.appendChild(canvas);\r\n  //var context = canvas.getContext(\"2d\");\r\n\r\n\r\n  //tobiJS.Canvas.list.parent = document.body;\r\n\r\n  //console.log(\"Canvas Created!\");\r\n\r\n  return canvas;\r\n}\r\n\r\nstatic appendDOM(canvas,parent) {\r\n\r\n  let appendTo;\r\n  let overflowHidden = true;\r\n  let target = null;\r\n\r\n  //if (overflowHidden === undefined) { overflowHidden = true; }\r\n\r\n    if (parent)\r\n    {\r\n        if (typeof parent === 'string')\r\n        {\r\n            // hopefully an element ID\r\n            target = document.getElementById(parent);\r\n        }\r\n        else if (typeof parent === 'object' && parent.nodeType === 1)\r\n        {\r\n            // quick test for a HTMLelement\r\n            target = parent;\r\n        }\r\n    }\r\n\r\n    // Fallback, covers an invalid ID and a non HTMLelement object\r\n    if (!target)\r\n    {\r\n        target = document.body;\r\n    }\r\n\r\n    /*if (overflowHidden && target.style)\r\n    {\r\n        target.style.overflow = 'hidden';\r\n    }*/\r\n\r\n    target.appendChild(canvas);\r\n\r\n}\r\n\r\n})\r\n","\r\n\r\n\r\n// Map simple class\r\nexport default class Map {\r\n  \r\n  constructor() \r\n  {\r\n    this._content = {};\r\n    this._size = 0;\r\n  }\r\n\r\n  /* \r\n  Add or set value to the map\r\n  key = keyName\r\n  value = value\r\n  */\r\n  set(key, value) {\r\n\r\n    if (!this.has(key))\r\n    {\r\n        this._size++;\r\n    }\r\n\r\n    this._content[key] = value;\r\n    \r\n    return this;\r\n\r\n  }\r\n\r\n  get(key) {\r\n      if (this.has(key))\r\n      {\r\n        return this._content[key];\r\n      }\r\n      else\r\n      {\r\n        return null;\r\n      }\r\n  }\r\n\r\n  has(key) {\r\n    return (this._content.hasOwnProperty(key));\r\n  }\r\n\r\n  contains(value)\r\n  {\r\n    for (var key in this._content)\r\n    {\r\n      if (entries[key] === value)\r\n      {\r\n        return true;\r\n      } else\r\n        continue;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  keys()\r\n  {\r\n    return Object.keys(this._content);\r\n  }\r\n\r\n  values()\r\n  {\r\n    var values = [];\r\n    var content = this._content;\r\n\r\n    for (var key in content)\r\n      values.push(entries[key]);\r\n        \r\n    return values;\r\n  }\r\n\r\n  remove(key) {\r\n\r\n    if (!this.has(key))\r\n      return null;\r\n\r\n    var prop =  this._content[key];\r\n    delete this._content[key];\r\n    this._size--;\r\n    return prop;\r\n\r\n  }\r\n\r\n  delete(key) {\r\n\r\n    if (!this.has(key))\r\n      return false;\r\n\r\n      delete this._content[key];\r\n      this._size--;\r\n\r\n      return true;\r\n  }\r\n\r\n  deleteAt(key) {\r\n\r\n    //if (!this.hasTagInKey(key))\r\n    //  return false;\r\n      this._size--;\r\n     delete this._content[key];\r\n\r\n  }\r\n\r\n  deleteByIndexedArray(array)\r\n  {\r\n    for (var i = 0; i < array.length; i++) {\r\n      delete this._content[array[i]];\r\n      this._size--;\r\n    }\r\n\r\n  }\r\n\r\n  clear() {\r\n\r\n    for (var property in this._content) \r\n      delete this._content[property];\r\n    \r\n\r\n    this._size = 0;\r\n\r\n  }\r\n\r\n  slowSize()\r\n  {\r\n    return Object.keys(_contents).length;\r\n  }\r\n\r\n  each(callback)\r\n  {\r\n    var content = this._content;\r\n\r\n    for (var property in content) {\r\n\r\n      if (callback(property, content[property]) === false)\r\n          break;\r\n      \r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  get size() {return this._size;}\r\n\r\n}\r\n\r\n","\r\n\r\nexport default class Set {\r\n\r\n    constructor(elements) \r\n    {\r\n        this._content = [];\r\n        this._size = 0;\r\n\r\n        if (Array.isArray(elements))\r\n        {\r\n            for (var i = 0; i < elements.length; i++)\r\n                this.set(elements[i]);\r\n        }\r\n\r\n    }\r\n\r\n    set(value)\r\n    {\r\n        if (this._content.indexOf(value) === -1)\r\n            this._content.push(value);\r\n\r\n        return this;\r\n    }\r\n\r\n    at(value)\r\n    {\r\n        var index = this._content.indexOf(value);\r\n        if (index > -1)\r\n        {\r\n            return this._content[index];\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    has(value)\r\n    {\r\n        return (this._content.indexOf(value) > -1);\r\n    }\r\n\r\n    delete(value)\r\n    {\r\n        var idx = this._content.indexOf(value);\r\n\r\n        if (idx > -1)\r\n            this._content.splice(idx, 1);\r\n\r\n        return this;\r\n    }\r\n\r\n    clear()\r\n    {\r\n        this._content.length = 0;\r\n        return this;\r\n    }\r\n\r\n    each(callback, scope)\r\n    {\r\n        var content = this._content.slice();\r\n        var size = content.length;\r\n        var i;\r\n\r\n        if (scope)\r\n        {\r\n            for (i = 0; i < size; i++)\r\n            {\r\n                if (callback.call(scope, content[i], i) === false)\r\n                    break;                \r\n            }\r\n        } else {\r\n            for (i = 0; i < size; i++)\r\n            {\r\n                if (callback(content[i], i) === false)\r\n                    break;                \r\n            }\r\n        }\r\n\r\n      return this;\r\n    }\r\n\r\n    get size () { return this._content.length; }\r\n    get length () { return this._content.length; }\r\n\r\n}\r\n","\r\n\r\nexport default class Time {\r\n\r\n  constructor(game) {\r\n\r\n    this.game = game;\r\n\r\n    // START TIME\r\n    this.startTime = 0;\r\n\r\n    // date now\r\n    this.time = 0;\r\n\r\n    this.currentTime = 0;\r\n    this.previousTime = 0;\r\n\r\n    this.elapsed = 0;\r\n    this.elapsed_mili = 0;\r\n\r\n    // FOR TIME OUT MODE\r\n    this.timeOut_toCall = 0;\r\n    this.timeOut_expected = 0;\r\n\r\n    // FPS\r\n    this.fps = 60;\r\n    this.fpsDesired = 60;\r\n    this.timeStep_mili = 1 / this.fpsDesired;\r\n    this.timeStep = 1000 / this.fpsDesired;\r\n\r\n    // lag\r\n    this.accumalator = 0;\r\n    this.accumulatorMax = this.timeStep * 10;\r\n    this.accumulatorDelta = this.timeStep;\r\n\r\n    this.updateStart = 0;\r\n    this.updateLast = 0;\r\n    this.updateAverage = 0;\r\n    this.updateDelta = 0;\r\n\r\n    this.deltaTime = 0;\r\n\r\n    this._lastFpsUpdate = 0;\r\n    this._framesThisSecond = 0;\r\n\r\n  }\r\n\r\n\r\nstart() {\r\n\r\n  this.startTime = Date.now();\r\n  this.time = Date.now();\r\n\r\n}\r\n\r\nrefresh() {\r\n\r\n  var previousDateNow = this.time;\r\n\r\n  this.time = Date.now();\r\n\r\n this.elapsed_mili = this.time - previousDateNow;\r\n\r\n //this.currentTime =  this.previousTime = window.performance.now();\r\n //this.deltaTime = 0;\r\n //this.elapsed = 0;\r\n //this._framesThisSecond = 0;\r\n\r\n}\r\n\r\nupdate(timestamp) {\r\n\r\n  // DATE NOW ----------------------------------\r\n  var previousDateNow = this.time;\r\n\r\n  this.time = Date.now(); // current time\r\n\r\n  this.elapsed_mili = this.time - previousDateNow;\r\n\r\n  // timestamp --------------------\r\n\r\n  // Throttle the frame rate.\r\n  if (timestamp < this.previousTime + (this.timeStep)) {\r\n         //requestAnimationFrame(mainLoop);\r\n         return false;\r\n  }\r\n\r\n\r\n\r\n  // set prev\r\n  this.previousTime = this.currentTime;\r\n\r\n  // set current\r\n  this.currentTime = timestamp;\r\n\r\n  // delta time (MILISECONDS)\r\n  this.elapsed = this.currentTime - this.previousTime;\r\n\r\n  // delta time in  seconds\r\n  this.deltaTime = 0; //this.elapsed / 1000.0;\r\n\r\n\r\n\r\n  if (this.game.updateGameMethod._isTimeOutMode)\r\n  {\r\n\r\n\r\n      this.timeOut_toCall = Math.floor(Math.max(0, (1000.0 / this.fpsDesired) - (this.timeOut_expected - time)));\r\n\r\n      // time when the next call is expected if using timers\r\n      this.timeOut_expected = time + this.timeOut_toCall;\r\n\r\n  }\r\n\r\n  // Track acumulate time\r\n\r\n\r\n  //this.accumalator += this.elapsed; //Math.max(Math.min(this.timeStep * 3, this.elapsed), 0); //timestamp - this._lastTimeStamp;\r\n  this.accumalator += Math.max(Math.min(this.timeStep * 3, this.elapsed),0);\r\n\r\n  this.accumulatorDelta = this.timeStep; //, this.updateAverage);\r\n\r\n  //console.log(this.accumalator + \" \" + this.updateAverage);\r\n  //this._lag = Math.min(this._lag, this.accumulatorMax);\r\n\r\n  //  this.updateDelta = this.timeStep // interpolation = this.elapsed (deltatime); // or step\r\n  //this.accumulatorUpdateDelta = this.updateDelta; // interpolation = Math.max(this.updateDelta, this.updateAverage);\r\n\r\n  // FPS Update\r\n  if (this.game.debugMode)\r\n    this.fpsUpdate(timestamp);\r\n\r\n  return true;\r\n\r\n  //this.last_time = now;\r\n\r\n  /*var elapsed = (this.current_time - this.last_time)/1000.0;\r\n  this.last_time = this.current_time;\r\n  this.delta_time = Math.min(elapsed, 1/60.0);*/\r\n\r\n  //console.log(this.delta_time);\r\n\r\n  //  Adjust accordingly.\r\n  /*this.time_elapsed_mili = this.current_time - previousDateNow;\r\n\r\n  // 'now' is currently still holding the time of the last call, move it into prevTime\r\n  this.prev_time  = this.now_time;\r\n\r\n  // update 'now' to hold the current time\r\n  // this.now may hold the RAF high resolution time value if RAF is available (otherwise it also holds Date.now)\r\n  this.now_time = time;\r\n\r\n // elapsed time between previous call and now - this could be a high resolution value\r\n  this.time_elapsed = this.now_time - this.prev_time;*/\r\n\r\n\r\n\r\n  //if (this.game.updateGameMethod._usingTimeout)\r\n  //{\r\n      // console.log('Time isSet', this._desiredFps, 'te', this.timeExpected, 'time', time);\r\n\r\n      // time to call this function again in ms in case we're using timers instead of RequestAnimationFrame to update the game\r\n      //this.timeToCall = Math.floor(Math.max(0, (1000.0 / this._desiredFps) - (this.timeExpected - time)));\r\n\r\n      // time when the next call is expected if using timers\r\n    //  this.timeExpected = time + this.timeToCall;\r\n\r\n      // console.log('Time expect', this.timeExpected);\r\n//  }\r\n\r\n        //  Paused but still running?\r\n      /*  if (!this.game.paused)\r\n        {\r\n            //  Our internal Phaser.Timer\r\n            this.events.update(this.time);\r\n\r\n            if (this._timers.length)\r\n            {\r\n                this.updateTimers();\r\n            }\r\n        }*/\r\n\r\n}\r\n\r\nfpsUpdate(timestamp) {\r\n\r\n  // METHOD 2\r\n\r\n        // count the number of time.update calls\r\n  /*this._frameCount++;\r\n  this._elapsedAccumulator += this.elapsed;\r\n\r\n  // occasionally recalculate the suggestedFps based on the accumulated elapsed time\r\n  if (this._frameCount >= this._desiredFps * 2)\r\n  {\r\n      // this formula calculates suggestedFps in multiples of 5 fps\r\n      this.suggestedFps = Math.floor(200 / (this._elapsedAccumulator / this._frameCount)) * 5;\r\n      this._frameCount = 0;\r\n      this._elapsedAccumulator = 0;\r\n  }\r\n\r\n  this.msMin = Math.min(this.msMin, this.elapsed);\r\n  this.msMax = Math.max(this.msMax, this.elapsed);\r\n\r\n  this.frames++;\r\n\r\n  if (this.now > this._timeLastSecond + 1000)\r\n  {\r\n      this.fps = Math.round((this.frames * 1000) / (this.now - this._timeLastSecond));\r\n      this.fpsMin = Math.min(this.fpsMin, this.fps);\r\n      this.fpsMax = Math.max(this.fpsMax, this.fps);\r\n      this._timeLastSecond = this.now;\r\n      this.frames = 0;\r\n  }*/\r\n\r\n  // METHOD 1\r\n   if (timestamp > this._lastFpsUpdate + 1000) {\r\n       this.fps = 0.25 * this._framesThisSecond + 0.75 * this.fps;\r\n\r\n       this._lastFpsUpdate = timestamp;\r\n       this._framesThisSecond = 0;\r\n   }\r\n\r\n     this._framesThisSecond++;\r\n\r\n\r\n}\r\n\r\n}\r\n","\r\n\r\nexport default class UpdateTime {\r\n    \r\n    constructor(game, timeout) {\r\n\r\n        if (timeout === undefined) { timeout = false; }\r\n\r\n        this.game = game;\r\n        this.isRunning = false;\r\n        this.setTimeOutMode = timeout;\r\n        this._isTimeOutMode = false;\r\n\r\n        var vendors = [\r\n            'ms',\r\n            'moz',\r\n            'webkit',\r\n            'o'\r\n        ];\r\n\r\n        for (var x = 0; x < vendors.length && !window.requestAnimationFrame; x++)\r\n        {\r\n            window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n            window.cancelAnimationFrame  = window[vendors[x] + 'CancelAnimationFrame'];\r\n        }\r\n\r\n        //callbacks\r\n        this._onLoopingCallback = null;\r\n        this._timeOutCallback = null;\r\n    }\r\n\r\n    start() {\r\n\r\n        this.isRunning = true;\r\n\r\n        var self = this;\r\n\r\n        if (!window.requestAnimationFrame || this.setTimeOutMode)\r\n        {\r\n            this._isTimeOutMode = true;\r\n\r\n            this._onLoopingCallback = function () {\r\n                return self.updateTimeout();\r\n            };\r\n\r\n            this._timeOutCallback = window.setTimeout(this._onLoopingCallback, 0);\r\n\r\n\r\n        }\r\n        else\r\n        {\r\n\r\n            this._isTimeOutMode = false;\r\n\r\n            this._onLoopingCallback = function (time) {\r\n                return self.updateRequestAnimationFrame(time);\r\n            };\r\n\r\n            this._timeOutCallback = window.requestAnimationFrame(this._onLoopingCallback, this.game.canvas);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    updateRequestAnimationFrame(time) {\r\n\r\n        this.game.update(time);\r\n        this._timeOutCallback = window.requestAnimationFrame(this._onLoopingCallback, this.game.canvas);\r\n\r\n    }\r\n\r\n    updateTimeout() {\r\n\r\n        this.game.update(Date.now());\r\n        this._timeOutCallback = window.setTimeout(this._onLoopingCallback, this.game.time.timeOut_toCall);\r\n\r\n    }\r\n\r\n    stop() {\r\n\r\n        if (this._isTimeOutMode)\r\n        {\r\n            clearTimeout(this._timeOutCallback);\r\n        }\r\n        else\r\n        {\r\n            window.cancelAnimationFrame(this._timeOutCallback);\r\n        }\r\n\r\n        this.isRunning = false;\r\n\r\n    }\r\n\r\n}\r\n","\r\nvar Utils = class {\r\n\r\n    isFunction(obj) {\r\n    return !!(obj && obj.constructor && obj.call && obj.apply);\r\n  }\r\n\r\n  getValue(obj, key, defaultValue)\r\n  {\r\n    var type = typeof(obj);\r\n\r\n    if (!obj || type === 'number' || type === 'string')\r\n        return defaultValue;\r\n    else if (obj.hasOwnProperty(key) && obj[key] !== undefined)\r\n        return obj[key];\r\n    else\r\n        return defaultValue;\r\n\r\n  }\r\n\r\n  // Get value in complex object\r\n  getPropertyValue(source, key, defaultValue)\r\n    {\r\n        if (!source || typeof source === 'number')\r\n            return defaultValue;\r\n        else if (source.hasOwnProperty(key))\r\n            return source[key];\r\n        else if (key.indexOf('.'))\r\n        {\r\n            var keys = key.split('.');\r\n            var parent = source;\r\n            var value = defaultValue;\r\n\r\n            for (var i = 0; i < keys.length; i++)\r\n            {\r\n                if (parent.hasOwnProperty(keys[i]))\r\n                {\r\n                    value = parent[keys[i]];\r\n                    parent = parent[keys[i]];\r\n                }\r\n                else\r\n                {\r\n                    value = defaultValue;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            return value;\r\n        }\r\n        else\r\n        {\r\n            return defaultValue;\r\n        }\r\n    }\r\n\r\n  getFileExtension(filename)\r\n  {\r\n    return filename.substring(filename.lastIndexOf('.')+1, filename.length) || \"\";\r\n  }\r\n\r\n  getURL(url, baseURL)\r\n  {\r\n    if (!url)\r\n        return null;\r\n    \r\n        \r\n    if (url.match(/^(?:blob:|data:|http:\\/\\/|https:\\/\\/|\\/\\/)/))\r\n        return url;\r\n    else\r\n        return baseURL + url;\r\n  }\r\n\r\n};\r\n\r\nexport default new Utils();"],"sourceRoot":""}